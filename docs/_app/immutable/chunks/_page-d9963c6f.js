import{S as SvelteComponent,i as init$1,s as safe_not_equal,k as element,l as claim_element,m as children,h as detach,b as insert_hydration,B as noop$3,I as createEventDispatcher,o as onMount,J as binding_callbacks,e as empty$1,f as transition_in,g as group_outros,t as transition_out,d as check_outros,K as bubble,v as construct_svelte_component,w as create_component,x as claim_component,y as mount_component,z as destroy_component}from"./index-c8a32f33.js";import{_ as __vitePreload}from"./preload-helper-b21cceae.js";const JSONArrow_svelte_svelte_type_style_lang="",JSONNested_svelte_svelte_type_style_lang="",PreviewList_svelte_svelte_type_style_lang="",JSONValueNode_svelte_svelte_type_style_lang="",ErrorStack_svelte_svelte_type_style_lang="",JSONStringNode_svelte_svelte_type_style_lang="",JSONFunctionNode_svelte_svelte_type_style_lang="",RegExpNode_svelte_svelte_type_style_lang="",Root_svelte_svelte_type_style_lang="",Clipboard_svelte_svelte_type_style_lang="";var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){var e=t.default;if(typeof e=="function"){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}),r}var base64$9={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var u in o)o.hasOwnProperty(u)&&(n[u]=o[u])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(base64$9,"__esModule",{value:!0});var INVALID_BYTE=256,Coder=function(){function t(e){e===void 0&&(e="="),this._paddingCharacter=e}return t.prototype.encodedLength=function(e){return this._paddingCharacter?(e+2)/3*4|0:(e*8+5)/6|0},t.prototype.encode=function(e){for(var r="",n=0;n<e.length-2;n+=3){var o=e[n]<<16|e[n+1]<<8|e[n+2];r+=this._encodeByte(o>>>3*6&63),r+=this._encodeByte(o>>>2*6&63),r+=this._encodeByte(o>>>1*6&63),r+=this._encodeByte(o>>>0*6&63)}var u=e.length-n;if(u>0){var o=e[n]<<16|(u===2?e[n+1]<<8:0);r+=this._encodeByte(o>>>3*6&63),r+=this._encodeByte(o>>>2*6&63),u===2?r+=this._encodeByte(o>>>1*6&63):r+=this._paddingCharacter||"",r+=this._paddingCharacter||""}return r},t.prototype.maxDecodedLength=function(e){return this._paddingCharacter?e/4*3|0:(e*6+7)/8|0},t.prototype.decodedLength=function(e){return this.maxDecodedLength(e.length-this._getPaddingLength(e))},t.prototype.decode=function(e){if(e.length===0)return new Uint8Array(0);for(var r=this._getPaddingLength(e),n=e.length-r,o=new Uint8Array(this.maxDecodedLength(n)),u=0,y=0,h=0,g=0,m=0,$=0,E=0;y<n-4;y+=4)g=this._decodeChar(e.charCodeAt(y+0)),m=this._decodeChar(e.charCodeAt(y+1)),$=this._decodeChar(e.charCodeAt(y+2)),E=this._decodeChar(e.charCodeAt(y+3)),o[u++]=g<<2|m>>>4,o[u++]=m<<4|$>>>2,o[u++]=$<<6|E,h|=g&INVALID_BYTE,h|=m&INVALID_BYTE,h|=$&INVALID_BYTE,h|=E&INVALID_BYTE;if(y<n-1&&(g=this._decodeChar(e.charCodeAt(y)),m=this._decodeChar(e.charCodeAt(y+1)),o[u++]=g<<2|m>>>4,h|=g&INVALID_BYTE,h|=m&INVALID_BYTE),y<n-2&&($=this._decodeChar(e.charCodeAt(y+2)),o[u++]=m<<4|$>>>2,h|=$&INVALID_BYTE),y<n-3&&(E=this._decodeChar(e.charCodeAt(y+3)),o[u++]=$<<6|E,h|=E&INVALID_BYTE),h!==0)throw new Error("Base64Coder: incorrect characters for decoding");return o},t.prototype._encodeByte=function(e){var r=e;return r+=65,r+=25-e>>>8&0-65-26+97,r+=51-e>>>8&26-97-52+48,r+=61-e>>>8&52-48-62+43,r+=62-e>>>8&62-43-63+47,String.fromCharCode(r)},t.prototype._decodeChar=function(e){var r=INVALID_BYTE;return r+=(42-e&e-44)>>>8&-INVALID_BYTE+e-43+62,r+=(46-e&e-48)>>>8&-INVALID_BYTE+e-47+63,r+=(47-e&e-58)>>>8&-INVALID_BYTE+e-48+52,r+=(64-e&e-91)>>>8&-INVALID_BYTE+e-65+0,r+=(96-e&e-123)>>>8&-INVALID_BYTE+e-97+26,r},t.prototype._getPaddingLength=function(e){var r=0;if(this._paddingCharacter){for(var n=e.length-1;n>=0&&e[n]===this._paddingCharacter;n--)r++;if(e.length<4||r>2)throw new Error("Base64Coder: incorrect padding")}return r},t}();base64$9.Coder=Coder;var stdCoder=new Coder;function encode$m(t){return stdCoder.encode(t)}base64$9.encode=encode$m;function decode$k(t){return stdCoder.decode(t)}base64$9.decode=decode$k;var URLSafeCoder=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype._encodeByte=function(r){var n=r;return n+=65,n+=25-r>>>8&0-65-26+97,n+=51-r>>>8&26-97-52+48,n+=61-r>>>8&52-48-62+45,n+=62-r>>>8&62-45-63+95,String.fromCharCode(n)},e.prototype._decodeChar=function(r){var n=INVALID_BYTE;return n+=(44-r&r-46)>>>8&-INVALID_BYTE+r-45+62,n+=(94-r&r-96)>>>8&-INVALID_BYTE+r-95+63,n+=(47-r&r-58)>>>8&-INVALID_BYTE+r-48+52,n+=(64-r&r-91)>>>8&-INVALID_BYTE+r-65+0,n+=(96-r&r-123)>>>8&-INVALID_BYTE+r-97+26,n},e}(Coder);base64$9.URLSafeCoder=URLSafeCoder;var urlSafeCoder=new URLSafeCoder;function encodeURLSafe(t){return urlSafeCoder.encode(t)}var encodeURLSafe_1=base64$9.encodeURLSafe=encodeURLSafe;function decodeURLSafe(t){return urlSafeCoder.decode(t)}var decodeURLSafe_1=base64$9.decodeURLSafe=decodeURLSafe;base64$9.encodedLength=function(t){return stdCoder.encodedLength(t)};base64$9.maxDecodedLength=function(t){return stdCoder.maxDecodedLength(t)};base64$9.decodedLength=function(t){return stdCoder.decodedLength(t)};const REGISTRY="bLAgYxAdX2Ry-nt6aH2ixgvJXbpsEYm28NgJgyqfs-U";async function arnsResolver(t,{CacheOptions:e}={}){const r=await init({CacheOptions:e}),n=await r.resolveARNS(t),o=await r.resolveANT(n);return await r.resolveDID(o)}async function init({local:t,CacheOptions:e}={local:!1,CacheOptions:{}}){const{WarpFactory:r}=await __vitePreload(()=>import("./index-69f553b5.js").then(o=>o.i),["./index-69f553b5.js","./browser-763f2d67.js"],import.meta.url);return{warp:t?r.forLocal(e):r.forMainnet(e),resolveARNS,resolveANT,resolveDID}}async function resolveARNS(t){return(await this.warp.contract(REGISTRY).readState()).cachedValue.state.records[t]}async function resolveANT(t){return`did:ar:${(await this.warp.contract(t).readState()).cachedValue.state.records["did-ar"].transactionId}`}async function resolveDID(t){const e=t.replace("did:ar:","");return(await this.warp.contract(e).readState()).cachedValue.state}var web={},common$2={},ar={},bignumber={exports:{}};(function(t){(function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,u=Math.floor,y="[BigNumber Error] ",h=y+"Number primitive has more than 15 significant digits: ",g=1e14,m=14,$=9007199254740991,E=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],A=1e7,B=1e9;function T(Z){var j,K,se,le=ne.prototype={constructor:ne,toString:null,valueOf:null},ye=new ne(1),Ee=20,be=4,De=-7,We=21,Qe=-1e7,Je=1e7,Te=!1,rt=1,it=0,qe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},re="0123456789abcdefghijklmnopqrstuvwxyz",we=!0;function ne(P,L){var ee,ae,ie,de,ge,oe,ue,q,he=this;if(!(he instanceof ne))return new ne(P,L);if(L==null){if(P&&P._isBigNumber===!0){he.s=P.s,!P.c||P.e>Je?he.c=he.e=null:P.e<Qe?he.c=[he.e=0]:(he.e=P.e,he.c=P.c.slice());return}if((oe=typeof P=="number")&&P*0==0){if(he.s=1/P<0?(P=-P,-1):1,P===~~P){for(de=0,ge=P;ge>=10;ge/=10,de++);de>Je?he.c=he.e=null:(he.e=de,he.c=[P]);return}q=String(P)}else{if(!n.test(q=String(P)))return se(he,q,oe);he.s=q.charCodeAt(0)==45?(q=q.slice(1),-1):1}(de=q.indexOf("."))>-1&&(q=q.replace(".","")),(ge=q.search(/e/i))>0?(de<0&&(de=ge),de+=+q.slice(ge+1),q=q.substring(0,ge)):de<0&&(de=q.length)}else{if(te(L,2,re.length,"Base"),L==10&&we)return he=new ne(P),Ve(he,Ee+he.e+1,be);if(q=String(P),oe=typeof P=="number"){if(P*0!=0)return se(he,q,oe,L);if(he.s=1/P<0?(q=q.slice(1),-1):1,ne.DEBUG&&q.replace(/^0\.0*|\./,"").length>15)throw Error(h+P)}else he.s=q.charCodeAt(0)===45?(q=q.slice(1),-1):1;for(ee=re.slice(0,L),de=ge=0,ue=q.length;ge<ue;ge++)if(ee.indexOf(ae=q.charAt(ge))<0){if(ae=="."){if(ge>de){de=ue;continue}}else if(!ie&&(q==q.toUpperCase()&&(q=q.toLowerCase())||q==q.toLowerCase()&&(q=q.toUpperCase()))){ie=!0,ge=-1,de=0;continue}return se(he,String(P),oe,L)}oe=!1,q=K(q,L,10,he.s),(de=q.indexOf("."))>-1?q=q.replace(".",""):de=q.length}for(ge=0;q.charCodeAt(ge)===48;ge++);for(ue=q.length;q.charCodeAt(--ue)===48;);if(q=q.slice(ge,++ue)){if(ue-=ge,oe&&ne.DEBUG&&ue>15&&(P>$||P!==u(P)))throw Error(h+he.s*P);if((de=de-ge-1)>Je)he.c=he.e=null;else if(de<Qe)he.c=[he.e=0];else{if(he.e=de,he.c=[],ge=(de+1)%m,de<0&&(ge+=m),ge<ue){for(ge&&he.c.push(+q.slice(0,ge)),ue-=m;ge<ue;)he.c.push(+q.slice(ge,ge+=m));ge=m-(q=q.slice(ge)).length}else ge-=ue;for(;ge--;q+="0");he.c.push(+q)}}else he.c=[he.e=0]}ne.clone=T,ne.ROUND_UP=0,ne.ROUND_DOWN=1,ne.ROUND_CEIL=2,ne.ROUND_FLOOR=3,ne.ROUND_HALF_UP=4,ne.ROUND_HALF_DOWN=5,ne.ROUND_HALF_EVEN=6,ne.ROUND_HALF_CEIL=7,ne.ROUND_HALF_FLOOR=8,ne.EUCLID=9,ne.config=ne.set=function(P){var L,ee;if(P!=null)if(typeof P=="object"){if(P.hasOwnProperty(L="DECIMAL_PLACES")&&(ee=P[L],te(ee,0,B,L),Ee=ee),P.hasOwnProperty(L="ROUNDING_MODE")&&(ee=P[L],te(ee,0,8,L),be=ee),P.hasOwnProperty(L="EXPONENTIAL_AT")&&(ee=P[L],ee&&ee.pop?(te(ee[0],-B,0,L),te(ee[1],0,B,L),De=ee[0],We=ee[1]):(te(ee,-B,B,L),De=-(We=ee<0?-ee:ee))),P.hasOwnProperty(L="RANGE"))if(ee=P[L],ee&&ee.pop)te(ee[0],-B,-1,L),te(ee[1],1,B,L),Qe=ee[0],Je=ee[1];else if(te(ee,-B,B,L),ee)Qe=-(Je=ee<0?-ee:ee);else throw Error(y+L+" cannot be zero: "+ee);if(P.hasOwnProperty(L="CRYPTO"))if(ee=P[L],ee===!!ee)if(ee)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Te=ee;else throw Te=!ee,Error(y+"crypto unavailable");else Te=ee;else throw Error(y+L+" not true or false: "+ee);if(P.hasOwnProperty(L="MODULO_MODE")&&(ee=P[L],te(ee,0,9,L),rt=ee),P.hasOwnProperty(L="POW_PRECISION")&&(ee=P[L],te(ee,0,B,L),it=ee),P.hasOwnProperty(L="FORMAT"))if(ee=P[L],typeof ee=="object")qe=ee;else throw Error(y+L+" not an object: "+ee);if(P.hasOwnProperty(L="ALPHABET"))if(ee=P[L],typeof ee=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(ee))we=ee.slice(0,10)=="0123456789",re=ee;else throw Error(y+L+" invalid: "+ee)}else throw Error(y+"Object expected: "+P);return{DECIMAL_PLACES:Ee,ROUNDING_MODE:be,EXPONENTIAL_AT:[De,We],RANGE:[Qe,Je],CRYPTO:Te,MODULO_MODE:rt,POW_PRECISION:it,FORMAT:qe,ALPHABET:re}},ne.isBigNumber=function(P){if(!P||P._isBigNumber!==!0)return!1;if(!ne.DEBUG)return!0;var L,ee,ae=P.c,ie=P.e,de=P.s;e:if({}.toString.call(ae)=="[object Array]"){if((de===1||de===-1)&&ie>=-B&&ie<=B&&ie===u(ie)){if(ae[0]===0){if(ie===0&&ae.length===1)return!0;break e}if(L=(ie+1)%m,L<1&&(L+=m),String(ae[0]).length==L){for(L=0;L<ae.length;L++)if(ee=ae[L],ee<0||ee>=g||ee!==u(ee))break e;if(ee!==0)return!0}}}else if(ae===null&&ie===null&&(de===null||de===1||de===-1))return!0;throw Error(y+"Invalid BigNumber: "+P)},ne.maximum=ne.max=function(){return et(arguments,le.lt)},ne.minimum=ne.min=function(){return et(arguments,le.gt)},ne.random=function(){var P=9007199254740992,L=Math.random()*P&2097151?function(){return u(Math.random()*P)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(ee){var ae,ie,de,ge,oe,ue=0,q=[],he=new ne(ye);if(ee==null?ee=Ee:te(ee,0,B),ge=o(ee/m),Te)if(crypto.getRandomValues){for(ae=crypto.getRandomValues(new Uint32Array(ge*=2));ue<ge;)oe=ae[ue]*131072+(ae[ue+1]>>>11),oe>=9e15?(ie=crypto.getRandomValues(new Uint32Array(2)),ae[ue]=ie[0],ae[ue+1]=ie[1]):(q.push(oe%1e14),ue+=2);ue=ge/2}else if(crypto.randomBytes){for(ae=crypto.randomBytes(ge*=7);ue<ge;)oe=(ae[ue]&31)*281474976710656+ae[ue+1]*1099511627776+ae[ue+2]*4294967296+ae[ue+3]*16777216+(ae[ue+4]<<16)+(ae[ue+5]<<8)+ae[ue+6],oe>=9e15?crypto.randomBytes(7).copy(ae,ue):(q.push(oe%1e14),ue+=7);ue=ge/7}else throw Te=!1,Error(y+"crypto unavailable");if(!Te)for(;ue<ge;)oe=L(),oe<9e15&&(q[ue++]=oe%1e14);for(ge=q[--ue],ee%=m,ge&&ee&&(oe=E[m-ee],q[ue]=u(ge/oe)*oe);q[ue]===0;q.pop(),ue--);if(ue<0)q=[de=0];else{for(de=-1;q[0]===0;q.splice(0,1),de-=m);for(ue=1,oe=q[0];oe>=10;oe/=10,ue++);ue<m&&(de-=m-ue)}return he.e=de,he.c=q,he}}(),ne.sum=function(){for(var P=1,L=arguments,ee=new ne(L[0]);P<L.length;)ee=ee.plus(L[P++]);return ee},K=function(){var P="0123456789";function L(ee,ae,ie,de){for(var ge,oe=[0],ue,q=0,he=ee.length;q<he;){for(ue=oe.length;ue--;oe[ue]*=ae);for(oe[0]+=de.indexOf(ee.charAt(q++)),ge=0;ge<oe.length;ge++)oe[ge]>ie-1&&(oe[ge+1]==null&&(oe[ge+1]=0),oe[ge+1]+=oe[ge]/ie|0,oe[ge]%=ie)}return oe.reverse()}return function(ee,ae,ie,de,ge){var oe,ue,q,he,_e,Ie,Ge,nt,Ze=ee.indexOf("."),ot=Ee,f=be;for(Ze>=0&&(he=it,it=0,ee=ee.replace(".",""),nt=new ne(ae),Ie=nt.pow(ee.length-Ze),it=he,nt.c=L(O(U(Ie.c),Ie.e,"0"),10,ie,P),nt.e=nt.c.length),Ge=L(ee,ae,ie,ge?(oe=re,P):(oe=P,re)),q=he=Ge.length;Ge[--he]==0;Ge.pop());if(!Ge[0])return oe.charAt(0);if(Ze<0?--q:(Ie.c=Ge,Ie.e=q,Ie.s=de,Ie=j(Ie,nt,ot,f,ie),Ge=Ie.c,_e=Ie.r,q=Ie.e),ue=q+ot+1,Ze=Ge[ue],he=ie/2,_e=_e||ue<0||Ge[ue+1]!=null,_e=f<4?(Ze!=null||_e)&&(f==0||f==(Ie.s<0?3:2)):Ze>he||Ze==he&&(f==4||_e||f==6&&Ge[ue-1]&1||f==(Ie.s<0?8:7)),ue<1||!Ge[0])ee=_e?O(oe.charAt(1),-ot,oe.charAt(0)):oe.charAt(0);else{if(Ge.length=ue,_e)for(--ie;++Ge[--ue]>ie;)Ge[ue]=0,ue||(++q,Ge=[1].concat(Ge));for(he=Ge.length;!Ge[--he];);for(Ze=0,ee="";Ze<=he;ee+=oe.charAt(Ge[Ze++]));ee=O(ee,q,oe.charAt(0))}return ee}}(),j=function(){function P(ae,ie,de){var ge,oe,ue,q,he=0,_e=ae.length,Ie=ie%A,Ge=ie/A|0;for(ae=ae.slice();_e--;)ue=ae[_e]%A,q=ae[_e]/A|0,ge=Ge*ue+q*Ie,oe=Ie*ue+ge%A*A+he,he=(oe/de|0)+(ge/A|0)+Ge*q,ae[_e]=oe%de;return he&&(ae=[he].concat(ae)),ae}function L(ae,ie,de,ge){var oe,ue;if(de!=ge)ue=de>ge?1:-1;else for(oe=ue=0;oe<de;oe++)if(ae[oe]!=ie[oe]){ue=ae[oe]>ie[oe]?1:-1;break}return ue}function ee(ae,ie,de,ge){for(var oe=0;de--;)ae[de]-=oe,oe=ae[de]<ie[de]?1:0,ae[de]=oe*ge+ae[de]-ie[de];for(;!ae[0]&&ae.length>1;ae.splice(0,1));}return function(ae,ie,de,ge,oe){var ue,q,he,_e,Ie,Ge,nt,Ze,ot,f,s,c,w,v,D,I,Ae,Fe=ae.s==ie.s?1:-1,xe=ae.c,Ce=ie.c;if(!xe||!xe[0]||!Ce||!Ce[0])return new ne(!ae.s||!ie.s||(xe?Ce&&xe[0]==Ce[0]:!Ce)?NaN:xe&&xe[0]==0||!Ce?Fe*0:Fe/0);for(Ze=new ne(Fe),ot=Ze.c=[],q=ae.e-ie.e,Fe=de+q+1,oe||(oe=g,q=k(ae.e/m)-k(ie.e/m),Fe=Fe/m|0),he=0;Ce[he]==(xe[he]||0);he++);if(Ce[he]>(xe[he]||0)&&q--,Fe<0)ot.push(1),_e=!0;else{for(v=xe.length,I=Ce.length,he=0,Fe+=2,Ie=u(oe/(Ce[0]+1)),Ie>1&&(Ce=P(Ce,Ie,oe),xe=P(xe,Ie,oe),I=Ce.length,v=xe.length),w=I,f=xe.slice(0,I),s=f.length;s<I;f[s++]=0);Ae=Ce.slice(),Ae=[0].concat(Ae),D=Ce[0],Ce[1]>=oe/2&&D++;do{if(Ie=0,ue=L(Ce,f,I,s),ue<0){if(c=f[0],I!=s&&(c=c*oe+(f[1]||0)),Ie=u(c/D),Ie>1)for(Ie>=oe&&(Ie=oe-1),Ge=P(Ce,Ie,oe),nt=Ge.length,s=f.length;L(Ge,f,nt,s)==1;)Ie--,ee(Ge,I<nt?Ae:Ce,nt,oe),nt=Ge.length,ue=1;else Ie==0&&(ue=Ie=1),Ge=Ce.slice(),nt=Ge.length;if(nt<s&&(Ge=[0].concat(Ge)),ee(f,Ge,s,oe),s=f.length,ue==-1)for(;L(Ce,f,I,s)<1;)Ie++,ee(f,I<s?Ae:Ce,s,oe),s=f.length}else ue===0&&(Ie++,f=[0]);ot[he++]=Ie,f[0]?f[s++]=xe[w]||0:(f=[xe[w]],s=1)}while((w++<v||f[0]!=null)&&Fe--);_e=f[0]!=null,ot[0]||ot.splice(0,1)}if(oe==g){for(he=1,Fe=ot[0];Fe>=10;Fe/=10,he++);Ve(Ze,de+(Ze.e=he+q*m-1)+1,ge,_e)}else Ze.e=q,Ze.r=+_e;return Ze}}();function He(P,L,ee,ae){var ie,de,ge,oe,ue;if(ee==null?ee=be:te(ee,0,8),!P.c)return P.toString();if(ie=P.c[0],ge=P.e,L==null)ue=U(P.c),ue=ae==1||ae==2&&(ge<=De||ge>=We)?N(ue,ge):O(ue,ge,"0");else if(P=Ve(new ne(P),L,ee),de=P.e,ue=U(P.c),oe=ue.length,ae==1||ae==2&&(L<=de||de<=De)){for(;oe<L;ue+="0",oe++);ue=N(ue,de)}else if(L-=ge,ue=O(ue,de,"0"),de+1>oe){if(--L>0)for(ue+=".";L--;ue+="0");}else if(L+=de-oe,L>0)for(de+1==oe&&(ue+=".");L--;ue+="0");return P.s<0&&ie?"-"+ue:ue}function et(P,L){for(var ee,ae=1,ie=new ne(P[0]);ae<P.length;ae++)if(ee=new ne(P[ae]),ee.s)L.call(ie,ee)&&(ie=ee);else{ie=ee;break}return ie}function tt(P,L,ee){for(var ae=1,ie=L.length;!L[--ie];L.pop());for(ie=L[0];ie>=10;ie/=10,ae++);return(ee=ae+ee*m-1)>Je?P.c=P.e=null:ee<Qe?P.c=[P.e=0]:(P.e=ee,P.c=L),P}se=function(){var P=/^(-?)0([xbo])(?=\w[\w.]*$)/i,L=/^([^.]+)\.$/,ee=/^\.([^.]+)$/,ae=/^-?(Infinity|NaN)$/,ie=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(de,ge,oe,ue){var q,he=oe?ge:ge.replace(ie,"");if(ae.test(he))de.s=isNaN(he)?null:he<0?-1:1;else{if(!oe&&(he=he.replace(P,function(_e,Ie,Ge){return q=(Ge=Ge.toLowerCase())=="x"?16:Ge=="b"?2:8,!ue||ue==q?Ie:_e}),ue&&(q=ue,he=he.replace(L,"$1").replace(ee,"0.$1")),ge!=he))return new ne(he,q);if(ne.DEBUG)throw Error(y+"Not a"+(ue?" base "+ue:"")+" number: "+ge);de.s=null}de.c=de.e=null}}();function Ve(P,L,ee,ae){var ie,de,ge,oe,ue,q,he,_e=P.c,Ie=E;if(_e){e:{for(ie=1,oe=_e[0];oe>=10;oe/=10,ie++);if(de=L-ie,de<0)de+=m,ge=L,ue=_e[q=0],he=ue/Ie[ie-ge-1]%10|0;else if(q=o((de+1)/m),q>=_e.length)if(ae){for(;_e.length<=q;_e.push(0));ue=he=0,ie=1,de%=m,ge=de-m+1}else break e;else{for(ue=oe=_e[q],ie=1;oe>=10;oe/=10,ie++);de%=m,ge=de-m+ie,he=ge<0?0:ue/Ie[ie-ge-1]%10|0}if(ae=ae||L<0||_e[q+1]!=null||(ge<0?ue:ue%Ie[ie-ge-1]),ae=ee<4?(he||ae)&&(ee==0||ee==(P.s<0?3:2)):he>5||he==5&&(ee==4||ae||ee==6&&(de>0?ge>0?ue/Ie[ie-ge]:0:_e[q-1])%10&1||ee==(P.s<0?8:7)),L<1||!_e[0])return _e.length=0,ae?(L-=P.e+1,_e[0]=Ie[(m-L%m)%m],P.e=-L||0):_e[0]=P.e=0,P;if(de==0?(_e.length=q,oe=1,q--):(_e.length=q+1,oe=Ie[m-de],_e[q]=ge>0?u(ue/Ie[ie-ge]%Ie[ge])*oe:0),ae)for(;;)if(q==0){for(de=1,ge=_e[0];ge>=10;ge/=10,de++);for(ge=_e[0]+=oe,oe=1;ge>=10;ge/=10,oe++);de!=oe&&(P.e++,_e[0]==g&&(_e[0]=1));break}else{if(_e[q]+=oe,_e[q]!=g)break;_e[q--]=0,oe=1}for(de=_e.length;_e[--de]===0;_e.pop());}P.e>Je?P.c=P.e=null:P.e<Qe&&(P.c=[P.e=0])}return P}function Ye(P){var L,ee=P.e;return ee===null?P.toString():(L=U(P.c),L=ee<=De||ee>=We?N(L,ee):O(L,ee,"0"),P.s<0?"-"+L:L)}return le.absoluteValue=le.abs=function(){var P=new ne(this);return P.s<0&&(P.s=1),P},le.comparedTo=function(P,L){return W(this,new ne(P,L))},le.decimalPlaces=le.dp=function(P,L){var ee,ae,ie,de=this;if(P!=null)return te(P,0,B),L==null?L=be:te(L,0,8),Ve(new ne(de),P+de.e+1,L);if(!(ee=de.c))return null;if(ae=((ie=ee.length-1)-k(this.e/m))*m,ie=ee[ie])for(;ie%10==0;ie/=10,ae--);return ae<0&&(ae=0),ae},le.dividedBy=le.div=function(P,L){return j(this,new ne(P,L),Ee,be)},le.dividedToIntegerBy=le.idiv=function(P,L){return j(this,new ne(P,L),0,1)},le.exponentiatedBy=le.pow=function(P,L){var ee,ae,ie,de,ge,oe,ue,q,he,_e=this;if(P=new ne(P),P.c&&!P.isInteger())throw Error(y+"Exponent not an integer: "+Ye(P));if(L!=null&&(L=new ne(L)),oe=P.e>14,!_e.c||!_e.c[0]||_e.c[0]==1&&!_e.e&&_e.c.length==1||!P.c||!P.c[0])return he=new ne(Math.pow(+Ye(_e),oe?2-X(P):+Ye(P))),L?he.mod(L):he;if(ue=P.s<0,L){if(L.c?!L.c[0]:!L.s)return new ne(NaN);ae=!ue&&_e.isInteger()&&L.isInteger(),ae&&(_e=_e.mod(L))}else{if(P.e>9&&(_e.e>0||_e.e<-1||(_e.e==0?_e.c[0]>1||oe&&_e.c[1]>=24e7:_e.c[0]<8e13||oe&&_e.c[0]<=9999975e7)))return de=_e.s<0&&X(P)?-0:0,_e.e>-1&&(de=1/de),new ne(ue?1/de:de);it&&(de=o(it/m+2))}for(oe?(ee=new ne(.5),ue&&(P.s=1),q=X(P)):(ie=Math.abs(+Ye(P)),q=ie%2),he=new ne(ye);;){if(q){if(he=he.times(_e),!he.c)break;de?he.c.length>de&&(he.c.length=de):ae&&(he=he.mod(L))}if(ie){if(ie=u(ie/2),ie===0)break;q=ie%2}else if(P=P.times(ee),Ve(P,P.e+1,1),P.e>14)q=X(P);else{if(ie=+Ye(P),ie===0)break;q=ie%2}_e=_e.times(_e),de?_e.c&&_e.c.length>de&&(_e.c.length=de):ae&&(_e=_e.mod(L))}return ae?he:(ue&&(he=ye.div(he)),L?he.mod(L):de?Ve(he,it,be,ge):he)},le.integerValue=function(P){var L=new ne(this);return P==null?P=be:te(P,0,8),Ve(L,L.e+1,P)},le.isEqualTo=le.eq=function(P,L){return W(this,new ne(P,L))===0},le.isFinite=function(){return!!this.c},le.isGreaterThan=le.gt=function(P,L){return W(this,new ne(P,L))>0},le.isGreaterThanOrEqualTo=le.gte=function(P,L){return(L=W(this,new ne(P,L)))===1||L===0},le.isInteger=function(){return!!this.c&&k(this.e/m)>this.c.length-2},le.isLessThan=le.lt=function(P,L){return W(this,new ne(P,L))<0},le.isLessThanOrEqualTo=le.lte=function(P,L){return(L=W(this,new ne(P,L)))===-1||L===0},le.isNaN=function(){return!this.s},le.isNegative=function(){return this.s<0},le.isPositive=function(){return this.s>0},le.isZero=function(){return!!this.c&&this.c[0]==0},le.minus=function(P,L){var ee,ae,ie,de,ge=this,oe=ge.s;if(P=new ne(P,L),L=P.s,!oe||!L)return new ne(NaN);if(oe!=L)return P.s=-L,ge.plus(P);var ue=ge.e/m,q=P.e/m,he=ge.c,_e=P.c;if(!ue||!q){if(!he||!_e)return he?(P.s=-L,P):new ne(_e?ge:NaN);if(!he[0]||!_e[0])return _e[0]?(P.s=-L,P):new ne(he[0]?ge:be==3?-0:0)}if(ue=k(ue),q=k(q),he=he.slice(),oe=ue-q){for((de=oe<0)?(oe=-oe,ie=he):(q=ue,ie=_e),ie.reverse(),L=oe;L--;ie.push(0));ie.reverse()}else for(ae=(de=(oe=he.length)<(L=_e.length))?oe:L,oe=L=0;L<ae;L++)if(he[L]!=_e[L]){de=he[L]<_e[L];break}if(de&&(ie=he,he=_e,_e=ie,P.s=-P.s),L=(ae=_e.length)-(ee=he.length),L>0)for(;L--;he[ee++]=0);for(L=g-1;ae>oe;){if(he[--ae]<_e[ae]){for(ee=ae;ee&&!he[--ee];he[ee]=L);--he[ee],he[ae]+=g}he[ae]-=_e[ae]}for(;he[0]==0;he.splice(0,1),--q);return he[0]?tt(P,he,q):(P.s=be==3?-1:1,P.c=[P.e=0],P)},le.modulo=le.mod=function(P,L){var ee,ae,ie=this;return P=new ne(P,L),!ie.c||!P.s||P.c&&!P.c[0]?new ne(NaN):!P.c||ie.c&&!ie.c[0]?new ne(ie):(rt==9?(ae=P.s,P.s=1,ee=j(ie,P,0,3),P.s=ae,ee.s*=ae):ee=j(ie,P,0,rt),P=ie.minus(ee.times(P)),!P.c[0]&&rt==1&&(P.s=ie.s),P)},le.multipliedBy=le.times=function(P,L){var ee,ae,ie,de,ge,oe,ue,q,he,_e,Ie,Ge,nt,Ze,ot,f=this,s=f.c,c=(P=new ne(P,L)).c;if(!s||!c||!s[0]||!c[0])return!f.s||!P.s||s&&!s[0]&&!c||c&&!c[0]&&!s?P.c=P.e=P.s=null:(P.s*=f.s,!s||!c?P.c=P.e=null:(P.c=[0],P.e=0)),P;for(ae=k(f.e/m)+k(P.e/m),P.s*=f.s,ue=s.length,_e=c.length,ue<_e&&(nt=s,s=c,c=nt,ie=ue,ue=_e,_e=ie),ie=ue+_e,nt=[];ie--;nt.push(0));for(Ze=g,ot=A,ie=_e;--ie>=0;){for(ee=0,Ie=c[ie]%ot,Ge=c[ie]/ot|0,ge=ue,de=ie+ge;de>ie;)q=s[--ge]%ot,he=s[ge]/ot|0,oe=Ge*q+he*Ie,q=Ie*q+oe%ot*ot+nt[de]+ee,ee=(q/Ze|0)+(oe/ot|0)+Ge*he,nt[de--]=q%Ze;nt[de]=ee}return ee?++ae:nt.splice(0,1),tt(P,nt,ae)},le.negated=function(){var P=new ne(this);return P.s=-P.s||null,P},le.plus=function(P,L){var ee,ae=this,ie=ae.s;if(P=new ne(P,L),L=P.s,!ie||!L)return new ne(NaN);if(ie!=L)return P.s=-L,ae.minus(P);var de=ae.e/m,ge=P.e/m,oe=ae.c,ue=P.c;if(!de||!ge){if(!oe||!ue)return new ne(ie/0);if(!oe[0]||!ue[0])return ue[0]?P:new ne(oe[0]?ae:ie*0)}if(de=k(de),ge=k(ge),oe=oe.slice(),ie=de-ge){for(ie>0?(ge=de,ee=ue):(ie=-ie,ee=oe),ee.reverse();ie--;ee.push(0));ee.reverse()}for(ie=oe.length,L=ue.length,ie-L<0&&(ee=ue,ue=oe,oe=ee,L=ie),ie=0;L;)ie=(oe[--L]=oe[L]+ue[L]+ie)/g|0,oe[L]=g===oe[L]?0:oe[L]%g;return ie&&(oe=[ie].concat(oe),++ge),tt(P,oe,ge)},le.precision=le.sd=function(P,L){var ee,ae,ie,de=this;if(P!=null&&P!==!!P)return te(P,1,B),L==null?L=be:te(L,0,8),Ve(new ne(de),P,L);if(!(ee=de.c))return null;if(ie=ee.length-1,ae=ie*m+1,ie=ee[ie]){for(;ie%10==0;ie/=10,ae--);for(ie=ee[0];ie>=10;ie/=10,ae++);}return P&&de.e+1>ae&&(ae=de.e+1),ae},le.shiftedBy=function(P){return te(P,-$,$),this.times("1e"+P)},le.squareRoot=le.sqrt=function(){var P,L,ee,ae,ie,de=this,ge=de.c,oe=de.s,ue=de.e,q=Ee+4,he=new ne("0.5");if(oe!==1||!ge||!ge[0])return new ne(!oe||oe<0&&(!ge||ge[0])?NaN:ge?de:1/0);if(oe=Math.sqrt(+Ye(de)),oe==0||oe==1/0?(L=U(ge),(L.length+ue)%2==0&&(L+="0"),oe=Math.sqrt(+L),ue=k((ue+1)/2)-(ue<0||ue%2),oe==1/0?L="5e"+ue:(L=oe.toExponential(),L=L.slice(0,L.indexOf("e")+1)+ue),ee=new ne(L)):ee=new ne(oe+""),ee.c[0]){for(ue=ee.e,oe=ue+q,oe<3&&(oe=0);;)if(ie=ee,ee=he.times(ie.plus(j(de,ie,q,1))),U(ie.c).slice(0,oe)===(L=U(ee.c)).slice(0,oe))if(ee.e<ue&&--oe,L=L.slice(oe-3,oe+1),L=="9999"||!ae&&L=="4999"){if(!ae&&(Ve(ie,ie.e+Ee+2,0),ie.times(ie).eq(de))){ee=ie;break}q+=4,oe+=4,ae=1}else{(!+L||!+L.slice(1)&&L.charAt(0)=="5")&&(Ve(ee,ee.e+Ee+2,1),P=!ee.times(ee).eq(de));break}}return Ve(ee,ee.e+Ee+1,be,P)},le.toExponential=function(P,L){return P!=null&&(te(P,0,B),P++),He(this,P,L,1)},le.toFixed=function(P,L){return P!=null&&(te(P,0,B),P=P+this.e+1),He(this,P,L)},le.toFormat=function(P,L,ee){var ae,ie=this;if(ee==null)P!=null&&L&&typeof L=="object"?(ee=L,L=null):P&&typeof P=="object"?(ee=P,P=L=null):ee=qe;else if(typeof ee!="object")throw Error(y+"Argument not an object: "+ee);if(ae=ie.toFixed(P,L),ie.c){var de,ge=ae.split("."),oe=+ee.groupSize,ue=+ee.secondaryGroupSize,q=ee.groupSeparator||"",he=ge[0],_e=ge[1],Ie=ie.s<0,Ge=Ie?he.slice(1):he,nt=Ge.length;if(ue&&(de=oe,oe=ue,ue=de,nt-=de),oe>0&&nt>0){for(de=nt%oe||oe,he=Ge.substr(0,de);de<nt;de+=oe)he+=q+Ge.substr(de,oe);ue>0&&(he+=q+Ge.slice(de)),Ie&&(he="-"+he)}ae=_e?he+(ee.decimalSeparator||"")+((ue=+ee.fractionGroupSize)?_e.replace(new RegExp("\\d{"+ue+"}\\B","g"),"$&"+(ee.fractionGroupSeparator||"")):_e):he}return(ee.prefix||"")+ae+(ee.suffix||"")},le.toFraction=function(P){var L,ee,ae,ie,de,ge,oe,ue,q,he,_e,Ie,Ge=this,nt=Ge.c;if(P!=null&&(oe=new ne(P),!oe.isInteger()&&(oe.c||oe.s!==1)||oe.lt(ye)))throw Error(y+"Argument "+(oe.isInteger()?"out of range: ":"not an integer: ")+Ye(oe));if(!nt)return new ne(Ge);for(L=new ne(ye),q=ee=new ne(ye),ae=ue=new ne(ye),Ie=U(nt),de=L.e=Ie.length-Ge.e-1,L.c[0]=E[(ge=de%m)<0?m+ge:ge],P=!P||oe.comparedTo(L)>0?de>0?L:q:oe,ge=Je,Je=1/0,oe=new ne(Ie),ue.c[0]=0;he=j(oe,L,0,1),ie=ee.plus(he.times(ae)),ie.comparedTo(P)!=1;)ee=ae,ae=ie,q=ue.plus(he.times(ie=q)),ue=ie,L=oe.minus(he.times(ie=L)),oe=ie;return ie=j(P.minus(ee),ae,0,1),ue=ue.plus(ie.times(q)),ee=ee.plus(ie.times(ae)),ue.s=q.s=Ge.s,de=de*2,_e=j(q,ae,de,be).minus(Ge).abs().comparedTo(j(ue,ee,de,be).minus(Ge).abs())<1?[q,ae]:[ue,ee],Je=ge,_e},le.toNumber=function(){return+Ye(this)},le.toPrecision=function(P,L){return P!=null&&te(P,1,B),He(this,P,L,2)},le.toString=function(P){var L,ee=this,ae=ee.s,ie=ee.e;return ie===null?ae?(L="Infinity",ae<0&&(L="-"+L)):L="NaN":(P==null?L=ie<=De||ie>=We?N(U(ee.c),ie):O(U(ee.c),ie,"0"):P===10&&we?(ee=Ve(new ne(ee),Ee+ie+1,be),L=O(U(ee.c),ee.e,"0")):(te(P,2,re.length,"Base"),L=K(O(U(ee.c),ie,"0"),10,P,ae,!0)),ae<0&&ee.c[0]&&(L="-"+L)),L},le.valueOf=le.toJSON=function(){return Ye(this)},le._isBigNumber=!0,Z!=null&&ne.set(Z),ne}function k(Z){var j=Z|0;return Z>0||Z===j?j:j-1}function U(Z){for(var j,K,se=1,le=Z.length,ye=Z[0]+"";se<le;){for(j=Z[se++]+"",K=m-j.length;K--;j="0"+j);ye+=j}for(le=ye.length;ye.charCodeAt(--le)===48;);return ye.slice(0,le+1||1)}function W(Z,j){var K,se,le=Z.c,ye=j.c,Ee=Z.s,be=j.s,De=Z.e,We=j.e;if(!Ee||!be)return null;if(K=le&&!le[0],se=ye&&!ye[0],K||se)return K?se?0:-be:Ee;if(Ee!=be)return Ee;if(K=Ee<0,se=De==We,!le||!ye)return se?0:!le^K?1:-1;if(!se)return De>We^K?1:-1;for(be=(De=le.length)<(We=ye.length)?De:We,Ee=0;Ee<be;Ee++)if(le[Ee]!=ye[Ee])return le[Ee]>ye[Ee]^K?1:-1;return De==We?0:De>We^K?1:-1}function te(Z,j,K,se){if(Z<j||Z>K||Z!==u(Z))throw Error(y+(se||"Argument")+(typeof Z=="number"?Z<j||Z>K?" out of range: ":" not an integer: ":" not a primitive number: ")+String(Z))}function X(Z){var j=Z.c.length-1;return k(Z.e/m)==j&&Z.c[j]%2!=0}function N(Z,j){return(Z.length>1?Z.charAt(0)+"."+Z.slice(1):Z)+(j<0?"e":"e+")+j}function O(Z,j,K){var se,le;if(j<0){for(le=K+".";++j;le+=K);Z=le+Z}else if(se=Z.length,++j>se){for(le=K,j-=se;--j;le+=K);Z+=le}else j<se&&(Z=Z.slice(0,j)+"."+Z.slice(j));return Z}r=T(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(commonjsGlobal)})(bignumber);Object.defineProperty(ar,"__esModule",{value:!0});const bignumber_js_1=bignumber.exports;class Ar{constructor(){this.BigNum=(e,r)=>{let n=bignumber_js_1.BigNumber.clone({DECIMAL_PLACES:r});return new n(e)}}winstonToAr(e,{formatted:r=!1,decimals:n=12,trim:o=!0}={}){let u=this.stringToBigNum(e,n).shiftedBy(-12);return r?u.toFormat(n):u.toFixed(n)}arToWinston(e,{formatted:r=!1}={}){let n=this.stringToBigNum(e).shiftedBy(12);return r?n.toFormat():n.toFixed(0)}compare(e,r){let n=this.stringToBigNum(e),o=this.stringToBigNum(r);return n.comparedTo(o)}isEqual(e,r){return this.compare(e,r)===0}isLessThan(e,r){let n=this.stringToBigNum(e),o=this.stringToBigNum(r);return n.isLessThan(o)}isGreaterThan(e,r){let n=this.stringToBigNum(e),o=this.stringToBigNum(r);return n.isGreaterThan(o)}add(e,r){let n=this.stringToBigNum(e);return this.stringToBigNum(r),n.plus(r).toFixed(0)}sub(e,r){let n=this.stringToBigNum(e);return this.stringToBigNum(r),n.minus(r).toFixed(0)}stringToBigNum(e,r=12){return this.BigNum(e,r)}}ar.default=Ar;var api={},axios$6={exports:{}},axios$5={exports:{}},bind$5=function(e,r){return function(){for(var o=new Array(arguments.length),u=0;u<o.length;u++)o[u]=arguments[u];return e.apply(r,o)}},bind$4=bind$5,toString$a=Object.prototype.toString,kindOf$1=function(t){return function(e){var r=toString$a.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function kindOfTest$1(t){return t=t.toLowerCase(),function(r){return kindOf$1(r)===t}}function isArray$1(t){return Array.isArray(t)}function isUndefined$1(t){return typeof t>"u"}function isBuffer$3(t){return t!==null&&!isUndefined$1(t)&&t.constructor!==null&&!isUndefined$1(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var isArrayBuffer$1=kindOfTest$1("ArrayBuffer");function isArrayBufferView$1(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&isArrayBuffer$1(t.buffer),e}function isString$1(t){return typeof t=="string"}function isNumber$1(t){return typeof t=="number"}function isObject$1(t){return t!==null&&typeof t=="object"}function isPlainObject$1(t){if(kindOf$1(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var isDate$1=kindOfTest$1("Date"),isFile$1=kindOfTest$1("File"),isBlob$1=kindOfTest$1("Blob"),isFileList$1=kindOfTest$1("FileList");function isFunction$1(t){return toString$a.call(t)==="[object Function]"}function isStream$1(t){return isObject$1(t)&&isFunction$1(t.pipe)}function isFormData$1(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||toString$a.call(t)===e||isFunction$1(t.toString)&&t.toString()===e)}var isURLSearchParams$1=kindOfTest$1("URLSearchParams");function trim$1(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv$1(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function forEach$1(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),isArray$1(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function merge$1(){var t={};function e(o,u){isPlainObject$1(t[u])&&isPlainObject$1(o)?t[u]=merge$1(t[u],o):isPlainObject$1(o)?t[u]=merge$1({},o):isArray$1(o)?t[u]=o.slice():t[u]=o}for(var r=0,n=arguments.length;r<n;r++)forEach$1(arguments[r],e);return t}function extend$1(t,e,r){return forEach$1(e,function(o,u){r&&typeof o=="function"?t[u]=bind$4(o,r):t[u]=o}),t}function stripBOM$1(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function inherits$1(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function toFlatObject$1(t,e,r){var n,o,u,y={};e=e||{};do{for(n=Object.getOwnPropertyNames(t),o=n.length;o-- >0;)u=n[o],y[u]||(e[u]=t[u],y[u]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function endsWith$1(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return n!==-1&&n===r}function toArray$1(t){if(!t)return null;var e=t.length;if(isUndefined$1(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var isTypedArray$2=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),utils$o={isArray:isArray$1,isArrayBuffer:isArrayBuffer$1,isBuffer:isBuffer$3,isFormData:isFormData$1,isArrayBufferView:isArrayBufferView$1,isString:isString$1,isNumber:isNumber$1,isObject:isObject$1,isPlainObject:isPlainObject$1,isUndefined:isUndefined$1,isDate:isDate$1,isFile:isFile$1,isBlob:isBlob$1,isFunction:isFunction$1,isStream:isStream$1,isURLSearchParams:isURLSearchParams$1,isStandardBrowserEnv:isStandardBrowserEnv$1,forEach:forEach$1,merge:merge$1,extend:extend$1,trim:trim$1,stripBOM:stripBOM$1,inherits:inherits$1,toFlatObject:toFlatObject$1,kindOf:kindOf$1,kindOfTest:kindOfTest$1,endsWith:endsWith$1,toArray:toArray$1,isTypedArray:isTypedArray$2,isFileList:isFileList$1},utils$n=utils$o;function encode$l(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$3=function(e,r,n){if(!r)return e;var o;if(n)o=n(r);else if(utils$n.isURLSearchParams(r))o=r.toString();else{var u=[];utils$n.forEach(r,function(g,m){g===null||typeof g>"u"||(utils$n.isArray(g)?m=m+"[]":g=[g],utils$n.forEach(g,function(E){utils$n.isDate(E)?E=E.toISOString():utils$n.isObject(E)&&(E=JSON.stringify(E)),u.push(encode$l(m)+"="+encode$l(E))}))}),o=u.join("&")}if(o){var y=e.indexOf("#");y!==-1&&(e=e.slice(0,y)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e},utils$m=utils$o;function InterceptorManager$3(){this.handlers=[]}InterceptorManager$3.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};InterceptorManager$3.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};InterceptorManager$3.prototype.forEach=function(e){utils$m.forEach(this.handlers,function(n){n!==null&&e(n)})};var InterceptorManager_1$1=InterceptorManager$3,utils$l=utils$o,normalizeHeaderName$3=function(e,r){utils$l.forEach(e,function(o,u){u!==r&&u.toUpperCase()===r.toUpperCase()&&(e[r]=o,delete e[u])})},utils$k=utils$o;function AxiosError$5(t,e,r,n,o){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o)}utils$k.inherits(AxiosError$5,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var prototype$1=AxiosError$5.prototype,descriptors$1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){descriptors$1[t]={value:t}});Object.defineProperties(AxiosError$5,descriptors$1);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$5.from=function(t,e,r,n,o,u){var y=Object.create(prototype$1);return utils$k.toFlatObject(t,y,function(g){return g!==Error.prototype}),AxiosError$5.call(y,t.message,e,r,n,o),y.name=t.name,u&&Object.assign(y,u),y};var AxiosError_1$1=AxiosError$5,transitional$1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},utils$j=utils$o;function toFormData$3(t,e){e=e||new FormData;var r=[];function n(u){return u===null?"":utils$j.isDate(u)?u.toISOString():utils$j.isArrayBuffer(u)||utils$j.isTypedArray(u)?typeof Blob=="function"?new Blob([u]):Buffer.from(u):u}function o(u,y){if(utils$j.isPlainObject(u)||utils$j.isArray(u)){if(r.indexOf(u)!==-1)throw Error("Circular reference detected in "+y);r.push(u),utils$j.forEach(u,function(g,m){if(!utils$j.isUndefined(g)){var $=y?y+"."+m:m,E;if(g&&!y&&typeof g=="object"){if(utils$j.endsWith(m,"{}"))g=JSON.stringify(g);else if(utils$j.endsWith(m,"[]")&&(E=utils$j.toArray(g))){E.forEach(function(A){!utils$j.isUndefined(A)&&e.append($,n(A))});return}}o(g,$)}}),r.pop()}else e.append(y,n(u))}return o(t),e}var toFormData_1$1=toFormData$3,settle$1,hasRequiredSettle$1;function requireSettle$1(){if(hasRequiredSettle$1)return settle$1;hasRequiredSettle$1=1;var t=AxiosError_1$1;return settle$1=function(r,n,o){var u=o.config.validateStatus;!o.status||!u||u(o.status)?r(o):n(new t("Request failed with status code "+o.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))},settle$1}var cookies$1,hasRequiredCookies$1;function requireCookies$1(){if(hasRequiredCookies$1)return cookies$1;hasRequiredCookies$1=1;var t=utils$o;return cookies$1=t.isStandardBrowserEnv()?function(){return{write:function(n,o,u,y,h,g){var m=[];m.push(n+"="+encodeURIComponent(o)),t.isNumber(u)&&m.push("expires="+new Date(u).toGMTString()),t.isString(y)&&m.push("path="+y),t.isString(h)&&m.push("domain="+h),g===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(n){var o=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cookies$1}var isAbsoluteURL$3=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},combineURLs$3=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},isAbsoluteURL$2=isAbsoluteURL$3,combineURLs$2=combineURLs$3,buildFullPath$3=function(e,r){return e&&!isAbsoluteURL$2(r)?combineURLs$2(e,r):r},parseHeaders$1,hasRequiredParseHeaders$1;function requireParseHeaders$1(){if(hasRequiredParseHeaders$1)return parseHeaders$1;hasRequiredParseHeaders$1=1;var t=utils$o,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return parseHeaders$1=function(n){var o={},u,y,h;return n&&t.forEach(n.split(`
`),function(m){if(h=m.indexOf(":"),u=t.trim(m.substr(0,h)).toLowerCase(),y=t.trim(m.substr(h+1)),u){if(o[u]&&e.indexOf(u)>=0)return;u==="set-cookie"?o[u]=(o[u]?o[u]:[]).concat([y]):o[u]=o[u]?o[u]+", "+y:y}}),o},parseHeaders$1}var isURLSameOrigin$1,hasRequiredIsURLSameOrigin$1;function requireIsURLSameOrigin$1(){if(hasRequiredIsURLSameOrigin$1)return isURLSameOrigin$1;hasRequiredIsURLSameOrigin$1=1;var t=utils$o;return isURLSameOrigin$1=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),o;function u(y){var h=y;return r&&(n.setAttribute("href",h),h=n.href),n.setAttribute("href",h),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=u(window.location.href),function(h){var g=t.isString(h)?u(h):h;return g.protocol===o.protocol&&g.host===o.host}}():function(){return function(){return!0}}(),isURLSameOrigin$1}var CanceledError_1$1,hasRequiredCanceledError$1;function requireCanceledError$1(){if(hasRequiredCanceledError$1)return CanceledError_1$1;hasRequiredCanceledError$1=1;var t=AxiosError_1$1,e=utils$o;function r(n){t.call(this,n==null?"canceled":n,t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(r,t,{__CANCEL__:!0}),CanceledError_1$1=r,CanceledError_1$1}var parseProtocol$1,hasRequiredParseProtocol$1;function requireParseProtocol$1(){return hasRequiredParseProtocol$1||(hasRequiredParseProtocol$1=1,parseProtocol$1=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}),parseProtocol$1}var xhr$1,hasRequiredXhr$1;function requireXhr$1(){if(hasRequiredXhr$1)return xhr$1;hasRequiredXhr$1=1;var t=utils$o,e=requireSettle$1(),r=requireCookies$1(),n=buildURL$3,o=buildFullPath$3,u=requireParseHeaders$1(),y=requireIsURLSameOrigin$1(),h=transitional$1,g=AxiosError_1$1,m=requireCanceledError$1(),$=requireParseProtocol$1();return xhr$1=function(A){return new Promise(function(T,k){var U=A.data,W=A.headers,te=A.responseType,X;function N(){A.cancelToken&&A.cancelToken.unsubscribe(X),A.signal&&A.signal.removeEventListener("abort",X)}t.isFormData(U)&&t.isStandardBrowserEnv()&&delete W["Content-Type"];var O=new XMLHttpRequest;if(A.auth){var Z=A.auth.username||"",j=A.auth.password?unescape(encodeURIComponent(A.auth.password)):"";W.Authorization="Basic "+btoa(Z+":"+j)}var K=o(A.baseURL,A.url);O.open(A.method.toUpperCase(),n(K,A.params,A.paramsSerializer),!0),O.timeout=A.timeout;function se(){if(!!O){var Ee="getAllResponseHeaders"in O?u(O.getAllResponseHeaders()):null,be=!te||te==="text"||te==="json"?O.responseText:O.response,De={data:be,status:O.status,statusText:O.statusText,headers:Ee,config:A,request:O};e(function(Qe){T(Qe),N()},function(Qe){k(Qe),N()},De),O=null}}if("onloadend"in O?O.onloadend=se:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(se)},O.onabort=function(){!O||(k(new g("Request aborted",g.ECONNABORTED,A,O)),O=null)},O.onerror=function(){k(new g("Network Error",g.ERR_NETWORK,A,O,O)),O=null},O.ontimeout=function(){var be=A.timeout?"timeout of "+A.timeout+"ms exceeded":"timeout exceeded",De=A.transitional||h;A.timeoutErrorMessage&&(be=A.timeoutErrorMessage),k(new g(be,De.clarifyTimeoutError?g.ETIMEDOUT:g.ECONNABORTED,A,O)),O=null},t.isStandardBrowserEnv()){var le=(A.withCredentials||y(K))&&A.xsrfCookieName?r.read(A.xsrfCookieName):void 0;le&&(W[A.xsrfHeaderName]=le)}"setRequestHeader"in O&&t.forEach(W,function(be,De){typeof U>"u"&&De.toLowerCase()==="content-type"?delete W[De]:O.setRequestHeader(De,be)}),t.isUndefined(A.withCredentials)||(O.withCredentials=!!A.withCredentials),te&&te!=="json"&&(O.responseType=A.responseType),typeof A.onDownloadProgress=="function"&&O.addEventListener("progress",A.onDownloadProgress),typeof A.onUploadProgress=="function"&&O.upload&&O.upload.addEventListener("progress",A.onUploadProgress),(A.cancelToken||A.signal)&&(X=function(Ee){!O||(k(!Ee||Ee&&Ee.type?new m:Ee),O.abort(),O=null)},A.cancelToken&&A.cancelToken.subscribe(X),A.signal&&(A.signal.aborted?X():A.signal.addEventListener("abort",X))),U||(U=null);var ye=$(K);if(ye&&["http","https","file"].indexOf(ye)===-1){k(new g("Unsupported protocol "+ye+":",g.ERR_BAD_REQUEST,A));return}O.send(U)})},xhr$1}var _null$1,hasRequired_null$1;function require_null$1(){return hasRequired_null$1||(hasRequired_null$1=1,_null$1=null),_null$1}var utils$i=utils$o,normalizeHeaderName$2=normalizeHeaderName$3,AxiosError$4=AxiosError_1$1,transitionalDefaults$1=transitional$1,toFormData$2=toFormData_1$1,DEFAULT_CONTENT_TYPE$1={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset$1(t,e){!utils$i.isUndefined(t)&&utils$i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function getDefaultAdapter$1(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=requireXhr$1()),t}function stringifySafely$1(t,e,r){if(utils$i.isString(t))try{return(e||JSON.parse)(t),utils$i.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var defaults$7={transitional:transitionalDefaults$1,adapter:getDefaultAdapter$1(),transformRequest:[function(e,r){if(normalizeHeaderName$2(r,"Accept"),normalizeHeaderName$2(r,"Content-Type"),utils$i.isFormData(e)||utils$i.isArrayBuffer(e)||utils$i.isBuffer(e)||utils$i.isStream(e)||utils$i.isFile(e)||utils$i.isBlob(e))return e;if(utils$i.isArrayBufferView(e))return e.buffer;if(utils$i.isURLSearchParams(e))return setContentTypeIfUnset$1(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=utils$i.isObject(e),o=r&&r["Content-Type"],u;if((u=utils$i.isFileList(e))||n&&o==="multipart/form-data"){var y=this.env&&this.env.FormData;return toFormData$2(u?{"files[]":e}:e,y&&new y)}else if(n||o==="application/json")return setContentTypeIfUnset$1(r,"application/json"),stringifySafely$1(e);return e}],transformResponse:[function(e){var r=this.transitional||defaults$7.transitional,n=r&&r.silentJSONParsing,o=r&&r.forcedJSONParsing,u=!n&&this.responseType==="json";if(u||o&&utils$i.isString(e)&&e.length)try{return JSON.parse(e)}catch(y){if(u)throw y.name==="SyntaxError"?AxiosError$4.from(y,AxiosError$4.ERR_BAD_RESPONSE,this,null,this.response):y}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:require_null$1()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$i.forEach(["delete","get","head"],function(e){defaults$7.headers[e]={}});utils$i.forEach(["post","put","patch"],function(e){defaults$7.headers[e]=utils$i.merge(DEFAULT_CONTENT_TYPE$1)});var defaults_1$1=defaults$7,utils$h=utils$o,defaults$6=defaults_1$1,transformData$3=function(e,r,n){var o=this||defaults$6;return utils$h.forEach(n,function(y){e=y.call(o,e,r)}),e},isCancel$3,hasRequiredIsCancel$1;function requireIsCancel$1(){return hasRequiredIsCancel$1||(hasRequiredIsCancel$1=1,isCancel$3=function(e){return!!(e&&e.__CANCEL__)}),isCancel$3}var utils$g=utils$o,transformData$2=transformData$3,isCancel$2=requireIsCancel$1(),defaults$5=defaults_1$1,CanceledError$1=requireCanceledError$1();function throwIfCancellationRequested$1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError$1}var dispatchRequest$3=function(e){throwIfCancellationRequested$1(e),e.headers=e.headers||{},e.data=transformData$2.call(e,e.data,e.headers,e.transformRequest),e.headers=utils$g.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),utils$g.forEach(["delete","get","head","post","put","patch","common"],function(o){delete e.headers[o]});var r=e.adapter||defaults$5.adapter;return r(e).then(function(o){return throwIfCancellationRequested$1(e),o.data=transformData$2.call(e,o.data,o.headers,e.transformResponse),o},function(o){return isCancel$2(o)||(throwIfCancellationRequested$1(e),o&&o.response&&(o.response.data=transformData$2.call(e,o.response.data,o.response.headers,e.transformResponse))),Promise.reject(o)})},utils$f=utils$o,mergeConfig$5=function(e,r){r=r||{};var n={};function o($,E){return utils$f.isPlainObject($)&&utils$f.isPlainObject(E)?utils$f.merge($,E):utils$f.isPlainObject(E)?utils$f.merge({},E):utils$f.isArray(E)?E.slice():E}function u($){if(utils$f.isUndefined(r[$])){if(!utils$f.isUndefined(e[$]))return o(void 0,e[$])}else return o(e[$],r[$])}function y($){if(!utils$f.isUndefined(r[$]))return o(void 0,r[$])}function h($){if(utils$f.isUndefined(r[$])){if(!utils$f.isUndefined(e[$]))return o(void 0,e[$])}else return o(void 0,r[$])}function g($){if($ in r)return o(e[$],r[$]);if($ in e)return o(void 0,e[$])}var m={url:y,method:y,data:y,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:g};return utils$f.forEach(Object.keys(e).concat(Object.keys(r)),function(E){var A=m[E]||u,B=A(E);utils$f.isUndefined(B)&&A!==g||(n[E]=B)}),n},data$1,hasRequiredData$1;function requireData$1(){return hasRequiredData$1||(hasRequiredData$1=1,data$1={version:"0.27.2"}),data$1}var VERSION$1=requireData$1().version,AxiosError$3=AxiosError_1$1,validators$3={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){validators$3[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var deprecatedWarnings$1={};validators$3.transitional=function(e,r,n){function o(u,y){return"[Axios v"+VERSION$1+"] Transitional option '"+u+"'"+y+(n?". "+n:"")}return function(u,y,h){if(e===!1)throw new AxiosError$3(o(y," has been removed"+(r?" in "+r:"")),AxiosError$3.ERR_DEPRECATED);return r&&!deprecatedWarnings$1[y]&&(deprecatedWarnings$1[y]=!0,console.warn(o(y," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(u,y,h):!0}};function assertOptions$1(t,e,r){if(typeof t!="object")throw new AxiosError$3("options must be an object",AxiosError$3.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),o=n.length;o-- >0;){var u=n[o],y=e[u];if(y){var h=t[u],g=h===void 0||y(h,u,t);if(g!==!0)throw new AxiosError$3("option "+u+" must be "+g,AxiosError$3.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new AxiosError$3("Unknown option "+u,AxiosError$3.ERR_BAD_OPTION)}}var validator$3={assertOptions:assertOptions$1,validators:validators$3},utils$e=utils$o,buildURL$2=buildURL$3,InterceptorManager$2=InterceptorManager_1$1,dispatchRequest$2=dispatchRequest$3,mergeConfig$4=mergeConfig$5,buildFullPath$2=buildFullPath$3,validator$2=validator$3,validators$2=validator$2.validators;function Axios$3(t){this.defaults=t,this.interceptors={request:new InterceptorManager$2,response:new InterceptorManager$2}}Axios$3.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=mergeConfig$4(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&validator$2.assertOptions(n,{silentJSONParsing:validators$2.transitional(validators$2.boolean),forcedJSONParsing:validators$2.transitional(validators$2.boolean),clarifyTimeoutError:validators$2.transitional(validators$2.boolean)},!1);var o=[],u=!0;this.interceptors.request.forEach(function(B){typeof B.runWhen=="function"&&B.runWhen(r)===!1||(u=u&&B.synchronous,o.unshift(B.fulfilled,B.rejected))});var y=[];this.interceptors.response.forEach(function(B){y.push(B.fulfilled,B.rejected)});var h;if(!u){var g=[dispatchRequest$2,void 0];for(Array.prototype.unshift.apply(g,o),g=g.concat(y),h=Promise.resolve(r);g.length;)h=h.then(g.shift(),g.shift());return h}for(var m=r;o.length;){var $=o.shift(),E=o.shift();try{m=$(m)}catch(A){E(A);break}}try{h=dispatchRequest$2(m)}catch(A){return Promise.reject(A)}for(;y.length;)h=h.then(y.shift(),y.shift());return h};Axios$3.prototype.getUri=function(e){e=mergeConfig$4(this.defaults,e);var r=buildFullPath$2(e.baseURL,e.url);return buildURL$2(r,e.params,e.paramsSerializer)};utils$e.forEach(["delete","get","head","options"],function(e){Axios$3.prototype[e]=function(r,n){return this.request(mergeConfig$4(n||{},{method:e,url:r,data:(n||{}).data}))}});utils$e.forEach(["post","put","patch"],function(e){function r(n){return function(u,y,h){return this.request(mergeConfig$4(h||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:u,data:y}))}}Axios$3.prototype[e]=r(),Axios$3.prototype[e+"Form"]=r(!0)});var Axios_1$1=Axios$3,CancelToken_1$1,hasRequiredCancelToken$1;function requireCancelToken$1(){if(hasRequiredCancelToken$1)return CancelToken_1$1;hasRequiredCancelToken$1=1;var t=requireCanceledError$1();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(y){n=y});var o=this;this.promise.then(function(u){if(!!o._listeners){var y,h=o._listeners.length;for(y=0;y<h;y++)o._listeners[y](u);o._listeners=null}}),this.promise.then=function(u){var y,h=new Promise(function(g){o.subscribe(g),y=g}).then(u);return h.cancel=function(){o.unsubscribe(y)},h},r(function(y){o.reason||(o.reason=new t(y),n(o.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(!!this._listeners){var o=this._listeners.indexOf(n);o!==-1&&this._listeners.splice(o,1)}},e.source=function(){var n,o=new e(function(y){n=y});return{token:o,cancel:n}},CancelToken_1$1=e,CancelToken_1$1}var spread$1,hasRequiredSpread$1;function requireSpread$1(){return hasRequiredSpread$1||(hasRequiredSpread$1=1,spread$1=function(e){return function(n){return e.apply(null,n)}}),spread$1}var isAxiosError$1,hasRequiredIsAxiosError$1;function requireIsAxiosError$1(){if(hasRequiredIsAxiosError$1)return isAxiosError$1;hasRequiredIsAxiosError$1=1;var t=utils$o;return isAxiosError$1=function(r){return t.isObject(r)&&r.isAxiosError===!0},isAxiosError$1}var utils$d=utils$o,bind$3=bind$5,Axios$2=Axios_1$1,mergeConfig$3=mergeConfig$5,defaults$4=defaults_1$1;function createInstance$1(t){var e=new Axios$2(t),r=bind$3(Axios$2.prototype.request,e);return utils$d.extend(r,Axios$2.prototype,e),utils$d.extend(r,e),r.create=function(o){return createInstance$1(mergeConfig$3(t,o))},r}var axios$4=createInstance$1(defaults$4);axios$4.Axios=Axios$2;axios$4.CanceledError=requireCanceledError$1();axios$4.CancelToken=requireCancelToken$1();axios$4.isCancel=requireIsCancel$1();axios$4.VERSION=requireData$1().version;axios$4.toFormData=toFormData_1$1;axios$4.AxiosError=AxiosError_1$1;axios$4.Cancel=axios$4.CanceledError;axios$4.all=function(e){return Promise.all(e)};axios$4.spread=requireSpread$1();axios$4.isAxiosError=requireIsAxiosError$1();axios$5.exports=axios$4;axios$5.exports.default=axios$4;(function(t){t.exports=axios$5.exports})(axios$6);Object.defineProperty(api,"__esModule",{value:!0});const axios_1=axios$6.exports;class Api{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){const r=e.protocol||"http",n=e.port||(r==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:r,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log,network:e.network}}async get(e,r){try{return await this.request().get(e,r)}catch(n){if(n.response&&n.response.status)return n.response;throw n}}async post(e,r,n){try{return await this.request().post(e,r,n)}catch(o){if(o.response&&o.response.status)return o.response;throw o}}request(){const e={};this.config.network&&(e["x-network"]=this.config.network);let r=axios_1.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:1024*1024*512,headers:e});return this.config.logging&&(r.interceptors.request.use(n=>(this.config.logger(`Requesting: ${n.baseURL}/${n.url}`),n)),r.interceptors.response.use(n=>(this.config.logger(`Response:   ${n.config.url} - ${n.status}`),n))),r}}api.default=Api;var webcryptoDriver={},utils$c={},base64Js$1={};base64Js$1.byteLength=byteLength$1;base64Js$1.toByteArray=toByteArray$1;base64Js$1.fromByteArray=fromByteArray$1;var lookup$2=[],revLookup$1=[],Arr$1=typeof Uint8Array<"u"?Uint8Array:Array,code$7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len$1=code$7.length;i$1<len$1;++i$1)lookup$2[i$1]=code$7[i$1],revLookup$1[code$7.charCodeAt(i$1)]=i$1;revLookup$1["-".charCodeAt(0)]=62;revLookup$1["_".charCodeAt(0)]=63;function getLens$1(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function byteLength$1(t){var e=getLens$1(t),r=e[0],n=e[1];return(r+n)*3/4-n}function _byteLength$1(t,e,r){return(e+r)*3/4-r}function toByteArray$1(t){var e,r=getLens$1(t),n=r[0],o=r[1],u=new Arr$1(_byteLength$1(t,n,o)),y=0,h=o>0?n-4:n,g;for(g=0;g<h;g+=4)e=revLookup$1[t.charCodeAt(g)]<<18|revLookup$1[t.charCodeAt(g+1)]<<12|revLookup$1[t.charCodeAt(g+2)]<<6|revLookup$1[t.charCodeAt(g+3)],u[y++]=e>>16&255,u[y++]=e>>8&255,u[y++]=e&255;return o===2&&(e=revLookup$1[t.charCodeAt(g)]<<2|revLookup$1[t.charCodeAt(g+1)]>>4,u[y++]=e&255),o===1&&(e=revLookup$1[t.charCodeAt(g)]<<10|revLookup$1[t.charCodeAt(g+1)]<<4|revLookup$1[t.charCodeAt(g+2)]>>2,u[y++]=e>>8&255,u[y++]=e&255),u}function tripletToBase64$1(t){return lookup$2[t>>18&63]+lookup$2[t>>12&63]+lookup$2[t>>6&63]+lookup$2[t&63]}function encodeChunk$1(t,e,r){for(var n,o=[],u=e;u<r;u+=3)n=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(t[u+2]&255),o.push(tripletToBase64$1(n));return o.join("")}function fromByteArray$1(t){for(var e,r=t.length,n=r%3,o=[],u=16383,y=0,h=r-n;y<h;y+=u)o.push(encodeChunk$1(t,y,y+u>h?h:y+u));return n===1?(e=t[r-1],o.push(lookup$2[e>>2]+lookup$2[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],o.push(lookup$2[e>>10]+lookup$2[e>>4&63]+lookup$2[e<<2&63]+"=")),o.join("")}var util$5={},types={},shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;e[r]=o;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var u=Object.getOwnPropertySymbols(e);if(u.length!==1||u[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var y=Object.getOwnPropertyDescriptor(e,r);if(y.value!==o||y.enumerable!==!0)return!1}return!0}),shams$1}var shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var t=requireShams$1();return shams=function(){return t()&&!!Symbol.toStringTag},shams}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var t=typeof Symbol<"u"&&Symbol,e=requireShams$1();return hasSymbols=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},hasSymbols}var implementation,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var t="Function.prototype.bind called on incompatible ",e=Array.prototype.slice,r=Object.prototype.toString,n="[object Function]";return implementation=function(u){var y=this;if(typeof y!="function"||r.call(y)!==n)throw new TypeError(t+y);for(var h=e.call(arguments,1),g,m=function(){if(this instanceof g){var T=y.apply(this,h.concat(e.call(arguments)));return Object(T)===T?T:this}else return y.apply(u,h.concat(e.call(arguments)))},$=Math.max(0,y.length-h.length),E=[],A=0;A<$;A++)E.push("$"+A);if(g=Function("binder","return function ("+E.join(",")+"){ return binder.apply(this,arguments); }")(m),y.prototype){var B=function(){};B.prototype=y.prototype,g.prototype=new B,B.prototype=null}return g},implementation}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var t=requireImplementation();return functionBind=Function.prototype.bind||t,functionBind}var src$4,hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src$4;hasRequiredSrc=1;var t=requireFunctionBind();return src$4=t.call(Function.call,Object.prototype.hasOwnProperty),src$4}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var t,e=SyntaxError,r=Function,n=TypeError,o=function(le){try{return r('"use strict"; return ('+le+").constructor;")()}catch{}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch{u=null}var y=function(){throw new n},h=u?function(){try{return arguments.callee,y}catch{try{return u(arguments,"callee").get}catch{return y}}}():y,g=requireHasSymbols()(),m=Object.getPrototypeOf||function(le){return le.__proto__},$={},E=typeof Uint8Array>"u"?t:m(Uint8Array),A={"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":g?m([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":$,"%AsyncGenerator%":$,"%AsyncGeneratorFunction%":$,"%AsyncIteratorPrototype%":$,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":r,"%GeneratorFunction%":$,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g?m(m([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!g?t:m(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!g?t:m(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g?m(""[Symbol.iterator]()):t,"%Symbol%":g?Symbol:t,"%SyntaxError%":e,"%ThrowTypeError%":h,"%TypedArray%":E,"%TypeError%":n,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet},B=function le(ye){var Ee;if(ye==="%AsyncFunction%")Ee=o("async function () {}");else if(ye==="%GeneratorFunction%")Ee=o("function* () {}");else if(ye==="%AsyncGeneratorFunction%")Ee=o("async function* () {}");else if(ye==="%AsyncGenerator%"){var be=le("%AsyncGeneratorFunction%");be&&(Ee=be.prototype)}else if(ye==="%AsyncIteratorPrototype%"){var De=le("%AsyncGenerator%");De&&(Ee=m(De.prototype))}return A[ye]=Ee,Ee},T={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},k=requireFunctionBind(),U=requireSrc(),W=k.call(Function.call,Array.prototype.concat),te=k.call(Function.apply,Array.prototype.splice),X=k.call(Function.call,String.prototype.replace),N=k.call(Function.call,String.prototype.slice),O=k.call(Function.call,RegExp.prototype.exec),Z=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,j=/\\(\\)?/g,K=function(ye){var Ee=N(ye,0,1),be=N(ye,-1);if(Ee==="%"&&be!=="%")throw new e("invalid intrinsic syntax, expected closing `%`");if(be==="%"&&Ee!=="%")throw new e("invalid intrinsic syntax, expected opening `%`");var De=[];return X(ye,Z,function(We,Qe,Je,Te){De[De.length]=Je?X(Te,j,"$1"):Qe||We}),De},se=function(ye,Ee){var be=ye,De;if(U(T,be)&&(De=T[be],be="%"+De[0]+"%"),U(A,be)){var We=A[be];if(We===$&&(We=B(be)),typeof We>"u"&&!Ee)throw new n("intrinsic "+ye+" exists, but is not available. Please file an issue!");return{alias:De,name:be,value:We}}throw new e("intrinsic "+ye+" does not exist!")};return getIntrinsic=function(ye,Ee){if(typeof ye!="string"||ye.length===0)throw new n("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Ee!="boolean")throw new n('"allowMissing" argument must be a boolean');if(O(/^%?[^%]*%?$/,ye)===null)throw new e("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var be=K(ye),De=be.length>0?be[0]:"",We=se("%"+De+"%",Ee),Qe=We.name,Je=We.value,Te=!1,rt=We.alias;rt&&(De=rt[0],te(be,W([0,1],rt)));for(var it=1,qe=!0;it<be.length;it+=1){var re=be[it],we=N(re,0,1),ne=N(re,-1);if((we==='"'||we==="'"||we==="`"||ne==='"'||ne==="'"||ne==="`")&&we!==ne)throw new e("property names with quotes must have matching quotes");if((re==="constructor"||!qe)&&(Te=!0),De+="."+re,Qe="%"+De+"%",U(A,Qe))Je=A[Qe];else if(Je!=null){if(!(re in Je)){if(!Ee)throw new n("base intrinsic for "+ye+" exists, but the property is not available.");return}if(u&&it+1>=be.length){var He=u(Je,re);qe=!!He,qe&&"get"in He&&!("originalValue"in He.get)?Je=He.get:Je=Je[re]}else qe=U(Je,re),Je=Je[re];qe&&!Te&&(A[Qe]=Je)}}return Je},getIntrinsic}var callBind={exports:{}},hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,function(t){var e=requireFunctionBind(),r=requireGetIntrinsic(),n=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),u=r("%Reflect.apply%",!0)||e.call(o,n),y=r("%Object.getOwnPropertyDescriptor%",!0),h=r("%Object.defineProperty%",!0),g=r("%Math.max%");if(h)try{h({},"a",{value:1})}catch{h=null}t.exports=function(E){var A=u(e,o,arguments);if(y&&h){var B=y(A,"length");B.configurable&&h(A,"length",{value:1+g(0,E.length-(arguments.length-1))})}return A};var m=function(){return u(e,n,arguments)};h?h(t.exports,"apply",{value:m}):t.exports.apply=m}(callBind)),callBind.exports}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var t=requireGetIntrinsic(),e=requireCallBind(),r=e(t("String.prototype.indexOf"));return callBound=function(o,u){var y=t(o,!!u);return typeof y=="function"&&r(o,".prototype.")>-1?e(y):y},callBound}var isArguments,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var t=requireShams()(),e=requireCallBound(),r=e("Object.prototype.toString"),n=function(h){return t&&h&&typeof h=="object"&&Symbol.toStringTag in h?!1:r(h)==="[object Arguments]"},o=function(h){return n(h)?!0:h!==null&&typeof h=="object"&&typeof h.length=="number"&&h.length>=0&&r(h)!=="[object Array]"&&r(h.callee)==="[object Function]"},u=function(){return n(arguments)}();return n.isLegacyArguments=o,isArguments=u?n:o,isArguments}var isGeneratorFunction,hasRequiredIsGeneratorFunction;function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var t=Object.prototype.toString,e=Function.prototype.toString,r=/^\s*(?:function)?\*/,n=requireShams()(),o=Object.getPrototypeOf,u=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},y;return isGeneratorFunction=function(g){if(typeof g!="function")return!1;if(r.test(e.call(g)))return!0;if(!n){var m=t.call(g);return m==="[object GeneratorFunction]"}if(!o)return!1;if(typeof y>"u"){var $=u();y=$?o($):!1}return o(g)===y},isGeneratorFunction}var isCallable,hasRequiredIsCallable;function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,r,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{r=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,r)}catch(te){te!==n&&(e=null)}else e=null;var o=/^\s*class\b/,u=function(X){try{var N=t.call(X);return o.test(N)}catch{return!1}},y=function(X){try{return u(X)?!1:(t.call(X),!0)}catch{return!1}},h=Object.prototype.toString,g="[object Object]",m="[object Function]",$="[object GeneratorFunction]",E="[object HTMLAllCollection]",A="[object HTML document.all class]",B="[object HTMLCollection]",T=typeof Symbol=="function"&&!!Symbol.toStringTag,k=!(0 in[,]),U=function(){return!1};if(typeof document=="object"){var W=document.all;h.call(W)===h.call(document.all)&&(U=function(X){if((k||!X)&&(typeof X>"u"||typeof X=="object"))try{var N=h.call(X);return(N===E||N===A||N===B||N===g)&&X("")==null}catch{}return!1})}return isCallable=e?function(X){if(U(X))return!0;if(!X||typeof X!="function"&&typeof X!="object")return!1;try{e(X,null,r)}catch(N){if(N!==n)return!1}return!u(X)&&y(X)}:function(X){if(U(X))return!0;if(!X||typeof X!="function"&&typeof X!="object")return!1;if(T)return y(X);if(u(X))return!1;var N=h.call(X);return N!==m&&N!==$&&!/^\[object HTML/.test(N)?!1:y(X)},isCallable}var forEach_1,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach_1;hasRequiredForEach=1;var t=requireIsCallable(),e=Object.prototype.toString,r=Object.prototype.hasOwnProperty,n=function(g,m,$){for(var E=0,A=g.length;E<A;E++)r.call(g,E)&&($==null?m(g[E],E,g):m.call($,g[E],E,g))},o=function(g,m,$){for(var E=0,A=g.length;E<A;E++)$==null?m(g.charAt(E),E,g):m.call($,g.charAt(E),E,g)},u=function(g,m,$){for(var E in g)r.call(g,E)&&($==null?m(g[E],E,g):m.call($,g[E],E,g))},y=function(g,m,$){if(!t(m))throw new TypeError("iterator must be a function");var E;arguments.length>=3&&(E=$),e.call(g)==="[object Array]"?n(g,m,E):typeof g=="string"?o(g,m,E):u(g,m,E)};return forEach_1=y,forEach_1}var availableTypedArrays,hasRequiredAvailableTypedArrays;function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var t=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],e=typeof globalThis>"u"?commonjsGlobal:globalThis;return availableTypedArrays=function(){for(var n=[],o=0;o<t.length;o++)typeof e[t[o]]=="function"&&(n[n.length]=t[o]);return n},availableTypedArrays}var getOwnPropertyDescriptor,hasRequiredGetOwnPropertyDescriptor;function requireGetOwnPropertyDescriptor(){if(hasRequiredGetOwnPropertyDescriptor)return getOwnPropertyDescriptor;hasRequiredGetOwnPropertyDescriptor=1;var t=requireGetIntrinsic(),e=t("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return getOwnPropertyDescriptor=e,getOwnPropertyDescriptor}var isTypedArray$1,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray$1;hasRequiredIsTypedArray=1;var t=requireForEach(),e=requireAvailableTypedArrays(),r=requireCallBound(),n=r("Object.prototype.toString"),o=requireShams()(),u=typeof globalThis>"u"?commonjsGlobal:globalThis,y=e(),h=r("Array.prototype.indexOf",!0)||function(T,k){for(var U=0;U<T.length;U+=1)if(T[U]===k)return U;return-1},g=r("String.prototype.slice"),m={},$=requireGetOwnPropertyDescriptor(),E=Object.getPrototypeOf;o&&$&&E&&t(y,function(B){var T=new u[B];if(Symbol.toStringTag in T){var k=E(T),U=$(k,Symbol.toStringTag);if(!U){var W=E(k);U=$(W,Symbol.toStringTag)}m[B]=U.get}});var A=function(T){var k=!1;return t(m,function(U,W){if(!k)try{k=U.call(T)===W}catch{}}),k};return isTypedArray$1=function(T){if(!T||typeof T!="object")return!1;if(!o||!(Symbol.toStringTag in T)){var k=g(n(T),8,-1);return h(y,k)>-1}return $?A(T):!1},isTypedArray$1}var whichTypedArray,hasRequiredWhichTypedArray;function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var t=requireForEach(),e=requireAvailableTypedArrays(),r=requireCallBound(),n=r("Object.prototype.toString"),o=requireShams()(),u=typeof globalThis>"u"?commonjsGlobal:globalThis,y=e(),h=r("String.prototype.slice"),g={},m=requireGetOwnPropertyDescriptor(),$=Object.getPrototypeOf;o&&m&&$&&t(y,function(B){if(typeof u[B]=="function"){var T=new u[B];if(Symbol.toStringTag in T){var k=$(T),U=m(k,Symbol.toStringTag);if(!U){var W=$(k);U=m(W,Symbol.toStringTag)}g[B]=U.get}}});var E=function(T){var k=!1;return t(g,function(U,W){if(!k)try{var te=U.call(T);te===W&&(k=te)}catch{}}),k},A=requireIsTypedArray();return whichTypedArray=function(T){return A(T)?!o||!(Symbol.toStringTag in T)?h(n(T),8,-1):E(T):!1},whichTypedArray}var hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(t){var e=requireIsArguments(),r=requireIsGeneratorFunction(),n=requireWhichTypedArray(),o=requireIsTypedArray();function u(q){return q.call.bind(q)}var y=typeof BigInt<"u",h=typeof Symbol<"u",g=u(Object.prototype.toString),m=u(Number.prototype.valueOf),$=u(String.prototype.valueOf),E=u(Boolean.prototype.valueOf);if(y)var A=u(BigInt.prototype.valueOf);if(h)var B=u(Symbol.prototype.valueOf);function T(q,he){if(typeof q!="object")return!1;try{return he(q),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=o;function k(q){return typeof Promise<"u"&&q instanceof Promise||q!==null&&typeof q=="object"&&typeof q.then=="function"&&typeof q.catch=="function"}t.isPromise=k;function U(q){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(q):o(q)||we(q)}t.isArrayBufferView=U;function W(q){return n(q)==="Uint8Array"}t.isUint8Array=W;function te(q){return n(q)==="Uint8ClampedArray"}t.isUint8ClampedArray=te;function X(q){return n(q)==="Uint16Array"}t.isUint16Array=X;function N(q){return n(q)==="Uint32Array"}t.isUint32Array=N;function O(q){return n(q)==="Int8Array"}t.isInt8Array=O;function Z(q){return n(q)==="Int16Array"}t.isInt16Array=Z;function j(q){return n(q)==="Int32Array"}t.isInt32Array=j;function K(q){return n(q)==="Float32Array"}t.isFloat32Array=K;function se(q){return n(q)==="Float64Array"}t.isFloat64Array=se;function le(q){return n(q)==="BigInt64Array"}t.isBigInt64Array=le;function ye(q){return n(q)==="BigUint64Array"}t.isBigUint64Array=ye;function Ee(q){return g(q)==="[object Map]"}Ee.working=typeof Map<"u"&&Ee(new Map);function be(q){return typeof Map>"u"?!1:Ee.working?Ee(q):q instanceof Map}t.isMap=be;function De(q){return g(q)==="[object Set]"}De.working=typeof Set<"u"&&De(new Set);function We(q){return typeof Set>"u"?!1:De.working?De(q):q instanceof Set}t.isSet=We;function Qe(q){return g(q)==="[object WeakMap]"}Qe.working=typeof WeakMap<"u"&&Qe(new WeakMap);function Je(q){return typeof WeakMap>"u"?!1:Qe.working?Qe(q):q instanceof WeakMap}t.isWeakMap=Je;function Te(q){return g(q)==="[object WeakSet]"}Te.working=typeof WeakSet<"u"&&Te(new WeakSet);function rt(q){return Te(q)}t.isWeakSet=rt;function it(q){return g(q)==="[object ArrayBuffer]"}it.working=typeof ArrayBuffer<"u"&&it(new ArrayBuffer);function qe(q){return typeof ArrayBuffer>"u"?!1:it.working?it(q):q instanceof ArrayBuffer}t.isArrayBuffer=qe;function re(q){return g(q)==="[object DataView]"}re.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&re(new DataView(new ArrayBuffer(1),0,1));function we(q){return typeof DataView>"u"?!1:re.working?re(q):q instanceof DataView}t.isDataView=we;var ne=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function He(q){return g(q)==="[object SharedArrayBuffer]"}function et(q){return typeof ne>"u"?!1:(typeof He.working>"u"&&(He.working=He(new ne)),He.working?He(q):q instanceof ne)}t.isSharedArrayBuffer=et;function tt(q){return g(q)==="[object AsyncFunction]"}t.isAsyncFunction=tt;function Ve(q){return g(q)==="[object Map Iterator]"}t.isMapIterator=Ve;function Ye(q){return g(q)==="[object Set Iterator]"}t.isSetIterator=Ye;function P(q){return g(q)==="[object Generator]"}t.isGeneratorObject=P;function L(q){return g(q)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=L;function ee(q){return T(q,m)}t.isNumberObject=ee;function ae(q){return T(q,$)}t.isStringObject=ae;function ie(q){return T(q,E)}t.isBooleanObject=ie;function de(q){return y&&T(q,A)}t.isBigIntObject=de;function ge(q){return h&&T(q,B)}t.isSymbolObject=ge;function oe(q){return ee(q)||ae(q)||ie(q)||de(q)||ge(q)}t.isBoxedPrimitive=oe;function ue(q){return typeof Uint8Array<"u"&&(qe(q)||et(q))}t.isAnyArrayBuffer=ue,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(q){Object.defineProperty(t,q,{enumerable:!1,value:function(){throw new Error(q+" is not supported in userland")}})})}(types)),types}var isBufferBrowser,hasRequiredIsBufferBrowser;function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser||(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),isBufferBrowser}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}),inherits_browser.exports}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(t){var e=Object.getOwnPropertyDescriptors||function(we){for(var ne=Object.keys(we),He={},et=0;et<ne.length;et++)He[ne[et]]=Object.getOwnPropertyDescriptor(we,ne[et]);return He},r=/%[sdj%]/g;t.format=function(re){if(!O(re)){for(var we=[],ne=0;ne<arguments.length;ne++)we.push(y(arguments[ne]));return we.join(" ")}for(var ne=1,He=arguments,et=He.length,tt=String(re).replace(r,function(Ye){if(Ye==="%%")return"%";if(ne>=et)return Ye;switch(Ye){case"%s":return String(He[ne++]);case"%d":return Number(He[ne++]);case"%j":try{return JSON.stringify(He[ne++])}catch{return"[Circular]"}default:return Ye}}),Ve=He[ne];ne<et;Ve=He[++ne])te(Ve)||!se(Ve)?tt+=" "+Ve:tt+=" "+y(Ve);return tt},t.deprecate=function(re,we){if(typeof process<"u"&&process.noDeprecation===!0)return re;if(typeof process>"u")return function(){return t.deprecate(re,we).apply(this,arguments)};var ne=!1;function He(){if(!ne){if(process.throwDeprecation)throw new Error(we);process.traceDeprecation?console.trace(we):console.error(we),ne=!0}return re.apply(this,arguments)}return He};var n={},o=/^$/;if(process.env.NODE_DEBUG){var u=process.env.NODE_DEBUG;u=u.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+u+"$","i")}t.debuglog=function(re){if(re=re.toUpperCase(),!n[re])if(o.test(re)){var we=process.pid;n[re]=function(){var ne=t.format.apply(t,arguments);console.error("%s %d: %s",re,we,ne)}}else n[re]=function(){};return n[re]};function y(re,we){var ne={seen:[],stylize:g};return arguments.length>=3&&(ne.depth=arguments[2]),arguments.length>=4&&(ne.colors=arguments[3]),W(we)?ne.showHidden=we:we&&t._extend(ne,we),j(ne.showHidden)&&(ne.showHidden=!1),j(ne.depth)&&(ne.depth=2),j(ne.colors)&&(ne.colors=!1),j(ne.customInspect)&&(ne.customInspect=!0),ne.colors&&(ne.stylize=h),$(ne,re,ne.depth)}t.inspect=y,y.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},y.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function h(re,we){var ne=y.styles[we];return ne?"\x1B["+y.colors[ne][0]+"m"+re+"\x1B["+y.colors[ne][1]+"m":re}function g(re,we){return re}function m(re){var we={};return re.forEach(function(ne,He){we[ne]=!0}),we}function $(re,we,ne){if(re.customInspect&&we&&Ee(we.inspect)&&we.inspect!==t.inspect&&!(we.constructor&&we.constructor.prototype===we)){var He=we.inspect(ne,re);return O(He)||(He=$(re,He,ne)),He}var et=E(re,we);if(et)return et;var tt=Object.keys(we),Ve=m(tt);if(re.showHidden&&(tt=Object.getOwnPropertyNames(we)),ye(we)&&(tt.indexOf("message")>=0||tt.indexOf("description")>=0))return A(we);if(tt.length===0){if(Ee(we)){var Ye=we.name?": "+we.name:"";return re.stylize("[Function"+Ye+"]","special")}if(K(we))return re.stylize(RegExp.prototype.toString.call(we),"regexp");if(le(we))return re.stylize(Date.prototype.toString.call(we),"date");if(ye(we))return A(we)}var P="",L=!1,ee=["{","}"];if(U(we)&&(L=!0,ee=["[","]"]),Ee(we)){var ae=we.name?": "+we.name:"";P=" [Function"+ae+"]"}if(K(we)&&(P=" "+RegExp.prototype.toString.call(we)),le(we)&&(P=" "+Date.prototype.toUTCString.call(we)),ye(we)&&(P=" "+A(we)),tt.length===0&&(!L||we.length==0))return ee[0]+P+ee[1];if(ne<0)return K(we)?re.stylize(RegExp.prototype.toString.call(we),"regexp"):re.stylize("[Object]","special");re.seen.push(we);var ie;return L?ie=B(re,we,ne,Ve,tt):ie=tt.map(function(de){return T(re,we,ne,Ve,de,L)}),re.seen.pop(),k(ie,P,ee)}function E(re,we){if(j(we))return re.stylize("undefined","undefined");if(O(we)){var ne="'"+JSON.stringify(we).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return re.stylize(ne,"string")}if(N(we))return re.stylize(""+we,"number");if(W(we))return re.stylize(""+we,"boolean");if(te(we))return re.stylize("null","null")}function A(re){return"["+Error.prototype.toString.call(re)+"]"}function B(re,we,ne,He,et){for(var tt=[],Ve=0,Ye=we.length;Ve<Ye;++Ve)Te(we,String(Ve))?tt.push(T(re,we,ne,He,String(Ve),!0)):tt.push("");return et.forEach(function(P){P.match(/^\d+$/)||tt.push(T(re,we,ne,He,P,!0))}),tt}function T(re,we,ne,He,et,tt){var Ve,Ye,P;if(P=Object.getOwnPropertyDescriptor(we,et)||{value:we[et]},P.get?P.set?Ye=re.stylize("[Getter/Setter]","special"):Ye=re.stylize("[Getter]","special"):P.set&&(Ye=re.stylize("[Setter]","special")),Te(He,et)||(Ve="["+et+"]"),Ye||(re.seen.indexOf(P.value)<0?(te(ne)?Ye=$(re,P.value,null):Ye=$(re,P.value,ne-1),Ye.indexOf(`
`)>-1&&(tt?Ye=Ye.split(`
`).map(function(L){return"  "+L}).join(`
`).slice(2):Ye=`
`+Ye.split(`
`).map(function(L){return"   "+L}).join(`
`))):Ye=re.stylize("[Circular]","special")),j(Ve)){if(tt&&et.match(/^\d+$/))return Ye;Ve=JSON.stringify(""+et),Ve.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Ve=Ve.slice(1,-1),Ve=re.stylize(Ve,"name")):(Ve=Ve.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Ve=re.stylize(Ve,"string"))}return Ve+": "+Ye}function k(re,we,ne){var He=re.reduce(function(et,tt){return tt.indexOf(`
`)>=0,et+tt.replace(/\u001b\[\d\d?m/g,"").length+1},0);return He>60?ne[0]+(we===""?"":we+`
 `)+" "+re.join(`,
  `)+" "+ne[1]:ne[0]+we+" "+re.join(", ")+" "+ne[1]}t.types=requireTypes();function U(re){return Array.isArray(re)}t.isArray=U;function W(re){return typeof re=="boolean"}t.isBoolean=W;function te(re){return re===null}t.isNull=te;function X(re){return re==null}t.isNullOrUndefined=X;function N(re){return typeof re=="number"}t.isNumber=N;function O(re){return typeof re=="string"}t.isString=O;function Z(re){return typeof re=="symbol"}t.isSymbol=Z;function j(re){return re===void 0}t.isUndefined=j;function K(re){return se(re)&&De(re)==="[object RegExp]"}t.isRegExp=K,t.types.isRegExp=K;function se(re){return typeof re=="object"&&re!==null}t.isObject=se;function le(re){return se(re)&&De(re)==="[object Date]"}t.isDate=le,t.types.isDate=le;function ye(re){return se(re)&&(De(re)==="[object Error]"||re instanceof Error)}t.isError=ye,t.types.isNativeError=ye;function Ee(re){return typeof re=="function"}t.isFunction=Ee;function be(re){return re===null||typeof re=="boolean"||typeof re=="number"||typeof re=="string"||typeof re=="symbol"||typeof re>"u"}t.isPrimitive=be,t.isBuffer=requireIsBufferBrowser();function De(re){return Object.prototype.toString.call(re)}function We(re){return re<10?"0"+re.toString(10):re.toString(10)}var Qe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Je(){var re=new Date,we=[We(re.getHours()),We(re.getMinutes()),We(re.getSeconds())].join(":");return[re.getDate(),Qe[re.getMonth()],we].join(" ")}t.log=function(){console.log("%s - %s",Je(),t.format.apply(t,arguments))},t.inherits=requireInherits_browser(),t._extend=function(re,we){if(!we||!se(we))return re;for(var ne=Object.keys(we),He=ne.length;He--;)re[ne[He]]=we[ne[He]];return re};function Te(re,we){return Object.prototype.hasOwnProperty.call(re,we)}var rt=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(we){if(typeof we!="function")throw new TypeError('The "original" argument must be of type Function');if(rt&&we[rt]){var ne=we[rt];if(typeof ne!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ne,rt,{value:ne,enumerable:!1,writable:!1,configurable:!0}),ne}function ne(){for(var He,et,tt=new Promise(function(P,L){He=P,et=L}),Ve=[],Ye=0;Ye<arguments.length;Ye++)Ve.push(arguments[Ye]);Ve.push(function(P,L){P?et(P):He(L)});try{we.apply(this,Ve)}catch(P){et(P)}return tt}return Object.setPrototypeOf(ne,Object.getPrototypeOf(we)),rt&&Object.defineProperty(ne,rt,{value:ne,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ne,e(we))},t.promisify.custom=rt;function it(re,we){if(!re){var ne=new Error("Promise was rejected with a falsy value");ne.reason=re,re=ne}return we(re)}function qe(re){if(typeof re!="function")throw new TypeError('The "original" argument must be of type Function');function we(){for(var ne=[],He=0;He<arguments.length;He++)ne.push(arguments[He]);var et=ne.pop();if(typeof et!="function")throw new TypeError("The last argument must be of type Function");var tt=this,Ve=function(){return et.apply(tt,arguments)};re.apply(this,ne).then(function(Ye){process.nextTick(Ve.bind(null,null,Ye))},function(Ye){process.nextTick(it.bind(null,Ye,Ve))})}return Object.setPrototypeOf(we,Object.getPrototypeOf(re)),Object.defineProperties(we,e(re)),we}t.callbackify=qe}(util$5)),util$5}Object.defineProperty(utils$c,"__esModule",{value:!0});utils$c.b64UrlDecode=utils$c.b64UrlEncode=utils$c.bufferTob64Url=utils$c.bufferTob64=utils$c.b64UrlToBuffer=utils$c.stringToB64Url=utils$c.stringToBuffer=utils$c.bufferToString=utils$c.b64UrlToString=utils$c.concatBuffers=void 0;const B64js=base64Js$1;function concatBuffers(t){let e=0;for(let o=0;o<t.length;o++)e+=t[o].byteLength;let r=new Uint8Array(e),n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let o=1;o<t.length;o++)r.set(new Uint8Array(t[o]),n),n+=t[o].byteLength;return r}utils$c.concatBuffers=concatBuffers;function b64UrlToString(t){let e=b64UrlToBuffer(t);return bufferToString(e)}utils$c.b64UrlToString=b64UrlToString;function bufferToString(t){if(typeof TextDecoder>"u"){const e=requireUtil().TextDecoder;return new e("utf-8",{fatal:!0}).decode(t)}return new TextDecoder("utf-8",{fatal:!0}).decode(t)}utils$c.bufferToString=bufferToString;function stringToBuffer(t){if(typeof TextEncoder>"u"){const e=requireUtil().TextEncoder;return new e().encode(t)}return new TextEncoder().encode(t)}utils$c.stringToBuffer=stringToBuffer;function stringToB64Url(t){return bufferTob64Url(stringToBuffer(t))}utils$c.stringToB64Url=stringToB64Url;function b64UrlToBuffer(t){return new Uint8Array(B64js.toByteArray(b64UrlDecode(t)))}utils$c.b64UrlToBuffer=b64UrlToBuffer;function bufferTob64(t){return B64js.fromByteArray(new Uint8Array(t))}utils$c.bufferTob64=bufferTob64;function bufferTob64Url(t){return b64UrlEncode(bufferTob64(t))}utils$c.bufferTob64Url=bufferTob64Url;function b64UrlEncode(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}utils$c.b64UrlEncode=b64UrlEncode;function b64UrlDecode(t){t=t.replace(/\-/g,"+").replace(/\_/g,"/");let e;return t.length%4==0?e=0:e=4-t.length%4,t.concat("=".repeat(e))}utils$c.b64UrlDecode=b64UrlDecode;Object.defineProperty(webcryptoDriver,"__esModule",{value:!0});const ArweaveUtils$3=utils$c;class WebCryptoDriver{constructor(){if(this.keyLength=4096,this.publicExponent=65537,this.hashAlgorithm="sha256",!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let e=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),r=await this.driver.exportKey("jwk",e.privateKey);return{kty:r.kty,e:r.e,n:r.n,d:r.d,p:r.p,q:r.q,dp:r.dp,dq:r.dq,qi:r.qi}}async sign(e,r,{saltLength:n}={}){let o=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(e),r);return new Uint8Array(o)}async hash(e,r="SHA-256"){let n=await this.driver.digest(r,e);return new Uint8Array(n)}async verify(e,r,n){const o={kty:"RSA",e:"AQAB",n:e},u=await this.jwkToPublicCryptoKey(o),y=this.driver.verify({name:"RSA-PSS",saltLength:32},u,n,r),h=this.driver.verify({name:"RSA-PSS",saltLength:0},u,n,r);return y||h}async jwkToCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;const e=crypto==null?void 0:crypto.subtle;return e===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(n=>typeof e[n]=="function")}async encrypt(e,r,n){const o=await this.driver.importKey("raw",typeof r=="string"?ArweaveUtils$3.stringToBuffer(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),u=await this.driver.deriveKey({name:"PBKDF2",salt:n?ArweaveUtils$3.stringToBuffer(n):ArweaveUtils$3.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},o,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),y=new Uint8Array(16);crypto.getRandomValues(y);const h=await this.driver.encrypt({name:"AES-CBC",iv:y},u,e);return ArweaveUtils$3.concatBuffers([y,h])}async decrypt(e,r,n){const o=await this.driver.importKey("raw",typeof r=="string"?ArweaveUtils$3.stringToBuffer(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),u=await this.driver.deriveKey({name:"PBKDF2",salt:n?ArweaveUtils$3.stringToBuffer(n):ArweaveUtils$3.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},o,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),y=e.slice(0,16),h=await this.driver.decrypt({name:"AES-CBC",iv:y},u,e.slice(16));return ArweaveUtils$3.concatBuffers([h])}}webcryptoDriver.default=WebCryptoDriver;var network={};Object.defineProperty(network,"__esModule",{value:!0});class Network{constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}}network.default=Network;var transactions={},error={};Object.defineProperty(error,"__esModule",{value:!0});error.getError=void 0;class ArweaveError extends Error{constructor(e,r={}){r.message?super(r.message):super(),this.type=e,this.response=r.response}getType(){return this.type}}error.default=ArweaveError;function getError(t){let e=t.data;if(typeof t.data=="string")try{e=JSON.parse(t.data)}catch{}if(t.data instanceof ArrayBuffer||t.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:t.statusText||"unknown"}error.getError=getError;var transaction={},deepHash={},hasRequiredDeepHash;function requireDeepHash(){if(hasRequiredDeepHash)return deepHash;hasRequiredDeepHash=1,Object.defineProperty(deepHash,"__esModule",{value:!0});const t=requireCommon();async function e(n){if(Array.isArray(n)){const y=t.default.utils.concatBuffers([t.default.utils.stringToBuffer("list"),t.default.utils.stringToBuffer(n.length.toString())]);return await r(n,await t.default.crypto.hash(y,"SHA-384"))}const o=t.default.utils.concatBuffers([t.default.utils.stringToBuffer("blob"),t.default.utils.stringToBuffer(n.byteLength.toString())]),u=t.default.utils.concatBuffers([await t.default.crypto.hash(o,"SHA-384"),await t.default.crypto.hash(n,"SHA-384")]);return await t.default.crypto.hash(u,"SHA-384")}deepHash.default=e;async function r(n,o){if(n.length<1)return o;const u=t.default.utils.concatBuffers([o,await e(n[0])]),y=await t.default.crypto.hash(u,"SHA-384");return await r(n.slice(1),y)}return deepHash}var merkle={},hasRequiredMerkle;function requireMerkle(){return hasRequiredMerkle||(hasRequiredMerkle=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.debug=t.validatePath=t.arrayCompare=t.bufferToInt=t.intToBuffer=t.arrayFlatten=t.generateProofs=t.buildLayers=t.generateTransactionChunks=t.generateTree=t.computeRootHash=t.generateLeaves=t.chunkData=t.MIN_CHUNK_SIZE=t.MAX_CHUNK_SIZE=void 0;const e=requireCommon(),r=utils$c;t.MAX_CHUNK_SIZE=256*1024,t.MIN_CHUNK_SIZE=32*1024;const n=32,o=32;async function u(O){let Z=[],j=O,K=0;for(;j.byteLength>=t.MAX_CHUNK_SIZE;){let se=t.MAX_CHUNK_SIZE,le=j.byteLength-t.MAX_CHUNK_SIZE;le>0&&le<t.MIN_CHUNK_SIZE&&(se=Math.ceil(j.byteLength/2));const ye=j.slice(0,se),Ee=await e.default.crypto.hash(ye);K+=ye.byteLength,Z.push({dataHash:Ee,minByteRange:K-ye.byteLength,maxByteRange:K}),j=j.slice(se)}return Z.push({dataHash:await e.default.crypto.hash(j),minByteRange:K,maxByteRange:K+j.byteLength}),Z}t.chunkData=u;async function y(O){return Promise.all(O.map(async({dataHash:Z,minByteRange:j,maxByteRange:K})=>({type:"leaf",id:await k(await Promise.all([k(Z),k(U(K))])),dataHash:Z,minByteRange:j,maxByteRange:K})))}t.generateLeaves=y;async function h(O){return(await g(O)).id}t.computeRootHash=h;async function g(O){return await $(await y(await u(O)))}t.generateTree=g;async function m(O){const Z=await u(O),j=await y(Z),K=await $(j),se=await E(K),le=Z.slice(-1)[0];return le.maxByteRange-le.minByteRange===0&&(Z.splice(Z.length-1,1),se.splice(se.length-1,1)),{data_root:K.id,chunks:Z,proofs:se}}t.generateTransactionChunks=m;async function $(O,Z=0){if(O.length<2)return O[0];const j=[];for(let K=0;K<O.length;K+=2)j.push(await T(O[K],O[K+1]));return $(j,Z+1)}t.buildLayers=$;function E(O){const Z=A(O);return Array.isArray(Z)?B(Z):[Z]}t.generateProofs=E;function A(O,Z=new Uint8Array,j=0){if(O.type=="leaf")return{offset:O.maxByteRange-1,proof:(0,r.concatBuffers)([Z,O.dataHash,U(O.maxByteRange)])};if(O.type=="branch"){const K=(0,r.concatBuffers)([Z,O.leftChild.id,O.rightChild.id,U(O.byteRange)]);return[A(O.leftChild,K,j+1),A(O.rightChild,K,j+1)]}throw new Error("Unexpected node type")}function B(O){const Z=[];return O.forEach(j=>{Array.isArray(j)?Z.push(...B(j)):Z.push(j)}),Z}t.arrayFlatten=B;async function T(O,Z){return Z?{type:"branch",id:await k([await k(O.id),await k(Z.id),await k(U(O.maxByteRange))]),byteRange:O.maxByteRange,maxByteRange:Z.maxByteRange,leftChild:O,rightChild:Z}:O}async function k(O){return Array.isArray(O)&&(O=e.default.utils.concatBuffers(O)),new Uint8Array(await e.default.crypto.hash(O))}function U(O){const Z=new Uint8Array(n);for(var j=Z.length-1;j>=0;j--){var K=O%256;Z[j]=K,O=(O-K)/256}return Z}t.intToBuffer=U;function W(O){let Z=0;for(var j=0;j<O.length;j++)Z*=256,Z+=O[j];return Z}t.bufferToInt=W;const te=(O,Z)=>O.every((j,K)=>Z[K]===j);t.arrayCompare=te;async function X(O,Z,j,K,se){if(K<=0)return!1;if(Z>=K)return X(O,0,K-1,K,se);if(Z<0)return X(O,0,0,K,se);if(se.length==o+n){const Qe=se.slice(0,o),Je=se.slice(Qe.length,Qe.length+n),Te=await k([await k(Qe),await k(Je)]);return(0,t.arrayCompare)(O,Te)?{offset:K-1,leftBound:j,rightBound:K,chunkSize:K-j}:!1}const le=se.slice(0,o),ye=se.slice(le.length,le.length+o),Ee=se.slice(le.length+ye.length,le.length+ye.length+n),be=W(Ee),De=se.slice(le.length+ye.length+Ee.length),We=await k([await k(le),await k(ye),await k(Ee)]);return(0,t.arrayCompare)(O,We)?Z<be?await X(le,Z,j,Math.min(K,be),De):await X(ye,Z,Math.max(j,be),K,De):!1}t.validatePath=X;async function N(O,Z=""){if(O.byteLength<1)return Z;const j=O.slice(0,o),K=O.slice(j.length,j.length+o),se=O.slice(j.length+K.length,j.length+K.length+n),le=W(se),ye=O.slice(j.length+K.length+se.length),Ee=await k([await k(j),await k(K),await k(se)]),be=`${Z}
${JSON.stringify(Buffer.from(j))},${JSON.stringify(Buffer.from(K))},${le} => ${JSON.stringify(Ee)}`;return N(ye,be)}t.debug=N}(merkle)),merkle}var hasRequiredTransaction;function requireTransaction(){if(hasRequiredTransaction)return transaction;hasRequiredTransaction=1,Object.defineProperty(transaction,"__esModule",{value:!0}),transaction.Tag=void 0;const t=utils$c,e=requireDeepHash(),r=requireMerkle();class n{get(h,g){if(!Object.getOwnPropertyNames(this).includes(h))throw new Error(`Field "${h}" is not a property of the Arweave Transaction class.`);return this[h]instanceof Uint8Array?g&&g.decode&&g.string?t.bufferToString(this[h]):g&&g.decode&&!g.string?this[h]:t.bufferTob64Url(this[h]):g&&g.decode==!0?g&&g.string?t.b64UrlToString(this[h]):t.b64UrlToBuffer(this[h]):this[h]}}class o extends n{constructor(h,g,m=!1){super(),this.name=h,this.value=g}}transaction.Tag=o;class u extends n{constructor(h={}){super(),this.format=2,this.id="",this.last_tx="",this.owner="",this.tags=[],this.target="",this.quantity="0",this.data_size="0",this.data=new Uint8Array,this.data_root="",this.reward="0",this.signature="",Object.assign(this,h),typeof this.data=="string"&&(this.data=t.b64UrlToBuffer(this.data)),h.tags&&(this.tags=h.tags.map(g=>new o(g.name,g.value)))}addTag(h,g){this.tags.push(new o(t.stringToB64Url(h),t.stringToB64Url(g)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:t.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(h){this.owner=h}setSignature({id:h,owner:g,reward:m,tags:$,signature:E}){this.id=h,this.owner=g,m&&(this.reward=m),$&&(this.tags=$),this.signature=E}async prepareChunks(h){!this.chunks&&h.byteLength>0&&(this.chunks=await(0,r.generateTransactionChunks)(h),this.data_root=t.bufferTob64Url(this.chunks.data_root)),!this.chunks&&h.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(h,g){if(!this.chunks)throw new Error("Chunks have not been prepared");const m=this.chunks.proofs[h],$=this.chunks.chunks[h];return{data_root:this.data_root,data_size:this.data_size,data_path:t.bufferTob64Url(m.proof),offset:m.offset.toString(),chunk:t.bufferTob64Url(g.slice($.minByteRange,$.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let h=this.tags.reduce((m,$)=>t.concatBuffers([m,$.get("name",{decode:!0,string:!1}),$.get("value",{decode:!0,string:!1})]),new Uint8Array);return t.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),t.stringToBuffer(this.quantity),t.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),h]);case 2:this.data_root||await this.prepareChunks(this.data);const g=this.tags.map(m=>[m.get("name",{decode:!0,string:!1}),m.get("value",{decode:!0,string:!1})]);return await(0,e.default)([t.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),t.stringToBuffer(this.quantity),t.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),g,t.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}}return transaction.default=u,transaction}var transactionUploader={},hasRequiredTransactionUploader;function requireTransactionUploader(){if(hasRequiredTransactionUploader)return transactionUploader;hasRequiredTransactionUploader=1,Object.defineProperty(transactionUploader,"__esModule",{value:!0}),transactionUploader.TransactionUploader=void 0;const t=requireTransaction(),e=utils$c,r=error,n=requireMerkle(),o=1,u=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],y=1e3*40;class h{constructor(m,$){if(this.api=m,this.chunkIndex=0,this.txPosted=!1,this.lastRequestTimeEnd=0,this.totalErrors=0,this.lastResponseStatus=0,this.lastResponseError="",!$.id)throw new Error("Transaction is not signed");if(!$.chunks)throw new Error("Transaction chunks not prepared");this.data=$.data,this.transaction=new t.default(Object.assign({},$,{data:new Uint8Array(0)}))}get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}async uploadChunk(m){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let $=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+y-Date.now(),y);if($>0&&($=$-$*Math.random()*.3,await new Promise(T=>setTimeout(T,$))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}m&&(this.chunkIndex=m);const E=this.transaction.getChunk(m||this.chunkIndex,this.data);if(!await(0,n.validatePath)(this.transaction.chunks.data_root,parseInt(E.offset),0,parseInt(E.data_size),e.b64UrlToBuffer(E.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const B=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(T=>(console.error(T.message),{status:-1,data:{error:T.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=B.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=(0,r.getError)(B),u.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(m,$,E){if(!$||typeof $.chunkIndex!="number"||typeof $.transaction!="object")throw new Error("Serialized object does not match expected format.");var A=new t.default($.transaction);A.chunks||await A.prepareChunks(E);const B=new h(m,A);if(B.chunkIndex=$.chunkIndex,B.lastRequestTimeEnd=$.lastRequestTimeEnd,B.lastResponseError=$.lastResponseError,B.lastResponseStatus=$.lastResponseStatus,B.txPosted=$.txPosted,B.data=E,B.transaction.data_root!==$.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return B}static async fromTransactionId(m,$){const E=await m.get(`tx/${$}`);if(E.status!==200)throw new Error(`Tx ${$} not found: ${E.status}`);const A=E.data;return A.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:A}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=o){this.transaction.data=this.data;const E=await this.api.post("tx",this.transaction).catch(A=>(console.error(A),{status:-1,data:{error:A.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=E.status,this.transaction.data=new Uint8Array(0),E.status>=200&&E.status<300){this.txPosted=!0,this.chunkIndex=o;return}throw this.lastResponseError=(0,r.getError)(E),new Error(`Unable to upload transaction: ${E.status}, ${this.lastResponseError}`)}const $=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=$.status,!($.status>=200&&$.status<300))throw this.lastResponseError=(0,r.getError)($),new Error(`Unable to upload transaction: ${$.status}, ${this.lastResponseError}`);this.txPosted=!0}}return transactionUploader.TransactionUploader=h,transactionUploader}var hasRequiredTransactions;function requireTransactions(){if(hasRequiredTransactions)return transactions;hasRequiredTransactions=1;var t=commonjsGlobal&&commonjsGlobal.__await||function(h){return this instanceof t?(this.v=h,this):new t(h)},e=commonjsGlobal&&commonjsGlobal.__asyncGenerator||function(h,g,m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $=m.apply(h,g||[]),E,A=[];return E={},B("next"),B("throw"),B("return"),E[Symbol.asyncIterator]=function(){return this},E;function B(X){$[X]&&(E[X]=function(N){return new Promise(function(O,Z){A.push([X,N,O,Z])>1||T(X,N)})})}function T(X,N){try{k($[X](N))}catch(O){te(A[0][3],O)}}function k(X){X.value instanceof t?Promise.resolve(X.value.v).then(U,W):te(A[0][2],X)}function U(X){T("next",X)}function W(X){T("throw",X)}function te(X,N){X(N),A.shift(),A.length&&T(A[0][0],A[0][1])}};Object.defineProperty(transactions,"__esModule",{value:!0});const r=error,n=requireTransaction(),o=utils$c,u=requireTransactionUploader();class y{constructor(g,m,$){this.api=g,this.crypto=m,this.chunks=$}getTransactionAnchor(){return this.api.get("tx_anchor",{transformResponse:[]}).then(g=>g.data)}getPrice(g,m){let $=m?`price/${g}/${m}`:`price/${g}`;return this.api.get($,{transformResponse:[function(E){return E}]}).then(E=>E.data)}async get(g){const m=await this.api.get(`tx/${g}`);if(m.status==200){const $=parseInt(m.data.data_size);if(m.data.format>=2&&$>0&&$<=1024*1024*12){const E=await this.getData(g);return new n.default(Object.assign(Object.assign({},m.data),{data:E}))}return new n.default(Object.assign(Object.assign({},m.data),{format:m.data.format||1}))}throw m.status==404?new r.default("TX_NOT_FOUND"):m.status==410?new r.default("TX_FAILED"):new r.default("TX_INVALID")}fromRaw(g){return new n.default(g)}async search(g,m){return this.api.post("arql",{op:"equals",expr1:g,expr2:m}).then($=>$.data?$.data:[])}getStatus(g){return this.api.get(`tx/${g}/status`).then(m=>m.status==200?{status:200,confirmed:m.data}:{status:m.status,confirmed:null})}async getData(g,m){let $;try{$=await this.chunks.downloadChunkedData(g)}catch(E){console.error(`Error while trying to download chunked data for ${g}`),console.error(E)}if(!$){console.warn(`Falling back to gateway cache for ${g}`);try{$=(await this.api.get(`/${g}`)).data}catch(E){console.error(`Error while trying to download contiguous data from gateway cache for ${g}`),console.error(E)}}if(!$)throw new Error(`${g} was not found!`);return m&&m.decode&&!m.string?$:m&&m.decode&&m.string?o.bufferToString($):o.bufferTob64Url($)}async sign(g,m,$){if(!m&&(typeof window>"u"||!window.arweaveWallet))throw new Error("A new Arweave transaction must provide the jwk parameter.");if(!m||m==="use_wallet"){try{(await window.arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await window.arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}const E=await window.arweaveWallet.sign(g,$);g.setSignature({id:E.id,owner:E.owner,reward:E.reward,tags:E.tags,signature:E.signature})}else{g.setOwner(m.n);let E=await g.getSignatureData(),A=await this.crypto.sign(m,E,$),B=await this.crypto.hash(A);g.setSignature({id:o.bufferTob64Url(B),owner:m.n,signature:o.bufferTob64Url(A)})}}async verify(g){const m=await g.getSignatureData(),$=g.get("signature",{decode:!0,string:!1}),E=o.bufferTob64Url(await this.crypto.hash($));if(g.id!==E)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(g.owner,m,$)}async post(g){if(typeof g=="string"?g=new n.default(JSON.parse(g)):typeof g.readInt32BE=="function"?g=new n.default(JSON.parse(g.toString())):typeof g=="object"&&!(g instanceof n.default)&&(g=new n.default(g)),!(g instanceof n.default))throw new Error("Must be Transaction object");g.chunks||await g.prepareChunks(g.data);const m=await this.getUploader(g,g.data);try{for(;!m.isComplete;)await m.uploadChunk()}catch($){if(m.lastResponseStatus>0)return{status:m.lastResponseStatus,statusText:m.lastResponseError,data:{error:m.lastResponseError}};throw $}return{status:200,statusText:"OK",data:{}}}async getUploader(g,m){let $;if(m instanceof ArrayBuffer&&(m=new Uint8Array(m)),g instanceof n.default){if(m||(m=g.data),!(m instanceof Uint8Array))throw new Error("Data format is invalid");g.chunks||await g.prepareChunks(m),$=new u.TransactionUploader(this.api,g),(!$.data||$.data.length===0)&&($.data=m)}else{if(typeof g=="string"&&(g=await u.TransactionUploader.fromTransactionId(this.api,g)),!m||!(m instanceof Uint8Array))throw new Error("Must provide data when resuming upload");$=await u.TransactionUploader.fromSerialized(this.api,g,m)}return $}upload(g,m){return e(this,arguments,function*(){const E=yield t(this.getUploader(g,m));for(;!E.isComplete;)yield t(E.uploadChunk()),yield yield t(E);return yield t(E)})}}return transactions.default=y,transactions}var wallets={};Object.defineProperty(wallets,"__esModule",{value:!0});const ArweaveUtils$2=utils$c;class Wallets{constructor(e,r){this.api=e,this.crypto=r}getBalance(e){return this.api.get(`wallet/${e}/balance`,{transformResponse:[function(r){return r}]}).then(r=>r.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(r=>r.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await window.arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return window.arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return ArweaveUtils$2.bufferTob64Url(await this.crypto.hash(ArweaveUtils$2.b64UrlToBuffer(e)))}}wallets.default=Wallets;var silo={};Object.defineProperty(silo,"__esModule",{value:!0});silo.SiloResource=void 0;const ArweaveUtils$1=utils$c;class Silo{constructor(e,r,n){this.api=e,this.crypto=r,this.transactions=n}async get(e){if(!e)throw new Error("No Silo URI specified");const r=await this.parseUri(e),n=await this.transactions.search("Silo-Name",r.getAccessKey());if(n.length==0)throw new Error(`No data could be found for the Silo URI: ${e}`);const o=await this.transactions.get(n[0]);if(!o)throw new Error(`No data could be found for the Silo URI: ${e}`);const u=o.get("data",{decode:!0,string:!1});return this.crypto.decrypt(u,r.getEncryptionKey())}async readTransactionData(e,r){if(!r)throw new Error("No Silo URI specified");const n=await this.parseUri(r),o=e.get("data",{decode:!0,string:!1});return this.crypto.decrypt(o,n.getEncryptionKey())}async parseUri(e){const r=e.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!r)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");const n=r[1],o=Math.pow(2,parseInt(r[2])),u=await this.hash(ArweaveUtils$1.stringToBuffer(n),o),y=ArweaveUtils$1.bufferTob64(u.slice(0,15)),h=await this.hash(u.slice(16,31),1);return new SiloResource(e,y,h)}async hash(e,r){let n=await this.crypto.hash(e);for(let o=0;o<r-1;o++)n=await this.crypto.hash(n);return n}}silo.default=Silo;class SiloResource{constructor(e,r,n){this.uri=e,this.accessKey=r,this.encryptionKey=n}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}}silo.SiloResource=SiloResource;var chunks={};Object.defineProperty(chunks,"__esModule",{value:!0});const error_1$1=error,ArweaveUtils=utils$c;class Chunks{constructor(e){this.api=e}async getTransactionOffset(e){const r=await this.api.get(`tx/${e}/offset`);if(r.status===200)return r.data;throw new Error(`Unable to get transaction offset: ${(0,error_1$1.getError)(r)}`)}async getChunk(e){const r=await this.api.get(`chunk/${e}`);if(r.status===200)return r.data;throw new Error(`Unable to get chunk: ${(0,error_1$1.getError)(r)}`)}async getChunkData(e){const r=await this.getChunk(e);return ArweaveUtils.b64UrlToBuffer(r.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e){const r=await this.getTransactionOffset(e),n=parseInt(r.size),u=parseInt(r.offset)-n+1,y=new Uint8Array(n);let h=0;for(;h<n;){this.api.config.logging&&console.log(`[chunk] ${h}/${n}`);let g;try{g=await this.getChunkData(u+h)}catch{console.error(`[chunk] Failed to fetch chunk at offset ${u+h}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(g)y.set(g,h),h+=g.length;else throw new Error(`Couldn't complete data download at ${h}/${n}`)}return y}}chunks.default=Chunks;var blocks={};Object.defineProperty(blocks,"__esModule",{value:!0});const error_1=error;class Blocks{constructor(e,r){this.api=e,this.network=r}async get(e){const r=await this.api.get(`${Blocks.ENDPOINT}${e}`);if(r.status===200)return r.data;throw r.status===404?new error_1.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getCurrent(){const{current:e}=await this.network.getInfo();return await this.get(e)}}blocks.default=Blocks;Blocks.ENDPOINT="block/hash/";var hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common$2;hasRequiredCommon=1,Object.defineProperty(common$2,"__esModule",{value:!0});const t=ar,e=api,r=webcryptoDriver,n=network,o=requireTransactions(),u=wallets,y=requireTransaction(),h=utils$c,g=silo,m=chunks,$=blocks;class E{constructor(B){this.api=new e.default(B),this.wallets=new u.default(this.api,E.crypto),this.chunks=new m.default(this.api),this.transactions=new o.default(this.api,E.crypto,this.chunks),this.silo=new g.default(this.api,this.crypto,this.transactions),this.network=new n.default(this.api),this.blocks=new $.default(this.api,this.network),this.ar=new t.default}get crypto(){return E.crypto}get utils(){return E.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(B,T){const k={};if(Object.assign(k,B),!B.data&&!(B.target&&B.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(B.owner==null&&T&&T!=="use_wallet"&&(k.owner=T.n),B.last_tx==null&&(k.last_tx=await this.transactions.getTransactionAnchor()),typeof B.data=="string"&&(B.data=h.stringToBuffer(B.data)),B.data instanceof ArrayBuffer&&(B.data=new Uint8Array(B.data)),B.data&&!(B.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(B.reward==null){const W=B.data?B.data.byteLength:0;k.reward=await this.transactions.getPrice(W,k.target)}k.data_root="",k.data_size=B.data?B.data.byteLength.toString():"0",k.data=B.data||new Uint8Array(0);const U=new y.default(k);return await U.getSignatureData(),U}async createSiloTransaction(B,T,k){const U={};if(Object.assign(U,B),!B.data)throw new Error("Silo transactions must have a 'data' value");if(!k)throw new Error("No Silo URI specified.");if(B.target||B.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(B.owner==null){if(!T||!T.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");U.owner=T.n}B.last_tx==null&&(U.last_tx=await this.transactions.getTransactionAnchor());const W=await this.silo.parseUri(k);if(typeof B.data=="string"){const X=await this.crypto.encrypt(h.stringToBuffer(B.data),W.getEncryptionKey());U.reward=await this.transactions.getPrice(X.byteLength),U.data=h.bufferTob64Url(X)}if(B.data instanceof Uint8Array){const X=await this.crypto.encrypt(B.data,W.getEncryptionKey());U.reward=await this.transactions.getPrice(X.byteLength),U.data=h.bufferTob64Url(X)}const te=new y.default(U);return te.addTag("Silo-Name",W.getAccessKey()),te.addTag("Silo-Version","0.1.0"),te}arql(B){return this.api.post("/arql",B).then(T=>T.data||[])}}return common$2.default=E,E.crypto=new r.default,E.utils=h,common$2}(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,u,y,h){h===void 0&&(h=y);var g=Object.getOwnPropertyDescriptor(u,y);(!g||("get"in g?!u.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return u[y]}}),Object.defineProperty(o,h,g)}:function(o,u,y,h){h===void 0&&(h=y),o[h]=u[y]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(o,u){for(var y in o)y!=="default"&&!Object.prototype.hasOwnProperty.call(u,y)&&e(u,o,y)};Object.defineProperty(t,"__esModule",{value:!0});const n=requireCommon();n.default.init=function(o={}){function u(){const $={host:"arweave.net",port:443,protocol:"https"};if(!window||!window.location||!window.location.protocol||!window.location.hostname)return $;const E=window.location.protocol.replace(":",""),A=window.location.hostname,B=window.location.port?parseInt(window.location.port):E=="https"?443:80;return["localhost","127.0.0.1"].includes(A)||E=="file"?$:{host:A,port:B,protocol:E}}const y=u(),h=o.protocol||y.protocol,g=o.host||y.host,m=o.port||y.port;return new n.default(Object.assign(Object.assign({},o),{host:g,protocol:h,port:m}))},window.Arweave=n.default,r(requireCommon(),t),t.default=n.default})(web);const Arweave=getDefaultExportFromCjs(web);function create_fragment$2(t){let e;return{c(){e=element("div")},l(r){e=claim_element(r,"DIV",{}),children(e).forEach(detach)},m(r,n){insert_hydration(r,e,n),t[3](e)},p:noop$3,i:noop$3,o:noop$3,d(r){r&&detach(e),t[3](null)}}}function instance$2(t,e,r){let{src:n}=e,{props:o={}}=e,u;const y=createEventDispatcher();onMount(async()=>{!n||h({text:n,target:u,props:o})});async function h({text:m,target:$,props:E}){const A=new Blob([m],{type:"text/javascript"}),B=URL.createObjectURL(A),T=(await __vitePreload(()=>import(B),[],import.meta.url)).default;$.innerHTML="";const k=new T({target:$,props:E});return B&&URL.revokeObjectURL(B),y("ready",T),y("target",$),k.$on("change",U=>{y("change",U)}),k}function g(m){binding_callbacks[m?"unshift":"push"](()=>{u=m,r(0,u)})}return t.$$set=m=>{"src"in m&&r(1,n=m.src),"props"in m&&r(2,o=m.props)},[u,n,o,g]}class Mount extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$2,create_fragment$2,safe_not_equal,{src:1,props:2})}}var encode_1$3=encode$k,MSB$5=128,REST$5=127,MSBALL$3=~REST$5,INT$3=Math.pow(2,31);function encode$k(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw encode$k.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var n=r;t>=INT$3;)e[r++]=t&255|MSB$5,t/=128;for(;t&MSBALL$3;)e[r++]=t&255|MSB$5,t>>>=7;return e[r]=t|0,encode$k.bytes=r-n+1,e}var decode$j=read$3,MSB$4=128,REST$4=127;function read$3(t,n){var r=0,n=n||0,o=0,u=n,y,h=t.length;do{if(u>=h||o>49)throw read$3.bytes=0,new RangeError("Could not decode varint");y=t[u++],r+=o<28?(y&REST$4)<<o:(y&REST$4)*Math.pow(2,o),o+=7}while(y>=MSB$4);return read$3.bytes=u-n,r}var N1$3=Math.pow(2,7),N2$3=Math.pow(2,14),N3$3=Math.pow(2,21),N4$3=Math.pow(2,28),N5$3=Math.pow(2,35),N6$3=Math.pow(2,42),N7$3=Math.pow(2,49),N8$3=Math.pow(2,56),N9$3=Math.pow(2,63),length$4=function(t){return t<N1$3?1:t<N2$3?2:t<N3$3?3:t<N4$3?4:t<N5$3?5:t<N6$3?6:t<N7$3?7:t<N8$3?8:t<N9$3?9:10},varint$3={encode:encode_1$3,decode:decode$j,encodingLength:length$4};const typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";const e=typeof t;if(typeofs.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(isBuffer$2(t))return"Buffer";const r=getObjectType(t);return r||"Object"}function isBuffer$2(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function getObjectType(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(objectTypeNames.includes(e))return e}class Type{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$2=new TextDecoder,textEncoder$4=new TextEncoder;function isBuffer$1(t){return useBuffer&&globalThis.Buffer.isBuffer(t)}function asU8A(t){return t instanceof Uint8Array?isBuffer$1(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const toString$9=useBuffer?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):utf8Slice(t,e,r):(t,e,r)=>r-e>64?textDecoder$2.decode(t.subarray(e,r)):utf8Slice(t,e,r),fromString$7=useBuffer?t=>t.length>64?globalThis.Buffer.from(t):utf8ToBytes(t):t=>t.length>64?textEncoder$4.encode(t):utf8ToBytes(t),fromArray=t=>Uint8Array.from(t),slice=useBuffer?(t,e,r)=>isBuffer$1(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),concat$2=useBuffer?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),asU8A(globalThis.Buffer.concat(t,e))):(t,e)=>{const r=new Uint8Array(e);let n=0;for(let o of t)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},alloc=useBuffer?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function compare$1(t,e){if(isBuffer$1(t)&&isBuffer$1(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function utf8ToBytes(t,e=1/0){let r;const n=t.length;let o=null;const u=[];for(let y=0;y<n;++y){if(r=t.charCodeAt(y),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&u.push(239,191,189);continue}else if(y+1===n){(e-=3)>-1&&u.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&u.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(e-=3)>-1&&u.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;u.push(r)}else if(r<2048){if((e-=2)<0)break;u.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;u.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;u.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return u}function utf8Slice(t,e,r){const n=[];for(;e<r;){const o=t[e];let u=null,y=o>239?4:o>223?3:o>191?2:1;if(e+y<=r){let h,g,m,$;switch(y){case 1:o<128&&(u=o);break;case 2:h=t[e+1],(h&192)===128&&($=(o&31)<<6|h&63,$>127&&(u=$));break;case 3:h=t[e+1],g=t[e+2],(h&192)===128&&(g&192)===128&&($=(o&15)<<12|(h&63)<<6|g&63,$>2047&&($<55296||$>57343)&&(u=$));break;case 4:h=t[e+1],g=t[e+2],m=t[e+3],(h&192)===128&&(g&192)===128&&(m&192)===128&&($=(o&15)<<18|(h&63)<<12|(g&63)<<6|m&63,$>65535&&$<1114112&&(u=$))}}u===null?(u=65533,y=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|u&1023),n.push(u),e+=y}return decodeCodePointsArray(n)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(t){const e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}const defaultChunkSize=256;class Bl{constructor(e=defaultChunkSize){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const o=r.length-(this.maxCursor-this.cursor)-1;r.set(e,o)}else{if(r){const o=r.length-(this.maxCursor-this.cursor)-1;o<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,o),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=alloc(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){const n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=slice(n,0,this.cursor)}else r=concat$2(this.chunks,this.cursor);return e&&this.reset(),r}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(t,e,r){if(t.length-e<r)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(t,e,r){assertEnoughData(t,e,1);const n=t[e];if(r.strict===!0&&n<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint16(t,e,r){assertEnoughData(t,e,2);const n=t[e]<<8|t[e+1];if(r.strict===!0&&n<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint32(t,e,r){assertEnoughData(t,e,4);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint64(t,e,r){assertEnoughData(t,e,8);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],u=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===!0&&u<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(u<=Number.MAX_SAFE_INTEGER)return Number(u);if(r.allowBigInt===!0)return u;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(t,e,r,n){return new Token(Type.uint,readUint8(t,e+1,n),2)}function decodeUint16(t,e,r,n){return new Token(Type.uint,readUint16(t,e+1,n),3)}function decodeUint32(t,e,r,n){return new Token(Type.uint,readUint32(t,e+1,n),5)}function decodeUint64(t,e,r,n){return new Token(Type.uint,readUint64(t,e+1,n),9)}function encodeUint(t,e){return encodeUintValue(t,0,e.value)}function encodeUintValue(t,e,r){if(r<uintBoundaries[0]){const n=Number(r);t.push([e|n])}else if(r<uintBoundaries[1]){const n=Number(r);t.push([e|24,n])}else if(r<uintBoundaries[2]){const n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<uintBoundaries[3]){const n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(r);if(n<uintBoundaries[4]){const o=[e|27,0,0,0,0,0,0,0];let u=Number(n&BigInt(4294967295)),y=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=u&255,u=u>>8,o[7]=u&255,u=u>>8,o[6]=u&255,u=u>>8,o[5]=u&255,o[4]=y&255,y=y>>8,o[3]=y&255,y=y>>8,o[2]=y&255,y=y>>8,o[1]=y&255,t.push(o)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};encodeUintValue.encodedSize=function(e){return e<uintBoundaries[0]?1:e<uintBoundaries[1]?2:e<uintBoundaries[2]?3:e<uintBoundaries[3]?5:9};encodeUint.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function decodeNegint8(t,e,r,n){return new Token(Type.negint,-1-readUint8(t,e+1,n),2)}function decodeNegint16(t,e,r,n){return new Token(Type.negint,-1-readUint16(t,e+1,n),3)}function decodeNegint32(t,e,r,n){return new Token(Type.negint,-1-readUint32(t,e+1,n),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(t,e,r,n){const o=readUint64(t,e+1,n);if(typeof o!="bigint"){const u=-1-o;if(u>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,u,9)}if(n.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(o),9)}function encodeNegint(t,e){const r=e.value,n=typeof r=="bigint"?r*neg1b-pos1b:r*-1-1;encodeUintValue(t,e.type.majorEncoded,n)}encodeNegint.encodedSize=function(e){const r=e.value,n=typeof r=="bigint"?r*neg1b-pos1b:r*-1-1;return n<uintBoundaries[0]?1:n<uintBoundaries[1]?2:n<uintBoundaries[2]?3:n<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function toToken$3(t,e,r,n){assertEnoughData(t,e,r+n);const o=slice(t,e+r,e+r+n);return new Token(Type.bytes,o,r+n)}function decodeBytesCompact(t,e,r,n){return toToken$3(t,e,1,r)}function decodeBytes8(t,e,r,n){return toToken$3(t,e,2,readUint8(t,e+1,n))}function decodeBytes16(t,e,r,n){return toToken$3(t,e,3,readUint16(t,e+1,n))}function decodeBytes32(t,e,r,n){return toToken$3(t,e,5,readUint32(t,e+1,n))}function decodeBytes64(t,e,r,n){const o=readUint64(t,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(t,e,9,o)}function tokenBytes(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===Type.string?fromString$7(t.value):t.value),t.encodedBytes}function encodeBytes(t,e){const r=tokenBytes(e);encodeUintValue(t,e.type.majorEncoded,r.length),t.push(r)}encodeBytes.encodedSize=function(e){const r=tokenBytes(e);return encodeUintValue.encodedSize(r.length)+r.length};encodeBytes.compareTokens=function(e,r){return compareBytes(tokenBytes(e),tokenBytes(r))};function compareBytes(t,e){return t.length<e.length?-1:t.length>e.length?1:compare$1(t,e)}function toToken$2(t,e,r,n,o){const u=r+n;assertEnoughData(t,e,u);const y=new Token(Type.string,toString$9(t,e+r,e+u),u);return o.retainStringBytes===!0&&(y.byteValue=slice(t,e+r,e+u)),y}function decodeStringCompact(t,e,r,n){return toToken$2(t,e,1,r,n)}function decodeString8(t,e,r,n){return toToken$2(t,e,2,readUint8(t,e+1,n),n)}function decodeString16(t,e,r,n){return toToken$2(t,e,3,readUint16(t,e+1,n),n)}function decodeString32(t,e,r,n){return toToken$2(t,e,5,readUint32(t,e+1,n),n)}function decodeString64(t,e,r,n){const o=readUint64(t,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(t,e,9,o,n)}const encodeString=encodeBytes;function toToken$1(t,e,r,n){return new Token(Type.array,n,r)}function decodeArrayCompact(t,e,r,n){return toToken$1(t,e,1,r)}function decodeArray8(t,e,r,n){return toToken$1(t,e,2,readUint8(t,e+1,n))}function decodeArray16(t,e,r,n){return toToken$1(t,e,3,readUint16(t,e+1,n))}function decodeArray32(t,e,r,n){return toToken$1(t,e,5,readUint32(t,e+1,n))}function decodeArray64(t,e,r,n){const o=readUint64(t,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(t,e,9,o)}function decodeArrayIndefinite(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(t,e,1,1/0)}function encodeArray(t,e){encodeUintValue(t,Type.array.majorEncoded,e.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function toToken(t,e,r,n){return new Token(Type.map,n,r)}function decodeMapCompact(t,e,r,n){return toToken(t,e,1,r)}function decodeMap8(t,e,r,n){return toToken(t,e,2,readUint8(t,e+1,n))}function decodeMap16(t,e,r,n){return toToken(t,e,3,readUint16(t,e+1,n))}function decodeMap32(t,e,r,n){return toToken(t,e,5,readUint32(t,e+1,n))}function decodeMap64(t,e,r,n){const o=readUint64(t,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(t,e,9,o)}function decodeMapIndefinite(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(t,e,1,1/0)}function encodeMap(t,e){encodeUintValue(t,Type.map.majorEncoded,e.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function decodeTagCompact(t,e,r,n){return new Token(Type.tag,r,1)}function decodeTag8(t,e,r,n){return new Token(Type.tag,readUint8(t,e+1,n),2)}function decodeTag16(t,e,r,n){return new Token(Type.tag,readUint16(t,e+1,n),3)}function decodeTag32(t,e,r,n){return new Token(Type.tag,readUint32(t,e+1,n),5)}function decodeTag64(t,e,r,n){return new Token(Type.tag,readUint64(t,e+1,n),9)}function encodeTag(t,e){encodeUintValue(t,Type.tag.majorEncoded,e.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,t,e)}function decodeFloat16(t,e,r,n){return createToken(readFloat16(t,e+1),3,n)}function decodeFloat32(t,e,r,n){return createToken(readFloat32(t,e+1),5,n)}function decodeFloat64(t,e,r,n){return createToken(readFloat64(t,e+1),9,n)}function encodeFloat(t,e,r){const n=e.value;if(n===!1)t.push([Type.float.majorEncoded|MINOR_FALSE]);else if(n===!0)t.push([Type.float.majorEncoded|MINOR_TRUE]);else if(n===null)t.push([Type.float.majorEncoded|MINOR_NULL]);else if(n===void 0)t.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let o,u=!1;(!r||r.float64!==!0)&&(encodeFloat16(n),o=readFloat16(ui8a,1),n===o||Number.isNaN(n)?(ui8a[0]=249,t.push(ui8a.slice(0,3)),u=!0):(encodeFloat32(n),o=readFloat32(ui8a,1),n===o&&(ui8a[0]=250,t.push(ui8a.slice(0,5)),u=!0))),u||(encodeFloat64(n),o=readFloat64(ui8a,1),ui8a[0]=251,t.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function(e,r){const n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){encodeFloat16(n);let o=readFloat16(ui8a,1);if(n===o||Number.isNaN(n))return 3;if(encodeFloat32(n),o=readFloat32(ui8a,1),n===o)return 5}return 9};const buffer$2=new ArrayBuffer(9),dataView=new DataView(buffer$2,1),ui8a=new Uint8Array(buffer$2,0);function encodeFloat16(t){if(t===1/0)dataView.setUint16(0,31744,!1);else if(t===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(t))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,t);const e=dataView.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)dataView.setUint16(0,31744,!1);else if(r===0)dataView.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{const o=r-127;o<-24?dataView.setUint16(0,0):o<-14?dataView.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):dataView.setUint16(0,(e&2147483648)>>16|o+15<<10|n>>13,!1)}}}function readFloat16(t,e){if(t.length-e<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;const n=r>>10&31,o=r&1023;let u;return n===0?u=o*2**-24:n!==31?u=(o+1024)*2**(n-25):u=o===0?1/0:NaN,r&32768?-u:u}function encodeFloat32(t){dataView.setFloat32(0,t,!1)}function readFloat32(t,e){if(t.length-e<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function encodeFloat64(t){dataView.setFloat64(0,t,!1)}function readFloat64(t,e){if(t.length-e<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(t,e,r){throw new Error(`${decodeErrPrefix} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function errorer(t){return()=>{throw new Error(`${decodeErrPrefix} ${t}`)}}const jump=[];for(let t=0;t<=23;t++)jump[t]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let t=32;t<=55;t++)jump[t]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let t=64;t<=87;t++)jump[t]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)jump[t]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)jump[t]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let t=160;t<=183;t++)jump[t]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let t=192;t<=215;t++)jump[t]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let t=224;t<=243;t++)jump[t]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let t=0;t<24;t++)quick[t]=new Token(Type.uint,t,1);for(let t=-1;t>=-24;t--)quick[31-t]=new Token(Type.negint,t,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(t){switch(t.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return t.value.length?void 0:fromArray([64]);case Type.string:return t.value===""?fromArray([96]):void 0;case Type.array:return t.value===0?fromArray([128]):void 0;case Type.map:return t.value===0?fromArray([160]):void 0;case Type.uint:return t.value<24?fromArray([Number(t.value)]):void 0;case Type.negint:if(t.value>=-24)return fromArray([31-Number(t.value)])}}const defaultEncodeOptions$1={float64:!1,mapSorter,quickEncodeToken};function makeCborEncoders(){const t=[];return t[Type.uint.major]=encodeUint,t[Type.negint.major]=encodeNegint,t[Type.bytes.major]=encodeBytes,t[Type.string.major]=encodeString,t[Type.array.major]=encodeArray,t[Type.map.major]=encodeMap,t[Type.tag.major]=encodeTag,t[Type.float.major]=encodeFloat,t}const cborEncoders$1=makeCborEncoders(),buf=new Bl;class Ref{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(r,e)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new Token(Type.float,t):t>=0?new Token(Type.uint,t):new Token(Type.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new Token(Type.uint,t):new Token(Type.negint,t)},Uint8Array(t,e,r,n){return new Token(Type.bytes,t)},string(t,e,r,n){return new Token(Type.string,t)},boolean(t,e,r,n){return t?simpleTokens.true:simpleTokens.false},null(t,e,r,n){return simpleTokens.null},undefined(t,e,r,n){return simpleTokens.undefined},ArrayBuffer(t,e,r,n){return new Token(Type.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new Token(Type.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;n=Ref.createCheck(n,t);const o=[];let u=0;for(const y of t)o[u++]=objectToTokens(y,r,n);return r.addBreakTokens?[new Token(Type.array,t.length),o,new Token(Type.break)]:[new Token(Type.array,t.length),o]},Object(t,e,r,n){const o=e!=="Object",u=o?t.keys():Object.keys(t),y=o?t.size:u.length;if(!y)return r.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;n=Ref.createCheck(n,t);const h=[];let g=0;for(const m of u)h[g++]=[objectToTokens(m,r,n),objectToTokens(o?t.get(m):t[m],r,n)];return sortMapEntries(h,r),r.addBreakTokens?[new Token(Type.map,y),h,new Token(Type.break)]:[new Token(Type.map,y),h]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${t}Array`]=typeEncoders.DataView;function objectToTokens(t,e={},r){const n=is(t),o=e&&e.typeEncoders&&e.typeEncoders[n]||typeEncoders[n];if(typeof o=="function"){const y=o(t,n,e,r);if(y!=null)return y}const u=typeEncoders[n];if(!u)throw new Error(`${encodeErrPrefix} unsupported type: ${n}`);return u(t,n,e,r)}function sortMapEntries(t,e){e.mapSorter&&t.sort(e.mapSorter)}function mapSorter(t,e){const r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);const o=r.type.major,u=cborEncoders$1[o].compareTokens(r,n);return u===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),u}function tokensToEncoded(t,e,r,n){if(Array.isArray(e))for(const o of e)tokensToEncoded(t,o,r,n);else r[e.type.major](t,e,n)}function encodeCustom(t,e,r){const n=objectToTokens(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){const o=r.quickEncodeToken(n);if(o)return o;const u=e[n.type.major];if(u.encodedSize){const y=u.encodedSize(n,r),h=new Bl(y);if(u(h,n,r),h.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return asU8A(h.chunks[0])}}return buf.reset(),tokensToEncoded(buf,n,e,r),buf.toBytes(!0)}function encode$j(t,e){return e=Object.assign({},defaultEncodeOptions$1,e),encodeCustom(t,cborEncoders$1,e)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(e,r={}){this.pos=0,this.data=e,this.options=r}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let r=quick[e];if(r===void 0){const n=jump[e];if(!n)throw new Error(`${decodeErrPrefix} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const o=e&31;r=n(this.data,this.pos,o,this.options)}return this.pos+=r.encodedLength,r}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(t,e,r){const n=[];for(let o=0;o<t.value;o++){const u=tokensToObject(e,r);if(u===BREAK){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(u===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${o}, expected ${t.value})`);n[o]=u}return n}function tokenToMap(t,e,r){const n=r.useMaps===!0,o=n?void 0:{},u=n?new Map:void 0;for(let y=0;y<t.value;y++){const h=tokensToObject(e,r);if(h===BREAK){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(h===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${y} [no key], expected ${t.value})`);if(n!==!0&&typeof h!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof h})`);const g=tokensToObject(e,r);if(g===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${y} [no value], expected ${t.value})`);n?u.set(h,g):o[h]=g}return n?u:o}function tokensToObject(t,e){if(t.done())return DONE;const r=t.next();if(r.type===Type.break)return BREAK;if(r.type.terminal)return r.value;if(r.type===Type.array)return tokenToArray(r,t,e);if(r.type===Type.map)return tokenToMap(r,t,e);if(r.type===Type.tag){if(e.tags&&typeof e.tags[r.value]=="function"){const n=tokensToObject(t,e);return e.tags[r.value](n)}throw new Error(`${decodeErrPrefix} tag not supported (${r.value})`)}throw new Error("unsupported")}function decode$i(t,e){if(!(t instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);e=Object.assign({},defaultDecodeOptions,e);const r=e.tokenizer||new Tokeniser(t,e),n=tokensToObject(r,e);if(n===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(n===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);if(!r.done())throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return n}const cborEncoders=makeCborEncoders(),defaultEncodeOptions={float64:!1,quickEncodeToken};function tokensToLength(t,e=cborEncoders,r=defaultEncodeOptions){if(Array.isArray(t)){let n=0;for(const o of t)n+=tokensToLength(o,e,r);return n}else{const n=e[t.type.major];if(n.encodedSize===void 0||typeof n.encodedSize!="function")throw new Error(`Encoder for ${t.type.name} does not have an encodedSize()`);return n.encodedSize(t,r)}}var encode_1$2=encode$i,MSB$3=128,REST$3=127,MSBALL$2=~REST$3,INT$2=Math.pow(2,31);function encode$i(t,e,r){e=e||[],r=r||0;for(var n=r;t>=INT$2;)e[r++]=t&255|MSB$3,t/=128;for(;t&MSBALL$2;)e[r++]=t&255|MSB$3,t>>>=7;return e[r]=t|0,encode$i.bytes=r-n+1,e}var decode$h=read$2,MSB$1$2=128,REST$1$2=127;function read$2(t,n){var r=0,n=n||0,o=0,u=n,y,h=t.length;do{if(u>=h)throw read$2.bytes=0,new RangeError("Could not decode varint");y=t[u++],r+=o<28?(y&REST$1$2)<<o:(y&REST$1$2)*Math.pow(2,o),o+=7}while(y>=MSB$1$2);return read$2.bytes=u-n,r}var N1$2=Math.pow(2,7),N2$2=Math.pow(2,14),N3$2=Math.pow(2,21),N4$2=Math.pow(2,28),N5$2=Math.pow(2,35),N6$2=Math.pow(2,42),N7$2=Math.pow(2,49),N8$2=Math.pow(2,56),N9$2=Math.pow(2,63),length$3=function(t){return t<N1$2?1:t<N2$2?2:t<N3$2?3:t<N4$2?4:t<N5$2?5:t<N6$2?6:t<N7$2?7:t<N8$2?8:t<N9$2?9:10},varint$2={encode:encode_1$2,decode:decode$h,encodingLength:length$3},_brrp_varint$2=varint$2;const decode$g=(t,e=0)=>[_brrp_varint$2.decode(t,e),_brrp_varint$2.decode.bytes],encodeTo$2=(t,e,r=0)=>(_brrp_varint$2.encode(t,e,r),e),encodingLength$2=t=>_brrp_varint$2.encodingLength(t),empty=new Uint8Array(0),toHex=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),fromHex=t=>{const e=t.match(/../g);return e?new Uint8Array(e.map(r=>parseInt(r,16))):empty},equals$4=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},coerce$3=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},isBinary$1=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),fromString$6=t=>new TextEncoder().encode(t),toString$8=t=>new TextDecoder().decode(t),byteslib=Object.freeze(Object.defineProperty({__proto__:null,equals:equals$4,coerce:coerce$3,isBinary:isBinary$1,fromHex,toHex,fromString:fromString$6,toString:toString$8,empty},Symbol.toStringTag,{value:"Module"})),create$5=(t,e)=>{const r=e.byteLength,n=encodingLength$2(t),o=n+encodingLength$2(r),u=new Uint8Array(o+r);return encodeTo$2(t,u,0),encodeTo$2(r,u,n),u.set(e,o),new Digest$2(t,r,e,u)},decode$f=t=>{const e=coerce$3(t),[r,n]=decode$g(e),[o,u]=decode$g(e.subarray(n)),y=e.subarray(n+u);if(y.byteLength!==o)throw new Error("Incorrect length");return new Digest$2(r,o,y,e)},equals$3=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&equals$4(t.bytes,e.bytes);class Digest$2{constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}}function base$3(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var u=t.charAt(o),y=u.charCodeAt(0);if(r[y]!==255)throw new TypeError(u+" is ambiguous");r[y]=o}var h=t.length,g=t.charAt(0),m=Math.log(h)/Math.log(256),$=Math.log(256)/Math.log(h);function E(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var k=0,U=0,W=0,te=T.length;W!==te&&T[W]===0;)W++,k++;for(var X=(te-W)*$+1>>>0,N=new Uint8Array(X);W!==te;){for(var O=T[W],Z=0,j=X-1;(O!==0||Z<U)&&j!==-1;j--,Z++)O+=256*N[j]>>>0,N[j]=O%h>>>0,O=O/h>>>0;if(O!==0)throw new Error("Non-zero carry");U=Z,W++}for(var K=X-U;K!==X&&N[K]===0;)K++;for(var se=g.repeat(k);K<X;++K)se+=t.charAt(N[K]);return se}function A(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var k=0;if(T[k]!==" "){for(var U=0,W=0;T[k]===g;)U++,k++;for(var te=(T.length-k)*m+1>>>0,X=new Uint8Array(te);T[k];){var N=r[T.charCodeAt(k)];if(N===255)return;for(var O=0,Z=te-1;(N!==0||O<W)&&Z!==-1;Z--,O++)N+=h*X[Z]>>>0,X[Z]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");W=O,k++}if(T[k]!==" "){for(var j=te-W;j!==te&&X[j]===0;)j++;for(var K=new Uint8Array(U+(te-j)),se=U;j!==te;)K[se++]=X[j++];return K}}}function B(T){var k=A(T);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:E,decodeUnsafe:A,decode:B}}var src$3=base$3,_brrp__multiformats_scope_baseX$3=src$3;class Encoder$3{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder$3{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$3(this,e)}}class ComposedDecoder$3{constructor(e){this.decoders=e}or(e){return or$3(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or$3=(t,e)=>new ComposedDecoder$3({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Codec$3{constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder$3(e,r,n),this.decoder=new Decoder$3(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$7=({name:t,prefix:e,encode:r,decode:n})=>new Codec$3(t,e,r,n),baseX$3=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX$3(r,e);return from$7({prefix:t,name:e,encode:n,decode:u=>coerce$3(o(u))})},decode$e=(t,e,r,n)=>{const o={};for(let $=0;$<e.length;++$)o[e[$]]=$;let u=t.length;for(;t[u-1]==="=";)--u;const y=new Uint8Array(u*r/8|0);let h=0,g=0,m=0;for(let $=0;$<u;++$){const E=o[t[$]];if(E===void 0)throw new SyntaxError(`Non-${n} character`);g=g<<r|E,h+=r,h>=8&&(h-=8,y[m++]=255&g>>h)}if(h>=r||255&g<<8-h)throw new SyntaxError("Unexpected end of data");return y},encode$h=(t,e,r)=>{const n=e[e.length-1]==="=",o=(1<<r)-1;let u="",y=0,h=0;for(let g=0;g<t.length;++g)for(h=h<<8|t[g],y+=8;y>r;)y-=r,u+=e[o&h>>y];if(y&&(u+=e[o&h<<r-y]),n)for(;u.length*r&7;)u+="=";return u},rfc4648$3=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>from$7({prefix:e,name:t,encode(o){return encode$h(o,n,r)},decode(o){return decode$e(o,n,r,t)}}),base58btc$3=baseX$3({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr$2=baseX$3({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58$2=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$3,base58flickr:base58flickr$2},Symbol.toStringTag,{value:"Module"})),base32$5=rfc4648$3({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper$2=rfc4648$3({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad$2=rfc4648$3({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper$2=rfc4648$3({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex$2=rfc4648$3({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper$2=rfc4648$3({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad$2=rfc4648$3({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper$2=rfc4648$3({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$2=rfc4648$3({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$6=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$5,base32upper:base32upper$2,base32pad:base32pad$2,base32padupper:base32padupper$2,base32hex:base32hex$2,base32hexupper:base32hexupper$2,base32hexpad:base32hexpad$2,base32hexpadupper:base32hexpadupper$2,base32z:base32z$2},Symbol.toStringTag,{value:"Module"}));class CID$1{constructor(e,r,n,o){this.code=r,this.version=e,this.multihash=n,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly$1,version:readonly$1,multihash:readonly$1,bytes:readonly$1,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:r}=this;if(e!==DAG_PB_CODE$1)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==SHA_256_CODE$1)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID$1.createV0(r)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=create$5(e,r);return CID$1.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&equals$3(this.multihash,e.multihash)}toString(e){const{bytes:r,version:n,_baseCache:o}=this;switch(n){case 0:return toStringV0$1(r,o,e||base58btc$3.encoder);default:return toStringV1$1(r,o,e||base32$5.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return deprecate(/^0\.0/,IS_CID_DEPRECATION),!!(e&&(e[cidSymbol$1]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof CID$1)return e;if(e!=null&&e.asCID===e){const{version:r,code:n,multihash:o,bytes:u}=e;return new CID$1(r,n,o,u||encodeCID$1(r,n,o.bytes))}else if(e!=null&&e[cidSymbol$1]===!0){const{version:r,multihash:n,code:o}=e,u=decode$f(n);return CID$1.create(r,o,u)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==DAG_PB_CODE$1)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$1}) block encoding`);return new CID$1(e,r,n,n.bytes)}case 1:{const o=encodeCID$1(e,r,n.bytes);return new CID$1(e,r,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID$1.create(0,DAG_PB_CODE$1,e)}static createV1(e,r){return CID$1.create(1,e,r)}static decode(e){const[r,n]=CID$1.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=CID$1.inspectBytes(e),n=r.size-r.multihashSize,o=coerce$3(e.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");const u=o.subarray(r.multihashSize-r.digestSize),y=new Digest$2(r.multihashCode,r.digestSize,u,o);return[r.version===0?CID$1.createV0(y):CID$1.createV1(r.codec,y),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[E,A]=decode$g(e.subarray(r));return r+=A,E};let o=n(),u=DAG_PB_CODE$1;if(o===18?(o=0,r=0):o===1&&(u=n()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const y=r,h=n(),g=n(),m=r+g,$=m-y;return{version:o,codec:u,multihashCode:h,digestSize:g,multihashSize:$,size:m}}static parse(e,r){const[n,o]=parseCIDtoBytes$1(e,r),u=CID$1.decode(o);return u._baseCache.set(n,e),u}}const parseCIDtoBytes$1=(t,e)=>{switch(t[0]){case"Q":{const r=e||base58btc$3;return[base58btc$3.prefix,r.decode(`${base58btc$3.prefix}${t}`)]}case base58btc$3.prefix:{const r=e||base58btc$3;return[base58btc$3.prefix,r.decode(t)]}case base32$5.prefix:{const r=e||base32$5;return[base32$5.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},toStringV0$1=(t,e,r)=>{const{prefix:n}=r;if(n!==base58btc$3.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const o=e.get(n);if(o==null){const u=r.encode(t).slice(1);return e.set(n,u),u}else return o},toStringV1$1=(t,e,r)=>{const{prefix:n}=r,o=e.get(n);if(o==null){const u=r.encode(t);return e.set(n,u),u}else return o},DAG_PB_CODE$1=112,SHA_256_CODE$1=18,encodeCID$1=(t,e,r)=>{const n=encodingLength$2(t),o=n+encodingLength$2(e),u=new Uint8Array(o+r.byteLength);return encodeTo$2(t,u,0),encodeTo$2(e,u,n),u.set(r,o),u},cidSymbol$1=Symbol.for("@ipld/js-cid/CID"),readonly$1={writable:!1,configurable:!1,enumerable:!0},hidden={writable:!1,enumerable:!1,configurable:!1},version="0.0.0-dev",deprecate=(t,e)=>{if(t.test(version))console.warn(e);else throw new Error(e)},IS_CID_DEPRECATION=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,CID_CBOR_TAG=42;function cidEncoder(t){if(t.asCID!==t)return null;const e=CID$1.asCID(t);if(!e)return null;const r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,r)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={float64:!0,typeEncoders:{Object:cidEncoder,undefined:undefinedEncoder,number:numberEncoder}};function cidDecoder(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$1.decode(t.subarray(1))}const decodeOptions={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions.tags[CID_CBOR_TAG]=cidDecoder;const name$4="dag-cbor",code$6=113,encode$g=t=>encode$j(t,encodeOptions),decode$d=t=>decode$i(t,decodeOptions),dagCBOR=Object.freeze(Object.defineProperty({__proto__:null,name:name$4,code:code$6,encode:encode$g,decode:decode$d},Symbol.toStringTag,{value:"Module"}));class CarBufferWriter{constructor(e,r){this.bytes=e,this.byteOffset=r,this.roots=[],this.headerSize=r}addRoot(e,r){return addRoot(this,e,r),this}write(e){return addBlock(this,e),this}close(e){return close(this,e)}}const addRoot=(t,e,r={})=>{const{resize:n=!1}=r,{bytes:o,headerSize:u,byteOffset:y,roots:h}=t;t.roots.push(e);const g=headerLength(t);if(g>u)if(g-u+y<o.byteLength)if(n)resizeHeader(t,g);else throw h.pop(),new RangeError(`Header of size ${u} has no capacity for new root ${e}.
  However there is a space in the buffer and you could call addRoot(root, { resize: root }) to resize header to make a space for this root.`);else throw h.pop(),new RangeError(`Buffer has no capacity for a new root ${e}`)},blockLength=({cid:t,bytes:e})=>{const r=t.bytes.byteLength+e.byteLength;return varint$3.encodingLength(r)+r},addBlock=(t,{cid:e,bytes:r})=>{const n=e.bytes.byteLength+r.byteLength,o=varint$3.encode(n);if(t.byteOffset+o.length+n>t.bytes.byteLength)throw new RangeError("Buffer has no capacity for this block");writeBytes$1(t,o),writeBytes$1(t,e.bytes),writeBytes$1(t,r)},close=(t,e={})=>{const{resize:r=!1}=e,{roots:n,bytes:o,byteOffset:u,headerSize:y}=t,h=encode$g({version:1,roots:n}),g=varint$3.encode(h.length),m=g.length+h.byteLength;if(y-m===0)return writeHeader(t,g,h),o.subarray(0,u);if(r)return resizeHeader(t,m),writeHeader(t,g,h),o.subarray(0,t.byteOffset);throw new RangeError(`Header size was overestimated.
You can use close({ resize: true }) to resize header`)},resizeHeader=(t,e)=>{const{bytes:r,headerSize:n}=t;r.set(r.subarray(n,t.byteOffset),e),t.byteOffset+=e-n,t.headerSize=e},writeBytes$1=(t,e)=>{t.bytes.set(e,t.byteOffset),t.byteOffset+=e.length},writeHeader=({bytes:t},e,r)=>{t.set(e),t.set(r,e.length)},headerPreludeTokens=[new Token(Type.map,2),new Token(Type.string,"version"),new Token(Type.uint,1),new Token(Type.string,"roots")],CID_TAG=new Token(Type.tag,42),calculateHeaderLength=t=>{const e=[...headerPreludeTokens];e.push(new Token(Type.array,t.length));for(const n of t)e.push(CID_TAG),e.push(new Token(Type.bytes,{length:n+1}));const r=tokensToLength(e);return varint$3.encodingLength(r)+r},headerLength=({roots:t})=>calculateHeaderLength(t.map(e=>e.bytes.byteLength)),createWriter=(t,e={})=>{const{roots:r=[],byteOffset:n=0,byteLength:o=t.byteLength,headerSize:u=headerLength({roots:r})}=e,y=new Uint8Array(t,n,o),h=new CarBufferWriter(y,u);for(const g of r)h.addRoot(g);return h},Kinds={Null:t=>t===null,Int:t=>Number.isInteger(t),Float:t=>typeof t=="number"&&Number.isFinite(t),String:t=>typeof t=="string",Bool:t=>typeof t=="boolean",Bytes:t=>t instanceof Uint8Array,Link:t=>!Kinds.Null(t)&&typeof t=="object"&&t.asCID===t,List:t=>Array.isArray(t),Map:t=>!Kinds.Null(t)&&typeof t=="object"&&t.asCID!==t&&!Kinds.List(t)&&!Kinds.Bytes(t)},Types={Int:Kinds.Int,"CarHeader > version":t=>Types.Int(t),"CarHeader > roots (anon) > valueType (anon)":Kinds.Link,"CarHeader > roots (anon)":t=>Kinds.List(t)&&Array.prototype.every.call(t,Types["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":t=>Types["CarHeader > roots (anon)"](t),CarHeader:t=>{const e=t&&Object.keys(t);return Kinds.Map(t)&&["version"].every(r=>e.includes(r))&&Object.entries(t).every(([r,n])=>Types["CarHeader > "+r]&&Types["CarHeader > "+r](n))}},CarHeader=Types.CarHeader,CIDV0_BYTES={SHA2_256:18,LENGTH:32,DAG_PB:112},V2_HEADER_LENGTH=16+8+8+8;async function readVarint(t){const e=await t.upTo(8);if(!e.length)throw new Error("Unexpected end of data");const r=varint$3.decode(e);return t.seek(varint$3.decode.bytes),r}async function readV2Header(t){const e=await t.exactly(V2_HEADER_LENGTH),r=new DataView(e.buffer,e.byteOffset,e.byteLength);let n=0;const o={version:2,characteristics:[r.getBigUint64(n,!0),r.getBigUint64(n+=8,!0)],dataOffset:Number(r.getBigUint64(n+=8,!0)),dataSize:Number(r.getBigUint64(n+=8,!0)),indexOffset:Number(r.getBigUint64(n+=8,!0))};return t.seek(V2_HEADER_LENGTH),o}async function readHeader$1(t,e){const r=await readVarint(t);if(r===0)throw new Error("Invalid CAR header (zero length)");const n=await t.exactly(r);t.seek(r);const o=decode$d(n);if(!CarHeader(o))throw new Error("Invalid CAR header format");if(o.version!==1&&o.version!==2||e!==void 0&&o.version!==e)throw new Error(`Invalid CAR version: ${o.version}${e!==void 0?` (expected ${e})`:""}`);const u=Array.isArray(o.roots);if(o.version===1&&!u||o.version===2&&u)throw new Error("Invalid CAR header format");if(o.version===1)return o;const y=await readV2Header(t);t.seek(y.dataOffset-t.pos);const h=await readHeader$1(t,1);return Object.assign(h,y)}async function readMultihash(t){const e=await t.upTo(8);varint$3.decode(e);const r=varint$3.decode.bytes,n=varint$3.decode(e.subarray(varint$3.decode.bytes)),o=varint$3.decode.bytes,u=r+o+n,y=await t.exactly(u);return t.seek(u),y}async function readCid(t){const e=await t.exactly(2);if(e[0]===CIDV0_BYTES.SHA2_256&&e[1]===CIDV0_BYTES.LENGTH){const y=await t.exactly(34);t.seek(34);const h=decode$f(y);return CID$1.create(0,CIDV0_BYTES.DAG_PB,h)}const r=await readVarint(t);if(r!==1)throw new Error(`Unexpected CID version (${r})`);const n=await readVarint(t),o=await readMultihash(t),u=decode$f(o);return CID$1.create(r,n,u)}async function readBlockHead(t){const e=t.pos;let r=await readVarint(t);if(r===0)throw new Error("Invalid CAR section (zero length)");r+=t.pos-e;const n=await readCid(t),o=r-Number(t.pos-e);return{cid:n,length:r,blockLength:o}}async function readBlock(t){const{cid:e,blockLength:r}=await readBlockHead(t),n=await t.exactly(r);return t.seek(r),{bytes:n,cid:e}}async function readBlockIndex(t){const e=t.pos,{cid:r,length:n,blockLength:o}=await readBlockHead(t),u={cid:r,length:n,blockLength:o,offset:e,blockOffset:t.pos};return t.seek(u.blockLength),u}function createDecoder(t){const e=(async()=>{const r=await readHeader$1(t);if(r.version===2){const n=t.pos-r.dataOffset;t=limitReader(t,r.dataSize-n)}return r})();return{header:()=>e,async*blocks(){for(await e;(await t.upTo(8)).length>0;)yield await readBlock(t)},async*blocksIndex(){for(await e;(await t.upTo(8)).length>0;)yield await readBlockIndex(t)}}}function bytesReader(t){let e=0;return{async upTo(r){return t.subarray(e,e+Math.min(r,t.length-e))},async exactly(r){if(r>t.length-e)throw new Error("Unexpected end of data");return t.subarray(e,e+r)},seek(r){e+=r},get pos(){return e}}}function chunkReader(t){let e=0,r=0,n=0,o=new Uint8Array(0);const u=async y=>{r=o.length-n;const h=[o.subarray(n)];for(;r<y;){const m=await t();if(m==null)break;r<0?m.length>r&&h.push(m.subarray(-r)):h.push(m),r+=m.length}o=new Uint8Array(h.reduce((m,$)=>m+$.length,0));let g=0;for(const m of h)o.set(m,g),g+=m.length;n=0};return{async upTo(y){return o.length-n<y&&await u(y),o.subarray(n,n+Math.min(o.length-n,y))},async exactly(y){if(o.length-n<y&&await u(y),o.length-n<y)throw new Error("Unexpected end of data");return o.subarray(n,n+y)},seek(y){e+=y,n+=y},get pos(){return e}}}function asyncIterableReader(t){const e=t[Symbol.asyncIterator]();async function r(){const n=await e.next();return n.done?null:n.value}return chunkReader(r)}function limitReader(t,e){let r=0;return{async upTo(n){let o=await t.upTo(n);return o.length+r>e&&(o=o.subarray(0,e-r)),o},async exactly(n){const o=await t.exactly(n);if(o.length+r>e)throw new Error("Unexpected end of data");return o},seek(n){r+=n,t.seek(n)},get pos(){return t.pos}}}class CarReader{constructor(e,r){this._header=e,this._blocks=r,this._keys=r.map(n=>n.cid.toString())}get version(){return this._header.version}async getRoots(){return this._header.roots}async has(e){return this._keys.indexOf(e.toString())>-1}async get(e){const r=this._keys.indexOf(e.toString());return r>-1?this._blocks[r]:void 0}async*blocks(){for(const e of this._blocks)yield e}async*cids(){for(const e of this._blocks)yield e.cid}static async fromBytes(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return decodeReaderComplete(bytesReader(e))}static async fromIterable(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return decodeReaderComplete(asyncIterableReader(e))}}async function decodeReaderComplete(t){const e=createDecoder(t),r=await e.header(),n=[];for await(const o of e.blocks())n.push(o);return new CarReader(r,n)}const from$6=({name:t,code:e,encode:r})=>new Hasher$2(t,e,r);class Hasher$2{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?create$5(this.code,r):r.then(n=>create$5(this.code,n))}else throw Error("Unknown type, must be binary type")}}const name$3="raw",code$5=85,encode$f=t=>coerce$3(t),decode$c=t=>coerce$3(t),raw=Object.freeze(Object.defineProperty({__proto__:null,name:name$3,code:code$5,encode:encode$f,decode:decode$c},Symbol.toStringTag,{value:"Module"})),sha$2=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sha256$3=from$6({name:"sha2-256",code:18,encode:sha$2("SHA-256")}),sha512$2=from$6({name:"sha2-512",code:19,encode:sha$2("SHA-512")}),sha2$2=Object.freeze(Object.defineProperty({__proto__:null,sha256:sha256$3,sha512:sha512$2},Symbol.toStringTag,{value:"Module"})),readonly=({enumerable:t=!0,configurable:e=!1}={})=>({enumerable:t,configurable:e,writable:!1}),links=function*(t,e){if(t!=null&&!(t instanceof Uint8Array))for(const[r,n]of Object.entries(t)){const o=[...e,r];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(const[u,y]of n.entries()){const h=[...o,u],g=CID$1.asCID(y);g?yield[h.join("/"),g]:typeof y=="object"&&(yield*links(y,h))}else{const u=CID$1.asCID(n);u?yield[o.join("/"),u]:yield*links(n,o)}}},tree=function*(t,e){if(t!=null)for(const[r,n]of Object.entries(t)){const o=[...e,r];if(yield o.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!CID$1.asCID(n))if(Array.isArray(n))for(const[u,y]of n.entries()){const h=[...o,u];yield h.join("/"),typeof y=="object"&&!CID$1.asCID(y)&&(yield*tree(y,h))}else yield*tree(n,o)}},get$1=(t,e)=>{let r=t;for(const[n,o]of e.entries()){if(r=r[o],r==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(y=>`[${JSON.stringify(y)}]`).join("")}`);const u=CID$1.asCID(r);if(u)return{value:u,remaining:e.slice(n+1).join("/")}}return{value:r}};class Block{constructor({cid:e,bytes:r,value:n}){if(!e||!r||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=r,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:readonly(),bytes:readonly(),value:readonly(),asBlock:readonly()})}links(){return links(this.value,[])}tree(){return tree(this.value,[])}get(e="/"){return get$1(this.value,e.split("/").filter(Boolean))}}const encode$e=async({value:t,codec:e,hasher:r})=>{if(typeof t>"u")throw new Error('Missing required argument "value"');if(!e||!r)throw new Error("Missing required argument: codec or hasher");const n=e.encode(t),o=await r.digest(n),u=CID$1.create(1,e.code,o);return new Block({value:t,bytes:n,cid:u})},createUnsafe=({bytes:t,cid:e,value:r,codec:n})=>{const o=r!==void 0?r:n&&n.decode(t);if(o===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new Block({cid:e,bytes:t,value:o})},create$4=async({bytes:t,cid:e,hasher:r,codec:n})=>{if(!t)throw new Error('Missing required argument "bytes"');if(!r)throw new Error('Missing required argument "hasher"');const o=n.decode(t),u=await r.digest(t);if(!equals$4(e.multihash.bytes,u.bytes))throw new Error("CID hash does not match bytes");return createUnsafe({bytes:t,cid:e,value:o,codec:n})};function mitt(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(o){o(r)}),(n=t.get("*"))&&n.slice().map(function(o){o(e,r)})}}}const{isBinary}=byteslib,encode$d=t=>isBinary(t)?encode$e({value:t,hasher:sha256$3,codec:raw}):encode$e({value:t,hasher:sha256$3,codec:dagCBOR}),decode$b=({bytes:t,cid:e})=>{let r,n;const{code:o}=e,u=e.multihash.code||decode$f(e.multihash).code;if(u===18)r=sha256$3;else throw new Error("Unsupported hash function: "+u);if(o===113)n=dagCBOR;else if(o===85)n=raw;else throw new Error("Unsupported codec: "+o);return create$4({bytes:t,cid:e,codec:n,hasher:r})};class Transaction{constructor(){Object.assign(this,mitt()),this.blocks=[]}static create(){return new this}static async load(e){const r=await CarReader.fromBytes(e),[n]=await r.getRoots();return{root:n,get:u=>r.get(u).then(y=>decode$b(y)).then(({value:y})=>y)}}async add(e){const r=await encode$d(e);return this.last=r,this.blocks.push(r),this.emit("size",this.size),r.cid}async get(e){const{cid:r,bytes:n,value:o}=await decode$b(e);return{cid:r,bytes:n,value:o}}undo(){return this.blocks.pop()}async commit(){const e=this.last.cid;let r=0,n=headerLength({roots:[e]});r+=n;for(const y of this.blocks)r+=blockLength(y);const o=new Uint8Array(r),u=await createWriter(o,{headerSize:n});u.addRoot(e);for(const y of this.blocks)u.write(y);return await u.close(),u.bytes}get size(){if(!(this!=null&&this.last))return 0;const e=this.last.cid;let r=0,n=headerLength({roots:[e]});r+=n;for(const o of this.blocks)r+=blockLength(o);return r}}var browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var t=1e3,e=t*60,r=e*60,n=r*24,o=n*7,u=n*365.25;ms=function($,E){E=E||{};var A=typeof $;if(A==="string"&&$.length>0)return y($);if(A==="number"&&isFinite($))return E.long?g($):h($);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))};function y($){if($=String($),!($.length>100)){var E=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec($);if(!!E){var A=parseFloat(E[1]),B=(E[2]||"ms").toLowerCase();switch(B){case"years":case"year":case"yrs":case"yr":case"y":return A*u;case"weeks":case"week":case"w":return A*o;case"days":case"day":case"d":return A*n;case"hours":case"hour":case"hrs":case"hr":case"h":return A*r;case"minutes":case"minute":case"mins":case"min":case"m":return A*e;case"seconds":case"second":case"secs":case"sec":case"s":return A*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return A;default:return}}}}function h($){var E=Math.abs($);return E>=n?Math.round($/n)+"d":E>=r?Math.round($/r)+"h":E>=e?Math.round($/e)+"m":E>=t?Math.round($/t)+"s":$+"ms"}function g($){var E=Math.abs($);return E>=n?m($,E,n,"day"):E>=r?m($,E,r,"hour"):E>=e?m($,E,e,"minute"):E>=t?m($,E,t,"second"):$+" ms"}function m($,E,A,B){var T=E>=A*1.5;return Math.round($/A)+" "+B+(T?"s":"")}return ms}function setup(t){r.debug=r,r.default=r,r.coerce=g,r.disable=u,r.enable=o,r.enabled=y,r.humanize=requireMs(),r.destroy=m,Object.keys(t).forEach($=>{r[$]=t[$]}),r.names=[],r.skips=[],r.formatters={};function e($){let E=0;for(let A=0;A<$.length;A++)E=(E<<5)-E+$.charCodeAt(A),E|=0;return r.colors[Math.abs(E)%r.colors.length]}r.selectColor=e;function r($){let E,A=null,B,T;function k(...U){if(!k.enabled)return;const W=k,te=Number(new Date),X=te-(E||te);W.diff=X,W.prev=E,W.curr=te,E=te,U[0]=r.coerce(U[0]),typeof U[0]!="string"&&U.unshift("%O");let N=0;U[0]=U[0].replace(/%([a-zA-Z%])/g,(Z,j)=>{if(Z==="%%")return"%";N++;const K=r.formatters[j];if(typeof K=="function"){const se=U[N];Z=K.call(W,se),U.splice(N,1),N--}return Z}),r.formatArgs.call(W,U),(W.log||r.log).apply(W,U)}return k.namespace=$,k.useColors=r.useColors(),k.color=r.selectColor($),k.extend=n,k.destroy=r.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:()=>A!==null?A:(B!==r.namespaces&&(B=r.namespaces,T=r.enabled($)),T),set:U=>{A=U}}),typeof r.init=="function"&&r.init(k),k}function n($,E){const A=r(this.namespace+(typeof E>"u"?":":E)+$);return A.log=this.log,A}function o($){r.save($),r.namespaces=$,r.names=[],r.skips=[];let E;const A=(typeof $=="string"?$:"").split(/[\s,]+/),B=A.length;for(E=0;E<B;E++)!A[E]||($=A[E].replace(/\*/g,".*?"),$[0]==="-"?r.skips.push(new RegExp("^"+$.slice(1)+"$")):r.names.push(new RegExp("^"+$+"$")))}function u(){const $=[...r.names.map(h),...r.skips.map(h).map(E=>"-"+E)].join(",");return r.enable(""),$}function y($){if($[$.length-1]==="*")return!0;let E,A;for(E=0,A=r.skips.length;E<A;E++)if(r.skips[E].test($))return!1;for(E=0,A=r.names.length;E<A;E++)if(r.names[E].test($))return!0;return!1}function h($){return $.toString().substring(2,$.toString().length-2).replace(/\.\*\?$/,"*")}function g($){return $ instanceof Error?$.stack||$.message:$}function m(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var common$1=setup;(function(t,e){e.formatArgs=n,e.save=o,e.load=u,e.useColors=r,e.storage=y(),e.destroy=(()=>{let g=!1;return()=>{g||(g=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(g){if(g[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+g[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const m="color: "+this.color;g.splice(1,0,m,"color: inherit");let $=0,E=0;g[0].replace(/%[a-zA-Z%]/g,A=>{A!=="%%"&&($++,A==="%c"&&(E=$))}),g.splice(E,0,m)}e.log=console.debug||console.log||(()=>{});function o(g){try{g?e.storage.setItem("debug",g):e.storage.removeItem("debug")}catch{}}function u(){let g;try{g=e.storage.getItem("debug")}catch{}return!g&&typeof process<"u"&&"env"in process&&(g=process.env.DEBUG),g}function y(){try{return localStorage}catch{}}t.exports=common$1(e);const{formatters:h}=t.exports;h.j=function(g){try{return JSON.stringify(g)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}}})(browser,browser.exports);const debug=browser.exports;function assign(t,e){for(const r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function createError(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return assign(t,r)}catch{r.message=t.message,r.stack=t.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(t)),assign(new o,r)}}var errCode=createError;let nanoid=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");function base$2(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var u=t.charAt(o),y=u.charCodeAt(0);if(r[y]!==255)throw new TypeError(u+" is ambiguous");r[y]=o}var h=t.length,g=t.charAt(0),m=Math.log(h)/Math.log(256),$=Math.log(256)/Math.log(h);function E(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var k=0,U=0,W=0,te=T.length;W!==te&&T[W]===0;)W++,k++;for(var X=(te-W)*$+1>>>0,N=new Uint8Array(X);W!==te;){for(var O=T[W],Z=0,j=X-1;(O!==0||Z<U)&&j!==-1;j--,Z++)O+=256*N[j]>>>0,N[j]=O%h>>>0,O=O/h>>>0;if(O!==0)throw new Error("Non-zero carry");U=Z,W++}for(var K=X-U;K!==X&&N[K]===0;)K++;for(var se=g.repeat(k);K<X;++K)se+=t.charAt(N[K]);return se}function A(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var k=0;if(T[k]!==" "){for(var U=0,W=0;T[k]===g;)U++,k++;for(var te=(T.length-k)*m+1>>>0,X=new Uint8Array(te);T[k];){var N=r[T.charCodeAt(k)];if(N===255)return;for(var O=0,Z=te-1;(N!==0||O<W)&&Z!==-1;Z--,O++)N+=h*X[Z]>>>0,X[Z]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");W=O,k++}if(T[k]!==" "){for(var j=te-W;j!==te&&X[j]===0;)j++;for(var K=new Uint8Array(U+(te-j)),se=U;j!==te;)K[se++]=X[j++];return K}}}function B(T){var k=A(T);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:E,decodeUnsafe:A,decode:B}}var src$2=base$2,_brrp__multiformats_scope_baseX$2=src$2;const coerce$2=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fromString$5=t=>new TextEncoder().encode(t),toString$7=t=>new TextDecoder().decode(t);class Encoder$2{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder$2{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$2(this,e)}}class ComposedDecoder$2{constructor(e){this.decoders=e}or(e){return or$2(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or$2=(t,e)=>new ComposedDecoder$2({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Codec$2{constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder$2(e,r,n),this.decoder=new Decoder$2(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$5=({name:t,prefix:e,encode:r,decode:n})=>new Codec$2(t,e,r,n),baseX$2=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX$2(r,e);return from$5({prefix:t,name:e,encode:n,decode:u=>coerce$2(o(u))})},decode$a=(t,e,r,n)=>{const o={};for(let $=0;$<e.length;++$)o[e[$]]=$;let u=t.length;for(;t[u-1]==="=";)--u;const y=new Uint8Array(u*r/8|0);let h=0,g=0,m=0;for(let $=0;$<u;++$){const E=o[t[$]];if(E===void 0)throw new SyntaxError(`Non-${n} character`);g=g<<r|E,h+=r,h>=8&&(h-=8,y[m++]=255&g>>h)}if(h>=r||255&g<<8-h)throw new SyntaxError("Unexpected end of data");return y},encode$c=(t,e,r)=>{const n=e[e.length-1]==="=",o=(1<<r)-1;let u="",y=0,h=0;for(let g=0;g<t.length;++g)for(h=h<<8|t[g],y+=8;y>r;)y-=r,u+=e[o&h>>y];if(y&&(u+=e[o&h<<r-y]),n)for(;u.length*r&7;)u+="=";return u},rfc4648$2=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>from$5({prefix:e,name:t,encode(o){return encode$c(o,n,r)},decode(o){return decode$a(o,n,r,t)}}),identity$9=from$5({prefix:"\0",name:"identity",encode:t=>toString$7(t),decode:t=>fromString$5(t)}),identityBase$2=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$9},Symbol.toStringTag,{value:"Module"})),base2$4=rfc4648$2({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$5=Object.freeze(Object.defineProperty({__proto__:null,base2:base2$4},Symbol.toStringTag,{value:"Module"})),base8$4=rfc4648$2({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$5=Object.freeze(Object.defineProperty({__proto__:null,base8:base8$4},Symbol.toStringTag,{value:"Module"})),base10$4=baseX$2({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$5=Object.freeze(Object.defineProperty({__proto__:null,base10:base10$4},Symbol.toStringTag,{value:"Module"})),base16$4=rfc4648$2({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper$2=rfc4648$2({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$5=Object.freeze(Object.defineProperty({__proto__:null,base16:base16$4,base16upper:base16upper$2},Symbol.toStringTag,{value:"Module"})),base32$3=rfc4648$2({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper$1=rfc4648$2({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad$1=rfc4648$2({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper$1=rfc4648$2({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex$1=rfc4648$2({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper$1=rfc4648$2({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad$1=rfc4648$2({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper$1=rfc4648$2({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$1=rfc4648$2({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$4=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$3,base32upper:base32upper$1,base32pad:base32pad$1,base32padupper:base32padupper$1,base32hex:base32hex$1,base32hexupper:base32hexupper$1,base32hexpad:base32hexpad$1,base32hexpadupper:base32hexpadupper$1,base32z:base32z$1},Symbol.toStringTag,{value:"Module"})),base36$4=baseX$2({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper$2=baseX$2({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$5=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$4,base36upper:base36upper$2},Symbol.toStringTag,{value:"Module"})),base58btc$2=baseX$2({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr$1=baseX$2({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58$1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$2,base58flickr:base58flickr$1},Symbol.toStringTag,{value:"Module"})),base64$7=rfc4648$2({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad$2=rfc4648$2({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url$2=rfc4648$2({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad$2=rfc4648$2({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$8=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$7,base64pad:base64pad$2,base64url:base64url$2,base64urlpad:base64urlpad$2},Symbol.toStringTag,{value:"Module"})),alphabet$2=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),alphabetBytesToChars$2=alphabet$2.reduce((t,e,r)=>(t[r]=e,t),[]),alphabetCharsToBytes$2=alphabet$2.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function encode$b(t){return t.reduce((e,r)=>(e+=alphabetBytesToChars$2[r],e),"")}function decode$9(t){const e=[];for(const r of t){const n=alphabetCharsToBytes$2[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const base256emoji$4=from$5({prefix:"\u{1F680}",name:"base256emoji",encode:encode$b,decode:decode$9}),base256emoji$5=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:base256emoji$4},Symbol.toStringTag,{value:"Module"}));var encode_1$1=encode$a,MSB$2=128,REST$2=127,MSBALL$1=~REST$2,INT$1=Math.pow(2,31);function encode$a(t,e,r){e=e||[],r=r||0;for(var n=r;t>=INT$1;)e[r++]=t&255|MSB$2,t/=128;for(;t&MSBALL$1;)e[r++]=t&255|MSB$2,t>>>=7;return e[r]=t|0,encode$a.bytes=r-n+1,e}var decode$8=read$1,MSB$1$1=128,REST$1$1=127;function read$1(t,n){var r=0,n=n||0,o=0,u=n,y,h=t.length;do{if(u>=h)throw read$1.bytes=0,new RangeError("Could not decode varint");y=t[u++],r+=o<28?(y&REST$1$1)<<o:(y&REST$1$1)*Math.pow(2,o),o+=7}while(y>=MSB$1$1);return read$1.bytes=u-n,r}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$2=function(t){return t<N1$1?1:t<N2$1?2:t<N3$1?3:t<N4$1?4:t<N5$1?5:t<N6$1?6:t<N7$1?7:t<N8$1?8:t<N9$1?9:10},varint$1={encode:encode_1$1,decode:decode$8,encodingLength:length$2},_brrp_varint$1=varint$1;const encodeTo$1=(t,e,r=0)=>(_brrp_varint$1.encode(t,e,r),e),encodingLength$1=t=>_brrp_varint$1.encodingLength(t),create$3=(t,e)=>{const r=e.byteLength,n=encodingLength$1(t),o=n+encodingLength$1(r),u=new Uint8Array(o+r);return encodeTo$1(t,u,0),encodeTo$1(r,u,n),u.set(e,o),new Digest$1(t,r,e,u)};class Digest$1{constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}}const from$4=({name:t,code:e,encode:r})=>new Hasher$1(t,e,r);class Hasher$1{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?create$3(this.code,r):r.then(n=>create$3(this.code,n))}else throw Error("Unknown type, must be binary type")}}const sha$1=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sha256$2=from$4({name:"sha2-256",code:18,encode:sha$1("SHA-256")}),sha512$1=from$4({name:"sha2-512",code:19,encode:sha$1("SHA-512")}),sha2$1=Object.freeze(Object.defineProperty({__proto__:null,sha256:sha256$2,sha512:sha512$1},Symbol.toStringTag,{value:"Module"})),code$4=0,name$2="identity",encode$9=coerce$2,digest$2=t=>create$3(code$4,encode$9(t)),identity$7={code:code$4,name:name$2,encode:encode$9,digest:digest$2},identity$8=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$7},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases$2={...identityBase$2,...base2$5,...base8$5,...base10$5,...base16$5,...base32$4,...base36$5,...base58$1,...base64$8,...base256emoji$5};({...sha2$1,...identity$8});function asUint8Array$1(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function allocUnsafe$2(t=0){var e;return((e=globalThis.Buffer)==null?void 0:e.allocUnsafe)!=null?asUint8Array$1(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function createCodec$2(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const string$2=createCodec$2("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii$2=createCodec$2("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=allocUnsafe$2(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),BASES$2={utf8:string$2,"utf-8":string$2,hex:bases$2.base16,latin1:ascii$2,ascii:ascii$2,binary:ascii$2,...bases$2};function toString$6(t,e="utf8"){const r=BASES$2[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function fromString$4(t,e="utf8"){const r=BASES$2[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array$1(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const pathSepS="/",pathSepB=new TextEncoder().encode(pathSepS),pathSep=pathSepB[0];class Key{constructor(e,r){if(typeof e=="string")this._buf=fromString$4(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(r==null&&(r=!0),r&&this.clean(),this._buf.byteLength===0||this._buf[0]!==pathSep)throw new Error("Invalid key")}toString(e="utf8"){return toString$6(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Key(e.join(pathSepS))}static random(){return new Key(nanoid().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Key(e):typeof e.uint8Array=="function"?new Key(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=pathSepB),this._buf[0]!==pathSep){const e=new Uint8Array(this._buf.byteLength+1);e.fill(pathSep,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===pathSep;)this._buf=this._buf.subarray(0,-1)}less(e){const r=this.list(),n=e.list();for(let o=0;o<r.length;o++){if(n.length<o+1)return!1;const u=r[o],y=n[o];if(u<y)return!0;if(u>y)return!1}return r.length<n.length}reverse(){return Key.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(pathSepS).slice(1)}type(){return namespaceType(this.baseNamespace())}name(){return namespaceValue(this.baseNamespace())}instance(e){return new Key(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(pathSepS)||(e+=pathSepS),e+=this.type(),new Key(e)}parent(){const e=this.list();return e.length===1?new Key(pathSepS):new Key(e.slice(0,-1).join(pathSepS))}child(e){return this.toString()===pathSepS?e:e.toString()===pathSepS?this:new Key(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Key.withNamespaces([...this.namespaces(),...flatten(e.map(r=>r.namespaces()))])}}function namespaceType(t){const e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function namespaceValue(t){const e=t.split(":");return e[e.length-1]}function flatten(t){return[].concat(...t)}const length$1=async t=>{let e=0;for await(const r of t)e++;return e};var itLength=length$1;const log=debug("ipfs:repo:migrator:migration-8");function unwrap$1(t){return t.child?unwrap$1(t.child):t}function keyToMultihash(t){try{const e=base32$5.decode(`b${t.toString().toLowerCase().slice(1)}`),r=CID$1.decode(e).multihash.bytes,n=base32$5.encode(r).slice(1).toUpperCase();return new Key(`/${n}`,!1)}catch{return t}}function keyToCid(t){try{const e=base32$5.decode(`b${t.toString().toLowerCase().slice(1)}`),r=decode$f(e),n=base32$5.encode(CID$1.createV1(code$5,r).bytes).slice(1);return new Key(`/${n.toUpperCase()}`,!1)}catch{return t}}async function process$3(t,e,r){const n=t.blocks;await n.open();const o=unwrap$1(n),u=await itLength(o.queryKeys({filters:[y=>r(y).toString()!==y.toString()]}));try{let y=0;for await(const h of o.query({})){const g=r(h.key);g.toString()!==h.key.toString()&&(y+=1,log(`Migrating Block from ${h.key} to ${g}`,await o.has(h.key)),await o.delete(h.key),await o.put(g,h.value),e(y/u*100,`Migrated Block from ${h.key} to ${g}`))}}finally{await n.close()}}const migration$4={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(t,e=()=>{})=>process$3(t,e,keyToMultihash),revert:(t,e=()=>{})=>process$3(t,e,keyToCid)},textDecoder$1=new TextDecoder;function decodeVarint(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const o=t[e++];if(r+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[r,e]}function decodeBytes(t,e){let r;[r,e]=decodeVarint(t,e);const n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function decodeKey(t,e){let r;return[r,e]=decodeVarint(t,e),[r&7,r>>3,e]}function decodeLink(t){const e={},r=t.length;let n=0;for(;n<r;){let o,u;if([o,u,n]=decodeKey(t,n),u===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=decodeBytes(t,n)}else if(u===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let y;[y,n]=decodeBytes(t,n),e.Name=textDecoder$1.decode(y)}else if(u===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[e.Tsize,n]=decodeVarint(t,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${u}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function decodeNode(t){const e=t.length;let r=0,n,o=!1,u;for(;r<e;){let h,g;if([h,g,r]=decodeKey(t,r),h!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${h}`);if(g===1){if(u)throw new Error("protobuf: (PBNode) duplicate Data section");[u,r]=decodeBytes(t,r),n&&(o=!0)}else if(g===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let m;[m,r]=decodeBytes(t,r),n.push(decodeLink(m))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${g}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");const y={};return u&&(y.Data=u),y.Links=n||[],y}const textEncoder$3=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=encodeVarint(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){const n=textEncoder$3.encode(t.Name);r-=n.length,e.set(n,r),r=encodeVarint(e,r,n.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=encodeVarint(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function encodeNode(t){const e=sizeNode(t),r=new Uint8Array(e);let n=e;if(t.Data&&(n-=t.Data.length,r.set(t.Data,n),n=encodeVarint(r,n,t.Data.length)-1,r[n]=10),t.Links)for(let o=t.Links.length-1;o>=0;o--){const u=encodeLink(t.Links[o],r.subarray(0,n));n-=u,n=encodeVarint(r,n,u)-1,r[n]=18}return r}function sizeLink(t){let e=0;if(t.Hash){const r=t.Hash.length;e+=1+r+sov(r)}if(typeof t.Name=="string"){const r=textEncoder$3.encode(t.Name).length;e+=1+r+sov(r)}return typeof t.Tsize=="number"&&(e+=1+sov(t.Tsize)),e}function sizeNode(t){let e=0;if(t.Data){const r=t.Data.length;e+=1+r+sov(r)}if(t.Links)for(const r of t.Links){const n=sizeLink(r);e+=1+n+sov(n)}return e}function encodeVarint(t,e,r){e-=sov(r);const n=e;for(;r>=maxUInt32;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,n}function sov(t){return t%2===0&&t++,Math.floor((len64(t)+6)/7)}function len64(t){let e=0;return t>=maxInt32&&(t=Math.floor(t/maxInt32),e=32),t>=1<<16&&(t>>>=16,e+=16),t>=1<<8&&(t>>>=8,e+=8),e+len8tab[t]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder$2=new TextEncoder;function linkComparator(t,e){if(t===e)return 0;const r=t.Name?textEncoder$2.encode(t.Name):[],n=e.Name?textEncoder$2.encode(e.Name):[];let o=r.length,u=n.length;for(let y=0,h=Math.min(o,u);y<h;++y)if(r[y]!==n[y]){o=r[y],u=n[y];break}return o<u?-1:u<o?1:0}function hasOnlyProperties(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function validate(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(t,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<t.Links.length;e++){const r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!hasOnlyProperties(r,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0&&(typeof r.Tsize!="number"||r.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&linkComparator(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}const code$3=112;function encode$8(t){validate(t);const e={};return t.Links&&(e.Links=t.Links.map(r=>{const n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),t.Data&&(e.Data=t.Data),encodeNode(e)}function decode$7(t){const e=decodeNode(t),r={};return e.Data&&(r.Data=e.Data),e.Links&&(r.Links=e.Links.map(n=>{const o={};try{o.Hash=CID$1.decode(n.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(o.Name=n.Name),n.Tsize!==void 0&&(o.Tsize=n.Tsize),o})),r}var minimal$1={exports:{}},indexMinimal={},minimal={},aspromise=asPromise;function asPromise(t,e){for(var r=new Array(arguments.length-1),n=0,o=2,u=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise(function(h,g){r[n]=function($){if(u)if(u=!1,$)g($);else{for(var E=new Array(arguments.length-1),A=0;A<E.length;)E[A++]=arguments[A];h.apply(null,E)}};try{t.apply(e||null,r)}catch(m){u&&(u=!1,g(m))}})}var base64$6={};(function(t){var e=t;e.length=function(h){var g=h.length;if(!g)return 0;for(var m=0;--g%4>1&&h.charAt(g)==="=";)++m;return Math.ceil(h.length*3)/4-m};for(var r=new Array(64),n=new Array(123),o=0;o<64;)n[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;e.encode=function(h,g,m){for(var $=null,E=[],A=0,B=0,T;g<m;){var k=h[g++];switch(B){case 0:E[A++]=r[k>>2],T=(k&3)<<4,B=1;break;case 1:E[A++]=r[T|k>>4],T=(k&15)<<2,B=2;break;case 2:E[A++]=r[T|k>>6],E[A++]=r[k&63],B=0;break}A>8191&&(($||($=[])).push(String.fromCharCode.apply(String,E)),A=0)}return B&&(E[A++]=r[T],E[A++]=61,B===1&&(E[A++]=61)),$?(A&&$.push(String.fromCharCode.apply(String,E.slice(0,A))),$.join("")):String.fromCharCode.apply(String,E.slice(0,A))};var u="invalid encoding";e.decode=function(h,g,m){for(var $=m,E=0,A,B=0;B<h.length;){var T=h.charCodeAt(B++);if(T===61&&E>1)break;if((T=n[T])===void 0)throw Error(u);switch(E){case 0:A=T,E=1;break;case 1:g[m++]=A<<2|(T&48)>>4,A=T,E=2;break;case 2:g[m++]=(A&15)<<4|(T&60)>>2,A=T,E=3;break;case 3:g[m++]=(A&3)<<6|T,E=0;break}}if(E===1)throw Error(u);return m-$},e.test=function(h){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(h)}})(base64$6);var eventemitter=EventEmitter$3;function EventEmitter$3(){this._listeners={}}EventEmitter$3.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};EventEmitter$3.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],o=0;o<n.length;)n[o].fn===r?n.splice(o,1):++o;return this};EventEmitter$3.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],o=1;o<arguments.length;)n.push(arguments[o++]);for(o=0;o<r.length;)r[o].fn.apply(r[o++].ctx,n)}return this};var float=factory(factory);function factory(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function o(g,m,$){e[0]=g,m[$]=r[0],m[$+1]=r[1],m[$+2]=r[2],m[$+3]=r[3]}function u(g,m,$){e[0]=g,m[$]=r[3],m[$+1]=r[2],m[$+2]=r[1],m[$+3]=r[0]}t.writeFloatLE=n?o:u,t.writeFloatBE=n?u:o;function y(g,m){return r[0]=g[m],r[1]=g[m+1],r[2]=g[m+2],r[3]=g[m+3],e[0]}function h(g,m){return r[3]=g[m],r[2]=g[m+1],r[1]=g[m+2],r[0]=g[m+3],e[0]}t.readFloatLE=n?y:h,t.readFloatBE=n?h:y}():function(){function e(n,o,u,y){var h=o<0?1:0;if(h&&(o=-o),o===0)n(1/o>0?0:2147483648,u,y);else if(isNaN(o))n(2143289344,u,y);else if(o>34028234663852886e22)n((h<<31|2139095040)>>>0,u,y);else if(o<11754943508222875e-54)n((h<<31|Math.round(o/1401298464324817e-60))>>>0,u,y);else{var g=Math.floor(Math.log(o)/Math.LN2),m=Math.round(o*Math.pow(2,-g)*8388608)&8388607;n((h<<31|g+127<<23|m)>>>0,u,y)}}t.writeFloatLE=e.bind(null,writeUintLE$1),t.writeFloatBE=e.bind(null,writeUintBE$1);function r(n,o,u){var y=n(o,u),h=(y>>31)*2+1,g=y>>>23&255,m=y&8388607;return g===255?m?NaN:h*(1/0):g===0?h*1401298464324817e-60*m:h*Math.pow(2,g-150)*(m+8388608)}t.readFloatLE=r.bind(null,readUintLE$1),t.readFloatBE=r.bind(null,readUintBE$1)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function o(g,m,$){e[0]=g,m[$]=r[0],m[$+1]=r[1],m[$+2]=r[2],m[$+3]=r[3],m[$+4]=r[4],m[$+5]=r[5],m[$+6]=r[6],m[$+7]=r[7]}function u(g,m,$){e[0]=g,m[$]=r[7],m[$+1]=r[6],m[$+2]=r[5],m[$+3]=r[4],m[$+4]=r[3],m[$+5]=r[2],m[$+6]=r[1],m[$+7]=r[0]}t.writeDoubleLE=n?o:u,t.writeDoubleBE=n?u:o;function y(g,m){return r[0]=g[m],r[1]=g[m+1],r[2]=g[m+2],r[3]=g[m+3],r[4]=g[m+4],r[5]=g[m+5],r[6]=g[m+6],r[7]=g[m+7],e[0]}function h(g,m){return r[7]=g[m],r[6]=g[m+1],r[5]=g[m+2],r[4]=g[m+3],r[3]=g[m+4],r[2]=g[m+5],r[1]=g[m+6],r[0]=g[m+7],e[0]}t.readDoubleLE=n?y:h,t.readDoubleBE=n?h:y}():function(){function e(n,o,u,y,h,g){var m=y<0?1:0;if(m&&(y=-y),y===0)n(0,h,g+o),n(1/y>0?0:2147483648,h,g+u);else if(isNaN(y))n(0,h,g+o),n(2146959360,h,g+u);else if(y>17976931348623157e292)n(0,h,g+o),n((m<<31|2146435072)>>>0,h,g+u);else{var $;if(y<22250738585072014e-324)$=y/5e-324,n($>>>0,h,g+o),n((m<<31|$/4294967296)>>>0,h,g+u);else{var E=Math.floor(Math.log(y)/Math.LN2);E===1024&&(E=1023),$=y*Math.pow(2,-E),n($*4503599627370496>>>0,h,g+o),n((m<<31|E+1023<<20|$*1048576&1048575)>>>0,h,g+u)}}}t.writeDoubleLE=e.bind(null,writeUintLE$1,0,4),t.writeDoubleBE=e.bind(null,writeUintBE$1,4,0);function r(n,o,u,y,h){var g=n(y,h+o),m=n(y,h+u),$=(m>>31)*2+1,E=m>>>20&2047,A=4294967296*(m&1048575)+g;return E===2047?A?NaN:$*(1/0):E===0?$*5e-324*A:$*Math.pow(2,E-1075)*(A+4503599627370496)}t.readDoubleLE=r.bind(null,readUintLE$1,0,4),t.readDoubleBE=r.bind(null,readUintBE$1,4,0)}(),t}function writeUintLE$1(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function writeUintBE$1(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function readUintLE$1(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function readUintBE$1(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}var utf8$2={};(function(t){var e=t;e.length=function(n){for(var o=0,u=0,y=0;y<n.length;++y)u=n.charCodeAt(y),u<128?o+=1:u<2048?o+=2:(u&64512)===55296&&(n.charCodeAt(y+1)&64512)===56320?(++y,o+=4):o+=3;return o},e.read=function(n,o,u){var y=u-o;if(y<1)return"";for(var h=null,g=[],m=0,$;o<u;)$=n[o++],$<128?g[m++]=$:$>191&&$<224?g[m++]=($&31)<<6|n[o++]&63:$>239&&$<365?($=(($&7)<<18|(n[o++]&63)<<12|(n[o++]&63)<<6|n[o++]&63)-65536,g[m++]=55296+($>>10),g[m++]=56320+($&1023)):g[m++]=($&15)<<12|(n[o++]&63)<<6|n[o++]&63,m>8191&&((h||(h=[])).push(String.fromCharCode.apply(String,g)),m=0);return h?(m&&h.push(String.fromCharCode.apply(String,g.slice(0,m))),h.join("")):String.fromCharCode.apply(String,g.slice(0,m))},e.write=function(n,o,u){for(var y=u,h,g,m=0;m<n.length;++m)h=n.charCodeAt(m),h<128?o[u++]=h:h<2048?(o[u++]=h>>6|192,o[u++]=h&63|128):(h&64512)===55296&&((g=n.charCodeAt(m+1))&64512)===56320?(h=65536+((h&1023)<<10)+(g&1023),++m,o[u++]=h>>18|240,o[u++]=h>>12&63|128,o[u++]=h>>6&63|128,o[u++]=h&63|128):(o[u++]=h>>12|224,o[u++]=h>>6&63|128,o[u++]=h&63|128);return u-y}})(utf8$2);var pool_1=pool;function pool(t,e,r){var n=r||8192,o=n>>>1,u=null,y=n;return function(g){if(g<1||g>o)return t(g);y+g>n&&(u=t(n),y=0);var m=e.call(u,y,y+=g);return y&7&&(y=(y|7)+1),m}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var t=requireMinimal();function e(u,y){this.lo=u>>>0,this.hi=y>>>0}var r=e.zero=new e(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var n=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(y){if(y===0)return r;var h=y<0;h&&(y=-y);var g=y>>>0,m=(y-g)/4294967296>>>0;return h&&(m=~m>>>0,g=~g>>>0,++g>4294967295&&(g=0,++m>4294967295&&(m=0))),new e(g,m)},e.from=function(y){if(typeof y=="number")return e.fromNumber(y);if(t.isString(y))if(t.Long)y=t.Long.fromString(y);else return e.fromNumber(parseInt(y,10));return y.low||y.high?new e(y.low>>>0,y.high>>>0):r},e.prototype.toNumber=function(y){if(!y&&this.hi>>>31){var h=~this.lo+1>>>0,g=~this.hi>>>0;return h||(g=g+1>>>0),-(h+g*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(y){return t.Long?new t.Long(this.lo|0,this.hi|0,Boolean(y)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(y)}};var o=String.prototype.charCodeAt;return e.fromHash=function(y){return y===n?r:new e((o.call(y,0)|o.call(y,1)<<8|o.call(y,2)<<16|o.call(y,3)<<24)>>>0,(o.call(y,4)|o.call(y,5)<<8|o.call(y,6)<<16|o.call(y,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var y=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^y)>>>0,this.lo=(this.lo<<1^y)>>>0,this},e.prototype.zzDecode=function(){var y=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^y)>>>0,this.hi=(this.hi>>>1^y)>>>0,this},e.prototype.length=function(){var y=this.lo,h=(this.lo>>>28|this.hi<<4)>>>0,g=this.hi>>>24;return g===0?h===0?y<16384?y<128?1:2:y<2097152?3:4:h<16384?h<128?5:6:h<2097152?7:8:g<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(t){var e=t;e.asPromise=aspromise,e.base64=base64$6,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$2,e.pool=pool_1,e.LongBits=requireLongbits(),e.isNode=Boolean(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u},e.isString=function(u){return typeof u=="string"||u instanceof String},e.isObject=function(u){return u&&typeof u=="object"},e.isset=e.isSet=function(u,y){var h=u[y];return h!=null&&u.hasOwnProperty(y)?typeof h!="object"||(Array.isArray(h)?h.length:Object.keys(h).length)>0:!1},e.Buffer=function(){try{var o=e.inquire("buffer").Buffer;return o.prototype.utf8Write?o:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(u){return typeof u=="number"?e.Buffer?e._Buffer_allocUnsafe(u):new e.Array(u):e.Buffer?e._Buffer_from(u):typeof Uint8Array>"u"?u:new Uint8Array(u)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(u){return u?e.LongBits.from(u).toHash():e.LongBits.zeroHash},e.longFromHash=function(u,y){var h=e.LongBits.fromHash(u);return e.Long?e.Long.fromBits(h.lo,h.hi,y):h.toNumber(Boolean(y))};function r(o,u,y){for(var h=Object.keys(u),g=0;g<h.length;++g)(o[h[g]]===void 0||!y)&&(o[h[g]]=u[h[g]]);return o}e.merge=r,e.lcFirst=function(u){return u.charAt(0).toLowerCase()+u.substring(1)};function n(o){function u(y,h){if(!(this instanceof u))return new u(y,h);Object.defineProperty(this,"message",{get:function(){return y}}),Error.captureStackTrace?Error.captureStackTrace(this,u):Object.defineProperty(this,"stack",{value:new Error().stack||""}),h&&r(this,h)}return u.prototype=Object.create(Error.prototype,{constructor:{value:u,writable:!0,enumerable:!1,configurable:!0},name:{get(){return o},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),u}e.newError=n,e.ProtocolError=n("ProtocolError"),e.oneOfGetter=function(u){for(var y={},h=0;h<u.length;++h)y[u[h]]=1;return function(){for(var g=Object.keys(this),m=g.length-1;m>-1;--m)if(y[g[m]]===1&&this[g[m]]!==void 0&&this[g[m]]!==null)return g[m]}},e.oneOfSetter=function(u){return function(y){for(var h=0;h<u.length;++h)u[h]!==y&&delete this[u[h]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var o=e.Buffer;if(!o){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=o.from!==Uint8Array.from&&o.from||function(y,h){return new o(y,h)},e._Buffer_allocUnsafe=o.allocUnsafe||function(y){return new o(y)}}}(minimal)),minimal}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64$5=util$4.base64,utf8$1=util$4.utf8;function Op(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function noop$2(){}function State(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Writer$1(){this.len=0,this.head=new Op(noop$2,0,0),this.tail=this.head,this.states=null}var create$2=function t(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$2();Writer$1.alloc=function t(e){return new util$4.Array(e)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function t(e,r,n){return this.tail=this.tail.next=new Op(e,r,n),this.len+=r,this};function writeByte(t,e,r){e[r]=t&255}function writeVarint32(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function VarintOp(t,e){this.len=t,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function t(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function t(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function t(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}Writer$1.prototype.uint64=function t(e){var r=LongBits$1.from(e);return this._push(writeVarint64,r.length(),r)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function t(e){var r=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,r.length(),r)};Writer$1.prototype.bool=function t(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}Writer$1.prototype.fixed32=function t(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function t(e){var r=LongBits$1.from(e);return this._push(writeFixed32,4,r.lo)._push(writeFixed32,4,r.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function t(e){return this._push(util$4.float.writeFloatLE,4,e)};Writer$1.prototype.double=function t(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function t(e,r,n){r.set(e,n)}:function t(e,r,n){for(var o=0;o<e.length;++o)r[n+o]=e[o]};Writer$1.prototype.bytes=function t(e){var r=e.length>>>0;if(!r)return this._push(writeByte,1,0);if(util$4.isString(e)){var n=Writer$1.alloc(r=base64$5.length(e));base64$5.decode(e,n,0),e=n}return this.uint32(r)._push(writeBytes,r,e)};Writer$1.prototype.string=function t(e){var r=utf8$1.length(e);return r?this.uint32(r)._push(utf8$1.write,r,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function t(){return this.states=new State(this),this.head=this.tail=new Op(noop$2,0,0),this.len=0,this};Writer$1.prototype.reset=function t(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$2,0,0),this.len=0),this};Writer$1.prototype.ldelim=function t(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};Writer$1.prototype.finish=function t(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};Writer$1._configure=function(t){BufferWriter$1=t,Writer$1.create=create$2(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var o=0;o<e.length;)r[n++]=e[o++]}};BufferWriter.prototype.bytes=function t(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(BufferWriter.writeBytesBuffer,r,e),this};function writeStringBuffer(t,e,r){t.length<40?util$3.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}BufferWriter.prototype.string=function t(e){var r=util$3.Buffer.byteLength(e);return this.uint32(r),r&&this._push(writeStringBuffer,r,e),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Reader$1(t){this.buf=t,this.pos=0,this.len=t.length}var create_array=typeof Uint8Array<"u"?function t(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function t(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create$1=function t(){return util$2.Buffer?function(r){return(Reader$1.create=function(o){return util$2.Buffer.isBuffer(o)?new BufferReader$1(o):create_array(o)})(r)}:create_array};Reader$1.create=create$1();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function t(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function t(){return this.uint32()|0};Reader$1.prototype.sint32=function t(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var t=new LongBits(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function t(){return this.uint32()!==0};function readFixed32_end(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function t(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function t(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};Reader$1.prototype.string=function t(){var e=this.bytes();return utf8.read(e,0,e.length)};Reader$1.prototype.skip=function t(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Reader$1._configure=function(t){BufferReader$1=t,Reader$1.create=create$1(),BufferReader$1._configure();var e=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(t){Reader.call(this,t)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function t(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}Service.prototype.rpcCall=function t(e,r,n,o,u){if(!o)throw TypeError("request must be specified");var y=this;if(!u)return util.asPromise(t,y,e,r,n,o);if(!y.rpcImpl){setTimeout(function(){u(Error("already ended"))},0);return}try{return y.rpcImpl(e,r[y.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(g,m){if(g)return y.emit("error",g,e),u(g);if(m===null){y.end(!0);return}if(!(m instanceof n))try{m=n[y.responseDelimited?"decodeDelimited":"decode"](m)}catch($){return y.emit("error",$,e),u($)}return y.emit("data",m,e),u(null,m)})}catch(h){y.emit("error",h,e),setTimeout(function(){u(h)},0);return}};Service.prototype.end=function t(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(t){var e=t;e.Service=service})(rpc);var roots={};(function(t){var e=t;e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=requireMinimal(),e.rpc=rpc,e.roots=roots,e.configure=r;function r(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}r()})(indexMinimal);(function(t){t.exports=indexMinimal})(minimal$1);const $protobuf=getDefaultExportFromCjs(minimal$1.exports),$Reader$5=$protobuf.Reader,$Writer$5=$protobuf.Writer;$protobuf.util;const $root$5=$protobuf.roots.default||($protobuf.roots.default={}),ipfs=$root$5.ipfs=(()=>{const t={};return t.pin=function(){const e={};return e.Set=function(){function r(n){if(n)for(var o=Object.keys(n),u=0;u<o.length;++u)n[o[u]]!=null&&(this[o[u]]=n[o[u]])}return r.prototype.version=0,r.prototype.fanout=0,r.prototype.seed=0,r.encode=function(o,u){return u||(u=$Writer$5.create()),o.version!=null&&Object.hasOwnProperty.call(o,"version")&&u.uint32(8).uint32(o.version),o.fanout!=null&&Object.hasOwnProperty.call(o,"fanout")&&u.uint32(16).uint32(o.fanout),o.seed!=null&&Object.hasOwnProperty.call(o,"seed")&&u.uint32(29).fixed32(o.seed),u},r.decode=function(o,u){o instanceof $Reader$5||(o=$Reader$5.create(o));for(var y=u===void 0?o.len:o.pos+u,h=new $root$5.ipfs.pin.Set;o.pos<y;){var g=o.uint32();switch(g>>>3){case 1:h.version=o.uint32();break;case 2:h.fanout=o.uint32();break;case 3:h.seed=o.fixed32();break;default:o.skipType(g&7);break}}return h},r.fromObject=function(o){if(o instanceof $root$5.ipfs.pin.Set)return o;var u=new $root$5.ipfs.pin.Set;return o.version!=null&&(u.version=o.version>>>0),o.fanout!=null&&(u.fanout=o.fanout>>>0),o.seed!=null&&(u.seed=o.seed>>>0),u},r.toObject=function(o,u){u||(u={});var y={};return u.defaults&&(y.version=0,y.fanout=0,y.seed=0),o.version!=null&&o.hasOwnProperty("version")&&(y.version=o.version),o.fanout!=null&&o.hasOwnProperty("fanout")&&(y.fanout=o.fanout),o.seed!=null&&o.hasOwnProperty("seed")&&(y.seed=o.seed),y},r.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},r}(),e}(),t})();var fnv1a$1={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),r.BASE=2166136261;function r(n,o=r.BASE){const u=n.length;for(let y=0;y<u;y++)o^=n.charCodeAt(y),o+=(o<<1)+(o<<4)+(o<<7)+(o<<8)+(o<<24);return o>>>0}e.default=r,t.exports=r})(fnv1a$1,fnv1a$1.exports);const fnv1a=getDefaultExportFromCjs(fnv1a$1.exports),PIN_DS_KEY=new Key("/local/pins"),DEFAULT_FANOUT=256,MAX_ITEMS=8192,EMPTY_KEY=CID$1.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),PinTypes={direct:"direct",recursive:"recursive"};function cidToKey(t){return new Key(`/${base32$5.encode(t.multihash.bytes).toUpperCase().substring(1)}`)}function allocUnsafe$1(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function concat$1(t,e){e||(e=t.reduce((o,u)=>o+u.length,0));const r=allocUnsafe$1(e);let n=0;for(const o of t)r.set(o,n),n+=o.length;return r}function compare(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}const identity$6=from$7({prefix:"\0",name:"identity",encode:t=>toString$8(t),decode:t=>fromString$6(t)}),identityBase$1=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$6},Symbol.toStringTag,{value:"Module"})),base2$2=rfc4648$3({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$3=Object.freeze(Object.defineProperty({__proto__:null,base2:base2$2},Symbol.toStringTag,{value:"Module"})),base8$2=rfc4648$3({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$3=Object.freeze(Object.defineProperty({__proto__:null,base8:base8$2},Symbol.toStringTag,{value:"Module"})),base10$2=baseX$3({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$3=Object.freeze(Object.defineProperty({__proto__:null,base10:base10$2},Symbol.toStringTag,{value:"Module"})),base16$2=rfc4648$3({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper$1=rfc4648$3({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$3=Object.freeze(Object.defineProperty({__proto__:null,base16:base16$2,base16upper:base16upper$1},Symbol.toStringTag,{value:"Module"})),base36$2=baseX$3({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper$1=baseX$3({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$3=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$2,base36upper:base36upper$1},Symbol.toStringTag,{value:"Module"})),base64$3=rfc4648$3({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad$1=rfc4648$3({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url$1=rfc4648$3({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad$1=rfc4648$3({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$4=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$3,base64pad:base64pad$1,base64url:base64url$1,base64urlpad:base64urlpad$1},Symbol.toStringTag,{value:"Module"})),alphabet$1=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),alphabetBytesToChars$1=alphabet$1.reduce((t,e,r)=>(t[r]=e,t),[]),alphabetCharsToBytes$1=alphabet$1.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function encode$7(t){return t.reduce((e,r)=>(e+=alphabetBytesToChars$1[r],e),"")}function decode$6(t){const e=[];for(const r of t){const n=alphabetCharsToBytes$1[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const base256emoji$2=from$7({prefix:"\u{1F680}",name:"base256emoji",encode:encode$7,decode:decode$6}),base256emoji$3=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:base256emoji$2},Symbol.toStringTag,{value:"Module"})),code$2=0,name$1="identity",encode$6=coerce$3,digest$1=t=>create$5(code$2,encode$6(t)),identity$4={code:code$2,name:name$1,encode:encode$6,digest:digest$1},identity$5=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$4},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases$1={...identityBase$1,...base2$3,...base8$3,...base10$3,...base16$3,...base32$6,...base36$3,...base58$2,...base64$4,...base256emoji$3};({...sha2$2,...identity$5});function createCodec$1(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const string$1=createCodec$1("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii$1=createCodec$1("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=allocUnsafe$1(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),BASES$1={utf8:string$1,"utf-8":string$1,hex:bases$1.base16,latin1:ascii$1,ascii:ascii$1,binary:ascii$1,...bases$1};function toString$5(t,e="utf8"){const r=BASES$1[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function fromString$3(t,e="utf8"){const r=BASES$1[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}const PinSet=ipfs.pin.Set;function readHeader(t){const e=t.Data;if(!e)throw new Error("No data present");const r=varint$3.decode(e),n=varint$3.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+r>e.length)throw new Error("Impossibly large set header length");const o=e.slice(n,r+n),u=PinSet.toObject(PinSet.decode(o),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(u.version!==1)throw new Error(`Unsupported Set version: ${u.version}`);if(u.fanout>t.Links.length)throw new Error("Impossibly large fanout");return{header:u,data:e.slice(r+n)}}function hash(t,e){const r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,t,!0);const o=fromString$3(e.toString()),u=concat$1([r,o],r.byteLength+o.byteLength);return fnv1a(toString$5(u))}async function*walkItems(t,e){const r=readHeader(e);let n=0;for(const o of e.Links){if(n<r.header.fanout){const u=o.Hash;if(!EMPTY_KEY.equals(u)){const y=await t.get(u),h=decode$7(y);yield*walkItems(t,h)}}else yield o.Hash;n++}}async function*loadSet(t,e,r){const n=e.Links.find(y=>y.Name===r);if(!n)throw new Error("No link found with name "+r);const o=await t.get(n.Hash),u=decode$7(o);yield*walkItems(t,u)}function storeItems(t,e){return r(e,0);async function r(n,o){const u=PinSet.encode({version:1,fanout:DEFAULT_FANOUT,seed:o}).finish(),y=varint$3.encode(u.length),h=concat$1([y,u]),g=[];for(let $=0;$<DEFAULT_FANOUT;$++)g.push({Name:"",Tsize:1,Hash:EMPTY_KEY});if(n.length<=MAX_ITEMS){const $=n.map(B=>({link:{Name:"",Tsize:1,Hash:B.key},data:B.data||new Uint8Array})).sort((B,T)=>compare(B.link.Hash.bytes,T.link.Hash.bytes)),E=g.concat($.map(B=>B.link));return{Data:concat$1([h,...$.map(B=>B.data)]),Links:E}}else{const $=n.reduce((A,B)=>{const T=hash(o,B.key)%DEFAULT_FANOUT;return A[T]=T in A?A[T].concat([B]):[B],A},[]);let E=0;for(const A of $){const B=await r(A,o+1);await m(B,E),E++}return{Data:h,Links:g}}async function m($,E){const A=encode$8($),B=await sha256$3.digest(A),T=CID$1.createV0(B);await t.put(T,A);const k=$.Links.reduce((U,W)=>U+(W.Tsize||0),0)+A.length;g[E]={Name:"",Tsize:k,Hash:T}}}}async function storeSet(t,e,r){const n=await storeItems(t,r.map(g=>({key:g}))),o=encode$8(n),u=await sha256$3.digest(o),y=CID$1.createV0(u);await t.put(y,o);const h=n.Links.reduce((g,m)=>g+m.Tsize,0)+o.length;return{Name:e,Tsize:h,Hash:y}}async function pinsToDatastore(t,e,r,n){if(!await e.has(PIN_DS_KEY))return;const o=await e.get(PIN_DS_KEY),u=CID$1.decode(o),y=await t.get(u),h=decode$7(y);let g=0;const m=await itLength(loadSet(t,h,PinTypes.recursive))+await itLength(loadSet(t,h,PinTypes.direct));for await(const $ of loadSet(t,h,PinTypes.recursive)){g++;const E={depth:1/0};$.version!==0&&(E.version=$.version),$.code!==code$3&&(E.codec=$.code),await r.put(cidToKey($),encode$j(E)),n(g/m*100,`Migrated recursive pin ${$}`)}for await(const $ of loadSet(t,h,PinTypes.direct)){g++;const E={depth:0};$.version!==0&&(E.version=$.version),$.code!==code$3&&(E.codec=$.code),await r.put(cidToKey($),encode$j(E)),n(g/m*100,`Migrated direct pin ${$}`)}await t.delete(u),await e.delete(PIN_DS_KEY)}async function pinsToDAG(t,e,r,n){const o=[],u=[];let y=0;const h=await itLength(r.queryKeys({}));for await(const{key:A,value:B}of r.query({})){y++;const T=decode$i(B),k=CID$1.create(T.version||0,T.codec||code$3,decode$f(base32$5.decode("b"+A.toString().toLowerCase().split("/").pop())));T.depth===0?(n(y/h*100,`Reverted direct pin ${k}`),u.push(k)):(n(y/h*100,`Reverted recursive pin ${k}`),o.push(k))}n(100,"Updating pin root");const g={Links:[await storeSet(t,PinTypes.direct,u),await storeSet(t,PinTypes.recursive,o)]},m=encode$8(g),$=await sha256$3.digest(m),E=CID$1.createV0($);await t.put(E,m),await e.put(PIN_DS_KEY,E.bytes)}async function process$2(t,e,r){const n=t.blocks,o=t.datastore,u=t.pins;await n.open(),await o.open(),await u.open();try{await r(n,o,u,e)}finally{await u.close(),await o.close(),await n.close()}}const migration$3={version:9,description:"Migrates pins to datastore",migrate:(t,e=()=>{})=>process$2(t,e,pinsToDatastore),revert:(t,e=()=>{})=>process$2(t,e,pinsToDAG)};function notFoundError(t){return t=t||new Error("Not Found"),errCode(t,"ERR_NOT_FOUND")}new Key("/config");new Key("/version");function findLevelJs(t){let e=t;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}async function keysToBinary(t,e,r=()=>{}){const n=findLevelJs(e);if(!n){r(`${t} did not need an upgrade`);return}r(`Upgrading ${t}`),await withEach(n,(u,y)=>[{type:"del",key:u},{type:"put",key:fromString$3(u),value:y}])}async function keysToStrings(t,e,r=()=>{}){const n=findLevelJs(e);if(!n){r(`${t} did not need a downgrade`);return}r(`Downgrading ${t}`),await withEach(n,(u,y)=>[{type:"del",key:u},{type:"put",key:toString$5(u),value:y}])}function unwrap(t){return t.child?unwrap(t.child):t}async function process$1(t,e,r){const n=Object.entries(t).map(([y,h])=>({key:y,backend:unwrap(h)})).filter(({key:y,backend:h})=>h.constructor.name==="LevelDatastore").map(({key:y,backend:h})=>({name:y,store:h}));e(0,`Migrating ${n.length} dbs`);let o=0;const u=y=>{e(Math.round(o/n.length*100),y)};for(const{name:y,store:h}of n){await h.open();try{await r(y,h,u)}finally{o++,await h.close()}}e(100,`Migrated ${n.length} dbs`)}const migration$2={version:10,description:"Migrates datastore-level keys to binary",migrate:(t,e=()=>{})=>process$1(t,e,keysToBinary),revert:(t,e=()=>{})=>process$1(t,e,keysToStrings)};function withEach(t,e){function r(n,o){const u=t.store("readwrite"),y=u.transaction;let h=0,g;y.onabort=()=>o(g||y.error||new Error("aborted by user")),y.oncomplete=()=>o();function m(){const $=n[h++],E=$.key;let A;try{A=$.type==="del"?u.delete(E):u.put($.value,E)}catch(B){g=B,y.abort();return}h<n.length&&(A.onsuccess=m)}m()}return new Promise((n,o)=>{const u=t.iterator(),y=g=>g;u._deserializeKey=u._deserializeValue=y,h();function h(){const g=(m,$,E)=>{if(m||$===void 0){const A=B=>{if(B){o(B);return}n()};u.end(A);return}r(e($,E),h)};u.next(g)}})}const MFS_ROOT_KEY=new Key("/local/filesroot");async function storeMfsRootInDatastore(t,e=()=>{}){if(e(100,"Migrating MFS root to repo datastore"),await t.root.open(),await t.datastore.open(),await t.root.has(MFS_ROOT_KEY)){const r=await t.root.get(MFS_ROOT_KEY);await t.datastore.put(MFS_ROOT_KEY,r),await t.root.delete(MFS_ROOT_KEY)}await t.datastore.close(),await t.root.close(),e(100,"Stored MFS root in repo datastore")}async function storeMfsRootInRoot(t,e=()=>{}){if(e(100,"Migrating MFS root to repo root datastore"),await t.root.open(),await t.datastore.open(),await t.datastore.has(MFS_ROOT_KEY)){const r=await t.datastore.get(MFS_ROOT_KEY);await t.root.put(MFS_ROOT_KEY,r),await t.datastore.delete(MFS_ROOT_KEY)}await t.datastore.close(),await t.root.close(),e(100,"Stored MFS root in repo root datastore")}const migration$1={version:11,description:"Store mfs root in the datastore",migrate:storeMfsRootInDatastore,revert:storeMfsRootInRoot},$Reader$4=$protobuf.Reader,$Writer$4=$protobuf.Writer,$util$4=$protobuf.util,$root$4=$protobuf.roots.default||($protobuf.roots.default={}),Protocols=$root$4.Protocols=(()=>{function t(e){if(this.protocols=[],e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.protocols=$util$4.emptyArray,t.encode=function(r,n){if(n||(n=$Writer$4.create()),r.protocols!=null&&r.protocols.length)for(var o=0;o<r.protocols.length;++o)n.uint32(10).string(r.protocols[o]);return n},t.decode=function(r,n){r instanceof $Reader$4||(r=$Reader$4.create(r));for(var o=n===void 0?r.len:r.pos+n,u=new $root$4.Protocols;r.pos<o;){var y=r.uint32();switch(y>>>3){case 1:u.protocols&&u.protocols.length||(u.protocols=[]),u.protocols.push(r.string());break;default:r.skipType(y&7);break}}return u},t.fromObject=function(r){if(r instanceof $root$4.Protocols)return r;var n=new $root$4.Protocols;if(r.protocols){if(!Array.isArray(r.protocols))throw TypeError(".Protocols.protocols: array expected");n.protocols=[];for(var o=0;o<r.protocols.length;++o)n.protocols[o]=String(r.protocols[o])}return n},t.toObject=function(r,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.protocols=[]),r.protocols&&r.protocols.length){o.protocols=[];for(var u=0;u<r.protocols.length;++u)o.protocols[u]=r.protocols[u]}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t})(),$Reader$3=$protobuf.Reader,$Writer$3=$protobuf.Writer,$util$3=$protobuf.util,$root$3=$protobuf.roots.default||($protobuf.roots.default={}),Addresses=$root$3.Addresses=(()=>{function t(e){if(this.addrs=[],e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.addrs=$util$3.emptyArray,t.prototype.certifiedRecord=null,t.encode=function(r,n){if(n||(n=$Writer$3.create()),r.addrs!=null&&r.addrs.length)for(var o=0;o<r.addrs.length;++o)$root$3.Addresses.Address.encode(r.addrs[o],n.uint32(10).fork()).ldelim();return r.certifiedRecord!=null&&Object.hasOwnProperty.call(r,"certifiedRecord")&&$root$3.Addresses.CertifiedRecord.encode(r.certifiedRecord,n.uint32(18).fork()).ldelim(),n},t.decode=function(r,n){r instanceof $Reader$3||(r=$Reader$3.create(r));for(var o=n===void 0?r.len:r.pos+n,u=new $root$3.Addresses;r.pos<o;){var y=r.uint32();switch(y>>>3){case 1:u.addrs&&u.addrs.length||(u.addrs=[]),u.addrs.push($root$3.Addresses.Address.decode(r,r.uint32()));break;case 2:u.certifiedRecord=$root$3.Addresses.CertifiedRecord.decode(r,r.uint32());break;default:r.skipType(y&7);break}}return u},t.fromObject=function(r){if(r instanceof $root$3.Addresses)return r;var n=new $root$3.Addresses;if(r.addrs){if(!Array.isArray(r.addrs))throw TypeError(".Addresses.addrs: array expected");n.addrs=[];for(var o=0;o<r.addrs.length;++o){if(typeof r.addrs[o]!="object")throw TypeError(".Addresses.addrs: object expected");n.addrs[o]=$root$3.Addresses.Address.fromObject(r.addrs[o])}}if(r.certifiedRecord!=null){if(typeof r.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");n.certifiedRecord=$root$3.Addresses.CertifiedRecord.fromObject(r.certifiedRecord)}return n},t.toObject=function(r,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.addrs=[]),n.defaults&&(o.certifiedRecord=null),r.addrs&&r.addrs.length){o.addrs=[];for(var u=0;u<r.addrs.length;++u)o.addrs[u]=$root$3.Addresses.Address.toObject(r.addrs[u],n)}return r.certifiedRecord!=null&&r.hasOwnProperty("certifiedRecord")&&(o.certifiedRecord=$root$3.Addresses.CertifiedRecord.toObject(r.certifiedRecord,n)),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t.Address=function(){function e(n){if(n)for(var o=Object.keys(n),u=0;u<o.length;++u)n[o[u]]!=null&&(this[o[u]]=n[o[u]])}e.prototype.multiaddr=$util$3.newBuffer([]),e.prototype.isCertified=null;let r;return Object.defineProperty(e.prototype,"_isCertified",{get:$util$3.oneOfGetter(r=["isCertified"]),set:$util$3.oneOfSetter(r)}),e.encode=function(o,u){return u||(u=$Writer$3.create()),o.multiaddr!=null&&Object.hasOwnProperty.call(o,"multiaddr")&&u.uint32(10).bytes(o.multiaddr),o.isCertified!=null&&Object.hasOwnProperty.call(o,"isCertified")&&u.uint32(16).bool(o.isCertified),u},e.decode=function(o,u){o instanceof $Reader$3||(o=$Reader$3.create(o));for(var y=u===void 0?o.len:o.pos+u,h=new $root$3.Addresses.Address;o.pos<y;){var g=o.uint32();switch(g>>>3){case 1:h.multiaddr=o.bytes();break;case 2:h.isCertified=o.bool();break;default:o.skipType(g&7);break}}return h},e.fromObject=function(o){if(o instanceof $root$3.Addresses.Address)return o;var u=new $root$3.Addresses.Address;return o.multiaddr!=null&&(typeof o.multiaddr=="string"?$util$3.base64.decode(o.multiaddr,u.multiaddr=$util$3.newBuffer($util$3.base64.length(o.multiaddr)),0):o.multiaddr.length&&(u.multiaddr=o.multiaddr)),o.isCertified!=null&&(u.isCertified=Boolean(o.isCertified)),u},e.toObject=function(o,u){u||(u={});var y={};return u.defaults&&(u.bytes===String?y.multiaddr="":(y.multiaddr=[],u.bytes!==Array&&(y.multiaddr=$util$3.newBuffer(y.multiaddr)))),o.multiaddr!=null&&o.hasOwnProperty("multiaddr")&&(y.multiaddr=u.bytes===String?$util$3.base64.encode(o.multiaddr,0,o.multiaddr.length):u.bytes===Array?Array.prototype.slice.call(o.multiaddr):o.multiaddr),o.isCertified!=null&&o.hasOwnProperty("isCertified")&&(y.isCertified=o.isCertified,u.oneofs&&(y._isCertified="isCertified")),y},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),t.CertifiedRecord=function(){function e(r){if(r)for(var n=Object.keys(r),o=0;o<n.length;++o)r[n[o]]!=null&&(this[n[o]]=r[n[o]])}return e.prototype.seq=$util$3.Long?$util$3.Long.fromBits(0,0,!0):0,e.prototype.raw=$util$3.newBuffer([]),e.encode=function(n,o){return o||(o=$Writer$3.create()),n.seq!=null&&Object.hasOwnProperty.call(n,"seq")&&o.uint32(8).uint64(n.seq),n.raw!=null&&Object.hasOwnProperty.call(n,"raw")&&o.uint32(18).bytes(n.raw),o},e.decode=function(n,o){n instanceof $Reader$3||(n=$Reader$3.create(n));for(var u=o===void 0?n.len:n.pos+o,y=new $root$3.Addresses.CertifiedRecord;n.pos<u;){var h=n.uint32();switch(h>>>3){case 1:y.seq=n.uint64();break;case 2:y.raw=n.bytes();break;default:n.skipType(h&7);break}}return y},e.fromObject=function(n){if(n instanceof $root$3.Addresses.CertifiedRecord)return n;var o=new $root$3.Addresses.CertifiedRecord;return n.seq!=null&&($util$3.Long?(o.seq=$util$3.Long.fromValue(n.seq)).unsigned=!0:typeof n.seq=="string"?o.seq=parseInt(n.seq,10):typeof n.seq=="number"?o.seq=n.seq:typeof n.seq=="object"&&(o.seq=new $util$3.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0))),n.raw!=null&&(typeof n.raw=="string"?$util$3.base64.decode(n.raw,o.raw=$util$3.newBuffer($util$3.base64.length(n.raw)),0):n.raw.length&&(o.raw=n.raw)),o},e.toObject=function(n,o){o||(o={});var u={};if(o.defaults){if($util$3.Long){var y=new $util$3.Long(0,0,!0);u.seq=o.longs===String?y.toString():o.longs===Number?y.toNumber():y}else u.seq=o.longs===String?"0":0;o.bytes===String?u.raw="":(u.raw=[],o.bytes!==Array&&(u.raw=$util$3.newBuffer(u.raw)))}return n.seq!=null&&n.hasOwnProperty("seq")&&(typeof n.seq=="number"?u.seq=o.longs===String?String(n.seq):n.seq:u.seq=o.longs===String?$util$3.Long.prototype.toString.call(n.seq):o.longs===Number?new $util$3.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0):n.seq),n.raw!=null&&n.hasOwnProperty("raw")&&(u.raw=o.bytes===String?$util$3.base64.encode(n.raw,0,n.raw.length):o.bytes===Array?Array.prototype.slice.call(n.raw):n.raw),u},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),t})(),$Reader$2=$protobuf.Reader,$Writer$2=$protobuf.Writer,$util$2=$protobuf.util,$root$2=$protobuf.roots.default||($protobuf.roots.default={}),Peer=$root$2.Peer=(()=>{function t(r){if(this.addresses=[],this.protocols=[],this.metadata=[],r)for(var n=Object.keys(r),o=0;o<n.length;++o)r[n[o]]!=null&&(this[n[o]]=r[n[o]])}t.prototype.addresses=$util$2.emptyArray,t.prototype.protocols=$util$2.emptyArray,t.prototype.metadata=$util$2.emptyArray,t.prototype.pubKey=null,t.prototype.peerRecordEnvelope=null;let e;return Object.defineProperty(t.prototype,"_pubKey",{get:$util$2.oneOfGetter(e=["pubKey"]),set:$util$2.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_peerRecordEnvelope",{get:$util$2.oneOfGetter(e=["peerRecordEnvelope"]),set:$util$2.oneOfSetter(e)}),t.encode=function(n,o){if(o||(o=$Writer$2.create()),n.addresses!=null&&n.addresses.length)for(var u=0;u<n.addresses.length;++u)$root$2.Address.encode(n.addresses[u],o.uint32(10).fork()).ldelim();if(n.protocols!=null&&n.protocols.length)for(var u=0;u<n.protocols.length;++u)o.uint32(18).string(n.protocols[u]);if(n.metadata!=null&&n.metadata.length)for(var u=0;u<n.metadata.length;++u)$root$2.Metadata.encode(n.metadata[u],o.uint32(26).fork()).ldelim();return n.pubKey!=null&&Object.hasOwnProperty.call(n,"pubKey")&&o.uint32(34).bytes(n.pubKey),n.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(n,"peerRecordEnvelope")&&o.uint32(42).bytes(n.peerRecordEnvelope),o},t.decode=function(n,o){n instanceof $Reader$2||(n=$Reader$2.create(n));for(var u=o===void 0?n.len:n.pos+o,y=new $root$2.Peer;n.pos<u;){var h=n.uint32();switch(h>>>3){case 1:y.addresses&&y.addresses.length||(y.addresses=[]),y.addresses.push($root$2.Address.decode(n,n.uint32()));break;case 2:y.protocols&&y.protocols.length||(y.protocols=[]),y.protocols.push(n.string());break;case 3:y.metadata&&y.metadata.length||(y.metadata=[]),y.metadata.push($root$2.Metadata.decode(n,n.uint32()));break;case 4:y.pubKey=n.bytes();break;case 5:y.peerRecordEnvelope=n.bytes();break;default:n.skipType(h&7);break}}return y},t.fromObject=function(n){if(n instanceof $root$2.Peer)return n;var o=new $root$2.Peer;if(n.addresses){if(!Array.isArray(n.addresses))throw TypeError(".Peer.addresses: array expected");o.addresses=[];for(var u=0;u<n.addresses.length;++u){if(typeof n.addresses[u]!="object")throw TypeError(".Peer.addresses: object expected");o.addresses[u]=$root$2.Address.fromObject(n.addresses[u])}}if(n.protocols){if(!Array.isArray(n.protocols))throw TypeError(".Peer.protocols: array expected");o.protocols=[];for(var u=0;u<n.protocols.length;++u)o.protocols[u]=String(n.protocols[u])}if(n.metadata){if(!Array.isArray(n.metadata))throw TypeError(".Peer.metadata: array expected");o.metadata=[];for(var u=0;u<n.metadata.length;++u){if(typeof n.metadata[u]!="object")throw TypeError(".Peer.metadata: object expected");o.metadata[u]=$root$2.Metadata.fromObject(n.metadata[u])}}return n.pubKey!=null&&(typeof n.pubKey=="string"?$util$2.base64.decode(n.pubKey,o.pubKey=$util$2.newBuffer($util$2.base64.length(n.pubKey)),0):n.pubKey.length&&(o.pubKey=n.pubKey)),n.peerRecordEnvelope!=null&&(typeof n.peerRecordEnvelope=="string"?$util$2.base64.decode(n.peerRecordEnvelope,o.peerRecordEnvelope=$util$2.newBuffer($util$2.base64.length(n.peerRecordEnvelope)),0):n.peerRecordEnvelope.length&&(o.peerRecordEnvelope=n.peerRecordEnvelope)),o},t.toObject=function(n,o){o||(o={});var u={};if((o.arrays||o.defaults)&&(u.addresses=[],u.protocols=[],u.metadata=[]),n.addresses&&n.addresses.length){u.addresses=[];for(var y=0;y<n.addresses.length;++y)u.addresses[y]=$root$2.Address.toObject(n.addresses[y],o)}if(n.protocols&&n.protocols.length){u.protocols=[];for(var y=0;y<n.protocols.length;++y)u.protocols[y]=n.protocols[y]}if(n.metadata&&n.metadata.length){u.metadata=[];for(var y=0;y<n.metadata.length;++y)u.metadata[y]=$root$2.Metadata.toObject(n.metadata[y],o)}return n.pubKey!=null&&n.hasOwnProperty("pubKey")&&(u.pubKey=o.bytes===String?$util$2.base64.encode(n.pubKey,0,n.pubKey.length):o.bytes===Array?Array.prototype.slice.call(n.pubKey):n.pubKey,o.oneofs&&(u._pubKey="pubKey")),n.peerRecordEnvelope!=null&&n.hasOwnProperty("peerRecordEnvelope")&&(u.peerRecordEnvelope=o.bytes===String?$util$2.base64.encode(n.peerRecordEnvelope,0,n.peerRecordEnvelope.length):o.bytes===Array?Array.prototype.slice.call(n.peerRecordEnvelope):n.peerRecordEnvelope,o.oneofs&&(u._peerRecordEnvelope="peerRecordEnvelope")),u},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t})();$root$2.Address=(()=>{function t(r){if(r)for(var n=Object.keys(r),o=0;o<n.length;++o)r[n[o]]!=null&&(this[n[o]]=r[n[o]])}t.prototype.multiaddr=$util$2.newBuffer([]),t.prototype.isCertified=null;let e;return Object.defineProperty(t.prototype,"_isCertified",{get:$util$2.oneOfGetter(e=["isCertified"]),set:$util$2.oneOfSetter(e)}),t.encode=function(n,o){return o||(o=$Writer$2.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&o.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&o.uint32(16).bool(n.isCertified),o},t.decode=function(n,o){n instanceof $Reader$2||(n=$Reader$2.create(n));for(var u=o===void 0?n.len:n.pos+o,y=new $root$2.Address;n.pos<u;){var h=n.uint32();switch(h>>>3){case 1:y.multiaddr=n.bytes();break;case 2:y.isCertified=n.bool();break;default:n.skipType(h&7);break}}return y},t.fromObject=function(n){if(n instanceof $root$2.Address)return n;var o=new $root$2.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?$util$2.base64.decode(n.multiaddr,o.multiaddr=$util$2.newBuffer($util$2.base64.length(n.multiaddr)),0):n.multiaddr.length&&(o.multiaddr=n.multiaddr)),n.isCertified!=null&&(o.isCertified=Boolean(n.isCertified)),o},t.toObject=function(n,o){o||(o={});var u={};return o.defaults&&(o.bytes===String?u.multiaddr="":(u.multiaddr=[],o.bytes!==Array&&(u.multiaddr=$util$2.newBuffer(u.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(u.multiaddr=o.bytes===String?$util$2.base64.encode(n.multiaddr,0,n.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(u.isCertified=n.isCertified,o.oneofs&&(u._isCertified="isCertified")),u},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t})();$root$2.Metadata=(()=>{function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.key="",t.prototype.value=$util$2.newBuffer([]),t.encode=function(r,n){return n||(n=$Writer$2.create()),r.key!=null&&Object.hasOwnProperty.call(r,"key")&&n.uint32(10).string(r.key),r.value!=null&&Object.hasOwnProperty.call(r,"value")&&n.uint32(18).bytes(r.value),n},t.decode=function(r,n){r instanceof $Reader$2||(r=$Reader$2.create(r));for(var o=n===void 0?r.len:r.pos+n,u=new $root$2.Metadata;r.pos<o;){var y=r.uint32();switch(y>>>3){case 1:u.key=r.string();break;case 2:u.value=r.bytes();break;default:r.skipType(y&7);break}}return u},t.fromObject=function(r){if(r instanceof $root$2.Metadata)return r;var n=new $root$2.Metadata;return r.key!=null&&(n.key=String(r.key)),r.value!=null&&(typeof r.value=="string"?$util$2.base64.decode(r.value,n.value=$util$2.newBuffer($util$2.base64.length(r.value)),0):r.value.length&&(n.value=r.value)),n},t.toObject=function(r,n){n||(n={});var o={};return n.defaults&&(o.key="",n.bytes===String?o.value="":(o.value=[],n.bytes!==Array&&(o.value=$util$2.newBuffer(o.value)))),r.key!=null&&r.hasOwnProperty("key")&&(o.key=r.key),r.value!=null&&r.hasOwnProperty("value")&&(o.value=n.bytes===String?$util$2.base64.encode(r.value,0,r.value.length):n.bytes===Array?Array.prototype.slice.call(r.value):r.value),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t})();const $Reader$1=$protobuf.Reader,$Writer$1=$protobuf.Writer,$util$1=$protobuf.util,$root$1=$protobuf.roots.default||($protobuf.roots.default={}),Envelope=$root$1.Envelope=(()=>{function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.publicKey=$util$1.newBuffer([]),t.prototype.payloadType=$util$1.newBuffer([]),t.prototype.payload=$util$1.newBuffer([]),t.prototype.signature=$util$1.newBuffer([]),t.encode=function(r,n){return n||(n=$Writer$1.create()),r.publicKey!=null&&Object.hasOwnProperty.call(r,"publicKey")&&n.uint32(10).bytes(r.publicKey),r.payloadType!=null&&Object.hasOwnProperty.call(r,"payloadType")&&n.uint32(18).bytes(r.payloadType),r.payload!=null&&Object.hasOwnProperty.call(r,"payload")&&n.uint32(26).bytes(r.payload),r.signature!=null&&Object.hasOwnProperty.call(r,"signature")&&n.uint32(42).bytes(r.signature),n},t.decode=function(r,n){r instanceof $Reader$1||(r=$Reader$1.create(r));for(var o=n===void 0?r.len:r.pos+n,u=new $root$1.Envelope;r.pos<o;){var y=r.uint32();switch(y>>>3){case 1:u.publicKey=r.bytes();break;case 2:u.payloadType=r.bytes();break;case 3:u.payload=r.bytes();break;case 5:u.signature=r.bytes();break;default:r.skipType(y&7);break}}return u},t.fromObject=function(r){if(r instanceof $root$1.Envelope)return r;var n=new $root$1.Envelope;return r.publicKey!=null&&(typeof r.publicKey=="string"?$util$1.base64.decode(r.publicKey,n.publicKey=$util$1.newBuffer($util$1.base64.length(r.publicKey)),0):r.publicKey.length&&(n.publicKey=r.publicKey)),r.payloadType!=null&&(typeof r.payloadType=="string"?$util$1.base64.decode(r.payloadType,n.payloadType=$util$1.newBuffer($util$1.base64.length(r.payloadType)),0):r.payloadType.length&&(n.payloadType=r.payloadType)),r.payload!=null&&(typeof r.payload=="string"?$util$1.base64.decode(r.payload,n.payload=$util$1.newBuffer($util$1.base64.length(r.payload)),0):r.payload.length&&(n.payload=r.payload)),r.signature!=null&&(typeof r.signature=="string"?$util$1.base64.decode(r.signature,n.signature=$util$1.newBuffer($util$1.base64.length(r.signature)),0):r.signature.length&&(n.signature=r.signature)),n},t.toObject=function(r,n){n||(n={});var o={};return n.defaults&&(n.bytes===String?o.publicKey="":(o.publicKey=[],n.bytes!==Array&&(o.publicKey=$util$1.newBuffer(o.publicKey))),n.bytes===String?o.payloadType="":(o.payloadType=[],n.bytes!==Array&&(o.payloadType=$util$1.newBuffer(o.payloadType))),n.bytes===String?o.payload="":(o.payload=[],n.bytes!==Array&&(o.payload=$util$1.newBuffer(o.payload))),n.bytes===String?o.signature="":(o.signature=[],n.bytes!==Array&&(o.signature=$util$1.newBuffer(o.signature)))),r.publicKey!=null&&r.hasOwnProperty("publicKey")&&(o.publicKey=n.bytes===String?$util$1.base64.encode(r.publicKey,0,r.publicKey.length):n.bytes===Array?Array.prototype.slice.call(r.publicKey):r.publicKey),r.payloadType!=null&&r.hasOwnProperty("payloadType")&&(o.payloadType=n.bytes===String?$util$1.base64.encode(r.payloadType,0,r.payloadType.length):n.bytes===Array?Array.prototype.slice.call(r.payloadType):r.payloadType),r.payload!=null&&r.hasOwnProperty("payload")&&(o.payload=n.bytes===String?$util$1.base64.encode(r.payload,0,r.payload.length):n.bytes===Array?Array.prototype.slice.call(r.payload):r.payload),r.signature!=null&&r.hasOwnProperty("signature")&&(o.signature=n.bytes===String?$util$1.base64.encode(r.signature,0,r.signature.length):n.bytes===Array?Array.prototype.slice.call(r.signature):r.signature),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t})(),$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots.default||($protobuf.roots.default={}),PeerRecord=$root.PeerRecord=(()=>{function t(e){if(this.addresses=[],e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.peerId=$util.newBuffer([]),t.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,t.prototype.addresses=$util.emptyArray,t.encode=function(r,n){if(n||(n=$Writer.create()),r.peerId!=null&&Object.hasOwnProperty.call(r,"peerId")&&n.uint32(10).bytes(r.peerId),r.seq!=null&&Object.hasOwnProperty.call(r,"seq")&&n.uint32(16).uint64(r.seq),r.addresses!=null&&r.addresses.length)for(var o=0;o<r.addresses.length;++o)$root.PeerRecord.AddressInfo.encode(r.addresses[o],n.uint32(26).fork()).ldelim();return n},t.decode=function(r,n){r instanceof $Reader||(r=$Reader.create(r));for(var o=n===void 0?r.len:r.pos+n,u=new $root.PeerRecord;r.pos<o;){var y=r.uint32();switch(y>>>3){case 1:u.peerId=r.bytes();break;case 2:u.seq=r.uint64();break;case 3:u.addresses&&u.addresses.length||(u.addresses=[]),u.addresses.push($root.PeerRecord.AddressInfo.decode(r,r.uint32()));break;default:r.skipType(y&7);break}}return u},t.fromObject=function(r){if(r instanceof $root.PeerRecord)return r;var n=new $root.PeerRecord;if(r.peerId!=null&&(typeof r.peerId=="string"?$util.base64.decode(r.peerId,n.peerId=$util.newBuffer($util.base64.length(r.peerId)),0):r.peerId.length&&(n.peerId=r.peerId)),r.seq!=null&&($util.Long?(n.seq=$util.Long.fromValue(r.seq)).unsigned=!0:typeof r.seq=="string"?n.seq=parseInt(r.seq,10):typeof r.seq=="number"?n.seq=r.seq:typeof r.seq=="object"&&(n.seq=new $util.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0))),r.addresses){if(!Array.isArray(r.addresses))throw TypeError(".PeerRecord.addresses: array expected");n.addresses=[];for(var o=0;o<r.addresses.length;++o){if(typeof r.addresses[o]!="object")throw TypeError(".PeerRecord.addresses: object expected");n.addresses[o]=$root.PeerRecord.AddressInfo.fromObject(r.addresses[o])}}return n},t.toObject=function(r,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.addresses=[]),n.defaults)if(n.bytes===String?o.peerId="":(o.peerId=[],n.bytes!==Array&&(o.peerId=$util.newBuffer(o.peerId))),$util.Long){var u=new $util.Long(0,0,!0);o.seq=n.longs===String?u.toString():n.longs===Number?u.toNumber():u}else o.seq=n.longs===String?"0":0;if(r.peerId!=null&&r.hasOwnProperty("peerId")&&(o.peerId=n.bytes===String?$util.base64.encode(r.peerId,0,r.peerId.length):n.bytes===Array?Array.prototype.slice.call(r.peerId):r.peerId),r.seq!=null&&r.hasOwnProperty("seq")&&(typeof r.seq=="number"?o.seq=n.longs===String?String(r.seq):r.seq:o.seq=n.longs===String?$util.Long.prototype.toString.call(r.seq):n.longs===Number?new $util.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0):r.seq),r.addresses&&r.addresses.length){o.addresses=[];for(var y=0;y<r.addresses.length;++y)o.addresses[y]=$root.PeerRecord.AddressInfo.toObject(r.addresses[y],n)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t.AddressInfo=function(){function e(r){if(r)for(var n=Object.keys(r),o=0;o<n.length;++o)r[n[o]]!=null&&(this[n[o]]=r[n[o]])}return e.prototype.multiaddr=$util.newBuffer([]),e.encode=function(n,o){return o||(o=$Writer.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&o.uint32(10).bytes(n.multiaddr),o},e.decode=function(n,o){n instanceof $Reader||(n=$Reader.create(n));for(var u=o===void 0?n.len:n.pos+o,y=new $root.PeerRecord.AddressInfo;n.pos<u;){var h=n.uint32();switch(h>>>3){case 1:y.multiaddr=n.bytes();break;default:n.skipType(h&7);break}}return y},e.fromObject=function(n){if(n instanceof $root.PeerRecord.AddressInfo)return n;var o=new $root.PeerRecord.AddressInfo;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?$util.base64.decode(n.multiaddr,o.multiaddr=$util.newBuffer($util.base64.length(n.multiaddr)),0):n.multiaddr.length&&(o.multiaddr=n.multiaddr)),o},e.toObject=function(n,o){o||(o={});var u={};return o.defaults&&(o.bytes===String?u.multiaddr="":(u.multiaddr=[],o.bytes!==Array&&(u.multiaddr=$util.newBuffer(u.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(u.multiaddr=o.bytes===String?$util.base64.encode(n.multiaddr,0,n.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),u},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),t})(),word="[a-fA-F\\d:]",boundry=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${word})|(?<=${word})(?=\\s|$))`:"",v4="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",v6segment="[a-fA-F\\d]{1,4}",v6=`
(?:
(?:${v6segment}:){7}(?:${v6segment}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${v6segment}:){6}(?:${v4}|:${v6segment}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${v6segment}:){5}(?::${v4}|(?::${v6segment}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${v6segment}:){4}(?:(?::${v6segment}){0,1}:${v4}|(?::${v6segment}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${v6segment}:){3}(?:(?::${v6segment}){0,2}:${v4}|(?::${v6segment}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${v6segment}:){2}(?:(?::${v6segment}){0,3}:${v4}|(?::${v6segment}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${v6segment}:){1}(?:(?::${v6segment}){0,4}:${v4}|(?::${v6segment}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${v6segment}){0,5}:${v4}|(?::${v6segment}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),v46Exact=new RegExp(`(?:^${v4}$)|(?:^${v6}$)`),v4exact=new RegExp(`^${v4}$`),v6exact=new RegExp(`^${v6}$`),ipRegex=t=>t&&t.exact?v46Exact:new RegExp(`(?:${boundry(t)}${v4}${boundry(t)})|(?:${boundry(t)}${v6}${boundry(t)})`,"g");ipRegex.v4=t=>t&&t.exact?v4exact:new RegExp(`${boundry(t)}${v4}${boundry(t)}`,"g");ipRegex.v6=t=>t&&t.exact?v6exact:new RegExp(`${boundry(t)}${v6}${boundry(t)}`,"g");function functionTimeout(t){const e=(...r)=>t(...r);return Object.defineProperty(e,"name",{value:`functionTimeout(${t.name||"<anonymous>"})`,configurable:!0}),e}const{toString:toString$4}=Object.prototype;function isRegexp(t){return toString$4.call(t)==="[object RegExp]"}const flagMap={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function clonedRegexp(t,e={}){if(!isRegexp(t))throw new TypeError("Expected a RegExp instance");const r=Object.keys(flagMap).map(o=>(typeof e[o]=="boolean"?e[o]:t[o])?flagMap[o]:"").join(""),n=new RegExp(e.source||t.source,r);return n.lastIndex=typeof e.lastIndex=="number"?e.lastIndex:t.lastIndex,n}function isMatch(t,e,{timeout:r}={}){try{return functionTimeout(()=>clonedRegexp(t).test(e),{timeout:r})()}catch(n){throw n}}const maxIPv4Length=15,maxIPv6Length=45,options={timeout:400};function isIP(t){return isMatch(ipRegex({exact:!0}),t.slice(0,maxIPv6Length),options)}function isIPv6(t){return isMatch(ipRegex.v6({exact:!0}),t.slice(0,maxIPv6Length),options)}function isIPv4(t){return isMatch(ipRegex.v4({exact:!0}),t.slice(0,maxIPv4Length),options)}function base$1(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var u=t.charAt(o),y=u.charCodeAt(0);if(r[y]!==255)throw new TypeError(u+" is ambiguous");r[y]=o}var h=t.length,g=t.charAt(0),m=Math.log(h)/Math.log(256),$=Math.log(256)/Math.log(h);function E(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var k=0,U=0,W=0,te=T.length;W!==te&&T[W]===0;)W++,k++;for(var X=(te-W)*$+1>>>0,N=new Uint8Array(X);W!==te;){for(var O=T[W],Z=0,j=X-1;(O!==0||Z<U)&&j!==-1;j--,Z++)O+=256*N[j]>>>0,N[j]=O%h>>>0,O=O/h>>>0;if(O!==0)throw new Error("Non-zero carry");U=Z,W++}for(var K=X-U;K!==X&&N[K]===0;)K++;for(var se=g.repeat(k);K<X;++K)se+=t.charAt(N[K]);return se}function A(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var k=0;if(T[k]!==" "){for(var U=0,W=0;T[k]===g;)U++,k++;for(var te=(T.length-k)*m+1>>>0,X=new Uint8Array(te);T[k];){var N=r[T.charCodeAt(k)];if(N===255)return;for(var O=0,Z=te-1;(N!==0||O<W)&&Z!==-1;Z--,O++)N+=h*X[Z]>>>0,X[Z]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");W=O,k++}if(T[k]!==" "){for(var j=te-W;j!==te&&X[j]===0;)j++;for(var K=new Uint8Array(U+(te-j)),se=U;j!==te;)K[se++]=X[j++];return K}}}function B(T){var k=A(T);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:E,decodeUnsafe:A,decode:B}}var src$1=base$1,_brrp__multiformats_scope_baseX$1=src$1;const equals$2=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},coerce$1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fromString$2=t=>new TextEncoder().encode(t),toString$3=t=>new TextDecoder().decode(t);class Encoder$1{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder$1{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$1(this,e)}}class ComposedDecoder$1{constructor(e){this.decoders=e}or(e){return or$1(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or$1=(t,e)=>new ComposedDecoder$1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Codec$1{constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder$1(e,r,n),this.decoder=new Decoder$1(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$3=({name:t,prefix:e,encode:r,decode:n})=>new Codec$1(t,e,r,n),baseX$1=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX$1(r,e);return from$3({prefix:t,name:e,encode:n,decode:u=>coerce$1(o(u))})},decode$5=(t,e,r,n)=>{const o={};for(let $=0;$<e.length;++$)o[e[$]]=$;let u=t.length;for(;t[u-1]==="=";)--u;const y=new Uint8Array(u*r/8|0);let h=0,g=0,m=0;for(let $=0;$<u;++$){const E=o[t[$]];if(E===void 0)throw new SyntaxError(`Non-${n} character`);g=g<<r|E,h+=r,h>=8&&(h-=8,y[m++]=255&g>>h)}if(h>=r||255&g<<8-h)throw new SyntaxError("Unexpected end of data");return y},encode$5=(t,e,r)=>{const n=e[e.length-1]==="=",o=(1<<r)-1;let u="",y=0,h=0;for(let g=0;g<t.length;++g)for(h=h<<8|t[g],y+=8;y>r;)y-=r,u+=e[o&h>>y];if(y&&(u+=e[o&h<<r-y]),n)for(;u.length*r&7;)u+="=";return u},rfc4648$1=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>from$3({prefix:e,name:t,encode(o){return encode$5(o,n,r)},decode(o){return decode$5(o,n,r,t)}}),identity$3=from$3({prefix:"\0",name:"identity",encode:t=>toString$3(t),decode:t=>fromString$2(t)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$3},Symbol.toStringTag,{value:"Module"})),base2=rfc4648$1({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),base8=rfc4648$1({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),base10=baseX$1({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648$1({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648$1({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base32$1=rfc4648$1({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648$1({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648$1({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648$1({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648$1({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648$1({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648$1({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648$1({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648$1({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$2=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$1,base32upper,base32pad,base32padupper,base32hex,base32hexupper,base32hexpad,base32hexpadupper,base32z},Symbol.toStringTag,{value:"Module"})),base36=baseX$1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX$1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),base58btc$1=baseX$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$1,base58flickr},Symbol.toStringTag,{value:"Module"})),base64$1=rfc4648$1({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648$1({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648$1({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648$1({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$2=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$1,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),alphabetBytesToChars=alphabet.reduce((t,e,r)=>(t[r]=e,t),[]),alphabetCharsToBytes=alphabet.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function encode$4(t){return t.reduce((e,r)=>(e+=alphabetBytesToChars[r],e),"")}function decode$4(t){const e=[];for(const r of t){const n=alphabetCharsToBytes[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const base256emoji=from$3({prefix:"\u{1F680}",name:"base256emoji",encode:encode$4,decode:decode$4}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"}));var encode_1=encode$3,MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31);function encode$3(t,e,r){e=e||[],r=r||0;for(var n=r;t>=INT;)e[r++]=t&255|MSB,t/=128;for(;t&MSBALL;)e[r++]=t&255|MSB,t>>>=7;return e[r]=t|0,encode$3.bytes=r-n+1,e}var decode$3=read,MSB$1=128,REST$1=127;function read(t,n){var r=0,n=n||0,o=0,u=n,y,h=t.length;do{if(u>=h)throw read.bytes=0,new RangeError("Could not decode varint");y=t[u++],r+=o<28?(y&REST$1)<<o:(y&REST$1)*Math.pow(2,o),o+=7}while(y>=MSB$1);return read.bytes=u-n,r}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(t){return t<N1?1:t<N2?2:t<N3?3:t<N4?4:t<N5?5:t<N6?6:t<N7?7:t<N8?8:t<N9?9:10},varint={encode:encode_1,decode:decode$3,encodingLength:length},_brrp_varint=varint;const decode$2=(t,e=0)=>[_brrp_varint.decode(t,e),_brrp_varint.decode.bytes],encodeTo=(t,e,r=0)=>(_brrp_varint.encode(t,e,r),e),encodingLength=t=>_brrp_varint.encodingLength(t),create=(t,e)=>{const r=e.byteLength,n=encodingLength(t),o=n+encodingLength(r),u=new Uint8Array(o+r);return encodeTo(t,u,0),encodeTo(r,u,n),u.set(e,o),new Digest(t,r,e,u)},decode$1=t=>{const e=coerce$1(t),[r,n]=decode$2(e),[o,u]=decode$2(e.subarray(n)),y=e.subarray(n+u);if(y.byteLength!==o)throw new Error("Incorrect length");return new Digest(r,o,y,e)},equals$1=(t,e)=>{if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&equals$2(t.bytes,r.bytes)}};class Digest{constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}}const from$2=({name:t,code:e,encode:r})=>new Hasher(t,e,r);class Hasher{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?create(this.code,r):r.then(n=>create(this.code,n))}else throw Error("Unknown type, must be binary type")}}const sha=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sha256$1=from$2({name:"sha2-256",code:18,encode:sha("SHA-256")}),sha512=from$2({name:"sha2-512",code:19,encode:sha("SHA-512")}),sha2=Object.freeze(Object.defineProperty({__proto__:null,sha256:sha256$1,sha512},Symbol.toStringTag,{value:"Module"})),code$1=0,name="identity",encode$2=coerce$1,digest=t=>create(code$1,encode$2(t)),identity$1={code:code$1,name,encode:encode$2,digest},identity$2=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$1},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const format$1=(t,e)=>{const{bytes:r,version:n}=t;switch(n){case 0:return toStringV0(r,baseCache(t),e||base58btc$1.encoder);default:return toStringV1(r,baseCache(t),e||base32$1.encoder)}},cache=new WeakMap,baseCache=t=>{const e=cache.get(t);if(e==null){const r=new Map;return cache.set(t,r),r}return e};class CID{constructor(e,r,n,o){this.code=r,this.version=e,this.multihash=n,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=create(e,r);return CID.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return CID.equals(this,e)}static equals(e,r){const n=r;return n&&e.code===n.code&&e.version===n.version&&equals$1(e.multihash,n.multihash)}toString(e){return format$1(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){const r=e;if(r instanceof CID)return r;if(r!=null&&r.asCID===r){const{version:n,code:o,multihash:u,bytes:y}=r;return new CID(n,o,u,y||encodeCID(n,o,u.bytes))}else if(r!=null&&r[cidSymbol]===!0){const{version:n,multihash:o,code:u}=r,y=decode$1(o);return CID.create(n,u,y)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(e,r,n,n.bytes)}case 1:{const o=encodeCID(e,r,n.bytes);return new CID(e,r,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID.create(0,DAG_PB_CODE,e)}static createV1(e,r){return CID.create(1,e,r)}static decode(e){const[r,n]=CID.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=CID.inspectBytes(e),n=r.size-r.multihashSize,o=coerce$1(e.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");const u=o.subarray(r.multihashSize-r.digestSize),y=new Digest(r.multihashCode,r.digestSize,u,o);return[r.version===0?CID.createV0(y):CID.createV1(r.codec,y),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[E,A]=decode$2(e.subarray(r));return r+=A,E};let o=n(),u=DAG_PB_CODE;if(o===18?(o=0,r=0):u=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const y=r,h=n(),g=n(),m=r+g,$=m-y;return{version:o,codec:u,multihashCode:h,digestSize:g,multihashSize:$,size:m}}static parse(e,r){const[n,o]=parseCIDtoBytes(e,r),u=CID.decode(o);return baseCache(u).set(n,e),u}}const parseCIDtoBytes=(t,e)=>{switch(t[0]){case"Q":{const r=e||base58btc$1;return[base58btc$1.prefix,r.decode(`${base58btc$1.prefix}${t}`)]}case base58btc$1.prefix:{const r=e||base58btc$1;return[base58btc$1.prefix,r.decode(t)]}case base32$1.prefix:{const r=e||base32$1;return[base32$1.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},toStringV0=(t,e,r)=>{const{prefix:n}=r;if(n!==base58btc$1.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const o=e.get(n);if(o==null){const u=r.encode(t).slice(1);return e.set(n,u),u}else return o},toStringV1=(t,e,r)=>{const{prefix:n}=r,o=e.get(n);if(o==null){const u=r.encode(t);return e.set(n,u),u}else return o},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(t,e,r)=>{const n=encodingLength(t),o=n+encodingLength(e),u=new Uint8Array(o+r.byteLength);return encodeTo(t,u,0),encodeTo(e,u,n),u.set(r,o),u},cidSymbol=Symbol.for("@ipld/js-cid/CID"),bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$2,...base36$1,...base58,...base64$2,...base256emoji$1};({...sha2,...identity$2});function asUint8Array(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function allocUnsafe(t=0){var e;return((e=globalThis.Buffer)==null?void 0:e.allocUnsafe)!=null?asUint8Array(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function createCodec(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const string=createCodec("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii=createCodec("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=allocUnsafe(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),BASES={utf8:string,"utf-8":string,hex:bases.base16,latin1:ascii,ascii,binary:ascii,...bases};function toString$2(t,e="utf8"){const r=BASES[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}const isV4=isIPv4,isV6=isIPv6,toBytes=function(t){let e=0;if(t=t.toString().trim(),isV4(t)){const r=new Uint8Array(e+4);return t.split(/\./g).forEach(n=>{r[e++]=parseInt(n,10)&255}),r}if(isV6(t)){const r=t.split(":",8);let n;for(n=0;n<r.length;n++){const u=isV4(r[n]);let y;u&&(y=toBytes(r[n]),r[n]=toString$2(y.slice(0,2),"base16")),y!=null&&++n<8&&r.splice(n,0,toString$2(y.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);const u=[n,1];for(n=9-r.length;n>0;n--)u.push("0");r.splice.apply(r,u)}const o=new Uint8Array(e+16);for(n=0;n<r.length;n++){const u=parseInt(r[n],16);o[e++]=u>>8&255,o[e++]=u&255}return o}throw new Error("invalid ip address")},toString$1=function(t,e=0,r){e=~~e,r=r!=null?r:t.length-e;const n=new DataView(t.buffer);if(r===4){const o=[];for(let u=0;u<r;u++)o.push(t[e+u]);return o.join(".")}if(r===16){const o=[];for(let u=0;u<r;u+=2)o.push(n.getUint16(e+u).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},V=-1,names={},codes={},table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,V,"ip6zone"],[53,V,"dns",!0],[54,V,"dns4",!0],[55,V,"dns6",!0],[56,V,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,V,"unix",!1,!0],[421,V,"ipfs"],[421,V,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,V,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,V,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,V,"memory"]];table.forEach(t=>{const e=createProtocol(...t);codes[e.code]=e,names[e.name]=e});function createProtocol(t,e,r,n,o){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(o)}}function getProtocol(t){if(typeof t=="number"){if(codes[t]!=null)return codes[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(names[t]!=null)return names[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}function fromString$1(t,e="utf8"){const r=BASES[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function concat(t,e){e==null&&(e=t.reduce((o,u)=>o+u.length,0));const r=allocUnsafe(e);let n=0;for(const o of t)r.set(o,n),n+=o.length;return asUint8Array(r)}function convertToString(t,e){switch(getProtocol(t).code){case 4:case 41:return bytes2ip(e);case 6:case 273:case 33:case 132:return bytes2port(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return bytes2str(e);case 421:return bytes2mh(e);case 444:return bytes2onion(e);case 445:return bytes2onion(e);case 466:return bytes2mb(e);default:return toString$2(e,"base16")}}function convertToBytes(t,e){switch(getProtocol(t).code){case 4:return ip2bytes(e);case 41:return ip2bytes(e);case 6:case 273:case 33:case 132:return port2bytes(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return str2bytes(e);case 421:return mh2bytes(e);case 444:return onion2bytes(e);case 445:return onion32bytes(e);case 466:return mb2bytes(e);default:return fromString$1(e,"base16")}}const decoders=Object.values(bases).map(t=>t.decoder),anybaseDecoder=function(){let t=decoders[0].or(decoders[1]);return decoders.slice(2).forEach(e=>t=t.or(e)),t}();function ip2bytes(t){if(!isIP(t))throw new Error("invalid ip address");return toBytes(t)}function bytes2ip(t){const e=toString$1(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!isIP(e))throw new Error("invalid ip address");return e}function port2bytes(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function bytes2port(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function str2bytes(t){const e=fromString$1(t),r=Uint8Array.from(varint$3.encode(e.length));return concat([r,e],r.length+e.length)}function bytes2str(t){const e=varint$3.decode(t);if(t=t.slice(varint$3.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return toString$2(t)}function mh2bytes(t){let e;t[0]==="Q"||t[0]==="1"?e=decode$1(base58btc$1.decode(`z${t}`)).bytes:e=CID.parse(t).multihash.bytes;const r=Uint8Array.from(varint$3.encode(e.length));return concat([r,e],r.length+e.length)}function mb2bytes(t){const e=anybaseDecoder.decode(t),r=Uint8Array.from(varint$3.encode(e.length));return concat([r,e],r.length+e.length)}function bytes2mb(t){const e=varint$3.decode(t),r=t.slice(varint$3.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return"u"+toString$2(r,"base64url")}function bytes2mh(t){const e=varint$3.decode(t),r=t.slice(varint$3.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return toString$2(r,"base58btc")}function onion2bytes(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const r=base32$1.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=port2bytes(n);return concat([r,o],r.length+o.length)}function onion32bytes(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const r=base32$1.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=port2bytes(n);return concat([r,o],r.length+o.length)}function bytes2onion(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=toString$2(e,"base32"),o=bytes2port(r);return`${n}:${o}`}function stringToStringTuples(t){const e=[],r=t.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){const o=r[n],u=getProtocol(o);if(u.size===0){e.push([o]);continue}if(n++,n>=r.length)throw ParseError("invalid address: "+t);if(u.path===!0){e.push([o,cleanPath(r.slice(n).join("/"))]);break}e.push([o,r[n]])}return e}function stringTuplesToString(t){const e=[];return t.map(r=>{const n=protoFromTuple(r);return e.push(n.name),r.length>1&&r[1]!=null&&e.push(r[1]),null}),cleanPath(e.join("/"))}function stringTuplesToTuples(t){return t.map(e=>{Array.isArray(e)||(e=[e]);const r=protoFromTuple(e);return e.length>1?[r.code,convertToBytes(r.code,e[1])]:[r.code]})}function tuplesToStringTuples(t){return t.map(e=>{const r=protoFromTuple(e);return e[1]!=null?[r.code,convertToString(r.code,e[1])]:[r.code]})}function tuplesToBytes(t){return fromBytes(concat(t.map(e=>{const r=protoFromTuple(e);let n=Uint8Array.from(varint$3.encode(r.code));return e.length>1&&e[1]!=null&&(n=concat([n,e[1]])),n})))}function sizeForAddr(t,e){return t.size>0?t.size/8:t.size===0?0:varint$3.decode(e)+varint$3.decode.bytes}function bytesToTuples(t){const e=[];let r=0;for(;r<t.length;){const n=varint$3.decode(t,r),o=varint$3.decode.bytes,u=getProtocol(n),y=sizeForAddr(u,t.slice(r+o));if(y===0){e.push([n]),r+=o;continue}const h=t.slice(r+o,r+o+y);if(r+=y+o,r>t.length)throw ParseError("Invalid address Uint8Array: "+toString$2(t,"base16"));e.push([n,h])}return e}function bytesToString(t){const e=bytesToTuples(t),r=tuplesToStringTuples(e);return stringTuplesToString(r)}function stringToBytes(t){t=cleanPath(t);const e=stringToStringTuples(t),r=stringTuplesToTuples(e);return tuplesToBytes(r)}function fromString(t){return stringToBytes(t)}function fromBytes(t){const e=validateBytes(t);if(e!=null)throw e;return Uint8Array.from(t)}function validateBytes(t){try{bytesToTuples(t)}catch(e){return e}}function cleanPath(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function ParseError(t){return new Error("Error parsing address: "+t)}function protoFromTuple(t){return getProtocol(t[0])}function equals(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var __classPrivateFieldGet$2=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},__classPrivateFieldSet$1=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},_DefaultMultiaddr_string,_DefaultMultiaddr_tuples,_DefaultMultiaddr_stringTuples,_a$1;const inspect=Symbol.for("nodejs.util.inspect.custom"),DNS_CODES=[getProtocol("dns").code,getProtocol("dns4").code,getProtocol("dns6").code,getProtocol("dnsaddr").code],P2P_CODES=[getProtocol("p2p").code,getProtocol("ipfs").code],resolvers=new Map,symbol=Symbol.for("@multiformats/js-multiaddr/multiaddr");function isMultiaddr(t){return Boolean(t==null?void 0:t[symbol])}class DefaultMultiaddr{constructor(e){if(_DefaultMultiaddr_string.set(this,void 0),_DefaultMultiaddr_tuples.set(this,void 0),_DefaultMultiaddr_stringTuples.set(this,void 0),this[_a$1]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=fromString(e)}else if(isMultiaddr(e))this.bytes=fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return __classPrivateFieldGet$2(this,_DefaultMultiaddr_string,"f")==null&&__classPrivateFieldSet$1(this,_DefaultMultiaddr_string,bytesToString(this.bytes),"f"),__classPrivateFieldGet$2(this,_DefaultMultiaddr_string,"f")}toJSON(){return this.toString()}toOptions(){const e=this.protoCodes(),r=this.toString().split("/").slice(1);let n,o;if(r.length>2)DNS_CODES.includes(e[0])&&P2P_CODES.includes(e[1])?(n=getProtocol("tcp").name,o=443):(n=getProtocol(r[2]).name,o=parseInt(r[3]));else if(DNS_CODES.includes(e[0]))n=getProtocol("tcp").name,o=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:r[1],transport:n,port:o}}protos(){return this.protoCodes().map(e=>Object.assign({},getProtocol(e)))}protoCodes(){const e=[],r=this.bytes;let n=0;for(;n<r.length;){const o=varint$3.decode(r,n),u=varint$3.decode.bytes,y=getProtocol(o),h=sizeForAddr(y,r.slice(n+u));n+=h+u,e.push(o)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return __classPrivateFieldGet$2(this,_DefaultMultiaddr_tuples,"f")==null&&__classPrivateFieldSet$1(this,_DefaultMultiaddr_tuples,bytesToTuples(this.bytes),"f"),__classPrivateFieldGet$2(this,_DefaultMultiaddr_tuples,"f")}stringTuples(){return __classPrivateFieldGet$2(this,_DefaultMultiaddr_stringTuples,"f")==null&&__classPrivateFieldSet$1(this,_DefaultMultiaddr_stringTuples,tuplesToStringTuples(this.tuples()),"f"),__classPrivateFieldGet$2(this,_DefaultMultiaddr_stringTuples,"f")}encapsulate(e){return e=new DefaultMultiaddr(e),new DefaultMultiaddr(this.toString()+e.toString())}decapsulate(e){const r=e.toString(),n=this.toString(),o=n.lastIndexOf(r);if(o<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new DefaultMultiaddr(n.slice(0,o))}decapsulateCode(e){const r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new DefaultMultiaddr(tuplesToBytes(r.slice(0,n)));return this}getPeerId(){try{const r=this.stringTuples().filter(n=>n[0]===names.ipfs.code).pop();if((r==null?void 0:r[1])!=null){const n=r[1];return n[0]==="Q"||n[0]==="1"?toString$2(base58btc$1.decode(`z${n}`),"base58btc"):toString$2(CID.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(r=>getProtocol(r[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return equals(this.bytes,e.bytes)}async resolve(e){const r=this.protos().find(u=>u.resolvable);if(r==null)return[this];const n=resolvers.get(r.name);if(n==null)throw errCode(new Error(`no available resolver for ${r.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(u=>new DefaultMultiaddr(u))}nodeAddress(){const e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const r=(e!=null?e:this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[(_DefaultMultiaddr_string=new WeakMap,_DefaultMultiaddr_tuples=new WeakMap,_DefaultMultiaddr_stringTuples=new WeakMap,_a$1=symbol,inspect)](){return this.inspect()}inspect(){return"<Multiaddr "+toString$2(this.bytes,"base16")+" - "+bytesToString(this.bytes)+">"}}function multiaddr(t){return new DefaultMultiaddr(t)}$protobuf.util.Long=void 0;$protobuf.configure();async function storePeerUnderSingleDatastoreKey(t,e=()=>{}){e(0,"Storing each peerstore key under a single datastore key"),await t.datastore.open();const r={},n=[];for await(const{key:o,value:u}of t.datastore.query({prefix:"/peers"})){n.push(o);const y=o.toString(),[h,g,m,$,E]=y.split("/");if(g==="peers"&&!!["protos","addrs","metadata","keys"].includes(m)&&!!$)if(r[$]=r[$]||{addresses:[],protocols:[],metadata:[]},m==="protos"){const A=Protocols.decode(u);r[$].protocols=A.protocols.sort()}else if(m==="addrs"){const A=Addresses.decode(u);r[$].addresses=A.addrs.sort((B,T)=>multiaddr(B.multiaddr).toString().localeCompare(multiaddr(T.multiaddr).toString())),A.certifiedRecord&&A.certifiedRecord.raw&&(r[$].peerRecordEnvelope=A.certifiedRecord.raw)}else m==="metadata"?r[$].metadata.push({key:E,value:u}):m==="keys"&&(r[$].pubKey=u)}e(33,"Read peer data from store");for(const o of n)await t.datastore.delete(o);e(66,"Removed existing peer data from store");for(const o of Object.keys(r)){const u=r[o];u.metadata=u.metadata.sort((h,g)=>h.key.localeCompare(g.key));const y=Peer.encode(u).finish();await t.datastore.put(new Key(`/peers/${o}`),y)}await t.datastore.close(),e(100,"Stored each peerstore key under a single datastore key")}async function storePeerUnderMultipleDatastoreKeys(t,e=()=>{}){e(0,"Storing each peerstore key under a multiple datastore keys"),await t.datastore.open();const r={},n=[];for await(const{key:o,value:u}of t.datastore.query({prefix:"/peers"})){n.push(o);const y=o.toString(),[h,g,m]=y.split("/");r[m]=Peer.decode(u)}e(33,"Read peer data from store");for(const o of n)await t.datastore.delete(o);e(66,"Removed existing peer data from store");for(const[o,u]of Object.entries(r)){if(u.protocols&&u.protocols.length>0&&await t.datastore.put(new Key(`/peers/protos/${o}`),Protocols.encode({protocols:u.protocols}).finish()),u.addresses&&u.addresses.length>0){const y=u.peerRecordEnvelope;let h;if(y){const g=Envelope.decode(y),m=PeerRecord.decode(g.payload);h={raw:y,seq:m.seq}}await t.datastore.put(new Key(`/peers/addrs/${o}`),Addresses.encode({addrs:u.addresses,certifiedRecord:h}).finish())}if(u.metadata&&u.metadata.length>0)for(const{key:y,value:h}of u.metadata)await t.datastore.put(new Key(`/peers/metadata/${o}/${y}`),h);u.pubKey&&await t.datastore.put(new Key(`/peers/keys/${o}`),u.pubKey)}await t.datastore.close(),e(100,"Stored each peerstore key under multiple datastore keys")}const migration={version:12,description:"Store each peerstore peer under a single datastore key",migrate:storePeerUnderSingleDatastoreKey,revert:storePeerUnderMultipleDatastoreKeys},emptyMigration={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0};Object.assign({version:1},emptyMigration),Object.assign({version:2},emptyMigration),Object.assign({version:3},emptyMigration),Object.assign({version:4},emptyMigration),Object.assign({version:5},emptyMigration),Object.assign({version:6},emptyMigration),Object.assign({version:7},emptyMigration);class NonReversibleMigrationError extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=NonReversibleMigrationError.code,this.message=e}}NonReversibleMigrationError.code="ERR_NON_REVERSIBLE_MIGRATION";class NotInitializedRepoError extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=NotInitializedRepoError.code,this.message=e}}NotInitializedRepoError.code="ERR_NOT_INITIALIZED_REPO";class RequiredParameterError extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=RequiredParameterError.code,this.message=e}}RequiredParameterError.code="ERR_REQUIRED_PARAMETER";class InvalidValueError extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=InvalidValueError.code,this.message=e}}InvalidValueError.code="ERR_INVALID_VALUE";class MissingRepoOptionsError extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=MissingRepoOptionsError.code,this.message=e}}MissingRepoOptionsError.code="ERR_MISSING_REPO_OPTIONS";debug("ipfs:repo:migrator:repo:init");debug("ipfs:repo:migrator");var bytes$1={exports:{}};/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */bytes$1.exports=bytes;bytes$1.exports.format=format;bytes$1.exports.parse=parse;var formatThousandsRegExp=/\B(?=(\d{3})+(?!\d))/g,formatDecimalsRegExp=/(?:\.0*|(\.[^0]+)0+)$/,map={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},parseRegExp=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function bytes(t,e){return typeof t=="string"?parse(t):typeof t=="number"?format(t,e):null}function format(t,e){if(!Number.isFinite(t))return null;var r=Math.abs(t),n=e&&e.thousandsSeparator||"",o=e&&e.unitSeparator||"",u=e&&e.decimalPlaces!==void 0?e.decimalPlaces:2,y=Boolean(e&&e.fixedDecimals),h=e&&e.unit||"";(!h||!map[h.toLowerCase()])&&(r>=map.pb?h="PB":r>=map.tb?h="TB":r>=map.gb?h="GB":r>=map.mb?h="MB":r>=map.kb?h="KB":h="B");var g=t/map[h.toLowerCase()],m=g.toFixed(u);return y||(m=m.replace(formatDecimalsRegExp,"$1")),n&&(m=m.split(".").map(function($,E){return E===0?$.replace(formatThousandsRegExp,n):$}).join(".")),m+o+h}function parse(t){if(typeof t=="number"&&!isNaN(t))return t;if(typeof t!="string")return null;var e=parseRegExp.exec(t),r,n="b";return e?(r=parseFloat(e[1]),n=e[4].toLowerCase()):(r=parseInt(t,10),n="b"),isNaN(r)?null:Math.floor(map[n]*r)}class LockExistsError extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=LockExistsError.code}}LockExistsError.code="ERR_LOCK_EXISTS";class NotFoundError extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=NotFoundError.code}}NotFoundError.code="ERR_NOT_FOUND";class InvalidRepoVersionError extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=InvalidRepoVersionError.code}}InvalidRepoVersionError.code="ERR_INVALID_REPO_VERSION";debug("ipfs:repo:version");new Key("version");var eventemitter3={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function o(g,m,$){this.fn=g,this.context=m,this.once=$||!1}function u(g,m,$,E,A){if(typeof $!="function")throw new TypeError("The listener must be a function");var B=new o($,E||g,A),T=r?r+m:m;return g._events[T]?g._events[T].fn?g._events[T]=[g._events[T],B]:g._events[T].push(B):(g._events[T]=B,g._eventsCount++),g}function y(g,m){--g._eventsCount===0?g._events=new n:delete g._events[m]}function h(){this._events=new n,this._eventsCount=0}h.prototype.eventNames=function(){var m=[],$,E;if(this._eventsCount===0)return m;for(E in $=this._events)e.call($,E)&&m.push(r?E.slice(1):E);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols($)):m},h.prototype.listeners=function(m){var $=r?r+m:m,E=this._events[$];if(!E)return[];if(E.fn)return[E.fn];for(var A=0,B=E.length,T=new Array(B);A<B;A++)T[A]=E[A].fn;return T},h.prototype.listenerCount=function(m){var $=r?r+m:m,E=this._events[$];return E?E.fn?1:E.length:0},h.prototype.emit=function(m,$,E,A,B,T){var k=r?r+m:m;if(!this._events[k])return!1;var U=this._events[k],W=arguments.length,te,X;if(U.fn){switch(U.once&&this.removeListener(m,U.fn,void 0,!0),W){case 1:return U.fn.call(U.context),!0;case 2:return U.fn.call(U.context,$),!0;case 3:return U.fn.call(U.context,$,E),!0;case 4:return U.fn.call(U.context,$,E,A),!0;case 5:return U.fn.call(U.context,$,E,A,B),!0;case 6:return U.fn.call(U.context,$,E,A,B,T),!0}for(X=1,te=new Array(W-1);X<W;X++)te[X-1]=arguments[X];U.fn.apply(U.context,te)}else{var N=U.length,O;for(X=0;X<N;X++)switch(U[X].once&&this.removeListener(m,U[X].fn,void 0,!0),W){case 1:U[X].fn.call(U[X].context);break;case 2:U[X].fn.call(U[X].context,$);break;case 3:U[X].fn.call(U[X].context,$,E);break;case 4:U[X].fn.call(U[X].context,$,E,A);break;default:if(!te)for(O=1,te=new Array(W-1);O<W;O++)te[O-1]=arguments[O];U[X].fn.apply(U[X].context,te)}}return!0},h.prototype.on=function(m,$,E){return u(this,m,$,E,!1)},h.prototype.once=function(m,$,E){return u(this,m,$,E,!0)},h.prototype.removeListener=function(m,$,E,A){var B=r?r+m:m;if(!this._events[B])return this;if(!$)return y(this,B),this;var T=this._events[B];if(T.fn)T.fn===$&&(!A||T.once)&&(!E||T.context===E)&&y(this,B);else{for(var k=0,U=[],W=T.length;k<W;k++)(T[k].fn!==$||A&&!T[k].once||E&&T[k].context!==E)&&U.push(T[k]);U.length?this._events[B]=U.length===1?U[0]:U:y(this,B)}return this},h.prototype.removeAllListeners=function(m){var $;return m?($=r?r+m:m,this._events[$]&&y(this,$)):(this._events=new n,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=r,h.EventEmitter=h,t.exports=h})(eventemitter3);const EventEmitter$2=eventemitter3.exports;class TimeoutError extends Error{constructor(e){super(e),this.name="TimeoutError"}}class AbortError$1 extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const getDOMException=t=>globalThis.DOMException===void 0?new AbortError$1(t):new DOMException(t),getAbortedReason=t=>{const e=t.reason===void 0?getDOMException("This operation was aborted."):t.reason;return e instanceof Error?e:getDOMException(e)};function pTimeout(t,e,r,n){let o;const u=new Promise((y,h)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){y(t);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){const{signal:g}=n;g.aborted&&h(getAbortedReason(g)),g.addEventListener("abort",()=>{h(getAbortedReason(g))})}o=n.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{y(r())}catch($){h($)}return}const g=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,m=r instanceof Error?r:new TimeoutError(g);typeof t.cancel=="function"&&t.cancel(),h(m)},e),(async()=>{try{y(await t)}catch(g){h(g)}finally{n.customTimers.clearTimeout.call(void 0,o)}})()});return u.clear=()=>{clearTimeout(o),o=void 0},u}function lowerBound(t,e,r){let n=0,o=t.length;for(;o>0;){const u=Math.trunc(o/2);let y=n+u;r(t[y],e)<=0?(n=++y,o-=u+1):o=u}return n}var __classPrivateFieldGet$1=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},_PriorityQueue_queue;class PriorityQueue{constructor(){_PriorityQueue_queue.set(this,[])}enqueue(e,r){r={priority:0,...r};const n={priority:r.priority,run:e};if(this.size&&__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f")[this.size-1].priority>=r.priority){__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").push(n);return}const o=lowerBound(__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f"),n,(u,y)=>y.priority-u.priority);__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").splice(o,0,n)}dequeue(){const e=__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").shift();return e==null?void 0:e.run}filter(e){return __classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return __classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").length}}_PriorityQueue_queue=new WeakMap;var __classPrivateFieldSet=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},__classPrivateFieldGet=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},_PQueue_instances,_PQueue_carryoverConcurrencyCount,_PQueue_isIntervalIgnored,_PQueue_intervalCount,_PQueue_intervalCap,_PQueue_interval,_PQueue_intervalEnd,_PQueue_intervalId,_PQueue_timeoutId,_PQueue_queue,_PQueue_queueClass,_PQueue_pendingCount,_PQueue_concurrency,_PQueue_isPaused,_PQueue_throwOnTimeout,_PQueue_doesIntervalAllowAnother_get,_PQueue_doesConcurrentAllowAnother_get,_PQueue_next,_PQueue_emitEvents,_PQueue_onResumeInterval,_PQueue_isIntervalPaused_get,_PQueue_tryToStartAnother,_PQueue_initializeIntervalIfNeeded,_PQueue_onInterval,_PQueue_processQueue,_PQueue_onEvent;const timeoutError=new TimeoutError;class AbortError extends Error{}class PQueue extends EventEmitter$2{constructor(e){var r,n,o,u;if(super(),_PQueue_instances.add(this),_PQueue_carryoverConcurrencyCount.set(this,void 0),_PQueue_isIntervalIgnored.set(this,void 0),_PQueue_intervalCount.set(this,0),_PQueue_intervalCap.set(this,void 0),_PQueue_interval.set(this,void 0),_PQueue_intervalEnd.set(this,0),_PQueue_intervalId.set(this,void 0),_PQueue_timeoutId.set(this,void 0),_PQueue_queue.set(this,void 0),_PQueue_queueClass.set(this,void 0),_PQueue_pendingCount.set(this,0),_PQueue_concurrency.set(this,void 0),_PQueue_isPaused.set(this,void 0),_PQueue_throwOnTimeout.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:PriorityQueue,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(u=(o=e.interval)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""}\` (${typeof e.interval})`);__classPrivateFieldSet(this,_PQueue_carryoverConcurrencyCount,e.carryoverConcurrencyCount,"f"),__classPrivateFieldSet(this,_PQueue_isIntervalIgnored,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),__classPrivateFieldSet(this,_PQueue_intervalCap,e.intervalCap,"f"),__classPrivateFieldSet(this,_PQueue_interval,e.interval,"f"),__classPrivateFieldSet(this,_PQueue_queue,new e.queueClass,"f"),__classPrivateFieldSet(this,_PQueue_queueClass,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,__classPrivateFieldSet(this,_PQueue_throwOnTimeout,e.throwOnTimeout===!0,"f"),__classPrivateFieldSet(this,_PQueue_isPaused,e.autoStart===!1,"f")}get concurrency(){return __classPrivateFieldGet(this,_PQueue_concurrency,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);__classPrivateFieldSet(this,_PQueue_concurrency,e,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)}async add(e,r={}){return new Promise((n,o)=>{const u=async()=>{var y,h,g;__classPrivateFieldSet(this,_PQueue_pendingCount,(h=__classPrivateFieldGet(this,_PQueue_pendingCount,"f"),h++,h),"f"),__classPrivateFieldSet(this,_PQueue_intervalCount,(g=__classPrivateFieldGet(this,_PQueue_intervalCount,"f"),g++,g),"f");try{if(!((y=r.signal)===null||y===void 0)&&y.aborted){o(new AbortError("The task was aborted."));return}const $=await(this.timeout===void 0&&r.timeout===void 0?e({signal:r.signal}):pTimeout(Promise.resolve(e({signal:r.signal})),r.timeout===void 0?this.timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?__classPrivateFieldGet(this,_PQueue_throwOnTimeout,"f"):r.throwOnTimeout)&&o(timeoutError)}));n($),this.emit("completed",$)}catch(m){o(m),this.emit("error",m)}__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_next).call(this)};__classPrivateFieldGet(this,_PQueue_queue,"f").enqueue(u,r),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return __classPrivateFieldGet(this,_PQueue_isPaused,"f")?(__classPrivateFieldSet(this,_PQueue_isPaused,!1,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this),this):this}pause(){__classPrivateFieldSet(this,_PQueue_isPaused,!0,"f")}clear(){__classPrivateFieldSet(this,_PQueue_queue,new(__classPrivateFieldGet(this,_PQueue_queueClass,"f")),"f")}async onEmpty(){__classPrivateFieldGet(this,_PQueue_queue,"f").size!==0&&await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"empty")}async onSizeLessThan(e){__classPrivateFieldGet(this,_PQueue_queue,"f").size<e||await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"next",()=>__classPrivateFieldGet(this,_PQueue_queue,"f").size<e)}async onIdle(){__classPrivateFieldGet(this,_PQueue_pendingCount,"f")===0&&__classPrivateFieldGet(this,_PQueue_queue,"f").size===0||await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"idle")}get size(){return __classPrivateFieldGet(this,_PQueue_queue,"f").size}sizeBy(e){return __classPrivateFieldGet(this,_PQueue_queue,"f").filter(e).length}get pending(){return __classPrivateFieldGet(this,_PQueue_pendingCount,"f")}get isPaused(){return __classPrivateFieldGet(this,_PQueue_isPaused,"f")}}_PQueue_carryoverConcurrencyCount=new WeakMap,_PQueue_isIntervalIgnored=new WeakMap,_PQueue_intervalCount=new WeakMap,_PQueue_intervalCap=new WeakMap,_PQueue_interval=new WeakMap,_PQueue_intervalEnd=new WeakMap,_PQueue_intervalId=new WeakMap,_PQueue_timeoutId=new WeakMap,_PQueue_queue=new WeakMap,_PQueue_queueClass=new WeakMap,_PQueue_pendingCount=new WeakMap,_PQueue_concurrency=new WeakMap,_PQueue_isPaused=new WeakMap,_PQueue_throwOnTimeout=new WeakMap,_PQueue_instances=new WeakSet,_PQueue_doesIntervalAllowAnother_get=function t(){return __classPrivateFieldGet(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet(this,_PQueue_intervalCount,"f")<__classPrivateFieldGet(this,_PQueue_intervalCap,"f")},_PQueue_doesConcurrentAllowAnother_get=function t(){return __classPrivateFieldGet(this,_PQueue_pendingCount,"f")<__classPrivateFieldGet(this,_PQueue_concurrency,"f")},_PQueue_next=function t(){var e;__classPrivateFieldSet(this,_PQueue_pendingCount,(e=__classPrivateFieldGet(this,_PQueue_pendingCount,"f"),e--,e),"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this),this.emit("next")},_PQueue_emitEvents=function t(){this.emit("empty"),__classPrivateFieldGet(this,_PQueue_pendingCount,"f")===0&&this.emit("idle")},_PQueue_onResumeInterval=function t(){__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onInterval).call(this),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),__classPrivateFieldSet(this,_PQueue_timeoutId,void 0,"f")},_PQueue_isIntervalPaused_get=function t(){const e=Date.now();if(__classPrivateFieldGet(this,_PQueue_intervalId,"f")===void 0){const r=__classPrivateFieldGet(this,_PQueue_intervalEnd,"f")-e;if(r<0)__classPrivateFieldSet(this,_PQueue_intervalCount,__classPrivateFieldGet(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet(this,_PQueue_pendingCount,"f"):0,"f");else return __classPrivateFieldGet(this,_PQueue_timeoutId,"f")===void 0&&__classPrivateFieldSet(this,_PQueue_timeoutId,setTimeout(()=>{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onResumeInterval).call(this)},r),"f"),!0}return!1},_PQueue_tryToStartAnother=function t(){if(__classPrivateFieldGet(this,_PQueue_queue,"f").size===0)return __classPrivateFieldGet(this,_PQueue_intervalId,"f")&&clearInterval(__classPrivateFieldGet(this,_PQueue_intervalId,"f")),__classPrivateFieldSet(this,_PQueue_intervalId,void 0,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_emitEvents).call(this),!1;if(!__classPrivateFieldGet(this,_PQueue_isPaused,"f")){const e=!__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_isIntervalPaused_get);if(__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_doesIntervalAllowAnother_get)&&__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_doesConcurrentAllowAnother_get)){const r=__classPrivateFieldGet(this,_PQueue_queue,"f").dequeue();return r?(this.emit("active"),r(),e&&__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),!0):!1}}return!1},_PQueue_initializeIntervalIfNeeded=function t(){__classPrivateFieldGet(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet(this,_PQueue_intervalId,"f")!==void 0||(__classPrivateFieldSet(this,_PQueue_intervalId,setInterval(()=>{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onInterval).call(this)},__classPrivateFieldGet(this,_PQueue_interval,"f")),"f"),__classPrivateFieldSet(this,_PQueue_intervalEnd,Date.now()+__classPrivateFieldGet(this,_PQueue_interval,"f"),"f"))},_PQueue_onInterval=function t(){__classPrivateFieldGet(this,_PQueue_intervalCount,"f")===0&&__classPrivateFieldGet(this,_PQueue_pendingCount,"f")===0&&__classPrivateFieldGet(this,_PQueue_intervalId,"f")&&(clearInterval(__classPrivateFieldGet(this,_PQueue_intervalId,"f")),__classPrivateFieldSet(this,_PQueue_intervalId,void 0,"f")),__classPrivateFieldSet(this,_PQueue_intervalCount,__classPrivateFieldGet(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet(this,_PQueue_pendingCount,"f"):0,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)},_PQueue_processQueue=function t(){for(;__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this););},_PQueue_onEvent=async function t(e,r){return new Promise(n=>{const o=()=>{r&&!r()||(this.off(e,o),n())};this.on(e,o)})};PQueue.default&&PQueue.default;new Key("config");new Key("datastore_spec");new Key("api");debug("ipfs:repo:lock:memory");debug("ipfs:repo:utils:walk-dag");debug("ipfs:repo:gc");notFoundError().code;new Key("/local/filesroot");debug("ipfs:repo");const SHARDING_FN="SHARDING",README_FN="_README",all$1=async t=>{const e=[];for await(const r of t)e.push(r);return e};var itAll=all$1;new Key(SHARDING_FN);new Key(README_FN);function base(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var u=t.charAt(o),y=u.charCodeAt(0);if(r[y]!==255)throw new TypeError(u+" is ambiguous");r[y]=o}var h=t.length,g=t.charAt(0),m=Math.log(h)/Math.log(256),$=Math.log(256)/Math.log(h);function E(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var k=0,U=0,W=0,te=T.length;W!==te&&T[W]===0;)W++,k++;for(var X=(te-W)*$+1>>>0,N=new Uint8Array(X);W!==te;){for(var O=T[W],Z=0,j=X-1;(O!==0||Z<U)&&j!==-1;j--,Z++)O+=256*N[j]>>>0,N[j]=O%h>>>0,O=O/h>>>0;if(O!==0)throw new Error("Non-zero carry");U=Z,W++}for(var K=X-U;K!==X&&N[K]===0;)K++;for(var se=g.repeat(k);K<X;++K)se+=t.charAt(N[K]);return se}function A(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var k=0;if(T[k]!==" "){for(var U=0,W=0;T[k]===g;)U++,k++;for(var te=(T.length-k)*m+1>>>0,X=new Uint8Array(te);T[k];){var N=r[T.charCodeAt(k)];if(N===255)return;for(var O=0,Z=te-1;(N!==0||O<W)&&Z!==-1;Z--,O++)N+=h*X[Z]>>>0,X[Z]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");W=O,k++}if(T[k]!==" "){for(var j=te-W;j!==te&&X[j]===0;)j++;for(var K=new Uint8Array(U+(te-j)),se=U;j!==te;)K[se++]=X[j++];return K}}}function B(T){var k=A(T);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:E,decodeUnsafe:A,decode:B}}var src=base,_brrp__multiformats_scope_baseX=src;const coerce=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};class Encoder{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or(this,e)}}class ComposedDecoder{constructor(e){this.decoders=e}or(e){return or(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or=(t,e)=>new ComposedDecoder({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Codec{constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder(e,r,n),this.decoder=new Decoder(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$1=({name:t,prefix:e,encode:r,decode:n})=>new Codec(t,e,r,n),baseX=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX(r,e);return from$1({prefix:t,name:e,encode:n,decode:u=>coerce(o(u))})},decode=(t,e,r,n)=>{const o={};for(let $=0;$<e.length;++$)o[e[$]]=$;let u=t.length;for(;t[u-1]==="=";)--u;const y=new Uint8Array(u*r/8|0);let h=0,g=0,m=0;for(let $=0;$<u;++$){const E=o[t[$]];if(E===void 0)throw new SyntaxError(`Non-${n} character`);g=g<<r|E,h+=r,h>=8&&(h-=8,y[m++]=255&g>>h)}if(h>=r||255&g<<8-h)throw new SyntaxError("Unexpected end of data");return y},encode$1=(t,e,r)=>{const n=e[e.length-1]==="=",o=(1<<r)-1;let u="",y=0,h=0;for(let g=0;g<t.length;++g)for(h=h<<8|t[g],y+=8;y>r;)y-=r,u+=e[o&h>>y];if(y&&(u+=e[o&h<<r-y]),n)for(;u.length*r&7;)u+="=";return u},rfc4648=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>from$1({prefix:e,name:t,encode(o){return encode$1(o,n,r)},decode(o){return decode(o,n,r,t)}}),base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const base64=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});debug.formatters.b=t=>t==null?"undefined":base58btc.baseEncode(t);debug.formatters.t=t=>t==null?"undefined":base32.baseEncode(t);debug.formatters.m=t=>t==null?"undefined":base64.baseEncode(t);debug.formatters.p=t=>t==null?"undefined":t.toString();debug.formatters.c=t=>t==null?"undefined":t.toString();debug.formatters.k=t=>t==null?"undefined":t.toString();function logger(t){return Object.assign(debug(t),{error:debug(`${t}:error`),trace:debug(`${t}:trace`)})}logger("datastore:core:tiered");var abstractLevel$1={},abstractLevel={},levelSupports={};levelSupports.supports=function t(...e){const r=e.reduce((n,o)=>Object.assign(n,o),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})};var levelTranscoder={},moduleError=class extends Error{constructor(e,r){super(e||""),typeof r=="object"&&r!==null&&(r.code&&(this.code=String(r.code)),r.expected&&(this.expected=!0),r.transient&&(this.transient=!0),r.cause&&(this.cause=r.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},encodings$1={},buffer$1={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup$1=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup$1[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function byteLength(t){var e=getLens(t),r=e[0],n=e[1];return(r+n)*3/4-n}function _byteLength(t,e,r){return(e+r)*3/4-r}function toByteArray(t){var e,r=getLens(t),n=r[0],o=r[1],u=new Arr(_byteLength(t,n,o)),y=0,h=o>0?n-4:n,g;for(g=0;g<h;g+=4)e=revLookup[t.charCodeAt(g)]<<18|revLookup[t.charCodeAt(g+1)]<<12|revLookup[t.charCodeAt(g+2)]<<6|revLookup[t.charCodeAt(g+3)],u[y++]=e>>16&255,u[y++]=e>>8&255,u[y++]=e&255;return o===2&&(e=revLookup[t.charCodeAt(g)]<<2|revLookup[t.charCodeAt(g+1)]>>4,u[y++]=e&255),o===1&&(e=revLookup[t.charCodeAt(g)]<<10|revLookup[t.charCodeAt(g+1)]<<4|revLookup[t.charCodeAt(g+2)]>>2,u[y++]=e>>8&255,u[y++]=e&255),u}function tripletToBase64(t){return lookup$1[t>>18&63]+lookup$1[t>>12&63]+lookup$1[t>>6&63]+lookup$1[t&63]}function encodeChunk(t,e,r){for(var n,o=[],u=e;u<r;u+=3)n=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(t[u+2]&255),o.push(tripletToBase64(n));return o.join("")}function fromByteArray(t){for(var e,r=t.length,n=r%3,o=[],u=16383,y=0,h=r-n;y<h;y+=u)o.push(encodeChunk(t,y,y+u>h?h:y+u));return n===1?(e=t[r-1],o.push(lookup$1[e>>2]+lookup$1[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],o.push(lookup$1[e>>10]+lookup$1[e>>4&63]+lookup$1[e<<2&63]+"=")),o.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(t,e,r,n,o){var u,y,h=o*8-n-1,g=(1<<h)-1,m=g>>1,$=-7,E=r?o-1:0,A=r?-1:1,B=t[e+E];for(E+=A,u=B&(1<<-$)-1,B>>=-$,$+=h;$>0;u=u*256+t[e+E],E+=A,$-=8);for(y=u&(1<<-$)-1,u>>=-$,$+=n;$>0;y=y*256+t[e+E],E+=A,$-=8);if(u===0)u=1-m;else{if(u===g)return y?NaN:(B?-1:1)*(1/0);y=y+Math.pow(2,n),u=u-m}return(B?-1:1)*y*Math.pow(2,u-n)};ieee754.write=function(t,e,r,n,o,u){var y,h,g,m=u*8-o-1,$=(1<<m)-1,E=$>>1,A=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=n?0:u-1,T=n?1:-1,k=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,y=$):(y=Math.floor(Math.log(e)/Math.LN2),e*(g=Math.pow(2,-y))<1&&(y--,g*=2),y+E>=1?e+=A/g:e+=A*Math.pow(2,1-E),e*g>=2&&(y++,g/=2),y+E>=$?(h=0,y=$):y+E>=1?(h=(e*g-1)*Math.pow(2,o),y=y+E):(h=e*Math.pow(2,E-1)*Math.pow(2,o),y=0));o>=8;t[r+B]=h&255,B+=T,h/=256,o-=8);for(y=y<<o|h,m+=o;m>0;t[r+B]=y&255,B+=T,y/=256,m-=8);t[r+B-T]|=k*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=base64Js,r=ieee754,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=h,t.SlowBuffer=te,t.INSPECT_MAX_BYTES=50;const o=2147483647;t.kMaxLength=o,h.TYPED_ARRAY_SUPPORT=u(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const f=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(f,s),f.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(!!h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(!!h.isBuffer(this))return this.byteOffset}});function y(f){if(f>o)throw new RangeError('The value "'+f+'" is invalid for option "size"');const s=new Uint8Array(f);return Object.setPrototypeOf(s,h.prototype),s}function h(f,s,c){if(typeof f=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(f)}return g(f,s,c)}h.poolSize=8192;function g(f,s,c){if(typeof f=="string")return A(f,s);if(ArrayBuffer.isView(f))return T(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(Ie(f,ArrayBuffer)||f&&Ie(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ie(f,SharedArrayBuffer)||f&&Ie(f.buffer,SharedArrayBuffer)))return k(f,s,c);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const w=f.valueOf&&f.valueOf();if(w!=null&&w!==f)return h.from(w,s,c);const v=U(f);if(v)return v;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return h.from(f[Symbol.toPrimitive]("string"),s,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}h.from=function(f,s,c){return g(f,s,c)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function m(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function $(f,s,c){return m(f),f<=0?y(f):s!==void 0?typeof c=="string"?y(f).fill(s,c):y(f).fill(s):y(f)}h.alloc=function(f,s,c){return $(f,s,c)};function E(f){return m(f),y(f<0?0:W(f)|0)}h.allocUnsafe=function(f){return E(f)},h.allocUnsafeSlow=function(f){return E(f)};function A(f,s){if((typeof s!="string"||s==="")&&(s="utf8"),!h.isEncoding(s))throw new TypeError("Unknown encoding: "+s);const c=X(f,s)|0;let w=y(c);const v=w.write(f,s);return v!==c&&(w=w.slice(0,v)),w}function B(f){const s=f.length<0?0:W(f.length)|0,c=y(s);for(let w=0;w<s;w+=1)c[w]=f[w]&255;return c}function T(f){if(Ie(f,Uint8Array)){const s=new Uint8Array(f);return k(s.buffer,s.byteOffset,s.byteLength)}return B(f)}function k(f,s,c){if(s<0||f.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<s+(c||0))throw new RangeError('"length" is outside of buffer bounds');let w;return s===void 0&&c===void 0?w=new Uint8Array(f):c===void 0?w=new Uint8Array(f,s):w=new Uint8Array(f,s,c),Object.setPrototypeOf(w,h.prototype),w}function U(f){if(h.isBuffer(f)){const s=W(f.length)|0,c=y(s);return c.length===0||f.copy(c,0,0,s),c}if(f.length!==void 0)return typeof f.length!="number"||Ge(f.length)?y(0):B(f);if(f.type==="Buffer"&&Array.isArray(f.data))return B(f.data)}function W(f){if(f>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return f|0}function te(f){return+f!=f&&(f=0),h.alloc(+f)}h.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==h.prototype},h.compare=function(s,c){if(Ie(s,Uint8Array)&&(s=h.from(s,s.offset,s.byteLength)),Ie(c,Uint8Array)&&(c=h.from(c,c.offset,c.byteLength)),!h.isBuffer(s)||!h.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===c)return 0;let w=s.length,v=c.length;for(let D=0,I=Math.min(w,v);D<I;++D)if(s[D]!==c[D]){w=s[D],v=c[D];break}return w<v?-1:v<w?1:0},h.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(s,c){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return h.alloc(0);let w;if(c===void 0)for(c=0,w=0;w<s.length;++w)c+=s[w].length;const v=h.allocUnsafe(c);let D=0;for(w=0;w<s.length;++w){let I=s[w];if(Ie(I,Uint8Array))D+I.length>v.length?(h.isBuffer(I)||(I=h.from(I)),I.copy(v,D)):Uint8Array.prototype.set.call(v,I,D);else if(h.isBuffer(I))I.copy(v,D);else throw new TypeError('"list" argument must be an Array of Buffers');D+=I.length}return v};function X(f,s){if(h.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||Ie(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);const c=f.length,w=arguments.length>2&&arguments[2]===!0;if(!w&&c===0)return 0;let v=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return oe(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return he(f).length;default:if(v)return w?-1:oe(f).length;s=(""+s).toLowerCase(),v=!0}}h.byteLength=X;function N(f,s,c){let w=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,s>>>=0,c<=s))return"";for(f||(f="utf8");;)switch(f){case"hex":return rt(this,s,c);case"utf8":case"utf-8":return De(this,s,c);case"ascii":return Je(this,s,c);case"latin1":case"binary":return Te(this,s,c);case"base64":return be(this,s,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it(this,s,c);default:if(w)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),w=!0}}h.prototype._isBuffer=!0;function O(f,s,c){const w=f[s];f[s]=f[c],f[c]=w}h.prototype.swap16=function(){const s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<s;c+=2)O(this,c,c+1);return this},h.prototype.swap32=function(){const s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<s;c+=4)O(this,c,c+3),O(this,c+1,c+2);return this},h.prototype.swap64=function(){const s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<s;c+=8)O(this,c,c+7),O(this,c+1,c+6),O(this,c+2,c+5),O(this,c+3,c+4);return this},h.prototype.toString=function(){const s=this.length;return s===0?"":arguments.length===0?De(this,0,s):N.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(s){if(!h.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:h.compare(this,s)===0},h.prototype.inspect=function(){let s="";const c=t.INSPECT_MAX_BYTES;return s=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(s+=" ... "),"<Buffer "+s+">"},n&&(h.prototype[n]=h.prototype.inspect),h.prototype.compare=function(s,c,w,v,D){if(Ie(s,Uint8Array)&&(s=h.from(s,s.offset,s.byteLength)),!h.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(c===void 0&&(c=0),w===void 0&&(w=s?s.length:0),v===void 0&&(v=0),D===void 0&&(D=this.length),c<0||w>s.length||v<0||D>this.length)throw new RangeError("out of range index");if(v>=D&&c>=w)return 0;if(v>=D)return-1;if(c>=w)return 1;if(c>>>=0,w>>>=0,v>>>=0,D>>>=0,this===s)return 0;let I=D-v,Ae=w-c;const Fe=Math.min(I,Ae),xe=this.slice(v,D),Ce=s.slice(c,w);for(let je=0;je<Fe;++je)if(xe[je]!==Ce[je]){I=xe[je],Ae=Ce[je];break}return I<Ae?-1:Ae<I?1:0};function Z(f,s,c,w,v){if(f.length===0)return-1;if(typeof c=="string"?(w=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,Ge(c)&&(c=v?0:f.length-1),c<0&&(c=f.length+c),c>=f.length){if(v)return-1;c=f.length-1}else if(c<0)if(v)c=0;else return-1;if(typeof s=="string"&&(s=h.from(s,w)),h.isBuffer(s))return s.length===0?-1:j(f,s,c,w,v);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?v?Uint8Array.prototype.indexOf.call(f,s,c):Uint8Array.prototype.lastIndexOf.call(f,s,c):j(f,[s],c,w,v);throw new TypeError("val must be string, number or Buffer")}function j(f,s,c,w,v){let D=1,I=f.length,Ae=s.length;if(w!==void 0&&(w=String(w).toLowerCase(),w==="ucs2"||w==="ucs-2"||w==="utf16le"||w==="utf-16le")){if(f.length<2||s.length<2)return-1;D=2,I/=2,Ae/=2,c/=2}function Fe(Ce,je){return D===1?Ce[je]:Ce.readUInt16BE(je*D)}let xe;if(v){let Ce=-1;for(xe=c;xe<I;xe++)if(Fe(f,xe)===Fe(s,Ce===-1?0:xe-Ce)){if(Ce===-1&&(Ce=xe),xe-Ce+1===Ae)return Ce*D}else Ce!==-1&&(xe-=xe-Ce),Ce=-1}else for(c+Ae>I&&(c=I-Ae),xe=c;xe>=0;xe--){let Ce=!0;for(let je=0;je<Ae;je++)if(Fe(f,xe+je)!==Fe(s,je)){Ce=!1;break}if(Ce)return xe}return-1}h.prototype.includes=function(s,c,w){return this.indexOf(s,c,w)!==-1},h.prototype.indexOf=function(s,c,w){return Z(this,s,c,w,!0)},h.prototype.lastIndexOf=function(s,c,w){return Z(this,s,c,w,!1)};function K(f,s,c,w){c=Number(c)||0;const v=f.length-c;w?(w=Number(w),w>v&&(w=v)):w=v;const D=s.length;w>D/2&&(w=D/2);let I;for(I=0;I<w;++I){const Ae=parseInt(s.substr(I*2,2),16);if(Ge(Ae))return I;f[c+I]=Ae}return I}function se(f,s,c,w){return _e(oe(s,f.length-c),f,c,w)}function le(f,s,c,w){return _e(ue(s),f,c,w)}function ye(f,s,c,w){return _e(he(s),f,c,w)}function Ee(f,s,c,w){return _e(q(s,f.length-c),f,c,w)}h.prototype.write=function(s,c,w,v){if(c===void 0)v="utf8",w=this.length,c=0;else if(w===void 0&&typeof c=="string")v=c,w=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(w)?(w=w>>>0,v===void 0&&(v="utf8")):(v=w,w=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const D=this.length-c;if((w===void 0||w>D)&&(w=D),s.length>0&&(w<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");let I=!1;for(;;)switch(v){case"hex":return K(this,s,c,w);case"utf8":case"utf-8":return se(this,s,c,w);case"ascii":case"latin1":case"binary":return le(this,s,c,w);case"base64":return ye(this,s,c,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ee(this,s,c,w);default:if(I)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),I=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function be(f,s,c){return s===0&&c===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(s,c))}function De(f,s,c){c=Math.min(f.length,c);const w=[];let v=s;for(;v<c;){const D=f[v];let I=null,Ae=D>239?4:D>223?3:D>191?2:1;if(v+Ae<=c){let Fe,xe,Ce,je;switch(Ae){case 1:D<128&&(I=D);break;case 2:Fe=f[v+1],(Fe&192)===128&&(je=(D&31)<<6|Fe&63,je>127&&(I=je));break;case 3:Fe=f[v+1],xe=f[v+2],(Fe&192)===128&&(xe&192)===128&&(je=(D&15)<<12|(Fe&63)<<6|xe&63,je>2047&&(je<55296||je>57343)&&(I=je));break;case 4:Fe=f[v+1],xe=f[v+2],Ce=f[v+3],(Fe&192)===128&&(xe&192)===128&&(Ce&192)===128&&(je=(D&15)<<18|(Fe&63)<<12|(xe&63)<<6|Ce&63,je>65535&&je<1114112&&(I=je))}}I===null?(I=65533,Ae=1):I>65535&&(I-=65536,w.push(I>>>10&1023|55296),I=56320|I&1023),w.push(I),v+=Ae}return Qe(w)}const We=4096;function Qe(f){const s=f.length;if(s<=We)return String.fromCharCode.apply(String,f);let c="",w=0;for(;w<s;)c+=String.fromCharCode.apply(String,f.slice(w,w+=We));return c}function Je(f,s,c){let w="";c=Math.min(f.length,c);for(let v=s;v<c;++v)w+=String.fromCharCode(f[v]&127);return w}function Te(f,s,c){let w="";c=Math.min(f.length,c);for(let v=s;v<c;++v)w+=String.fromCharCode(f[v]);return w}function rt(f,s,c){const w=f.length;(!s||s<0)&&(s=0),(!c||c<0||c>w)&&(c=w);let v="";for(let D=s;D<c;++D)v+=nt[f[D]];return v}function it(f,s,c){const w=f.slice(s,c);let v="";for(let D=0;D<w.length-1;D+=2)v+=String.fromCharCode(w[D]+w[D+1]*256);return v}h.prototype.slice=function(s,c){const w=this.length;s=~~s,c=c===void 0?w:~~c,s<0?(s+=w,s<0&&(s=0)):s>w&&(s=w),c<0?(c+=w,c<0&&(c=0)):c>w&&(c=w),c<s&&(c=s);const v=this.subarray(s,c);return Object.setPrototypeOf(v,h.prototype),v};function qe(f,s,c){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+s>c)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(s,c,w){s=s>>>0,c=c>>>0,w||qe(s,c,this.length);let v=this[s],D=1,I=0;for(;++I<c&&(D*=256);)v+=this[s+I]*D;return v},h.prototype.readUintBE=h.prototype.readUIntBE=function(s,c,w){s=s>>>0,c=c>>>0,w||qe(s,c,this.length);let v=this[s+--c],D=1;for(;c>0&&(D*=256);)v+=this[s+--c]*D;return v},h.prototype.readUint8=h.prototype.readUInt8=function(s,c){return s=s>>>0,c||qe(s,1,this.length),this[s]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(s,c){return s=s>>>0,c||qe(s,2,this.length),this[s]|this[s+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(s,c){return s=s>>>0,c||qe(s,2,this.length),this[s]<<8|this[s+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(s,c){return s=s>>>0,c||qe(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(s,c){return s=s>>>0,c||qe(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},h.prototype.readBigUInt64LE=Ze(function(s){s=s>>>0,ae(s,"offset");const c=this[s],w=this[s+7];(c===void 0||w===void 0)&&ie(s,this.length-8);const v=c+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,D=this[++s]+this[++s]*2**8+this[++s]*2**16+w*2**24;return BigInt(v)+(BigInt(D)<<BigInt(32))}),h.prototype.readBigUInt64BE=Ze(function(s){s=s>>>0,ae(s,"offset");const c=this[s],w=this[s+7];(c===void 0||w===void 0)&&ie(s,this.length-8);const v=c*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],D=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+w;return(BigInt(v)<<BigInt(32))+BigInt(D)}),h.prototype.readIntLE=function(s,c,w){s=s>>>0,c=c>>>0,w||qe(s,c,this.length);let v=this[s],D=1,I=0;for(;++I<c&&(D*=256);)v+=this[s+I]*D;return D*=128,v>=D&&(v-=Math.pow(2,8*c)),v},h.prototype.readIntBE=function(s,c,w){s=s>>>0,c=c>>>0,w||qe(s,c,this.length);let v=c,D=1,I=this[s+--v];for(;v>0&&(D*=256);)I+=this[s+--v]*D;return D*=128,I>=D&&(I-=Math.pow(2,8*c)),I},h.prototype.readInt8=function(s,c){return s=s>>>0,c||qe(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},h.prototype.readInt16LE=function(s,c){s=s>>>0,c||qe(s,2,this.length);const w=this[s]|this[s+1]<<8;return w&32768?w|4294901760:w},h.prototype.readInt16BE=function(s,c){s=s>>>0,c||qe(s,2,this.length);const w=this[s+1]|this[s]<<8;return w&32768?w|4294901760:w},h.prototype.readInt32LE=function(s,c){return s=s>>>0,c||qe(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},h.prototype.readInt32BE=function(s,c){return s=s>>>0,c||qe(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},h.prototype.readBigInt64LE=Ze(function(s){s=s>>>0,ae(s,"offset");const c=this[s],w=this[s+7];(c===void 0||w===void 0)&&ie(s,this.length-8);const v=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(w<<24);return(BigInt(v)<<BigInt(32))+BigInt(c+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),h.prototype.readBigInt64BE=Ze(function(s){s=s>>>0,ae(s,"offset");const c=this[s],w=this[s+7];(c===void 0||w===void 0)&&ie(s,this.length-8);const v=(c<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(v)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+w)}),h.prototype.readFloatLE=function(s,c){return s=s>>>0,c||qe(s,4,this.length),r.read(this,s,!0,23,4)},h.prototype.readFloatBE=function(s,c){return s=s>>>0,c||qe(s,4,this.length),r.read(this,s,!1,23,4)},h.prototype.readDoubleLE=function(s,c){return s=s>>>0,c||qe(s,8,this.length),r.read(this,s,!0,52,8)},h.prototype.readDoubleBE=function(s,c){return s=s>>>0,c||qe(s,8,this.length),r.read(this,s,!1,52,8)};function re(f,s,c,w,v,D){if(!h.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>v||s<D)throw new RangeError('"value" argument is out of bounds');if(c+w>f.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(s,c,w,v){if(s=+s,c=c>>>0,w=w>>>0,!v){const Ae=Math.pow(2,8*w)-1;re(this,s,c,w,Ae,0)}let D=1,I=0;for(this[c]=s&255;++I<w&&(D*=256);)this[c+I]=s/D&255;return c+w},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(s,c,w,v){if(s=+s,c=c>>>0,w=w>>>0,!v){const Ae=Math.pow(2,8*w)-1;re(this,s,c,w,Ae,0)}let D=w-1,I=1;for(this[c+D]=s&255;--D>=0&&(I*=256);)this[c+D]=s/I&255;return c+w},h.prototype.writeUint8=h.prototype.writeUInt8=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,1,255,0),this[c]=s&255,c+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,2,65535,0),this[c]=s&255,this[c+1]=s>>>8,c+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,2,65535,0),this[c]=s>>>8,this[c+1]=s&255,c+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,4,4294967295,0),this[c+3]=s>>>24,this[c+2]=s>>>16,this[c+1]=s>>>8,this[c]=s&255,c+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,4,4294967295,0),this[c]=s>>>24,this[c+1]=s>>>16,this[c+2]=s>>>8,this[c+3]=s&255,c+4};function we(f,s,c,w,v){ee(s,w,v,f,c,7);let D=Number(s&BigInt(4294967295));f[c++]=D,D=D>>8,f[c++]=D,D=D>>8,f[c++]=D,D=D>>8,f[c++]=D;let I=Number(s>>BigInt(32)&BigInt(4294967295));return f[c++]=I,I=I>>8,f[c++]=I,I=I>>8,f[c++]=I,I=I>>8,f[c++]=I,c}function ne(f,s,c,w,v){ee(s,w,v,f,c,7);let D=Number(s&BigInt(4294967295));f[c+7]=D,D=D>>8,f[c+6]=D,D=D>>8,f[c+5]=D,D=D>>8,f[c+4]=D;let I=Number(s>>BigInt(32)&BigInt(4294967295));return f[c+3]=I,I=I>>8,f[c+2]=I,I=I>>8,f[c+1]=I,I=I>>8,f[c]=I,c+8}h.prototype.writeBigUInt64LE=Ze(function(s,c=0){return we(this,s,c,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=Ze(function(s,c=0){return ne(this,s,c,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(s,c,w,v){if(s=+s,c=c>>>0,!v){const Fe=Math.pow(2,8*w-1);re(this,s,c,w,Fe-1,-Fe)}let D=0,I=1,Ae=0;for(this[c]=s&255;++D<w&&(I*=256);)s<0&&Ae===0&&this[c+D-1]!==0&&(Ae=1),this[c+D]=(s/I>>0)-Ae&255;return c+w},h.prototype.writeIntBE=function(s,c,w,v){if(s=+s,c=c>>>0,!v){const Fe=Math.pow(2,8*w-1);re(this,s,c,w,Fe-1,-Fe)}let D=w-1,I=1,Ae=0;for(this[c+D]=s&255;--D>=0&&(I*=256);)s<0&&Ae===0&&this[c+D+1]!==0&&(Ae=1),this[c+D]=(s/I>>0)-Ae&255;return c+w},h.prototype.writeInt8=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,1,127,-128),s<0&&(s=255+s+1),this[c]=s&255,c+1},h.prototype.writeInt16LE=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,2,32767,-32768),this[c]=s&255,this[c+1]=s>>>8,c+2},h.prototype.writeInt16BE=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,2,32767,-32768),this[c]=s>>>8,this[c+1]=s&255,c+2},h.prototype.writeInt32LE=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,4,2147483647,-2147483648),this[c]=s&255,this[c+1]=s>>>8,this[c+2]=s>>>16,this[c+3]=s>>>24,c+4},h.prototype.writeInt32BE=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[c]=s>>>24,this[c+1]=s>>>16,this[c+2]=s>>>8,this[c+3]=s&255,c+4},h.prototype.writeBigInt64LE=Ze(function(s,c=0){return we(this,s,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=Ze(function(s,c=0){return ne(this,s,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function He(f,s,c,w,v,D){if(c+w>f.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function et(f,s,c,w,v){return s=+s,c=c>>>0,v||He(f,s,c,4),r.write(f,s,c,w,23,4),c+4}h.prototype.writeFloatLE=function(s,c,w){return et(this,s,c,!0,w)},h.prototype.writeFloatBE=function(s,c,w){return et(this,s,c,!1,w)};function tt(f,s,c,w,v){return s=+s,c=c>>>0,v||He(f,s,c,8),r.write(f,s,c,w,52,8),c+8}h.prototype.writeDoubleLE=function(s,c,w){return tt(this,s,c,!0,w)},h.prototype.writeDoubleBE=function(s,c,w){return tt(this,s,c,!1,w)},h.prototype.copy=function(s,c,w,v){if(!h.isBuffer(s))throw new TypeError("argument should be a Buffer");if(w||(w=0),!v&&v!==0&&(v=this.length),c>=s.length&&(c=s.length),c||(c=0),v>0&&v<w&&(v=w),v===w||s.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(w<0||w>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),s.length-c<v-w&&(v=s.length-c+w);const D=v-w;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,w,v):Uint8Array.prototype.set.call(s,this.subarray(w,v),c),D},h.prototype.fill=function(s,c,w,v){if(typeof s=="string"){if(typeof c=="string"?(v=c,c=0,w=this.length):typeof w=="string"&&(v=w,w=this.length),v!==void 0&&typeof v!="string")throw new TypeError("encoding must be a string");if(typeof v=="string"&&!h.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(s.length===1){const I=s.charCodeAt(0);(v==="utf8"&&I<128||v==="latin1")&&(s=I)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(c<0||this.length<c||this.length<w)throw new RangeError("Out of range index");if(w<=c)return this;c=c>>>0,w=w===void 0?this.length:w>>>0,s||(s=0);let D;if(typeof s=="number")for(D=c;D<w;++D)this[D]=s;else{const I=h.isBuffer(s)?s:h.from(s,v),Ae=I.length;if(Ae===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(D=0;D<w-c;++D)this[D+c]=I[D%Ae]}return this};const Ve={};function Ye(f,s,c){Ve[f]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(v){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:v,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}Ye("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ye("ERR_INVALID_ARG_TYPE",function(f,s){return`The "${f}" argument must be of type number. Received type ${typeof s}`},TypeError),Ye("ERR_OUT_OF_RANGE",function(f,s,c){let w=`The value of "${f}" is out of range.`,v=c;return Number.isInteger(c)&&Math.abs(c)>2**32?v=P(String(c)):typeof c=="bigint"&&(v=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(v=P(v)),v+="n"),w+=` It must be ${s}. Received ${v}`,w},RangeError);function P(f){let s="",c=f.length;const w=f[0]==="-"?1:0;for(;c>=w+4;c-=3)s=`_${f.slice(c-3,c)}${s}`;return`${f.slice(0,c)}${s}`}function L(f,s,c){ae(s,"offset"),(f[s]===void 0||f[s+c]===void 0)&&ie(s,f.length-(c+1))}function ee(f,s,c,w,v,D){if(f>c||f<s){const I=typeof s=="bigint"?"n":"";let Ae;throw D>3?s===0||s===BigInt(0)?Ae=`>= 0${I} and < 2${I} ** ${(D+1)*8}${I}`:Ae=`>= -(2${I} ** ${(D+1)*8-1}${I}) and < 2 ** ${(D+1)*8-1}${I}`:Ae=`>= ${s}${I} and <= ${c}${I}`,new Ve.ERR_OUT_OF_RANGE("value",Ae,f)}L(w,v,D)}function ae(f,s){if(typeof f!="number")throw new Ve.ERR_INVALID_ARG_TYPE(s,"number",f)}function ie(f,s,c){throw Math.floor(f)!==f?(ae(f,c),new Ve.ERR_OUT_OF_RANGE(c||"offset","an integer",f)):s<0?new Ve.ERR_BUFFER_OUT_OF_BOUNDS:new Ve.ERR_OUT_OF_RANGE(c||"offset",`>= ${c?1:0} and <= ${s}`,f)}const de=/[^+/0-9A-Za-z-_]/g;function ge(f){if(f=f.split("=")[0],f=f.trim().replace(de,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function oe(f,s){s=s||1/0;let c;const w=f.length;let v=null;const D=[];for(let I=0;I<w;++I){if(c=f.charCodeAt(I),c>55295&&c<57344){if(!v){if(c>56319){(s-=3)>-1&&D.push(239,191,189);continue}else if(I+1===w){(s-=3)>-1&&D.push(239,191,189);continue}v=c;continue}if(c<56320){(s-=3)>-1&&D.push(239,191,189),v=c;continue}c=(v-55296<<10|c-56320)+65536}else v&&(s-=3)>-1&&D.push(239,191,189);if(v=null,c<128){if((s-=1)<0)break;D.push(c)}else if(c<2048){if((s-=2)<0)break;D.push(c>>6|192,c&63|128)}else if(c<65536){if((s-=3)<0)break;D.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((s-=4)<0)break;D.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return D}function ue(f){const s=[];for(let c=0;c<f.length;++c)s.push(f.charCodeAt(c)&255);return s}function q(f,s){let c,w,v;const D=[];for(let I=0;I<f.length&&!((s-=2)<0);++I)c=f.charCodeAt(I),w=c>>8,v=c%256,D.push(v),D.push(w);return D}function he(f){return e.toByteArray(ge(f))}function _e(f,s,c,w){let v;for(v=0;v<w&&!(v+c>=s.length||v>=f.length);++v)s[v+c]=f[v];return v}function Ie(f,s){return f instanceof s||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===s.name}function Ge(f){return f!==f}const nt=function(){const f="0123456789abcdef",s=new Array(256);for(let c=0;c<16;++c){const w=c*16;for(let v=0;v<16;++v)s[w+v]=f[c]+f[v]}return s}();function Ze(f){return typeof BigInt>"u"?ot:f}function ot(){throw new Error("BigInt not supported")}})(buffer$1);let lazy=null;var textEndec$1=function(){return lazy===null&&(lazy={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),lazy},formats$2={},encoding={};const ModuleError$8=moduleError,formats$1=new Set(["buffer","view","utf8"]);class Encoding$2{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!formats$1.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}encoding.Encoding=Encoding$2;const{Buffer:Buffer$2}=buffer$1||{},{Encoding:Encoding$1}=encoding,textEndec=textEndec$1;class BufferFormat$2 extends Encoding$1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new ViewFormat$2({encode:this.encode,decode:e=>this.decode(Buffer$2.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}}class ViewFormat$2 extends Encoding$1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>{const r=this.encode(e);return Buffer$2.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}}class UTF8Format$2 extends Encoding$1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>Buffer$2.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:e,textDecoder:r}=textEndec();return new ViewFormat$2({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(r.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}}formats$2.BufferFormat=BufferFormat$2;formats$2.ViewFormat=ViewFormat$2;formats$2.UTF8Format=UTF8Format$2;const{Buffer:Buffer$1}=buffer$1||{Buffer:{isBuffer:()=>!1}},{textEncoder:textEncoder$1,textDecoder}=textEndec$1(),{BufferFormat:BufferFormat$1,ViewFormat:ViewFormat$1,UTF8Format:UTF8Format$1}=formats$2,identity=t=>t;encodings$1.utf8=new UTF8Format$1({encode:function(t){return Buffer$1.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?textDecoder.decode(t):String(t)},decode:identity,name:"utf8",createViewTranscoder(){return new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:textEncoder$1.encode(t)},decode:function(t){return textDecoder.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new BufferFormat$1({encode:function(t){return Buffer$1.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer$1.from(t.buffer,t.byteOffset,t.byteLength):Buffer$1.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});encodings$1.json=new UTF8Format$1({encode:JSON.stringify,decode:JSON.parse,name:"json"});encodings$1.buffer=new BufferFormat$1({encode:function(t){return Buffer$1.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer$1.from(t.buffer,t.byteOffset,t.byteLength):Buffer$1.from(String(t),"utf8")},decode:identity,name:"buffer",createViewTranscoder(){return new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:Buffer$1.from(String(t),"utf8")},decode:function(t){return Buffer$1.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});encodings$1.view=new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:textEncoder$1.encode(t)},decode:identity,name:"view",createBufferTranscoder(){return new BufferFormat$1({encode:function(t){return Buffer$1.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer$1.from(t.buffer,t.byteOffset,t.byteLength):Buffer$1.from(String(t),"utf8")},decode:identity,name:`${this.name}+buffer`})}});encodings$1.hex=new BufferFormat$1({encode:function(t){return Buffer$1.isBuffer(t)?t:Buffer$1.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});encodings$1.base64=new BufferFormat$1({encode:function(t){return Buffer$1.isBuffer(t)?t:Buffer$1.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"});const ModuleError$7=moduleError,encodings=encodings$1,{Encoding}=encoding,{BufferFormat,ViewFormat,UTF8Format}=formats$2,kFormats=Symbol("formats"),kEncodings=Symbol("encodings"),validFormats=new Set(["buffer","view","utf8"]);class Transcoder$1{constructor(e){if(Array.isArray(e)){if(!e.every(r=>validFormats.has(r)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[kEncodings]=new Map,this[kFormats]=new Set(e);for(const r in encodings)try{this.encoding(r)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[kEncodings].values()))}encoding(e){let r=this[kEncodings].get(e);if(r===void 0){if(typeof e=="string"&&e!==""){if(r=lookup[e],!r)throw new ModuleError$7(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");r=from(e)}const{name:n,format:o}=r;if(!this[kFormats].has(o))if(this[kFormats].has("view"))r=r.createViewTranscoder();else if(this[kFormats].has("buffer"))r=r.createBufferTranscoder();else if(this[kFormats].has("utf8"))r=r.createUTF8Transcoder();else throw new ModuleError$7(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const u of[e,n,r.name,r.commonName])this[kEncodings].set(u,r)}return r}}levelTranscoder.Transcoder=Transcoder$1;function from(t){if(t instanceof Encoding)return t;const e="type"in t&&typeof t.type=="string"?t.type:void 0,r=t.name||e||`anonymous-${anonymousCount++}`;switch(detectFormat(t)){case"view":return new ViewFormat({...t,name:r});case"utf8":return new UTF8Format({...t,name:r});case"buffer":return new BufferFormat({...t,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function detectFormat(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}const aliases={binary:encodings.buffer,"utf-8":encodings.utf8},lookup={...encodings,...aliases};let anonymousCount=0;var events={exports:{}},R$1=typeof Reflect=="object"?Reflect:null,ReflectApply=R$1&&typeof R$1.apply=="function"?R$1.apply:function t(e,r,n){return Function.prototype.apply.call(e,r,n)},ReflectOwnKeys;R$1&&typeof R$1.ownKeys=="function"?ReflectOwnKeys=R$1.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(t){console&&console.warn&&console.warn(t)}var NumberIsNaN=Number.isNaN||function t(e){return e!==e};function EventEmitter$1(){EventEmitter$1.init.call(this)}events.exports=EventEmitter$1;events.exports.once=once;EventEmitter$1.EventEmitter=EventEmitter$1;EventEmitter$1.prototype._events=void 0;EventEmitter$1.prototype._eventsCount=0;EventEmitter$1.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(EventEmitter$1,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(t){if(typeof t!="number"||t<0||NumberIsNaN(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");defaultMaxListeners=t}});EventEmitter$1.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$1.prototype.setMaxListeners=function t(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(t){return t._maxListeners===void 0?EventEmitter$1.defaultMaxListeners:t._maxListeners}EventEmitter$1.prototype.getMaxListeners=function t(){return _getMaxListeners(this)};EventEmitter$1.prototype.emit=function t(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var o=e==="error",u=this._events;if(u!==void 0)o=o&&u.error===void 0;else if(!o)return!1;if(o){var y;if(r.length>0&&(y=r[0]),y instanceof Error)throw y;var h=new Error("Unhandled error."+(y?" ("+y.message+")":""));throw h.context=y,h}var g=u[e];if(g===void 0)return!1;if(typeof g=="function")ReflectApply(g,this,r);else for(var m=g.length,$=arrayClone(g,m),n=0;n<m;++n)ReflectApply($[n],this,r);return!0};function _addListener(t,e,r,n){var o,u,y;if(checkListener(r),u=t._events,u===void 0?(u=t._events=Object.create(null),t._eventsCount=0):(u.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),u=t._events),y=u[e]),y===void 0)y=u[e]=r,++t._eventsCount;else if(typeof y=="function"?y=u[e]=n?[r,y]:[y,r]:n?y.unshift(r):y.push(r),o=_getMaxListeners(t),o>0&&y.length>o&&!y.warned){y.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+y.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=y.length,ProcessEmitWarning(h)}return t}EventEmitter$1.prototype.addListener=function t(e,r){return _addListener(this,e,r,!1)};EventEmitter$1.prototype.on=EventEmitter$1.prototype.addListener;EventEmitter$1.prototype.prependListener=function t(e,r){return _addListener(this,e,r,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},o=onceWrapper.bind(n);return o.listener=r,n.wrapFn=o,o}EventEmitter$1.prototype.once=function t(e,r){return checkListener(r),this.on(e,_onceWrap(this,e,r)),this};EventEmitter$1.prototype.prependOnceListener=function t(e,r){return checkListener(r),this.prependListener(e,_onceWrap(this,e,r)),this};EventEmitter$1.prototype.removeListener=function t(e,r){var n,o,u,y,h;if(checkListener(r),o=this._events,o===void 0)return this;if(n=o[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(u=-1,y=n.length-1;y>=0;y--)if(n[y]===r||n[y].listener===r){h=n[y].listener,u=y;break}if(u<0)return this;u===0?n.shift():spliceOne(n,u),n.length===1&&(o[e]=n[0]),o.removeListener!==void 0&&this.emit("removeListener",e,h||r)}return this};EventEmitter$1.prototype.off=EventEmitter$1.prototype.removeListener;EventEmitter$1.prototype.removeAllListeners=function t(e){var r,n,o;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var u=Object.keys(n),y;for(o=0;o<u.length;++o)y=u[o],y!=="removeListener"&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(o=r.length-1;o>=0;o--)this.removeListener(e,r[o]);return this};function _listeners(t,e,r){var n=t._events;if(n===void 0)return[];var o=n[e];return o===void 0?[]:typeof o=="function"?r?[o.listener||o]:[o]:r?unwrapListeners(o):arrayClone(o,o.length)}EventEmitter$1.prototype.listeners=function t(e){return _listeners(this,e,!0)};EventEmitter$1.prototype.rawListeners=function t(e){return _listeners(this,e,!1)};EventEmitter$1.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):listenerCount.call(t,e)};EventEmitter$1.prototype.listenerCount=listenerCount;function listenerCount(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}EventEmitter$1.prototype.eventNames=function t(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function spliceOne(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function unwrapListeners(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function once(t,e){return new Promise(function(r,n){function o(y){t.removeListener(e,u),n(y)}function u(){typeof t.removeListener=="function"&&t.removeListener("error",o),r([].slice.call(arguments))}eventTargetAgnosticAddListener(t,e,u,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(t,o,{once:!0})})}function addErrorHandlerIfEventEmitter(t,e,r){typeof t.on=="function"&&eventTargetAgnosticAddListener(t,"error",e,r)}function eventTargetAgnosticAddListener(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function o(u){n.once&&t.removeEventListener(e,o),r(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var catering={},nextTickBrowser$1=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t),nextTick=nextTickBrowser$1;catering.fromCallback=function(t,e){if(t===void 0){var r=new Promise(function(n,o){t=function(u,y){u?o(u):n(y)}});t[e!==void 0?e:"promise"]=r}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};catering.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){nextTick(()=>e(null,r))}).catch(function(r){nextTick(()=>e(r))})};var abstractIterator={},common={};common.getCallback=function(t,e){return typeof t=="function"?t:e};common.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}};const{fromCallback:fromCallback$3}=catering,ModuleError$6=moduleError,{getOptions:getOptions$2,getCallback:getCallback$2}=common,kPromise$3=Symbol("promise"),kCallback$1=Symbol("callback"),kWorking=Symbol("working"),kHandleOne$1=Symbol("handleOne"),kHandleMany$1=Symbol("handleMany"),kAutoClose=Symbol("autoClose"),kFinishWork=Symbol("finishWork"),kReturnMany=Symbol("returnMany"),kClosing=Symbol("closing"),kHandleClose=Symbol("handleClose"),kClosed=Symbol("closed"),kCloseCallbacks$1=Symbol("closeCallbacks"),kKeyEncoding$1=Symbol("keyEncoding"),kValueEncoding$1=Symbol("valueEncoding"),kAbortOnClose=Symbol("abortOnClose"),kLegacy=Symbol("legacy"),kKeys=Symbol("keys"),kValues=Symbol("values"),kLimit=Symbol("limit"),kCount=Symbol("count"),emptyOptions$1=Object.freeze({}),noop$1=()=>{};let warnedEnd=!1;class CommonIterator{constructor(e,r,n){if(typeof e!="object"||e===null){const o=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${o}`)}if(typeof r!="object"||r===null)throw new TypeError("The second argument must be an options object");this[kClosed]=!1,this[kCloseCallbacks$1]=[],this[kWorking]=!1,this[kClosing]=!1,this[kAutoClose]=!1,this[kCallback$1]=null,this[kHandleOne$1]=this[kHandleOne$1].bind(this),this[kHandleMany$1]=this[kHandleMany$1].bind(this),this[kHandleClose]=this[kHandleClose].bind(this),this[kKeyEncoding$1]=r[kKeyEncoding$1],this[kValueEncoding$1]=r[kValueEncoding$1],this[kLegacy]=n,this[kLimit]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[kCount]=0,this[kAbortOnClose]=!!r.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[kCount]}get limit(){return this[kLimit]}next(e){let r;if(e===void 0)r=new Promise((n,o)=>{e=(u,y,h)=>{u?o(u):this[kLegacy]?y===void 0&&h===void 0?n():n([y,h]):n(y)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[kClosing]?this.nextTick(e,new ModuleError$6("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(e,new ModuleError$6("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=e,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleOne$1],null):this._next(this[kHandleOne$1])),r}_next(e){this.nextTick(e)}nextv(e,r,n){return n=getCallback$2(r,n),n=fromCallback$3(n,kPromise$3),r=getOptions$2(r,emptyOptions$1),Number.isInteger(e)?(this[kClosing]?this.nextTick(n,new ModuleError$6("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(n,new ModuleError$6("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[kLimit]<1/0&&(e=Math.min(e,this[kLimit]-this[kCount])),this[kWorking]=!0,this[kCallback$1]=n,e<=0?this.nextTick(this[kHandleMany$1],null,[]):this._nextv(e,r,this[kHandleMany$1])),n[kPromise$3]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[kPromise$3])}_nextv(e,r,n){const o=[],u=(y,h,g)=>{if(y)return n(y);if(this[kLegacy]?h===void 0&&g===void 0:h===void 0)return n(null,o);o.push(this[kLegacy]?[h,g]:h),o.length===e?n(null,o):this._next(u)};this._next(u)}all(e,r){return r=getCallback$2(e,r),r=fromCallback$3(r,kPromise$3),e=getOptions$2(e,emptyOptions$1),this[kClosing]?this.nextTick(r,new ModuleError$6("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(r,new ModuleError$6("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=r,this[kAutoClose]=!0,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleMany$1],null,[]):this._all(e,this[kHandleMany$1])),r[kPromise$3]}_all(e,r){let n=this[kCount];const o=[],u=()=>{const h=this[kLimit]<1/0?Math.min(1e3,this[kLimit]-n):1e3;h<=0?this.nextTick(r,null,o):this._nextv(h,emptyOptions$1,y)},y=(h,g)=>{h?r(h):g.length===0?r(null,o):(o.push.apply(o,g),n+=g.length,u())};u()}[kFinishWork](){const e=this[kCallback$1];return this[kAbortOnClose]&&e===null?noop$1:(this[kWorking]=!1,this[kCallback$1]=null,this[kClosing]&&this._close(this[kHandleClose]),e)}[kReturnMany](e,r,n){this[kAutoClose]?this.close(e.bind(null,r,n)):e(r,n)}seek(e,r){if(r=getOptions$2(r,emptyOptions$1),!this[kClosing]){if(this[kWorking])throw new ModuleError$6("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const n=this.db.keyEncoding(r.keyEncoding||this[kKeyEncoding$1]),o=n.format;r.keyEncoding!==o&&(r={...r,keyEncoding:o});const u=this.db.prefixKey(n.encode(e),o);this._seek(u,r)}}}_seek(e,r){throw new ModuleError$6("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=fromCallback$3(e,kPromise$3),this[kClosed]?this.nextTick(e):this[kClosing]?this[kCloseCallbacks$1].push(e):(this[kClosing]=!0,this[kCloseCallbacks$1].push(e),this[kWorking]?this[kAbortOnClose]&&this[kFinishWork]()(new ModuleError$6("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[kHandleClose])),e[kPromise$3]}_close(e){this.nextTick(e)}[kHandleClose](){this[kClosed]=!0,this.db.detachResource(this);const e=this[kCloseCallbacks$1];this[kCloseCallbacks$1]=[];for(const r of e)r()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[kClosed]||await this.close()}}}class AbstractIterator$3 extends CommonIterator{constructor(e,r){super(e,r,!0),this[kKeys]=r.keys!==!1,this[kValues]=r.values!==!1}[kHandleOne$1](e,r,n){const o=this[kFinishWork]();if(e)return o(e);try{r=this[kKeys]&&r!==void 0?this[kKeyEncoding$1].decode(r):void 0,n=this[kValues]&&n!==void 0?this[kValueEncoding$1].decode(n):void 0}catch(u){return o(new IteratorDecodeError("entry",u))}r===void 0&&n===void 0||this[kCount]++,o(null,r,n)}[kHandleMany$1](e,r){const n=this[kFinishWork]();if(e)return this[kReturnMany](n,e);try{for(const o of r){const u=o[0],y=o[1];o[0]=this[kKeys]&&u!==void 0?this[kKeyEncoding$1].decode(u):void 0,o[1]=this[kValues]&&y!==void 0?this[kValueEncoding$1].decode(y):void 0}}catch(o){return this[kReturnMany](n,new IteratorDecodeError("entries",o))}this[kCount]+=r.length,this[kReturnMany](n,null,r)}end(e){return!warnedEnd&&typeof console<"u"&&(warnedEnd=!0,console.warn(new ModuleError$6("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}}class AbstractKeyIterator$2 extends CommonIterator{constructor(e,r){super(e,r,!1)}[kHandleOne$1](e,r){const n=this[kFinishWork]();if(e)return n(e);try{r=r!==void 0?this[kKeyEncoding$1].decode(r):void 0}catch(o){return n(new IteratorDecodeError("key",o))}r!==void 0&&this[kCount]++,n(null,r)}[kHandleMany$1](e,r){const n=this[kFinishWork]();if(e)return this[kReturnMany](n,e);try{for(let o=0;o<r.length;o++){const u=r[o];r[o]=u!==void 0?this[kKeyEncoding$1].decode(u):void 0}}catch(o){return this[kReturnMany](n,new IteratorDecodeError("keys",o))}this[kCount]+=r.length,this[kReturnMany](n,null,r)}}class AbstractValueIterator$2 extends CommonIterator{constructor(e,r){super(e,r,!1)}[kHandleOne$1](e,r){const n=this[kFinishWork]();if(e)return n(e);try{r=r!==void 0?this[kValueEncoding$1].decode(r):void 0}catch(o){return n(new IteratorDecodeError("value",o))}r!==void 0&&this[kCount]++,n(null,r)}[kHandleMany$1](e,r){const n=this[kFinishWork]();if(e)return this[kReturnMany](n,e);try{for(let o=0;o<r.length;o++){const u=r[o];r[o]=u!==void 0?this[kValueEncoding$1].decode(u):void 0}}catch(o){return this[kReturnMany](n,new IteratorDecodeError("values",o))}this[kCount]+=r.length,this[kReturnMany](n,null,r)}}class IteratorDecodeError extends ModuleError$6{constructor(e,r){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:r})}}for(const t of["_ended property","_nexting property","_end method"])Object.defineProperty(AbstractIterator$3.prototype,t.split(" ")[0],{get(){throw new ModuleError$6(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ModuleError$6(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});AbstractIterator$3.keyEncoding=kKeyEncoding$1;AbstractIterator$3.valueEncoding=kValueEncoding$1;abstractIterator.AbstractIterator=AbstractIterator$3;abstractIterator.AbstractKeyIterator=AbstractKeyIterator$2;abstractIterator.AbstractValueIterator=AbstractValueIterator$2;var defaultKvIterator={};const{AbstractKeyIterator:AbstractKeyIterator$1,AbstractValueIterator:AbstractValueIterator$1}=abstractIterator,kIterator=Symbol("iterator"),kCallback=Symbol("callback"),kHandleOne=Symbol("handleOne"),kHandleMany=Symbol("handleMany");class DefaultKeyIterator$1 extends AbstractKeyIterator$1{constructor(e,r){super(e,r),this[kIterator]=e.iterator({...r,keys:!0,values:!1}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}}class DefaultValueIterator$1 extends AbstractValueIterator$1{constructor(e,r){super(e,r),this[kIterator]=e.iterator({...r,keys:!1,values:!0}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}}for(const t of[DefaultKeyIterator$1,DefaultValueIterator$1]){const e=t===DefaultKeyIterator$1,r=e?n=>n[0]:n=>n[1];t.prototype._next=function(n){this[kCallback]=n,this[kIterator].next(this[kHandleOne])},t.prototype[kHandleOne]=function(n,o,u){const y=this[kCallback];n?y(n):y(null,e?o:u)},t.prototype._nextv=function(n,o,u){this[kCallback]=u,this[kIterator].nextv(n,o,this[kHandleMany])},t.prototype._all=function(n,o){this[kCallback]=o,this[kIterator].all(n,this[kHandleMany])},t.prototype[kHandleMany]=function(n,o){const u=this[kCallback];n?u(n):u(null,o.map(r))},t.prototype._seek=function(n,o){this[kIterator].seek(n,o)},t.prototype._close=function(n){this[kIterator].close(n)}}defaultKvIterator.DefaultKeyIterator=DefaultKeyIterator$1;defaultKvIterator.DefaultValueIterator=DefaultValueIterator$1;var deferredIterator={};const{AbstractIterator:AbstractIterator$2,AbstractKeyIterator,AbstractValueIterator}=abstractIterator,ModuleError$5=moduleError,kNut=Symbol("nut"),kUndefer$1=Symbol("undefer"),kFactory=Symbol("factory");class DeferredIterator$1 extends AbstractIterator$2{constructor(e,r){super(e,r),this[kNut]=null,this[kFactory]=()=>e.iterator(r),this.db.defer(()=>this[kUndefer$1]())}}class DeferredKeyIterator$1 extends AbstractKeyIterator{constructor(e,r){super(e,r),this[kNut]=null,this[kFactory]=()=>e.keys(r),this.db.defer(()=>this[kUndefer$1]())}}class DeferredValueIterator$1 extends AbstractValueIterator{constructor(e,r){super(e,r),this[kNut]=null,this[kFactory]=()=>e.values(r),this.db.defer(()=>this[kUndefer$1]())}}for(const t of[DeferredIterator$1,DeferredKeyIterator$1,DeferredValueIterator$1])t.prototype[kUndefer$1]=function(){this.db.status==="open"&&(this[kNut]=this[kFactory]())},t.prototype._next=function(e){this[kNut]!==null?this[kNut].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new ModuleError$5("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,r,n){this[kNut]!==null?this[kNut].nextv(e,r,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,r,n)):this.nextTick(n,new ModuleError$5("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,r){this[kNut]!==null?this[kNut].all(r):this.db.status==="opening"?this.db.defer(()=>this._all(e,r)):this.nextTick(r,new ModuleError$5("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,r){this[kNut]!==null?this[kNut]._seek(e,r):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,r))},t.prototype._close=function(e){this[kNut]!==null?this[kNut].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};deferredIterator.DeferredIterator=DeferredIterator$1;deferredIterator.DeferredKeyIterator=DeferredKeyIterator$1;deferredIterator.DeferredValueIterator=DeferredValueIterator$1;var defaultChainedBatch={},abstractChainedBatch={};const{fromCallback:fromCallback$2}=catering,ModuleError$4=moduleError,{getCallback:getCallback$1,getOptions:getOptions$1}=common,kPromise$2=Symbol("promise"),kStatus$1=Symbol("status"),kOperations$1=Symbol("operations"),kFinishClose=Symbol("finishClose"),kCloseCallbacks=Symbol("closeCallbacks");class AbstractChainedBatch$1{constructor(e){if(typeof e!="object"||e===null){const r=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${r}`)}this[kOperations$1]=[],this[kCloseCallbacks]=[],this[kStatus$1]="open",this[kFinishClose]=this[kFinishClose].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[kOperations$1].length}put(e,r,n){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const o=this.db._checkKey(e)||this.db._checkValue(r);if(o)throw o;const u=n&&n.sublevel!=null?n.sublevel:this.db,y=n,h=u.keyEncoding(n&&n.keyEncoding),g=u.valueEncoding(n&&n.valueEncoding),m=h.format;n={...n,keyEncoding:m,valueEncoding:g.format},u!==this.db&&(n.sublevel=null);const $=u.prefixKey(h.encode(e),m),E=g.encode(r);return this._put($,E,n),this[kOperations$1].push({...y,type:"put",key:e,value:r}),this}_put(e,r,n){}del(e,r){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const n=this.db._checkKey(e);if(n)throw n;const o=r&&r.sublevel!=null?r.sublevel:this.db,u=r,y=o.keyEncoding(r&&r.keyEncoding),h=y.format;return r={...r,keyEncoding:h},o!==this.db&&(r.sublevel=null),this._del(o.prefixKey(y.encode(e),h),r),this[kOperations$1].push({...u,type:"del",key:e}),this}_del(e,r){}clear(){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[kOperations$1]=[],this}_clear(){}write(e,r){return r=getCallback$1(e,r),r=fromCallback$2(r,kPromise$2),e=getOptions$1(e),this[kStatus$1]!=="open"?this.nextTick(r,new ModuleError$4("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(r):(this[kStatus$1]="writing",this._write(e,n=>{this[kStatus$1]="closing",this[kCloseCallbacks].push(()=>r(n)),n||this.db.emit("batch",this[kOperations$1]),this._close(this[kFinishClose])})),r[kPromise$2]}_write(e,r){}close(e){return e=fromCallback$2(e,kPromise$2),this[kStatus$1]==="closing"?this[kCloseCallbacks].push(e):this[kStatus$1]==="closed"?this.nextTick(e):(this[kCloseCallbacks].push(e),this[kStatus$1]!=="writing"&&(this[kStatus$1]="closing",this._close(this[kFinishClose]))),e[kPromise$2]}_close(e){this.nextTick(e)}[kFinishClose](){this[kStatus$1]="closed",this.db.detachResource(this);const e=this[kCloseCallbacks];this[kCloseCallbacks]=[];for(const r of e)r()}}abstractChainedBatch.AbstractChainedBatch=AbstractChainedBatch$1;const{AbstractChainedBatch}=abstractChainedBatch,ModuleError$3=moduleError,kEncoded=Symbol("encoded");class DefaultChainedBatch$1 extends AbstractChainedBatch{constructor(e){super(e),this[kEncoded]=[]}_put(e,r,n){this[kEncoded].push({...n,type:"put",key:e,value:r})}_del(e,r){this[kEncoded].push({...r,type:"del",key:e})}_clear(){this[kEncoded]=[]}_write(e,r){this.db.status==="opening"?this.db.defer(()=>this._write(e,r)):this.db.status==="open"?this[kEncoded].length===0?this.nextTick(r):this.db._batch(this[kEncoded],e,r):this.nextTick(r,new ModuleError$3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}defaultChainedBatch.DefaultChainedBatch=DefaultChainedBatch$1;const ModuleError$2=moduleError,hasOwnProperty=Object.prototype.hasOwnProperty,rangeOptions$1=new Set(["lt","lte","gt","gte"]);var rangeOptions_1=function(t,e){const r={};for(const n in t)if(!!hasOwnProperty.call(t,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new ModuleError$2(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new ModuleError$2("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});rangeOptions$1.has(n)?r[n]=e.encode(t[n]):r[n]=t[n]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let promise;var queueMicrotask_1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:commonjsGlobal):t=>(promise||(promise=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0)),nextTickBrowser,hasRequiredNextTickBrowser;function requireNextTickBrowser(){if(hasRequiredNextTickBrowser)return nextTickBrowser;hasRequiredNextTickBrowser=1;const t=queueMicrotask_1;return nextTickBrowser=function(e,...r){r.length===0?t(e):t(()=>e(...r))},nextTickBrowser}var buffer={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,function(t){const e=base64Js,r=ieee754,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=h,t.SlowBuffer=te,t.INSPECT_MAX_BYTES=50;const o=2147483647;t.kMaxLength=o,h.TYPED_ARRAY_SUPPORT=u(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const f=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(f,s),f.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(!!h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(!!h.isBuffer(this))return this.byteOffset}});function y(f){if(f>o)throw new RangeError('The value "'+f+'" is invalid for option "size"');const s=new Uint8Array(f);return Object.setPrototypeOf(s,h.prototype),s}function h(f,s,c){if(typeof f=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(f)}return g(f,s,c)}h.poolSize=8192;function g(f,s,c){if(typeof f=="string")return A(f,s);if(ArrayBuffer.isView(f))return T(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(Ie(f,ArrayBuffer)||f&&Ie(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ie(f,SharedArrayBuffer)||f&&Ie(f.buffer,SharedArrayBuffer)))return k(f,s,c);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const w=f.valueOf&&f.valueOf();if(w!=null&&w!==f)return h.from(w,s,c);const v=U(f);if(v)return v;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return h.from(f[Symbol.toPrimitive]("string"),s,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}h.from=function(f,s,c){return g(f,s,c)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function m(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function $(f,s,c){return m(f),f<=0?y(f):s!==void 0?typeof c=="string"?y(f).fill(s,c):y(f).fill(s):y(f)}h.alloc=function(f,s,c){return $(f,s,c)};function E(f){return m(f),y(f<0?0:W(f)|0)}h.allocUnsafe=function(f){return E(f)},h.allocUnsafeSlow=function(f){return E(f)};function A(f,s){if((typeof s!="string"||s==="")&&(s="utf8"),!h.isEncoding(s))throw new TypeError("Unknown encoding: "+s);const c=X(f,s)|0;let w=y(c);const v=w.write(f,s);return v!==c&&(w=w.slice(0,v)),w}function B(f){const s=f.length<0?0:W(f.length)|0,c=y(s);for(let w=0;w<s;w+=1)c[w]=f[w]&255;return c}function T(f){if(Ie(f,Uint8Array)){const s=new Uint8Array(f);return k(s.buffer,s.byteOffset,s.byteLength)}return B(f)}function k(f,s,c){if(s<0||f.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<s+(c||0))throw new RangeError('"length" is outside of buffer bounds');let w;return s===void 0&&c===void 0?w=new Uint8Array(f):c===void 0?w=new Uint8Array(f,s):w=new Uint8Array(f,s,c),Object.setPrototypeOf(w,h.prototype),w}function U(f){if(h.isBuffer(f)){const s=W(f.length)|0,c=y(s);return c.length===0||f.copy(c,0,0,s),c}if(f.length!==void 0)return typeof f.length!="number"||Ge(f.length)?y(0):B(f);if(f.type==="Buffer"&&Array.isArray(f.data))return B(f.data)}function W(f){if(f>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return f|0}function te(f){return+f!=f&&(f=0),h.alloc(+f)}h.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==h.prototype},h.compare=function(s,c){if(Ie(s,Uint8Array)&&(s=h.from(s,s.offset,s.byteLength)),Ie(c,Uint8Array)&&(c=h.from(c,c.offset,c.byteLength)),!h.isBuffer(s)||!h.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===c)return 0;let w=s.length,v=c.length;for(let D=0,I=Math.min(w,v);D<I;++D)if(s[D]!==c[D]){w=s[D],v=c[D];break}return w<v?-1:v<w?1:0},h.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(s,c){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return h.alloc(0);let w;if(c===void 0)for(c=0,w=0;w<s.length;++w)c+=s[w].length;const v=h.allocUnsafe(c);let D=0;for(w=0;w<s.length;++w){let I=s[w];if(Ie(I,Uint8Array))D+I.length>v.length?(h.isBuffer(I)||(I=h.from(I)),I.copy(v,D)):Uint8Array.prototype.set.call(v,I,D);else if(h.isBuffer(I))I.copy(v,D);else throw new TypeError('"list" argument must be an Array of Buffers');D+=I.length}return v};function X(f,s){if(h.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||Ie(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);const c=f.length,w=arguments.length>2&&arguments[2]===!0;if(!w&&c===0)return 0;let v=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return oe(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return he(f).length;default:if(v)return w?-1:oe(f).length;s=(""+s).toLowerCase(),v=!0}}h.byteLength=X;function N(f,s,c){let w=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,s>>>=0,c<=s))return"";for(f||(f="utf8");;)switch(f){case"hex":return rt(this,s,c);case"utf8":case"utf-8":return De(this,s,c);case"ascii":return Je(this,s,c);case"latin1":case"binary":return Te(this,s,c);case"base64":return be(this,s,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it(this,s,c);default:if(w)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),w=!0}}h.prototype._isBuffer=!0;function O(f,s,c){const w=f[s];f[s]=f[c],f[c]=w}h.prototype.swap16=function(){const s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<s;c+=2)O(this,c,c+1);return this},h.prototype.swap32=function(){const s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<s;c+=4)O(this,c,c+3),O(this,c+1,c+2);return this},h.prototype.swap64=function(){const s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<s;c+=8)O(this,c,c+7),O(this,c+1,c+6),O(this,c+2,c+5),O(this,c+3,c+4);return this},h.prototype.toString=function(){const s=this.length;return s===0?"":arguments.length===0?De(this,0,s):N.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(s){if(!h.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:h.compare(this,s)===0},h.prototype.inspect=function(){let s="";const c=t.INSPECT_MAX_BYTES;return s=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(s+=" ... "),"<Buffer "+s+">"},n&&(h.prototype[n]=h.prototype.inspect),h.prototype.compare=function(s,c,w,v,D){if(Ie(s,Uint8Array)&&(s=h.from(s,s.offset,s.byteLength)),!h.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(c===void 0&&(c=0),w===void 0&&(w=s?s.length:0),v===void 0&&(v=0),D===void 0&&(D=this.length),c<0||w>s.length||v<0||D>this.length)throw new RangeError("out of range index");if(v>=D&&c>=w)return 0;if(v>=D)return-1;if(c>=w)return 1;if(c>>>=0,w>>>=0,v>>>=0,D>>>=0,this===s)return 0;let I=D-v,Ae=w-c;const Fe=Math.min(I,Ae),xe=this.slice(v,D),Ce=s.slice(c,w);for(let je=0;je<Fe;++je)if(xe[je]!==Ce[je]){I=xe[je],Ae=Ce[je];break}return I<Ae?-1:Ae<I?1:0};function Z(f,s,c,w,v){if(f.length===0)return-1;if(typeof c=="string"?(w=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,Ge(c)&&(c=v?0:f.length-1),c<0&&(c=f.length+c),c>=f.length){if(v)return-1;c=f.length-1}else if(c<0)if(v)c=0;else return-1;if(typeof s=="string"&&(s=h.from(s,w)),h.isBuffer(s))return s.length===0?-1:j(f,s,c,w,v);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?v?Uint8Array.prototype.indexOf.call(f,s,c):Uint8Array.prototype.lastIndexOf.call(f,s,c):j(f,[s],c,w,v);throw new TypeError("val must be string, number or Buffer")}function j(f,s,c,w,v){let D=1,I=f.length,Ae=s.length;if(w!==void 0&&(w=String(w).toLowerCase(),w==="ucs2"||w==="ucs-2"||w==="utf16le"||w==="utf-16le")){if(f.length<2||s.length<2)return-1;D=2,I/=2,Ae/=2,c/=2}function Fe(Ce,je){return D===1?Ce[je]:Ce.readUInt16BE(je*D)}let xe;if(v){let Ce=-1;for(xe=c;xe<I;xe++)if(Fe(f,xe)===Fe(s,Ce===-1?0:xe-Ce)){if(Ce===-1&&(Ce=xe),xe-Ce+1===Ae)return Ce*D}else Ce!==-1&&(xe-=xe-Ce),Ce=-1}else for(c+Ae>I&&(c=I-Ae),xe=c;xe>=0;xe--){let Ce=!0;for(let je=0;je<Ae;je++)if(Fe(f,xe+je)!==Fe(s,je)){Ce=!1;break}if(Ce)return xe}return-1}h.prototype.includes=function(s,c,w){return this.indexOf(s,c,w)!==-1},h.prototype.indexOf=function(s,c,w){return Z(this,s,c,w,!0)},h.prototype.lastIndexOf=function(s,c,w){return Z(this,s,c,w,!1)};function K(f,s,c,w){c=Number(c)||0;const v=f.length-c;w?(w=Number(w),w>v&&(w=v)):w=v;const D=s.length;w>D/2&&(w=D/2);let I;for(I=0;I<w;++I){const Ae=parseInt(s.substr(I*2,2),16);if(Ge(Ae))return I;f[c+I]=Ae}return I}function se(f,s,c,w){return _e(oe(s,f.length-c),f,c,w)}function le(f,s,c,w){return _e(ue(s),f,c,w)}function ye(f,s,c,w){return _e(he(s),f,c,w)}function Ee(f,s,c,w){return _e(q(s,f.length-c),f,c,w)}h.prototype.write=function(s,c,w,v){if(c===void 0)v="utf8",w=this.length,c=0;else if(w===void 0&&typeof c=="string")v=c,w=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(w)?(w=w>>>0,v===void 0&&(v="utf8")):(v=w,w=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const D=this.length-c;if((w===void 0||w>D)&&(w=D),s.length>0&&(w<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");let I=!1;for(;;)switch(v){case"hex":return K(this,s,c,w);case"utf8":case"utf-8":return se(this,s,c,w);case"ascii":case"latin1":case"binary":return le(this,s,c,w);case"base64":return ye(this,s,c,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ee(this,s,c,w);default:if(I)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),I=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function be(f,s,c){return s===0&&c===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(s,c))}function De(f,s,c){c=Math.min(f.length,c);const w=[];let v=s;for(;v<c;){const D=f[v];let I=null,Ae=D>239?4:D>223?3:D>191?2:1;if(v+Ae<=c){let Fe,xe,Ce,je;switch(Ae){case 1:D<128&&(I=D);break;case 2:Fe=f[v+1],(Fe&192)===128&&(je=(D&31)<<6|Fe&63,je>127&&(I=je));break;case 3:Fe=f[v+1],xe=f[v+2],(Fe&192)===128&&(xe&192)===128&&(je=(D&15)<<12|(Fe&63)<<6|xe&63,je>2047&&(je<55296||je>57343)&&(I=je));break;case 4:Fe=f[v+1],xe=f[v+2],Ce=f[v+3],(Fe&192)===128&&(xe&192)===128&&(Ce&192)===128&&(je=(D&15)<<18|(Fe&63)<<12|(xe&63)<<6|Ce&63,je>65535&&je<1114112&&(I=je))}}I===null?(I=65533,Ae=1):I>65535&&(I-=65536,w.push(I>>>10&1023|55296),I=56320|I&1023),w.push(I),v+=Ae}return Qe(w)}const We=4096;function Qe(f){const s=f.length;if(s<=We)return String.fromCharCode.apply(String,f);let c="",w=0;for(;w<s;)c+=String.fromCharCode.apply(String,f.slice(w,w+=We));return c}function Je(f,s,c){let w="";c=Math.min(f.length,c);for(let v=s;v<c;++v)w+=String.fromCharCode(f[v]&127);return w}function Te(f,s,c){let w="";c=Math.min(f.length,c);for(let v=s;v<c;++v)w+=String.fromCharCode(f[v]);return w}function rt(f,s,c){const w=f.length;(!s||s<0)&&(s=0),(!c||c<0||c>w)&&(c=w);let v="";for(let D=s;D<c;++D)v+=nt[f[D]];return v}function it(f,s,c){const w=f.slice(s,c);let v="";for(let D=0;D<w.length-1;D+=2)v+=String.fromCharCode(w[D]+w[D+1]*256);return v}h.prototype.slice=function(s,c){const w=this.length;s=~~s,c=c===void 0?w:~~c,s<0?(s+=w,s<0&&(s=0)):s>w&&(s=w),c<0?(c+=w,c<0&&(c=0)):c>w&&(c=w),c<s&&(c=s);const v=this.subarray(s,c);return Object.setPrototypeOf(v,h.prototype),v};function qe(f,s,c){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+s>c)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(s,c,w){s=s>>>0,c=c>>>0,w||qe(s,c,this.length);let v=this[s],D=1,I=0;for(;++I<c&&(D*=256);)v+=this[s+I]*D;return v},h.prototype.readUintBE=h.prototype.readUIntBE=function(s,c,w){s=s>>>0,c=c>>>0,w||qe(s,c,this.length);let v=this[s+--c],D=1;for(;c>0&&(D*=256);)v+=this[s+--c]*D;return v},h.prototype.readUint8=h.prototype.readUInt8=function(s,c){return s=s>>>0,c||qe(s,1,this.length),this[s]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(s,c){return s=s>>>0,c||qe(s,2,this.length),this[s]|this[s+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(s,c){return s=s>>>0,c||qe(s,2,this.length),this[s]<<8|this[s+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(s,c){return s=s>>>0,c||qe(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(s,c){return s=s>>>0,c||qe(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},h.prototype.readBigUInt64LE=Ze(function(s){s=s>>>0,ae(s,"offset");const c=this[s],w=this[s+7];(c===void 0||w===void 0)&&ie(s,this.length-8);const v=c+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,D=this[++s]+this[++s]*2**8+this[++s]*2**16+w*2**24;return BigInt(v)+(BigInt(D)<<BigInt(32))}),h.prototype.readBigUInt64BE=Ze(function(s){s=s>>>0,ae(s,"offset");const c=this[s],w=this[s+7];(c===void 0||w===void 0)&&ie(s,this.length-8);const v=c*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],D=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+w;return(BigInt(v)<<BigInt(32))+BigInt(D)}),h.prototype.readIntLE=function(s,c,w){s=s>>>0,c=c>>>0,w||qe(s,c,this.length);let v=this[s],D=1,I=0;for(;++I<c&&(D*=256);)v+=this[s+I]*D;return D*=128,v>=D&&(v-=Math.pow(2,8*c)),v},h.prototype.readIntBE=function(s,c,w){s=s>>>0,c=c>>>0,w||qe(s,c,this.length);let v=c,D=1,I=this[s+--v];for(;v>0&&(D*=256);)I+=this[s+--v]*D;return D*=128,I>=D&&(I-=Math.pow(2,8*c)),I},h.prototype.readInt8=function(s,c){return s=s>>>0,c||qe(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},h.prototype.readInt16LE=function(s,c){s=s>>>0,c||qe(s,2,this.length);const w=this[s]|this[s+1]<<8;return w&32768?w|4294901760:w},h.prototype.readInt16BE=function(s,c){s=s>>>0,c||qe(s,2,this.length);const w=this[s+1]|this[s]<<8;return w&32768?w|4294901760:w},h.prototype.readInt32LE=function(s,c){return s=s>>>0,c||qe(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},h.prototype.readInt32BE=function(s,c){return s=s>>>0,c||qe(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},h.prototype.readBigInt64LE=Ze(function(s){s=s>>>0,ae(s,"offset");const c=this[s],w=this[s+7];(c===void 0||w===void 0)&&ie(s,this.length-8);const v=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(w<<24);return(BigInt(v)<<BigInt(32))+BigInt(c+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),h.prototype.readBigInt64BE=Ze(function(s){s=s>>>0,ae(s,"offset");const c=this[s],w=this[s+7];(c===void 0||w===void 0)&&ie(s,this.length-8);const v=(c<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(v)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+w)}),h.prototype.readFloatLE=function(s,c){return s=s>>>0,c||qe(s,4,this.length),r.read(this,s,!0,23,4)},h.prototype.readFloatBE=function(s,c){return s=s>>>0,c||qe(s,4,this.length),r.read(this,s,!1,23,4)},h.prototype.readDoubleLE=function(s,c){return s=s>>>0,c||qe(s,8,this.length),r.read(this,s,!0,52,8)},h.prototype.readDoubleBE=function(s,c){return s=s>>>0,c||qe(s,8,this.length),r.read(this,s,!1,52,8)};function re(f,s,c,w,v,D){if(!h.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>v||s<D)throw new RangeError('"value" argument is out of bounds');if(c+w>f.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(s,c,w,v){if(s=+s,c=c>>>0,w=w>>>0,!v){const Ae=Math.pow(2,8*w)-1;re(this,s,c,w,Ae,0)}let D=1,I=0;for(this[c]=s&255;++I<w&&(D*=256);)this[c+I]=s/D&255;return c+w},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(s,c,w,v){if(s=+s,c=c>>>0,w=w>>>0,!v){const Ae=Math.pow(2,8*w)-1;re(this,s,c,w,Ae,0)}let D=w-1,I=1;for(this[c+D]=s&255;--D>=0&&(I*=256);)this[c+D]=s/I&255;return c+w},h.prototype.writeUint8=h.prototype.writeUInt8=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,1,255,0),this[c]=s&255,c+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,2,65535,0),this[c]=s&255,this[c+1]=s>>>8,c+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,2,65535,0),this[c]=s>>>8,this[c+1]=s&255,c+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,4,4294967295,0),this[c+3]=s>>>24,this[c+2]=s>>>16,this[c+1]=s>>>8,this[c]=s&255,c+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,4,4294967295,0),this[c]=s>>>24,this[c+1]=s>>>16,this[c+2]=s>>>8,this[c+3]=s&255,c+4};function we(f,s,c,w,v){ee(s,w,v,f,c,7);let D=Number(s&BigInt(4294967295));f[c++]=D,D=D>>8,f[c++]=D,D=D>>8,f[c++]=D,D=D>>8,f[c++]=D;let I=Number(s>>BigInt(32)&BigInt(4294967295));return f[c++]=I,I=I>>8,f[c++]=I,I=I>>8,f[c++]=I,I=I>>8,f[c++]=I,c}function ne(f,s,c,w,v){ee(s,w,v,f,c,7);let D=Number(s&BigInt(4294967295));f[c+7]=D,D=D>>8,f[c+6]=D,D=D>>8,f[c+5]=D,D=D>>8,f[c+4]=D;let I=Number(s>>BigInt(32)&BigInt(4294967295));return f[c+3]=I,I=I>>8,f[c+2]=I,I=I>>8,f[c+1]=I,I=I>>8,f[c]=I,c+8}h.prototype.writeBigUInt64LE=Ze(function(s,c=0){return we(this,s,c,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=Ze(function(s,c=0){return ne(this,s,c,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(s,c,w,v){if(s=+s,c=c>>>0,!v){const Fe=Math.pow(2,8*w-1);re(this,s,c,w,Fe-1,-Fe)}let D=0,I=1,Ae=0;for(this[c]=s&255;++D<w&&(I*=256);)s<0&&Ae===0&&this[c+D-1]!==0&&(Ae=1),this[c+D]=(s/I>>0)-Ae&255;return c+w},h.prototype.writeIntBE=function(s,c,w,v){if(s=+s,c=c>>>0,!v){const Fe=Math.pow(2,8*w-1);re(this,s,c,w,Fe-1,-Fe)}let D=w-1,I=1,Ae=0;for(this[c+D]=s&255;--D>=0&&(I*=256);)s<0&&Ae===0&&this[c+D+1]!==0&&(Ae=1),this[c+D]=(s/I>>0)-Ae&255;return c+w},h.prototype.writeInt8=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,1,127,-128),s<0&&(s=255+s+1),this[c]=s&255,c+1},h.prototype.writeInt16LE=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,2,32767,-32768),this[c]=s&255,this[c+1]=s>>>8,c+2},h.prototype.writeInt16BE=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,2,32767,-32768),this[c]=s>>>8,this[c+1]=s&255,c+2},h.prototype.writeInt32LE=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,4,2147483647,-2147483648),this[c]=s&255,this[c+1]=s>>>8,this[c+2]=s>>>16,this[c+3]=s>>>24,c+4},h.prototype.writeInt32BE=function(s,c,w){return s=+s,c=c>>>0,w||re(this,s,c,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[c]=s>>>24,this[c+1]=s>>>16,this[c+2]=s>>>8,this[c+3]=s&255,c+4},h.prototype.writeBigInt64LE=Ze(function(s,c=0){return we(this,s,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=Ze(function(s,c=0){return ne(this,s,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function He(f,s,c,w,v,D){if(c+w>f.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function et(f,s,c,w,v){return s=+s,c=c>>>0,v||He(f,s,c,4),r.write(f,s,c,w,23,4),c+4}h.prototype.writeFloatLE=function(s,c,w){return et(this,s,c,!0,w)},h.prototype.writeFloatBE=function(s,c,w){return et(this,s,c,!1,w)};function tt(f,s,c,w,v){return s=+s,c=c>>>0,v||He(f,s,c,8),r.write(f,s,c,w,52,8),c+8}h.prototype.writeDoubleLE=function(s,c,w){return tt(this,s,c,!0,w)},h.prototype.writeDoubleBE=function(s,c,w){return tt(this,s,c,!1,w)},h.prototype.copy=function(s,c,w,v){if(!h.isBuffer(s))throw new TypeError("argument should be a Buffer");if(w||(w=0),!v&&v!==0&&(v=this.length),c>=s.length&&(c=s.length),c||(c=0),v>0&&v<w&&(v=w),v===w||s.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(w<0||w>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),s.length-c<v-w&&(v=s.length-c+w);const D=v-w;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,w,v):Uint8Array.prototype.set.call(s,this.subarray(w,v),c),D},h.prototype.fill=function(s,c,w,v){if(typeof s=="string"){if(typeof c=="string"?(v=c,c=0,w=this.length):typeof w=="string"&&(v=w,w=this.length),v!==void 0&&typeof v!="string")throw new TypeError("encoding must be a string");if(typeof v=="string"&&!h.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(s.length===1){const I=s.charCodeAt(0);(v==="utf8"&&I<128||v==="latin1")&&(s=I)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(c<0||this.length<c||this.length<w)throw new RangeError("Out of range index");if(w<=c)return this;c=c>>>0,w=w===void 0?this.length:w>>>0,s||(s=0);let D;if(typeof s=="number")for(D=c;D<w;++D)this[D]=s;else{const I=h.isBuffer(s)?s:h.from(s,v),Ae=I.length;if(Ae===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(D=0;D<w-c;++D)this[D+c]=I[D%Ae]}return this};const Ve={};function Ye(f,s,c){Ve[f]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(v){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:v,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}Ye("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ye("ERR_INVALID_ARG_TYPE",function(f,s){return`The "${f}" argument must be of type number. Received type ${typeof s}`},TypeError),Ye("ERR_OUT_OF_RANGE",function(f,s,c){let w=`The value of "${f}" is out of range.`,v=c;return Number.isInteger(c)&&Math.abs(c)>2**32?v=P(String(c)):typeof c=="bigint"&&(v=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(v=P(v)),v+="n"),w+=` It must be ${s}. Received ${v}`,w},RangeError);function P(f){let s="",c=f.length;const w=f[0]==="-"?1:0;for(;c>=w+4;c-=3)s=`_${f.slice(c-3,c)}${s}`;return`${f.slice(0,c)}${s}`}function L(f,s,c){ae(s,"offset"),(f[s]===void 0||f[s+c]===void 0)&&ie(s,f.length-(c+1))}function ee(f,s,c,w,v,D){if(f>c||f<s){const I=typeof s=="bigint"?"n":"";let Ae;throw D>3?s===0||s===BigInt(0)?Ae=`>= 0${I} and < 2${I} ** ${(D+1)*8}${I}`:Ae=`>= -(2${I} ** ${(D+1)*8-1}${I}) and < 2 ** ${(D+1)*8-1}${I}`:Ae=`>= ${s}${I} and <= ${c}${I}`,new Ve.ERR_OUT_OF_RANGE("value",Ae,f)}L(w,v,D)}function ae(f,s){if(typeof f!="number")throw new Ve.ERR_INVALID_ARG_TYPE(s,"number",f)}function ie(f,s,c){throw Math.floor(f)!==f?(ae(f,c),new Ve.ERR_OUT_OF_RANGE(c||"offset","an integer",f)):s<0?new Ve.ERR_BUFFER_OUT_OF_BOUNDS:new Ve.ERR_OUT_OF_RANGE(c||"offset",`>= ${c?1:0} and <= ${s}`,f)}const de=/[^+/0-9A-Za-z-_]/g;function ge(f){if(f=f.split("=")[0],f=f.trim().replace(de,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function oe(f,s){s=s||1/0;let c;const w=f.length;let v=null;const D=[];for(let I=0;I<w;++I){if(c=f.charCodeAt(I),c>55295&&c<57344){if(!v){if(c>56319){(s-=3)>-1&&D.push(239,191,189);continue}else if(I+1===w){(s-=3)>-1&&D.push(239,191,189);continue}v=c;continue}if(c<56320){(s-=3)>-1&&D.push(239,191,189),v=c;continue}c=(v-55296<<10|c-56320)+65536}else v&&(s-=3)>-1&&D.push(239,191,189);if(v=null,c<128){if((s-=1)<0)break;D.push(c)}else if(c<2048){if((s-=2)<0)break;D.push(c>>6|192,c&63|128)}else if(c<65536){if((s-=3)<0)break;D.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((s-=4)<0)break;D.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return D}function ue(f){const s=[];for(let c=0;c<f.length;++c)s.push(f.charCodeAt(c)&255);return s}function q(f,s){let c,w,v;const D=[];for(let I=0;I<f.length&&!((s-=2)<0);++I)c=f.charCodeAt(I),w=c>>8,v=c%256,D.push(v),D.push(w);return D}function he(f){return e.toByteArray(ge(f))}function _e(f,s,c,w){let v;for(v=0;v<w&&!(v+c>=s.length||v>=f.length);++v)s[v+c]=f[v];return v}function Ie(f,s){return f instanceof s||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===s.name}function Ge(f){return f!==f}const nt=function(){const f="0123456789abcdef",s=new Array(256);for(let c=0;c<16;++c){const w=c*16;for(let v=0;v<16;++v)s[w+v]=f[c]+f[v]}return s}();function Ze(f){return typeof BigInt>"u"?ot:f}function ot(){throw new Error("BigInt not supported")}}(buffer)),buffer}var abstractSublevelIterator={},hasRequiredAbstractSublevelIterator;function requireAbstractSublevelIterator(){if(hasRequiredAbstractSublevelIterator)return abstractSublevelIterator;hasRequiredAbstractSublevelIterator=1;const{AbstractIterator:t,AbstractKeyIterator:e,AbstractValueIterator:r}=abstractIterator,n=Symbol("unfix"),o=Symbol("iterator"),u=Symbol("handleOne"),y=Symbol("handleMany"),h=Symbol("callback");class g extends t{constructor(A,B,T,k){super(A,B),this[o]=T,this[n]=k,this[u]=this[u].bind(this),this[y]=this[y].bind(this),this[h]=null}[u](A,B,T){const k=this[h];if(A)return k(A);B!==void 0&&(B=this[n](B)),k(A,B,T)}[y](A,B){const T=this[h];if(A)return T(A);for(const k of B){const U=k[0];U!==void 0&&(k[0]=this[n](U))}T(A,B)}}class m extends e{constructor(A,B,T,k){super(A,B),this[o]=T,this[n]=k,this[u]=this[u].bind(this),this[y]=this[y].bind(this),this[h]=null}[u](A,B){const T=this[h];if(A)return T(A);B!==void 0&&(B=this[n](B)),T(A,B)}[y](A,B){const T=this[h];if(A)return T(A);for(let k=0;k<B.length;k++){const U=B[k];U!==void 0&&(B[k]=this[n](U))}T(A,B)}}class $ extends r{constructor(A,B,T){super(A,B),this[o]=T}}for(const E of[g,m])E.prototype._next=function(A){this[h]=A,this[o].next(this[u])},E.prototype._nextv=function(A,B,T){this[h]=T,this[o].nextv(A,B,this[y])},E.prototype._all=function(A,B){this[h]=B,this[o].all(A,this[y])};for(const E of[$])E.prototype._next=function(A){this[o].next(A)},E.prototype._nextv=function(A,B,T){this[o].nextv(A,B,T)},E.prototype._all=function(A,B){this[o].all(A,B)};for(const E of[g,m,$])E.prototype._seek=function(A,B){this[o].seek(A,B)},E.prototype._close=function(A){this[o].close(A)};return abstractSublevelIterator.AbstractSublevelIterator=g,abstractSublevelIterator.AbstractSublevelKeyIterator=m,abstractSublevelIterator.AbstractSublevelValueIterator=$,abstractSublevelIterator}var abstractSublevel,hasRequiredAbstractSublevel;function requireAbstractSublevel(){if(hasRequiredAbstractSublevel)return abstractSublevel;hasRequiredAbstractSublevel=1;const t=moduleError,{Buffer:e}=requireBuffer()||{},{AbstractSublevelIterator:r,AbstractSublevelKeyIterator:n,AbstractSublevelValueIterator:o}=requireAbstractSublevelIterator(),u=Symbol("prefix"),y=Symbol("upperBound"),h=Symbol("prefixRange"),g=Symbol("parent"),m=Symbol("unfix"),$=new TextEncoder,E={separator:"!"};abstractSublevel=function({AbstractLevel:W}){class te extends W{static defaults(N){if(typeof N=="string")throw new t("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(N&&N.open)throw new t("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return N==null?E:N.separator?N:{...N,separator:"!"}}constructor(N,O,Z){const{separator:j,manifest:K,...se}=te.defaults(Z);O=U(O,j);const le=j.charCodeAt(0)+1,ye=N[g]||N;if(!$.encode(O).every(De=>De>le&&De<127))throw new t(`Prefix must use bytes > ${le} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(A(ye,K),se);const Ee=(N.prefix||"")+j+O+j,be=Ee.slice(0,-1)+String.fromCharCode(le);this[g]=ye,this[u]=new T(Ee),this[y]=new T(be),this[m]=new k,this.nextTick=ye.nextTick}prefixKey(N,O){if(O==="utf8")return this[u].utf8+N;if(N.byteLength===0)return this[u][O];if(O==="view"){const Z=this[u].view,j=new Uint8Array(Z.byteLength+N.byteLength);return j.set(Z,0),j.set(N,Z.byteLength),j}else{const Z=this[u].buffer;return e.concat([Z,N],Z.byteLength+N.byteLength)}}[h](N,O){N.gte!==void 0?N.gte=this.prefixKey(N.gte,O):N.gt!==void 0?N.gt=this.prefixKey(N.gt,O):N.gte=this[u][O],N.lte!==void 0?N.lte=this.prefixKey(N.lte,O):N.lt!==void 0?N.lt=this.prefixKey(N.lt,O):N.lte=this[y][O]}get prefix(){return this[u].utf8}get db(){return this[g]}_open(N,O){this[g].open({passive:!0},O)}_put(N,O,Z,j){this[g].put(N,O,Z,j)}_get(N,O,Z){this[g].get(N,O,Z)}_getMany(N,O,Z){this[g].getMany(N,O,Z)}_del(N,O,Z){this[g].del(N,O,Z)}_batch(N,O,Z){this[g].batch(N,O,Z)}_clear(N,O){this[h](N,N.keyEncoding),this[g].clear(N,O)}_iterator(N){this[h](N,N.keyEncoding);const O=this[g].iterator(N),Z=this[m].get(this[u].utf8.length,N.keyEncoding);return new r(this,N,O,Z)}_keys(N){this[h](N,N.keyEncoding);const O=this[g].keys(N),Z=this[m].get(this[u].utf8.length,N.keyEncoding);return new n(this,N,O,Z)}_values(N){this[h](N,N.keyEncoding);const O=this[g].values(N);return new o(this,N,O)}}return{AbstractSublevel:te}};const A=function(W,te){return{...W.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...te,encodings:{utf8:B(W,"utf8"),buffer:B(W,"buffer"),view:B(W,"view")}}},B=function(W,te){return W.supports.encodings[te]?W.keyEncoding(te).name===te:!1};class T{constructor(te){this.utf8=te,this.view=$.encode(te),this.buffer=e?e.from(this.view.buffer,0,this.view.byteLength):{}}}class k{constructor(){this.cache=new Map}get(te,X){let N=this.cache.get(X);return N===void 0&&(X==="view"?N=function(O,Z){return Z.subarray(O)}.bind(null,te):N=function(O,Z){return Z.slice(O)}.bind(null,te),this.cache.set(X,N)),N}}const U=function(W,te){let X=0,N=W.length;for(;X<N&&W[X]===te;)X++;for(;N>X&&W[N-1]===te;)N--;return W.slice(X,N)};return abstractSublevel}const{supports}=levelSupports,{Transcoder}=levelTranscoder,{EventEmitter}=events.exports,{fromCallback:fromCallback$1}=catering,ModuleError$1=moduleError,{AbstractIterator:AbstractIterator$1}=abstractIterator,{DefaultKeyIterator,DefaultValueIterator}=defaultKvIterator,{DeferredIterator,DeferredKeyIterator,DeferredValueIterator}=deferredIterator,{DefaultChainedBatch}=defaultChainedBatch,{getCallback,getOptions}=common,rangeOptions=rangeOptions_1,kPromise$1=Symbol("promise"),kLanded=Symbol("landed"),kResources=Symbol("resources"),kCloseResources=Symbol("closeResources"),kOperations=Symbol("operations"),kUndefer=Symbol("undefer"),kDeferOpen=Symbol("deferOpen"),kOptions$1=Symbol("options"),kStatus=Symbol("status"),kDefaultOptions=Symbol("defaultOptions"),kTranscoder=Symbol("transcoder"),kKeyEncoding=Symbol("keyEncoding"),kValueEncoding=Symbol("valueEncoding"),noop=()=>{};class AbstractLevel$1 extends EventEmitter{constructor(e,r){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");r=getOptions(r);const{keyEncoding:n,valueEncoding:o,passive:u,...y}=r;this[kResources]=new Set,this[kOperations]=[],this[kDeferOpen]=!0,this[kOptions$1]=y,this[kStatus]="opening",this.supports=supports(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[kTranscoder]=new Transcoder(formats(this)),this[kKeyEncoding]=this[kTranscoder].encoding(n||"utf8"),this[kValueEncoding]=this[kTranscoder].encoding(o||"utf8");for(const h of this[kTranscoder].encodings())this.supports.encodings[h.commonName]||(this.supports.encodings[h.commonName]=!0);this[kDefaultOptions]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[kKeyEncoding].commonName,valueEncoding:this[kValueEncoding].commonName}),key:Object.freeze({keyEncoding:this[kKeyEncoding].commonName})},this.nextTick(()=>{this[kDeferOpen]&&this.open({passive:!1},noop)})}get status(){return this[kStatus]}keyEncoding(e){return this[kTranscoder].encoding(e!=null?e:this[kKeyEncoding])}valueEncoding(e){return this[kTranscoder].encoding(e!=null?e:this[kValueEncoding])}open(e,r){r=getCallback(e,r),r=fromCallback$1(r,kPromise$1),e={...this[kOptions$1],...getOptions(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;const n=o=>{this[kStatus]==="closing"||this[kStatus]==="opening"?this.once(kLanded,o?()=>n(o):n):this[kStatus]!=="open"?r(new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:o})):r()};return e.passive?this[kStatus]==="opening"?this.once(kLanded,n):this.nextTick(n):this[kStatus]==="closed"||this[kDeferOpen]?(this[kDeferOpen]=!1,this[kStatus]="opening",this.emit("opening"),this._open(e,o=>{if(o){this[kStatus]="closed",this[kCloseResources](()=>{this.emit(kLanded),n(o)}),this[kUndefer]();return}this[kStatus]="open",this[kUndefer](),this.emit(kLanded),this[kStatus]==="open"&&this.emit("open"),this[kStatus]==="open"&&this.emit("ready"),n()})):this[kStatus]==="open"?this.nextTick(n):this.once(kLanded,()=>this.open(e,r)),r[kPromise$1]}_open(e,r){this.nextTick(r)}close(e){e=fromCallback$1(e,kPromise$1);const r=n=>{this[kStatus]==="opening"||this[kStatus]==="closing"?this.once(kLanded,n?r(n):r):this[kStatus]!=="closed"?e(new ModuleError$1("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[kStatus]==="open"){this[kStatus]="closing",this.emit("closing");const n=o=>{this[kStatus]="open",this[kUndefer](),this.emit(kLanded),r(o)};this[kCloseResources](()=>{this._close(o=>{if(o)return n(o);this[kStatus]="closed",this[kUndefer](),this.emit(kLanded),this[kStatus]==="closed"&&this.emit("closed"),r()})})}else this[kStatus]==="closed"?this.nextTick(r):this.once(kLanded,()=>this.close(e));return e[kPromise$1]}[kCloseResources](e){if(this[kResources].size===0)return this.nextTick(e);let r=this[kResources].size,n=!0;const o=()=>{--r===0&&(n?this.nextTick(e):e())};for(const u of this[kResources])u.close(o);n=!1,this[kResources].clear()}_close(e){this.nextTick(e)}get(e,r,n){if(n=getCallback(r,n),n=fromCallback$1(n,kPromise$1),r=getOptions(r,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.get(e,r,n)),n[kPromise$1];if(maybeError(this,n))return n[kPromise$1];const o=this._checkKey(e);if(o)return this.nextTick(n,o),n[kPromise$1];const u=this.keyEncoding(r.keyEncoding),y=this.valueEncoding(r.valueEncoding),h=u.format,g=y.format;return(r.keyEncoding!==h||r.valueEncoding!==g)&&(r=Object.assign({},r,{keyEncoding:h,valueEncoding:g})),this._get(this.prefixKey(u.encode(e),h),r,(m,$)=>{if(m)return(m.code==="LEVEL_NOT_FOUND"||m.notFound||/NotFound/i.test(m))&&(m.code||(m.code="LEVEL_NOT_FOUND"),m.notFound||(m.notFound=!0),m.status||(m.status=404)),n(m);try{$=y.decode($)}catch(E){return n(new ModuleError$1("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:E}))}n(null,$)}),n[kPromise$1]}_get(e,r,n){this.nextTick(n,new Error("NotFound"))}getMany(e,r,n){if(n=getCallback(r,n),n=fromCallback$1(n,kPromise$1),r=getOptions(r,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.getMany(e,r,n)),n[kPromise$1];if(maybeError(this,n))return n[kPromise$1];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[kPromise$1];if(e.length===0)return this.nextTick(n,null,[]),n[kPromise$1];const o=this.keyEncoding(r.keyEncoding),u=this.valueEncoding(r.valueEncoding),y=o.format,h=u.format;(r.keyEncoding!==y||r.valueEncoding!==h)&&(r=Object.assign({},r,{keyEncoding:y,valueEncoding:h}));const g=new Array(e.length);for(let m=0;m<e.length;m++){const $=e[m],E=this._checkKey($);if(E)return this.nextTick(n,E),n[kPromise$1];g[m]=this.prefixKey(o.encode($),y)}return this._getMany(g,r,(m,$)=>{if(m)return n(m);try{for(let E=0;E<$.length;E++)$[E]!==void 0&&($[E]=u.decode($[E]))}catch(E){return n(new ModuleError$1(`Could not decode one or more of ${$.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:E}))}n(null,$)}),n[kPromise$1]}_getMany(e,r,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,r,n,o){if(o=getCallback(n,o),o=fromCallback$1(o,kPromise$1),n=getOptions(n,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.put(e,r,n,o)),o[kPromise$1];if(maybeError(this,o))return o[kPromise$1];const u=this._checkKey(e)||this._checkValue(r);if(u)return this.nextTick(o,u),o[kPromise$1];const y=this.keyEncoding(n.keyEncoding),h=this.valueEncoding(n.valueEncoding),g=y.format,m=h.format;(n.keyEncoding!==g||n.valueEncoding!==m)&&(n=Object.assign({},n,{keyEncoding:g,valueEncoding:m}));const $=this.prefixKey(y.encode(e),g),E=h.encode(r);return this._put($,E,n,A=>{if(A)return o(A);this.emit("put",e,r),o()}),o[kPromise$1]}_put(e,r,n,o){this.nextTick(o)}del(e,r,n){if(n=getCallback(r,n),n=fromCallback$1(n,kPromise$1),r=getOptions(r,this[kDefaultOptions].key),this[kStatus]==="opening")return this.defer(()=>this.del(e,r,n)),n[kPromise$1];if(maybeError(this,n))return n[kPromise$1];const o=this._checkKey(e);if(o)return this.nextTick(n,o),n[kPromise$1];const u=this.keyEncoding(r.keyEncoding),y=u.format;return r.keyEncoding!==y&&(r=Object.assign({},r,{keyEncoding:y})),this._del(this.prefixKey(u.encode(e),y),r,h=>{if(h)return n(h);this.emit("del",e),n()}),n[kPromise$1]}_del(e,r,n){this.nextTick(n)}batch(e,r,n){if(!arguments.length){if(this[kStatus]==="opening")return new DefaultChainedBatch(this);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=getCallback(r,n),n=fromCallback$1(n,kPromise$1),r=getOptions(r,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.batch(e,r,n)),n[kPromise$1];if(maybeError(this,n))return n[kPromise$1];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[kPromise$1];if(e.length===0)return this.nextTick(n),n[kPromise$1];const o=new Array(e.length),{keyEncoding:u,valueEncoding:y,...h}=r;for(let g=0;g<e.length;g++){if(typeof e[g]!="object"||e[g]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[kPromise$1];const m=Object.assign({},e[g]);if(m.type!=="put"&&m.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[kPromise$1];const $=this._checkKey(m.key);if($)return this.nextTick(n,$),n[kPromise$1];const E=m.sublevel!=null?m.sublevel:this,A=E.keyEncoding(m.keyEncoding||u),B=A.format;if(m.key=E.prefixKey(A.encode(m.key),B),m.keyEncoding=B,m.type==="put"){const T=this._checkValue(m.value);if(T)return this.nextTick(n,T),n[kPromise$1];const k=E.valueEncoding(m.valueEncoding||y);m.value=k.encode(m.value),m.valueEncoding=k.format}E!==this&&(m.sublevel=null),o[g]=m}return this._batch(o,h,g=>{if(g)return n(g);this.emit("batch",e),n()}),n[kPromise$1]}_batch(e,r,n){this.nextTick(n)}sublevel(e,r){return this._sublevel(e,AbstractSublevel.defaults(r))}_sublevel(e,r){return new AbstractSublevel(this,e,r)}prefixKey(e,r){return e}clear(e,r){if(r=getCallback(e,r),r=fromCallback$1(r,kPromise$1),e=getOptions(e,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.clear(e,r)),r[kPromise$1];if(maybeError(this,r))return r[kPromise$1];const n=e,o=this.keyEncoding(e.keyEncoding);return e=rangeOptions(e,o),e.keyEncoding=o.format,e.limit===0?this.nextTick(r):this._clear(e,u=>{if(u)return r(u);this.emit("clear",n),r()}),r[kPromise$1]}_clear(e,r){this.nextTick(r)}iterator(e){const r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,r),e.keys=e.keys!==!1,e.values=e.values!==!1,e[AbstractIterator$1.keyEncoding]=r,e[AbstractIterator$1.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[kStatus]==="opening")return new DeferredIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new AbstractIterator$1(this,e)}keys(e){const r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,r),e[AbstractIterator$1.keyEncoding]=r,e[AbstractIterator$1.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[kStatus]==="opening")return new DeferredKeyIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new DefaultKeyIterator(this,e)}values(e){const r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,r),e[AbstractIterator$1.keyEncoding]=r,e[AbstractIterator$1.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[kStatus]==="opening")return new DeferredValueIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new DefaultValueIterator(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[kOperations].push(e)}[kUndefer](){if(this[kOperations].length===0)return;const e=this[kOperations];this[kOperations]=[];for(const r of e)r()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[kResources].add(e)}detachResource(e){this[kResources].delete(e)}_chainedBatch(){return new DefaultChainedBatch(this)}_checkKey(e){if(e==null)return new ModuleError$1("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new ModuleError$1("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}AbstractLevel$1.prototype.nextTick=requireNextTickBrowser();const{AbstractSublevel}=requireAbstractSublevel()({AbstractLevel:AbstractLevel$1});abstractLevel.AbstractLevel=AbstractLevel$1;abstractLevel.AbstractSublevel=AbstractSublevel;const maybeError=function(t,e){return t[kStatus]!=="open"?(t.nextTick(e,new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},formats=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])};abstractLevel$1.AbstractLevel=abstractLevel.AbstractLevel;abstractLevel$1.AbstractSublevel=abstractLevel.AbstractSublevel;abstractLevel$1.AbstractIterator=abstractIterator.AbstractIterator;abstractLevel$1.AbstractKeyIterator=abstractIterator.AbstractKeyIterator;abstractLevel$1.AbstractValueIterator=abstractIterator.AbstractValueIterator;abstractLevel$1.AbstractChainedBatch=abstractChainedBatch.AbstractChainedBatch;/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var runParallelLimit_1=runParallelLimit;const queueMicrotask$1=queueMicrotask_1;function runParallelLimit(t,e,r){if(typeof e!="number")throw new Error("second argument must be a Number");let n,o,u,y,h,g=!0,m;Array.isArray(t)?(n=[],u=o=t.length):(y=Object.keys(t),n={},u=o=y.length);function $(A){function B(){r&&r(A,n),r=null}g?queueMicrotask$1(B):B()}function E(A,B,T){if(n[A]=T,B&&(h=!0),--u===0||B)$(B);else if(!h&&m<o){let k;y?(k=y[m],m+=1,t[k](function(U,W){E(k,U,W)})):(k=m,m+=1,t[k](function(U,W){E(k,U,W)}))}}m=e,u?y?y.some(function(A,B){return t[A](function(T,k){E(A,T,k)}),B===e-1}):t.some(function(A,B){return A(function(T,k){E(B,T,k)}),B===e-1}):$(null),g=!1}var iterator={},keyRange=function t(e){const r=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,o=e.gte===void 0,u=e.lte===void 0;return r!==void 0&&n!==void 0?IDBKeyRange.bound(r,n,o,u):r!==void 0?IDBKeyRange.lowerBound(r,o):n!==void 0?IDBKeyRange.upperBound(n,u):null};const textEncoder=new TextEncoder;var deserialize$2=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):textEncoder.encode(t)};const{AbstractIterator}=abstractLevel$1,createKeyRange$1=keyRange,deserialize$1=deserialize$2,kCache=Symbol("cache"),kFinished=Symbol("finished"),kOptions=Symbol("options"),kCurrentOptions=Symbol("currentOptions"),kPosition=Symbol("position"),kLocation$1=Symbol("location"),kFirst=Symbol("first"),emptyOptions={};class Iterator$1 extends AbstractIterator{constructor(e,r,n){super(e,n),this[kCache]=[],this[kFinished]=this.limit===0,this[kOptions]=n,this[kCurrentOptions]={...n},this[kPosition]=void 0,this[kLocation$1]=r,this[kFirst]=!0}_nextv(e,r,n){if(this[kFirst]=!1,this[kFinished])return this.nextTick(n,null,[]);if(this[kCache].length>0)return e=Math.min(e,this[kCache].length),this.nextTick(n,null,this[kCache].splice(0,e));this[kPosition]!==void 0&&(this[kOptions].reverse?(this[kCurrentOptions].lt=this[kPosition],this[kCurrentOptions].lte=void 0):(this[kCurrentOptions].gt=this[kPosition],this[kCurrentOptions].gte=void 0));let o;try{o=createKeyRange$1(this[kCurrentOptions])}catch{return this[kFinished]=!0,this.nextTick(n,null,[])}const u=this.db.db.transaction([this[kLocation$1]],"readonly"),y=u.objectStore(this[kLocation$1]),h=[];if(this[kOptions].reverse){const g=!this[kOptions].values&&y.openKeyCursor?"openKeyCursor":"openCursor";y[g](o,"prev").onsuccess=m=>{const $=m.target.result;if($){const{key:E,value:A}=$;this[kPosition]=E,h.push([this[kOptions].keys&&E!==void 0?deserialize$1(E):void 0,this[kOptions].values&&A!==void 0?deserialize$1(A):void 0]),h.length<e?$.continue():maybeCommit(u)}else this[kFinished]=!0}}else{let g,m;const $=()=>{if(g===void 0||m===void 0)return;const E=Math.max(g.length,m.length);E===0||e===1/0?this[kFinished]=!0:this[kPosition]=g[E-1],h.length=E;for(let A=0;A<E;A++){const B=g[A],T=m[A];h[A]=[this[kOptions].keys&&B!==void 0?deserialize$1(B):void 0,this[kOptions].values&&T!==void 0?deserialize$1(T):void 0]}maybeCommit(u)};this[kOptions].keys||e<1/0?y.getAllKeys(o,e<1/0?e:void 0).onsuccess=E=>{g=E.target.result,$()}:(g=[],this.nextTick($)),this[kOptions].values?y.getAll(o,e<1/0?e:void 0).onsuccess=E=>{m=E.target.result,$()}:(m=[],this.nextTick($))}u.onabort=()=>{n(u.error||new Error("aborted by user")),n=null},u.oncomplete=()=>{n(null,h),n=null}}_next(e){if(this[kCache].length>0){const[r,n]=this[kCache].shift();this.nextTick(e,null,r,n)}else if(this[kFinished])this.nextTick(e);else{let r=Math.min(100,this.limit-this.count);this[kFirst]&&(this[kFirst]=!1,r=1),this._nextv(r,emptyOptions,(n,o)=>{if(n)return e(n);this[kCache]=o,this._next(e)})}}_all(e,r){this[kFirst]=!1;const n=this[kCache].splice(0,this[kCache].length),o=this.limit-this.count-n.length;if(o<=0)return this.nextTick(r,null,n);this._nextv(o,emptyOptions,(u,y)=>{if(u)return r(u);n.length>0&&(y=n.concat(y)),r(null,y)})}_seek(e,r){this[kFirst]=!0,this[kCache]=[],this[kFinished]=!1,this[kPosition]=void 0,this[kCurrentOptions]={...this[kOptions]};let n;try{n=createKeyRange$1(this[kOptions])}catch{this[kFinished]=!0;return}n!==null&&!n.includes(e)?this[kFinished]=!0:this[kOptions].reverse?this[kCurrentOptions].lte=e:this[kCurrentOptions].gte=e}}iterator.Iterator=Iterator$1;function maybeCommit(t){typeof t.commit=="function"&&t.commit()}var clear$1=function t(e,r,n,o,u){if(o.limit===0)return e.nextTick(u);const y=e.db.transaction([r],"readwrite"),h=y.objectStore(r);let g=0;y.oncomplete=function(){u()},y.onabort=function(){u(y.error||new Error("aborted by user"))};const m=h.openKeyCursor?"openKeyCursor":"openCursor",$=o.reverse?"prev":"next";h[m](n,$).onsuccess=function(E){const A=E.target.result;A&&(h.delete(A.key).onsuccess=function(){(o.limit<=0||++g<o.limit)&&A.continue()})}};const{AbstractLevel}=abstractLevel$1,ModuleError=moduleError,parallel=runParallelLimit_1,{fromCallback}=catering,{Iterator}=iterator,deserialize=deserialize$2,clear=clear$1,createKeyRange=keyRange,DEFAULT_PREFIX="level-js-",kIDB=Symbol("idb"),kNamePrefix=Symbol("namePrefix"),kLocation=Symbol("location"),kVersion=Symbol("version"),kStore=Symbol("store"),kOnComplete=Symbol("onComplete"),kPromise=Symbol("promise");class BrowserLevel extends AbstractLevel{constructor(e,r,n){if(typeof r=="function"||typeof n=="function")throw new ModuleError("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:o,version:u,...y}=r||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},y),typeof e!="string")throw new Error("constructor requires a location string argument");this[kLocation]=e,this[kNamePrefix]=o==null?DEFAULT_PREFIX:o,this[kVersion]=parseInt(u||1,10),this[kIDB]=null}get location(){return this[kLocation]}get namePrefix(){return this[kNamePrefix]}get version(){return this[kVersion]}get db(){return this[kIDB]}get type(){return"browser-level"}_open(e,r){const n=indexedDB.open(this[kNamePrefix]+this[kLocation],this[kVersion]);n.onerror=function(){r(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[kIDB]=n.result,r()},n.onupgradeneeded=o=>{const u=o.target.result;u.objectStoreNames.contains(this[kLocation])||u.createObjectStore(this[kLocation])}}[kStore](e){return this[kIDB].transaction([this[kLocation]],e).objectStore(this[kLocation])}[kOnComplete](e,r){const n=e.transaction;n.onabort=function(){r(n.error||new Error("aborted by user"))},n.oncomplete=function(){r(null,e.result)}}_get(e,r,n){const o=this[kStore]("readonly");let u;try{u=o.get(e)}catch(y){return this.nextTick(n,y)}this[kOnComplete](u,function(y,h){if(y)return n(y);if(h===void 0)return n(new ModuleError("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,deserialize(h))})}_getMany(e,r,n){const o=this[kStore]("readonly"),u=e.map(y=>h=>{let g;try{g=o.get(y)}catch(m){return h(m)}g.onsuccess=()=>{const m=g.result;h(null,m===void 0?m:deserialize(m))},g.onerror=m=>{m.stopPropagation(),h(g.error)}});parallel(u,16,n)}_del(e,r,n){const o=this[kStore]("readwrite");let u;try{u=o.delete(e)}catch(y){return this.nextTick(n,y)}this[kOnComplete](u,n)}_put(e,r,n,o){const u=this[kStore]("readwrite");let y;try{y=u.put(r,e)}catch(h){return this.nextTick(o,h)}this[kOnComplete](y,o)}_iterator(e){return new Iterator(this,this[kLocation],e)}_batch(e,r,n){const o=this[kStore]("readwrite"),u=o.transaction;let y=0,h;u.onabort=function(){n(h||u.error||new Error("aborted by user"))},u.oncomplete=function(){n()};function g(){const m=e[y++],$=m.key;let E;try{E=m.type==="del"?o.delete($):o.put(m.value,$)}catch(A){h=A,u.abort();return}y<e.length?E.onsuccess=g:typeof u.commit=="function"&&u.commit()}g()}_clear(e,r){let n,o;try{n=createKeyRange(e)}catch{return this.nextTick(r)}if(e.limit>=0)return clear(this,this[kLocation],n,e,r);try{const u=this[kStore]("readwrite");o=n?u.delete(n):u.clear()}catch(u){return this.nextTick(r,u)}this[kOnComplete](o,r)}_close(e){this[kIDB].close(),this.nextTick(e)}}BrowserLevel.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=DEFAULT_PREFIX),r=fromCallback(r,kPromise);const n=indexedDB.deleteDatabase(e+t);return n.onsuccess=function(){r()},n.onerror=function(o){r(o)},r[kPromise]};var Tc=Object.create,nr=Object.defineProperty,Ic=Object.getOwnPropertyDescriptor,Sc=Object.getOwnPropertyNames,Uc=Object.getPrototypeOf,Fc=Object.prototype.hasOwnProperty,F=(t,e)=>()=>(t&&(e=t(t=0)),e),S=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),M=(t,e)=>{for(var r in e)nr(t,r,{get:e[r],enumerable:!0})},No=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Sc(e))!Fc.call(t,o)&&o!==r&&nr(t,o,{get:()=>e[o],enumerable:!(n=Ic(e,o))||n.enumerable});return t},J=(t,e,r)=>(r=t!=null?Tc(Uc(t)):{},No(e||!t||!t.__esModule?nr(r,"default",{value:t,enumerable:!0}):r,t)),R=t=>No(nr({},"__esModule",{value:!0}),t),Po=S(t=>{a(),t.byteLength=g,t.toByteArray=$,t.fromByteArray=B;var e=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(u=0,y=o.length;u<y;++u)e[u]=o[u],r[o.charCodeAt(u)]=u;var u,y;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function h(T){var k=T.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var U=T.indexOf("=");U===-1&&(U=k);var W=U===k?0:4-U%4;return[U,W]}function g(T){var k=h(T),U=k[0],W=k[1];return(U+W)*3/4-W}function m(T,k,U){return(k+U)*3/4-U}function $(T){var k,U=h(T),W=U[0],te=U[1],X=new n(m(T,W,te)),N=0,O=te>0?W-4:W,Z;for(Z=0;Z<O;Z+=4)k=r[T.charCodeAt(Z)]<<18|r[T.charCodeAt(Z+1)]<<12|r[T.charCodeAt(Z+2)]<<6|r[T.charCodeAt(Z+3)],X[N++]=k>>16&255,X[N++]=k>>8&255,X[N++]=k&255;return te===2&&(k=r[T.charCodeAt(Z)]<<2|r[T.charCodeAt(Z+1)]>>4,X[N++]=k&255),te===1&&(k=r[T.charCodeAt(Z)]<<10|r[T.charCodeAt(Z+1)]<<4|r[T.charCodeAt(Z+2)]>>2,X[N++]=k>>8&255,X[N++]=k&255),X}function E(T){return e[T>>18&63]+e[T>>12&63]+e[T>>6&63]+e[T&63]}function A(T,k,U){for(var W,te=[],X=k;X<U;X+=3)W=(T[X]<<16&16711680)+(T[X+1]<<8&65280)+(T[X+2]&255),te.push(E(W));return te.join("")}function B(T){for(var k,U=T.length,W=U%3,te=[],X=16383,N=0,O=U-W;N<O;N+=X)te.push(A(T,N,N+X>O?O:N+X));return W===1?(k=T[U-1],te.push(e[k>>2]+e[k<<4&63]+"==")):W===2&&(k=(T[U-2]<<8)+T[U-1],te.push(e[k>>10]+e[k>>4&63]+e[k<<2&63]+"=")),te.join("")}}),Ro=S(t=>{a(),t.read=function(e,r,n,o,u){var y,h,g=u*8-o-1,m=(1<<g)-1,$=m>>1,E=-7,A=n?u-1:0,B=n?-1:1,T=e[r+A];for(A+=B,y=T&(1<<-E)-1,T>>=-E,E+=g;E>0;y=y*256+e[r+A],A+=B,E-=8);for(h=y&(1<<-E)-1,y>>=-E,E+=o;E>0;h=h*256+e[r+A],A+=B,E-=8);if(y===0)y=1-$;else{if(y===m)return h?NaN:(T?-1:1)*(1/0);h=h+Math.pow(2,o),y=y-$}return(T?-1:1)*h*Math.pow(2,y-o)},t.write=function(e,r,n,o,u,y){var h,g,m,$=y*8-u-1,E=(1<<$)-1,A=E>>1,B=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=o?0:y-1,k=o?1:-1,U=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(g=isNaN(r)?1:0,h=E):(h=Math.floor(Math.log(r)/Math.LN2),r*(m=Math.pow(2,-h))<1&&(h--,m*=2),h+A>=1?r+=B/m:r+=B*Math.pow(2,1-A),r*m>=2&&(h++,m/=2),h+A>=E?(g=0,h=E):h+A>=1?(g=(r*m-1)*Math.pow(2,u),h=h+A):(g=r*Math.pow(2,A-1)*Math.pow(2,u),h=0));u>=8;e[n+T]=g&255,T+=k,g/=256,u-=8);for(h=h<<u|g,$+=u;$>0;e[n+T]=h&255,T+=k,h/=256,$-=8);e[n+T-k]|=U*128}}),ti=S(t=>{a();var e=Po(),r=Ro(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=h,t.SlowBuffer=te,t.INSPECT_MAX_BYTES=50;var o=2147483647;t.kMaxLength=o,h.TYPED_ARRAY_SUPPORT=u(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{let f=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(f,s),f.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function y(f){if(f>o)throw new RangeError('The value "'+f+'" is invalid for option "size"');let s=new Uint8Array(f);return Object.setPrototypeOf(s,h.prototype),s}function h(f,s,c){if(typeof f=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(f)}return g(f,s,c)}h.poolSize=8192;function g(f,s,c){if(typeof f=="string")return A(f,s);if(ArrayBuffer.isView(f))return T(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(Ie(f,ArrayBuffer)||f&&Ie(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ie(f,SharedArrayBuffer)||f&&Ie(f.buffer,SharedArrayBuffer)))return k(f,s,c);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let w=f.valueOf&&f.valueOf();if(w!=null&&w!==f)return h.from(w,s,c);let v=U(f);if(v)return v;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return h.from(f[Symbol.toPrimitive]("string"),s,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}h.from=function(f,s,c){return g(f,s,c)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function m(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function $(f,s,c){return m(f),f<=0?y(f):s!==void 0?typeof c=="string"?y(f).fill(s,c):y(f).fill(s):y(f)}h.alloc=function(f,s,c){return $(f,s,c)};function E(f){return m(f),y(f<0?0:W(f)|0)}h.allocUnsafe=function(f){return E(f)},h.allocUnsafeSlow=function(f){return E(f)};function A(f,s){if((typeof s!="string"||s==="")&&(s="utf8"),!h.isEncoding(s))throw new TypeError("Unknown encoding: "+s);let c=X(f,s)|0,w=y(c),v=w.write(f,s);return v!==c&&(w=w.slice(0,v)),w}function B(f){let s=f.length<0?0:W(f.length)|0,c=y(s);for(let w=0;w<s;w+=1)c[w]=f[w]&255;return c}function T(f){if(Ie(f,Uint8Array)){let s=new Uint8Array(f);return k(s.buffer,s.byteOffset,s.byteLength)}return B(f)}function k(f,s,c){if(s<0||f.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<s+(c||0))throw new RangeError('"length" is outside of buffer bounds');let w;return s===void 0&&c===void 0?w=new Uint8Array(f):c===void 0?w=new Uint8Array(f,s):w=new Uint8Array(f,s,c),Object.setPrototypeOf(w,h.prototype),w}function U(f){if(h.isBuffer(f)){let s=W(f.length)|0,c=y(s);return c.length===0||f.copy(c,0,0,s),c}if(f.length!==void 0)return typeof f.length!="number"||Ge(f.length)?y(0):B(f);if(f.type==="Buffer"&&Array.isArray(f.data))return B(f.data)}function W(f){if(f>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return f|0}function te(f){return+f!=f&&(f=0),h.alloc(+f)}h.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==h.prototype},h.compare=function(f,s){if(Ie(f,Uint8Array)&&(f=h.from(f,f.offset,f.byteLength)),Ie(s,Uint8Array)&&(s=h.from(s,s.offset,s.byteLength)),!h.isBuffer(f)||!h.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===s)return 0;let c=f.length,w=s.length;for(let v=0,D=Math.min(c,w);v<D;++v)if(f[v]!==s[v]){c=f[v],w=s[v];break}return c<w?-1:w<c?1:0},h.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(f,s){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return h.alloc(0);let c;if(s===void 0)for(s=0,c=0;c<f.length;++c)s+=f[c].length;let w=h.allocUnsafe(s),v=0;for(c=0;c<f.length;++c){let D=f[c];if(Ie(D,Uint8Array))v+D.length>w.length?(h.isBuffer(D)||(D=h.from(D)),D.copy(w,v)):Uint8Array.prototype.set.call(w,D,v);else if(h.isBuffer(D))D.copy(w,v);else throw new TypeError('"list" argument must be an Array of Buffers');v+=D.length}return w};function X(f,s){if(h.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||Ie(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);let c=f.length,w=arguments.length>2&&arguments[2]===!0;if(!w&&c===0)return 0;let v=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return oe(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return he(f).length;default:if(v)return w?-1:oe(f).length;s=(""+s).toLowerCase(),v=!0}}h.byteLength=X;function N(f,s,c){let w=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,s>>>=0,c<=s))return"";for(f||(f="utf8");;)switch(f){case"hex":return rt(this,s,c);case"utf8":case"utf-8":return De(this,s,c);case"ascii":return Je(this,s,c);case"latin1":case"binary":return Te(this,s,c);case"base64":return be(this,s,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it(this,s,c);default:if(w)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),w=!0}}h.prototype._isBuffer=!0;function O(f,s,c){let w=f[s];f[s]=f[c],f[c]=w}h.prototype.swap16=function(){let f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let s=0;s<f;s+=2)O(this,s,s+1);return this},h.prototype.swap32=function(){let f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let s=0;s<f;s+=4)O(this,s,s+3),O(this,s+1,s+2);return this},h.prototype.swap64=function(){let f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let s=0;s<f;s+=8)O(this,s,s+7),O(this,s+1,s+6),O(this,s+2,s+5),O(this,s+3,s+4);return this},h.prototype.toString=function(){let f=this.length;return f===0?"":arguments.length===0?De(this,0,f):N.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(f){if(!h.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:h.compare(this,f)===0},h.prototype.inspect=function(){let f="",s=t.INSPECT_MAX_BYTES;return f=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(f+=" ... "),"<Buffer "+f+">"},n&&(h.prototype[n]=h.prototype.inspect),h.prototype.compare=function(f,s,c,w,v){if(Ie(f,Uint8Array)&&(f=h.from(f,f.offset,f.byteLength)),!h.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(s===void 0&&(s=0),c===void 0&&(c=f?f.length:0),w===void 0&&(w=0),v===void 0&&(v=this.length),s<0||c>f.length||w<0||v>this.length)throw new RangeError("out of range index");if(w>=v&&s>=c)return 0;if(w>=v)return-1;if(s>=c)return 1;if(s>>>=0,c>>>=0,w>>>=0,v>>>=0,this===f)return 0;let D=v-w,I=c-s,Ae=Math.min(D,I),Fe=this.slice(w,v),xe=f.slice(s,c);for(let Ce=0;Ce<Ae;++Ce)if(Fe[Ce]!==xe[Ce]){D=Fe[Ce],I=xe[Ce];break}return D<I?-1:I<D?1:0};function Z(f,s,c,w,v){if(f.length===0)return-1;if(typeof c=="string"?(w=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,Ge(c)&&(c=v?0:f.length-1),c<0&&(c=f.length+c),c>=f.length){if(v)return-1;c=f.length-1}else if(c<0)if(v)c=0;else return-1;if(typeof s=="string"&&(s=h.from(s,w)),h.isBuffer(s))return s.length===0?-1:j(f,s,c,w,v);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?v?Uint8Array.prototype.indexOf.call(f,s,c):Uint8Array.prototype.lastIndexOf.call(f,s,c):j(f,[s],c,w,v);throw new TypeError("val must be string, number or Buffer")}function j(f,s,c,w,v){let D=1,I=f.length,Ae=s.length;if(w!==void 0&&(w=String(w).toLowerCase(),w==="ucs2"||w==="ucs-2"||w==="utf16le"||w==="utf-16le")){if(f.length<2||s.length<2)return-1;D=2,I/=2,Ae/=2,c/=2}function Fe(Ce,je){return D===1?Ce[je]:Ce.readUInt16BE(je*D)}let xe;if(v){let Ce=-1;for(xe=c;xe<I;xe++)if(Fe(f,xe)===Fe(s,Ce===-1?0:xe-Ce)){if(Ce===-1&&(Ce=xe),xe-Ce+1===Ae)return Ce*D}else Ce!==-1&&(xe-=xe-Ce),Ce=-1}else for(c+Ae>I&&(c=I-Ae),xe=c;xe>=0;xe--){let Ce=!0;for(let je=0;je<Ae;je++)if(Fe(f,xe+je)!==Fe(s,je)){Ce=!1;break}if(Ce)return xe}return-1}h.prototype.includes=function(f,s,c){return this.indexOf(f,s,c)!==-1},h.prototype.indexOf=function(f,s,c){return Z(this,f,s,c,!0)},h.prototype.lastIndexOf=function(f,s,c){return Z(this,f,s,c,!1)};function K(f,s,c,w){c=Number(c)||0;let v=f.length-c;w?(w=Number(w),w>v&&(w=v)):w=v;let D=s.length;w>D/2&&(w=D/2);let I;for(I=0;I<w;++I){let Ae=parseInt(s.substr(I*2,2),16);if(Ge(Ae))return I;f[c+I]=Ae}return I}function se(f,s,c,w){return _e(oe(s,f.length-c),f,c,w)}function le(f,s,c,w){return _e(ue(s),f,c,w)}function ye(f,s,c,w){return _e(he(s),f,c,w)}function Ee(f,s,c,w){return _e(q(s,f.length-c),f,c,w)}h.prototype.write=function(f,s,c,w){if(s===void 0)w="utf8",c=this.length,s=0;else if(c===void 0&&typeof s=="string")w=s,c=this.length,s=0;else if(isFinite(s))s=s>>>0,isFinite(c)?(c=c>>>0,w===void 0&&(w="utf8")):(w=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let v=this.length-s;if((c===void 0||c>v)&&(c=v),f.length>0&&(c<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");w||(w="utf8");let D=!1;for(;;)switch(w){case"hex":return K(this,f,s,c);case"utf8":case"utf-8":return se(this,f,s,c);case"ascii":case"latin1":case"binary":return le(this,f,s,c);case"base64":return ye(this,f,s,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ee(this,f,s,c);default:if(D)throw new TypeError("Unknown encoding: "+w);w=(""+w).toLowerCase(),D=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function be(f,s,c){return s===0&&c===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(s,c))}function De(f,s,c){c=Math.min(f.length,c);let w=[],v=s;for(;v<c;){let D=f[v],I=null,Ae=D>239?4:D>223?3:D>191?2:1;if(v+Ae<=c){let Fe,xe,Ce,je;switch(Ae){case 1:D<128&&(I=D);break;case 2:Fe=f[v+1],(Fe&192)===128&&(je=(D&31)<<6|Fe&63,je>127&&(I=je));break;case 3:Fe=f[v+1],xe=f[v+2],(Fe&192)===128&&(xe&192)===128&&(je=(D&15)<<12|(Fe&63)<<6|xe&63,je>2047&&(je<55296||je>57343)&&(I=je));break;case 4:Fe=f[v+1],xe=f[v+2],Ce=f[v+3],(Fe&192)===128&&(xe&192)===128&&(Ce&192)===128&&(je=(D&15)<<18|(Fe&63)<<12|(xe&63)<<6|Ce&63,je>65535&&je<1114112&&(I=je))}}I===null?(I=65533,Ae=1):I>65535&&(I-=65536,w.push(I>>>10&1023|55296),I=56320|I&1023),w.push(I),v+=Ae}return Qe(w)}var We=4096;function Qe(f){let s=f.length;if(s<=We)return String.fromCharCode.apply(String,f);let c="",w=0;for(;w<s;)c+=String.fromCharCode.apply(String,f.slice(w,w+=We));return c}function Je(f,s,c){let w="";c=Math.min(f.length,c);for(let v=s;v<c;++v)w+=String.fromCharCode(f[v]&127);return w}function Te(f,s,c){let w="";c=Math.min(f.length,c);for(let v=s;v<c;++v)w+=String.fromCharCode(f[v]);return w}function rt(f,s,c){let w=f.length;(!s||s<0)&&(s=0),(!c||c<0||c>w)&&(c=w);let v="";for(let D=s;D<c;++D)v+=nt[f[D]];return v}function it(f,s,c){let w=f.slice(s,c),v="";for(let D=0;D<w.length-1;D+=2)v+=String.fromCharCode(w[D]+w[D+1]*256);return v}h.prototype.slice=function(f,s){let c=this.length;f=~~f,s=s===void 0?c:~~s,f<0?(f+=c,f<0&&(f=0)):f>c&&(f=c),s<0?(s+=c,s<0&&(s=0)):s>c&&(s=c),s<f&&(s=f);let w=this.subarray(f,s);return Object.setPrototypeOf(w,h.prototype),w};function qe(f,s,c){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+s>c)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(f,s,c){f=f>>>0,s=s>>>0,c||qe(f,s,this.length);let w=this[f],v=1,D=0;for(;++D<s&&(v*=256);)w+=this[f+D]*v;return w},h.prototype.readUintBE=h.prototype.readUIntBE=function(f,s,c){f=f>>>0,s=s>>>0,c||qe(f,s,this.length);let w=this[f+--s],v=1;for(;s>0&&(v*=256);)w+=this[f+--s]*v;return w},h.prototype.readUint8=h.prototype.readUInt8=function(f,s){return f=f>>>0,s||qe(f,1,this.length),this[f]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(f,s){return f=f>>>0,s||qe(f,2,this.length),this[f]|this[f+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(f,s){return f=f>>>0,s||qe(f,2,this.length),this[f]<<8|this[f+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(f,s){return f=f>>>0,s||qe(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(f,s){return f=f>>>0,s||qe(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},h.prototype.readBigUInt64LE=Ze(function(f){f=f>>>0,ae(f,"offset");let s=this[f],c=this[f+7];(s===void 0||c===void 0)&&ie(f,this.length-8);let w=s+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,v=this[++f]+this[++f]*2**8+this[++f]*2**16+c*2**24;return BigInt(w)+(BigInt(v)<<BigInt(32))}),h.prototype.readBigUInt64BE=Ze(function(f){f=f>>>0,ae(f,"offset");let s=this[f],c=this[f+7];(s===void 0||c===void 0)&&ie(f,this.length-8);let w=s*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],v=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+c;return(BigInt(w)<<BigInt(32))+BigInt(v)}),h.prototype.readIntLE=function(f,s,c){f=f>>>0,s=s>>>0,c||qe(f,s,this.length);let w=this[f],v=1,D=0;for(;++D<s&&(v*=256);)w+=this[f+D]*v;return v*=128,w>=v&&(w-=Math.pow(2,8*s)),w},h.prototype.readIntBE=function(f,s,c){f=f>>>0,s=s>>>0,c||qe(f,s,this.length);let w=s,v=1,D=this[f+--w];for(;w>0&&(v*=256);)D+=this[f+--w]*v;return v*=128,D>=v&&(D-=Math.pow(2,8*s)),D},h.prototype.readInt8=function(f,s){return f=f>>>0,s||qe(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},h.prototype.readInt16LE=function(f,s){f=f>>>0,s||qe(f,2,this.length);let c=this[f]|this[f+1]<<8;return c&32768?c|4294901760:c},h.prototype.readInt16BE=function(f,s){f=f>>>0,s||qe(f,2,this.length);let c=this[f+1]|this[f]<<8;return c&32768?c|4294901760:c},h.prototype.readInt32LE=function(f,s){return f=f>>>0,s||qe(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},h.prototype.readInt32BE=function(f,s){return f=f>>>0,s||qe(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},h.prototype.readBigInt64LE=Ze(function(f){f=f>>>0,ae(f,"offset");let s=this[f],c=this[f+7];(s===void 0||c===void 0)&&ie(f,this.length-8);let w=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(c<<24);return(BigInt(w)<<BigInt(32))+BigInt(s+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),h.prototype.readBigInt64BE=Ze(function(f){f=f>>>0,ae(f,"offset");let s=this[f],c=this[f+7];(s===void 0||c===void 0)&&ie(f,this.length-8);let w=(s<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(w)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+c)}),h.prototype.readFloatLE=function(f,s){return f=f>>>0,s||qe(f,4,this.length),r.read(this,f,!0,23,4)},h.prototype.readFloatBE=function(f,s){return f=f>>>0,s||qe(f,4,this.length),r.read(this,f,!1,23,4)},h.prototype.readDoubleLE=function(f,s){return f=f>>>0,s||qe(f,8,this.length),r.read(this,f,!0,52,8)},h.prototype.readDoubleBE=function(f,s){return f=f>>>0,s||qe(f,8,this.length),r.read(this,f,!1,52,8)};function re(f,s,c,w,v,D){if(!h.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>v||s<D)throw new RangeError('"value" argument is out of bounds');if(c+w>f.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(f,s,c,w){if(f=+f,s=s>>>0,c=c>>>0,!w){let I=Math.pow(2,8*c)-1;re(this,f,s,c,I,0)}let v=1,D=0;for(this[s]=f&255;++D<c&&(v*=256);)this[s+D]=f/v&255;return s+c},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(f,s,c,w){if(f=+f,s=s>>>0,c=c>>>0,!w){let I=Math.pow(2,8*c)-1;re(this,f,s,c,I,0)}let v=c-1,D=1;for(this[s+v]=f&255;--v>=0&&(D*=256);)this[s+v]=f/D&255;return s+c},h.prototype.writeUint8=h.prototype.writeUInt8=function(f,s,c){return f=+f,s=s>>>0,c||re(this,f,s,1,255,0),this[s]=f&255,s+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(f,s,c){return f=+f,s=s>>>0,c||re(this,f,s,2,65535,0),this[s]=f&255,this[s+1]=f>>>8,s+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(f,s,c){return f=+f,s=s>>>0,c||re(this,f,s,2,65535,0),this[s]=f>>>8,this[s+1]=f&255,s+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(f,s,c){return f=+f,s=s>>>0,c||re(this,f,s,4,4294967295,0),this[s+3]=f>>>24,this[s+2]=f>>>16,this[s+1]=f>>>8,this[s]=f&255,s+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(f,s,c){return f=+f,s=s>>>0,c||re(this,f,s,4,4294967295,0),this[s]=f>>>24,this[s+1]=f>>>16,this[s+2]=f>>>8,this[s+3]=f&255,s+4};function we(f,s,c,w,v){ee(s,w,v,f,c,7);let D=Number(s&BigInt(4294967295));f[c++]=D,D=D>>8,f[c++]=D,D=D>>8,f[c++]=D,D=D>>8,f[c++]=D;let I=Number(s>>BigInt(32)&BigInt(4294967295));return f[c++]=I,I=I>>8,f[c++]=I,I=I>>8,f[c++]=I,I=I>>8,f[c++]=I,c}function ne(f,s,c,w,v){ee(s,w,v,f,c,7);let D=Number(s&BigInt(4294967295));f[c+7]=D,D=D>>8,f[c+6]=D,D=D>>8,f[c+5]=D,D=D>>8,f[c+4]=D;let I=Number(s>>BigInt(32)&BigInt(4294967295));return f[c+3]=I,I=I>>8,f[c+2]=I,I=I>>8,f[c+1]=I,I=I>>8,f[c]=I,c+8}h.prototype.writeBigUInt64LE=Ze(function(f,s=0){return we(this,f,s,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=Ze(function(f,s=0){return ne(this,f,s,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(f,s,c,w){if(f=+f,s=s>>>0,!w){let Ae=Math.pow(2,8*c-1);re(this,f,s,c,Ae-1,-Ae)}let v=0,D=1,I=0;for(this[s]=f&255;++v<c&&(D*=256);)f<0&&I===0&&this[s+v-1]!==0&&(I=1),this[s+v]=(f/D>>0)-I&255;return s+c},h.prototype.writeIntBE=function(f,s,c,w){if(f=+f,s=s>>>0,!w){let Ae=Math.pow(2,8*c-1);re(this,f,s,c,Ae-1,-Ae)}let v=c-1,D=1,I=0;for(this[s+v]=f&255;--v>=0&&(D*=256);)f<0&&I===0&&this[s+v+1]!==0&&(I=1),this[s+v]=(f/D>>0)-I&255;return s+c},h.prototype.writeInt8=function(f,s,c){return f=+f,s=s>>>0,c||re(this,f,s,1,127,-128),f<0&&(f=255+f+1),this[s]=f&255,s+1},h.prototype.writeInt16LE=function(f,s,c){return f=+f,s=s>>>0,c||re(this,f,s,2,32767,-32768),this[s]=f&255,this[s+1]=f>>>8,s+2},h.prototype.writeInt16BE=function(f,s,c){return f=+f,s=s>>>0,c||re(this,f,s,2,32767,-32768),this[s]=f>>>8,this[s+1]=f&255,s+2},h.prototype.writeInt32LE=function(f,s,c){return f=+f,s=s>>>0,c||re(this,f,s,4,2147483647,-2147483648),this[s]=f&255,this[s+1]=f>>>8,this[s+2]=f>>>16,this[s+3]=f>>>24,s+4},h.prototype.writeInt32BE=function(f,s,c){return f=+f,s=s>>>0,c||re(this,f,s,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[s]=f>>>24,this[s+1]=f>>>16,this[s+2]=f>>>8,this[s+3]=f&255,s+4},h.prototype.writeBigInt64LE=Ze(function(f,s=0){return we(this,f,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=Ze(function(f,s=0){return ne(this,f,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function He(f,s,c,w,v,D){if(c+w>f.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function et(f,s,c,w,v){return s=+s,c=c>>>0,v||He(f,s,c,4),r.write(f,s,c,w,23,4),c+4}h.prototype.writeFloatLE=function(f,s,c){return et(this,f,s,!0,c)},h.prototype.writeFloatBE=function(f,s,c){return et(this,f,s,!1,c)};function tt(f,s,c,w,v){return s=+s,c=c>>>0,v||He(f,s,c,8),r.write(f,s,c,w,52,8),c+8}h.prototype.writeDoubleLE=function(f,s,c){return tt(this,f,s,!0,c)},h.prototype.writeDoubleBE=function(f,s,c){return tt(this,f,s,!1,c)},h.prototype.copy=function(f,s,c,w){if(!h.isBuffer(f))throw new TypeError("argument should be a Buffer");if(c||(c=0),!w&&w!==0&&(w=this.length),s>=f.length&&(s=f.length),s||(s=0),w>0&&w<c&&(w=c),w===c||f.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("sourceEnd out of bounds");w>this.length&&(w=this.length),f.length-s<w-c&&(w=f.length-s+c);let v=w-c;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(s,c,w):Uint8Array.prototype.set.call(f,this.subarray(c,w),s),v},h.prototype.fill=function(f,s,c,w){if(typeof f=="string"){if(typeof s=="string"?(w=s,s=0,c=this.length):typeof c=="string"&&(w=c,c=this.length),w!==void 0&&typeof w!="string")throw new TypeError("encoding must be a string");if(typeof w=="string"&&!h.isEncoding(w))throw new TypeError("Unknown encoding: "+w);if(f.length===1){let D=f.charCodeAt(0);(w==="utf8"&&D<128||w==="latin1")&&(f=D)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(s<0||this.length<s||this.length<c)throw new RangeError("Out of range index");if(c<=s)return this;s=s>>>0,c=c===void 0?this.length:c>>>0,f||(f=0);let v;if(typeof f=="number")for(v=s;v<c;++v)this[v]=f;else{let D=h.isBuffer(f)?f:h.from(f,w),I=D.length;if(I===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(v=0;v<c-s;++v)this[v+s]=D[v%I]}return this};var Ve={};function Ye(f,s,c){Ve[f]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(w){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:w,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}Ye("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ye("ERR_INVALID_ARG_TYPE",function(f,s){return`The "${f}" argument must be of type number. Received type ${typeof s}`},TypeError),Ye("ERR_OUT_OF_RANGE",function(f,s,c){let w=`The value of "${f}" is out of range.`,v=c;return Number.isInteger(c)&&Math.abs(c)>2**32?v=P(String(c)):typeof c=="bigint"&&(v=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(v=P(v)),v+="n"),w+=` It must be ${s}. Received ${v}`,w},RangeError);function P(f){let s="",c=f.length,w=f[0]==="-"?1:0;for(;c>=w+4;c-=3)s=`_${f.slice(c-3,c)}${s}`;return`${f.slice(0,c)}${s}`}function L(f,s,c){ae(s,"offset"),(f[s]===void 0||f[s+c]===void 0)&&ie(s,f.length-(c+1))}function ee(f,s,c,w,v,D){if(f>c||f<s){let I=typeof s=="bigint"?"n":"",Ae;throw D>3?s===0||s===BigInt(0)?Ae=`>= 0${I} and < 2${I} ** ${(D+1)*8}${I}`:Ae=`>= -(2${I} ** ${(D+1)*8-1}${I}) and < 2 ** ${(D+1)*8-1}${I}`:Ae=`>= ${s}${I} and <= ${c}${I}`,new Ve.ERR_OUT_OF_RANGE("value",Ae,f)}L(w,v,D)}function ae(f,s){if(typeof f!="number")throw new Ve.ERR_INVALID_ARG_TYPE(s,"number",f)}function ie(f,s,c){throw Math.floor(f)!==f?(ae(f,c),new Ve.ERR_OUT_OF_RANGE(c||"offset","an integer",f)):s<0?new Ve.ERR_BUFFER_OUT_OF_BOUNDS:new Ve.ERR_OUT_OF_RANGE(c||"offset",`>= ${c?1:0} and <= ${s}`,f)}var de=/[^+/0-9A-Za-z-_]/g;function ge(f){if(f=f.split("=")[0],f=f.trim().replace(de,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function oe(f,s){s=s||1/0;let c,w=f.length,v=null,D=[];for(let I=0;I<w;++I){if(c=f.charCodeAt(I),c>55295&&c<57344){if(!v){if(c>56319){(s-=3)>-1&&D.push(239,191,189);continue}else if(I+1===w){(s-=3)>-1&&D.push(239,191,189);continue}v=c;continue}if(c<56320){(s-=3)>-1&&D.push(239,191,189),v=c;continue}c=(v-55296<<10|c-56320)+65536}else v&&(s-=3)>-1&&D.push(239,191,189);if(v=null,c<128){if((s-=1)<0)break;D.push(c)}else if(c<2048){if((s-=2)<0)break;D.push(c>>6|192,c&63|128)}else if(c<65536){if((s-=3)<0)break;D.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((s-=4)<0)break;D.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return D}function ue(f){let s=[];for(let c=0;c<f.length;++c)s.push(f.charCodeAt(c)&255);return s}function q(f,s){let c,w,v,D=[];for(let I=0;I<f.length&&!((s-=2)<0);++I)c=f.charCodeAt(I),w=c>>8,v=c%256,D.push(v),D.push(w);return D}function he(f){return e.toByteArray(ge(f))}function _e(f,s,c,w){let v;for(v=0;v<w&&!(v+c>=s.length||v>=f.length);++v)s[v+c]=f[v];return v}function Ie(f,s){return f instanceof s||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===s.name}function Ge(f){return f!==f}var nt=function(){let f="0123456789abcdef",s=new Array(256);for(let c=0;c<16;++c){let w=c*16;for(let v=0;v<16;++v)s[w+v]=f[c]+f[v]}return s}();function Ze(f){return typeof BigInt>"u"?ot:f}function ot(){throw new Error("BigInt not supported")}}),si=S((t,e)=>{a();var r=e.exports={},n,o;function u(){throw new Error("setTimeout has not been defined")}function y(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=u}catch{n=u}try{typeof clearTimeout=="function"?o=clearTimeout:o=y}catch{o=y}})();function h(W){if(n===setTimeout)return setTimeout(W,0);if((n===u||!n)&&setTimeout)return n=setTimeout,setTimeout(W,0);try{return n(W,0)}catch{try{return n.call(null,W,0)}catch{return n.call(this,W,0)}}}function g(W){if(o===clearTimeout)return clearTimeout(W);if((o===y||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(W);try{return o(W)}catch{try{return o.call(null,W)}catch{return o.call(this,W)}}}var m=[],$=!1,E,A=-1;function B(){!$||!E||($=!1,E.length?m=E.concat(m):A=-1,m.length&&T())}function T(){if(!$){var W=h(B);$=!0;for(var te=m.length;te;){for(E=m,m=[];++A<te;)E&&E[A].run();A=-1,te=m.length}E=null,$=!1,g(W)}}r.nextTick=function(W){var te=new Array(arguments.length-1);if(arguments.length>1)for(var X=1;X<arguments.length;X++)te[X-1]=arguments[X];m.push(new k(W,te)),m.length===1&&!$&&h(T)};function k(W,te){this.fun=W,this.array=te}k.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function U(){}r.on=U,r.addListener=U,r.once=U,r.off=U,r.removeListener=U,r.removeAllListeners=U,r.emit=U,r.prependListener=U,r.prependOnceListener=U,r.listeners=function(W){return[]},r.binding=function(W){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(W){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}),p,d,a=F(()=>{ti().Buffer,p=si(),d=globalThis,globalThis&&globalThis.process&&globalThis.process.env&&(globalThis.process.env.LIBP2P_FORCE_PNET=!1)});function ci(t,e,r){e=e||[],r=r||0;for(var n=r;t>=mf;)e[r++]=t&255|ai,t/=128;for(;t&pf;)e[r++]=t&255|ai,t>>>=7;return e[r]=t|0,ci.bytes=r-n+1,e}function un(t,n){var r=0,n=n||0,o=0,u=n,y,h=t.length;do{if(u>=h)throw un.bytes=0,new RangeError("Could not decode varint");y=t[u++],r+=o<28?(y&ui)<<o:(y&ui)*Math.pow(2,o),o+=7}while(y>=wf);return un.bytes=u-n,r}var df,ai,hf,pf,mf,yf,wf,ui,gf,Df,bf,Ef,xf,Cf,Bf,Af,Tf,If,Sf,Uf,Lt,fi=F(()=>{a(),df=ci,ai=128,hf=127,pf=~hf,mf=Math.pow(2,31),yf=un,wf=128,ui=127,gf=Math.pow(2,7),Df=Math.pow(2,14),bf=Math.pow(2,21),Ef=Math.pow(2,28),xf=Math.pow(2,35),Cf=Math.pow(2,42),Bf=Math.pow(2,49),Af=Math.pow(2,56),Tf=Math.pow(2,63),If=function(t){return t<gf?1:t<Df?2:t<bf?3:t<Ef?4:t<xf?5:t<Cf?6:t<Bf?7:t<Af?8:t<Tf?9:10},Sf={encode:df,decode:yf,encodingLength:If},Uf=Sf,Lt=Uf}),Pt,ut,ct,cr=F(()=>{a(),fi(),Pt=t=>[Lt.decode(t),Lt.decode.bytes],ut=(t,e,r=0)=>(Lt.encode(t,e,r),e),ct=t=>Lt.encodingLength(t)}),li,Se,di,hi,Ne=F(()=>{a(),li=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Se=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},di=t=>new TextEncoder().encode(t),hi=t=>new TextDecoder().decode(t)}),Ue={};M(Ue,{Digest:()=>Xe,create:()=>$e,decode:()=>ft,equals:()=>fn});var $e,ft,fn,Xe,Le=F(()=>{a(),Ne(),cr(),$e=(t,e)=>{let r=e.byteLength,n=ct(t),o=n+ct(r),u=new Uint8Array(o+r);return ut(t,u,0),ut(r,u,n),u.set(e,o),new Xe(t,r,e,u)},ft=t=>{let e=Se(t),[r,n]=Pt(e),[o,u]=Pt(e.subarray(n)),y=e.subarray(n+u);if(y.byteLength!==o)throw new Error("Incorrect length");return new Xe(r,o,y,e)},fn=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&li(t.bytes,e.bytes),Xe=class{constructor(t,e,r,n){this.code=t,this.size=e,this.digest=r,this.bytes=n}}});function Ff(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var u=t.charAt(o),y=u.charCodeAt(0);if(r[y]!==255)throw new TypeError(u+" is ambiguous");r[y]=o}var h=t.length,g=t.charAt(0),m=Math.log(h)/Math.log(256),$=Math.log(256)/Math.log(h);function E(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var k=0,U=0,W=0,te=T.length;W!==te&&T[W]===0;)W++,k++;for(var X=(te-W)*$+1>>>0,N=new Uint8Array(X);W!==te;){for(var O=T[W],Z=0,j=X-1;(O!==0||Z<U)&&j!==-1;j--,Z++)O+=256*N[j]>>>0,N[j]=O%h>>>0,O=O/h>>>0;if(O!==0)throw new Error("Non-zero carry");U=Z,W++}for(var K=X-U;K!==X&&N[K]===0;)K++;for(var se=g.repeat(k);K<X;++K)se+=t.charAt(N[K]);return se}function A(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var k=0;if(T[k]!==" "){for(var U=0,W=0;T[k]===g;)U++,k++;for(var te=(T.length-k)*m+1>>>0,X=new Uint8Array(te);T[k];){var N=r[T.charCodeAt(k)];if(N===255)return;for(var O=0,Z=te-1;(N!==0||O<W)&&Z!==-1;Z--,O++)N+=h*X[Z]>>>0,X[Z]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");W=O,k++}if(T[k]!==" "){for(var j=te-W;j!==te&&X[j]===0;)j++;for(var K=new Uint8Array(U+(te-j)),se=U;j!==te;)K[se++]=X[j++];return K}}}function B(T){var k=A(T);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:E,decodeUnsafe:A,decode:B}}var vf,kf,pi,mi=F(()=>{a(),vf=Ff,kf=vf,pi=kf}),ln,dn,hn,yi,pn,lt,Pe,_f,Nf,_,pe=F(()=>{a(),mi(),Ne(),ln=class{constructor(t,e,r){this.name=t,this.prefix=e,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},dn=class{constructor(t,e,r){if(this.name=t,this.prefix=e,e.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return yi(this,t)}},hn=class{constructor(t){this.decoders=t}or(t){return yi(this,t)}decode(t){let e=t[0],r=this.decoders[e];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},yi=(t,e)=>new hn({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),pn=class{constructor(t,e,r,n){this.name=t,this.prefix=e,this.baseEncode=r,this.baseDecode=n,this.encoder=new ln(t,e,r),this.decoder=new dn(t,e,n)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},lt=({name:t,prefix:e,encode:r,decode:n})=>new pn(t,e,r,n),Pe=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:o}=pi(r,e);return lt({prefix:t,name:e,encode:n,decode:u=>Se(o(u))})},_f=(t,e,r,n)=>{let o={};for(let $=0;$<e.length;++$)o[e[$]]=$;let u=t.length;for(;t[u-1]==="=";)--u;let y=new Uint8Array(u*r/8|0),h=0,g=0,m=0;for(let $=0;$<u;++$){let E=o[t[$]];if(E===void 0)throw new SyntaxError(`Non-${n} character`);g=g<<r|E,h+=r,h>=8&&(h-=8,y[m++]=255&g>>h)}if(h>=r||255&g<<8-h)throw new SyntaxError("Unexpected end of data");return y},Nf=(t,e,r)=>{let n=e[e.length-1]==="=",o=(1<<r)-1,u="",y=0,h=0;for(let g=0;g<t.length;++g)for(h=h<<8|t[g],y+=8;y>r;)y-=r,u+=e[o&h>>y];if(y&&(u+=e[o&h<<r-y]),n)for(;u.length*r&7;)u+="=";return u},_=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>lt({prefix:e,name:t,encode(o){return Nf(o,n,r)},decode(o){return _f(o,n,r,t)}})}),dt={};M(dt,{base58btc:()=>Y,base58flickr:()=>$f});var Y,$f,Re=F(()=>{a(),pe(),Y=Pe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),$f=Pe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})}),Rt={};M(Rt,{base32:()=>Me,base32hex:()=>Mf,base32hexpad:()=>zf,base32hexpadupper:()=>qf,base32hexupper:()=>Of,base32pad:()=>Pf,base32padupper:()=>Rf,base32upper:()=>Lf,base32z:()=>Hf});var Me,Lf,Pf,Rf,Mf,Of,zf,qf,Hf,ht=F(()=>{a(),pe(),Me=_({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Lf=_({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Pf=_({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Rf=_({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Mf=_({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Of=_({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),zf=_({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),qf=_({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Hf=_({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),dr={};M(dr,{CID:()=>x});var x,jf,Vf,Gf,Mt,Wf,wi,gi,fr,lr,Jf,Xf,Yf,Q=F(()=>{a(),cr(),Le(),Re(),ht(),Ne(),x=class{constructor(t,e,r,n){this.code=e,this.version=t,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:lr,byteLength:lr,code:fr,version:fr,multihash:fr,bytes:fr,_baseCache:lr,asCID:lr})}toV0(){switch(this.version){case 0:return this;default:{let{code:t,multihash:e}=this;if(t!==Mt)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==Wf)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return x.createV0(e)}}}toV1(){switch(this.version){case 0:{let{code:t,digest:e}=this.multihash,r=$e(t,e);return x.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&fn(this.multihash,t.multihash)}toString(t){let{bytes:e,version:r,_baseCache:n}=this;switch(r){case 0:return Vf(e,n,t||Y.encoder);default:return Gf(e,n,t||Me.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return Xf(/^0\.0/,Yf),!!(t&&(t[gi]||t.asCID===t))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof x)return t;if(t!=null&&t.asCID===t){let{version:e,code:r,multihash:n,bytes:o}=t;return new x(e,r,n,o||wi(e,r,n.bytes))}else if(t!=null&&t[gi]===!0){let{version:e,multihash:r,code:n}=t,o=ft(r);return x.create(e,n,o)}else return null}static create(t,e,r){if(typeof e!="number")throw new Error("String codecs are no longer supported");switch(t){case 0:{if(e!==Mt)throw new Error(`Version 0 CID must use dag-pb (code: ${Mt}) block encoding`);return new x(t,e,r,r.bytes)}case 1:{let n=wi(t,e,r.bytes);return new x(t,e,r,n)}default:throw new Error("Invalid version")}}static createV0(t){return x.create(0,Mt,t)}static createV1(t,e){return x.create(1,t,e)}static decode(t){let[e,r]=x.decodeFirst(t);if(r.length)throw new Error("Incorrect length");return e}static decodeFirst(t){let e=x.inspectBytes(t),r=e.size-e.multihashSize,n=Se(t.subarray(r,r+e.multihashSize));if(n.byteLength!==e.multihashSize)throw new Error("Incorrect length");let o=n.subarray(e.multihashSize-e.digestSize),u=new Xe(e.multihashCode,e.digestSize,o,n);return[e.version===0?x.createV0(u):x.createV1(e.codec,u),t.subarray(e.size)]}static inspectBytes(t){let e=0,r=()=>{let[$,E]=Pt(t.subarray(e));return e+=E,$},n=r(),o=Mt;if(n===18?(n=0,e=0):n===1&&(o=r()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);let u=e,y=r(),h=r(),g=e+h,m=g-u;return{version:n,codec:o,multihashCode:y,digestSize:h,multihashSize:m,size:g}}static parse(t,e){let[r,n]=jf(t,e),o=x.decode(n);return o._baseCache.set(r,t),o}},jf=(t,e)=>{switch(t[0]){case"Q":{let r=e||Y;return[Y.prefix,r.decode(`${Y.prefix}${t}`)]}case Y.prefix:{let r=e||Y;return[Y.prefix,r.decode(t)]}case Me.prefix:{let r=e||Me;return[Me.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Vf=(t,e,r)=>{let{prefix:n}=r;if(n!==Y.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=e.get(n);if(o==null){let u=r.encode(t).slice(1);return e.set(n,u),u}else return o},Gf=(t,e,r)=>{let{prefix:n}=r,o=e.get(n);if(o==null){let u=r.encode(t);return e.set(n,u),u}else return o},Mt=112,Wf=18,wi=(t,e,r)=>{let n=ct(t),o=n+ct(e),u=new Uint8Array(o+r.byteLength);return ut(t,u,0),ut(e,u,n),u.set(r,o),u},gi=Symbol.for("@ipld/js-cid/CID"),fr={writable:!1,configurable:!1,enumerable:!0},lr={writable:!1,enumerable:!1,configurable:!1},Jf="0.0.0-dev",Xf=(t,e)=>{if(t.test(Jf))console.warn(e);else throw new Error(e)},Yf=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`}),yn,mn,wn=F(()=>{a(),Le(),yn=({name:t,code:e,encode:r})=>new mn(t,e,r),mn=class{constructor(t,e,r){this.name=t,this.code=e,this.encode=r}digest(t){if(t instanceof Uint8Array){let e=this.encode(t);return e instanceof Uint8Array?$e(this.code,e):e.then(r=>$e(this.code,r))}else throw Error("Unknown type, must be binary type")}}}),gn=F(()=>{a(),Q(),cr(),Ne(),wn(),Le()}),Ci=S((t,e)=>{a(),e.exports=y;var r=128,n=127,o=~n,u=Math.pow(2,31);function y(h,g,m){if(Number.MAX_SAFE_INTEGER&&h>Number.MAX_SAFE_INTEGER)throw y.bytes=0,new RangeError("Could not encode varint");g=g||[],m=m||0;for(var $=m;h>=u;)g[m++]=h&255|r,h/=128;for(;h&o;)g[m++]=h&255|r,h>>>=7;return g[m]=h|0,y.bytes=m-$+1,g}}),Ti=S((t,e)=>{a(),e.exports=o;var r=128,n=127;function o(u,g){var h=0,g=g||0,m=0,$=g,E,A=u.length;do{if($>=A||m>49)throw o.bytes=0,new RangeError("Could not decode varint");E=u[$++],h+=m<28?(E&n)<<m:(E&n)*Math.pow(2,m),m+=7}while(E>=r);return o.bytes=$-g,h}}),Si=S((t,e)=>{a();var r=Math.pow(2,7),n=Math.pow(2,14),o=Math.pow(2,21),u=Math.pow(2,28),y=Math.pow(2,35),h=Math.pow(2,42),g=Math.pow(2,49),m=Math.pow(2,56),$=Math.pow(2,63);e.exports=function(E){return E<r?1:E<n?2:E<o?3:E<u?4:E<y?5:E<h?6:E<g?7:E<m?8:E<$?9:10}}),pt=S((t,e)=>{a(),e.exports={encode:Ci(),decode:Ti(),encodingLength:Si()}}),Ws=S((t,e)=>{a(),e.exports=function(){return Date.now()}}),Xs=S((t,e)=>{a();var r=Ws(),n=class{constructor(u,y,h){let g=this;this._started=r(),this._rescheduled=0,this._scheduled=y,this._args=h,this._triggered=!1,this._timerWrapper=()=>{g._rescheduled>0?(g._scheduled=g._rescheduled-(r()-g._started),g._schedule(g._scheduled)):(g._triggered=!0,u.apply(null,g._args))},this._timer=setTimeout(this._timerWrapper,y)}reschedule(u){u||(u=this._scheduled);let y=r();y+u-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(u)):this._triggered?this._schedule(u):(this._started=y,this._rescheduled=u)}_schedule(u){this._triggered=!1,this._started=r(),this._rescheduled=0,this._scheduled=u,this._timer=setTimeout(this._timerWrapper,u)}clear(){clearTimeout(this._timer)}};function o(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let u;if(arguments.length>0){u=new Array(arguments.length-2);for(var y=0;y<u.length;y++)u[y]=arguments[y+2]}return new n(arguments[0],arguments[1],u)}e.exports=o}),Zs=S((t,e)=>{a();var{AbortController:r}=globalThis,n=Xs(),o=class extends r{constructor(u){super(),this._ms=u,this._timer=n(()=>this.abort(),u),Object.setPrototypeOf(this,o.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=n(()=>this.abort(),this._ms)}};e.exports={TimeoutController:o}}),ea=S((t,e)=>{a();function r(n){let o=new globalThis.AbortController;function u(){o.abort();for(let y of n)!y||!y.removeEventListener||y.removeEventListener("abort",u)}for(let y of n)if(!(!y||!y.addEventListener)){if(y.aborted){u();break}y.addEventListener("abort",u)}return o.signal}e.exports=r,e.exports.anySignal=r}),sa=S((t,e)=>{a();var r=1e3,n=r*60,o=n*60,u=o*24,y=u*7,h=u*365.25;e.exports=function(A,B){B=B||{};var T=typeof A;if(T==="string"&&A.length>0)return g(A);if(T==="number"&&isFinite(A))return B.long?$(A):m(A);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(A))};function g(A){if(A=String(A),!(A.length>100)){var B=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(A);if(B){var T=parseFloat(B[1]),k=(B[2]||"ms").toLowerCase();switch(k){case"years":case"year":case"yrs":case"yr":case"y":return T*h;case"weeks":case"week":case"w":return T*y;case"days":case"day":case"d":return T*u;case"hours":case"hour":case"hrs":case"hr":case"h":return T*o;case"minutes":case"minute":case"mins":case"min":case"m":return T*n;case"seconds":case"second":case"secs":case"sec":case"s":return T*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return T;default:return}}}}function m(A){var B=Math.abs(A);return B>=u?Math.round(A/u)+"d":B>=o?Math.round(A/o)+"h":B>=n?Math.round(A/n)+"m":B>=r?Math.round(A/r)+"s":A+"ms"}function $(A){var B=Math.abs(A);return B>=u?E(A,B,u,"day"):B>=o?E(A,B,o,"hour"):B>=n?E(A,B,n,"minute"):B>=r?E(A,B,r,"second"):A+" ms"}function E(A,B,T,k){var U=B>=T*1.5;return Math.round(A/T)+" "+k+(U?"s":"")}}),ua=S((t,e)=>{a();function r(n){u.debug=u,u.default=u,u.coerce=E,u.disable=g,u.enable=h,u.enabled=m,u.humanize=sa(),u.destroy=A,Object.keys(n).forEach(B=>{u[B]=n[B]}),u.names=[],u.skips=[],u.formatters={};function o(B){let T=0;for(let k=0;k<B.length;k++)T=(T<<5)-T+B.charCodeAt(k),T|=0;return u.colors[Math.abs(T)%u.colors.length]}u.selectColor=o;function u(B){let T,k=null,U,W;function te(...X){if(!te.enabled)return;let N=te,O=Number(new Date),Z=O-(T||O);N.diff=Z,N.prev=T,N.curr=O,T=O,X[0]=u.coerce(X[0]),typeof X[0]!="string"&&X.unshift("%O");let j=0;X[0]=X[0].replace(/%([a-zA-Z%])/g,(K,se)=>{if(K==="%%")return"%";j++;let le=u.formatters[se];if(typeof le=="function"){let ye=X[j];K=le.call(N,ye),X.splice(j,1),j--}return K}),u.formatArgs.call(N,X),(N.log||u.log).apply(N,X)}return te.namespace=B,te.useColors=u.useColors(),te.color=u.selectColor(B),te.extend=y,te.destroy=u.destroy,Object.defineProperty(te,"enabled",{enumerable:!0,configurable:!1,get:()=>k!==null?k:(U!==u.namespaces&&(U=u.namespaces,W=u.enabled(B)),W),set:X=>{k=X}}),typeof u.init=="function"&&u.init(te),te}function y(B,T){let k=u(this.namespace+(typeof T>"u"?":":T)+B);return k.log=this.log,k}function h(B){u.save(B),u.namespaces=B,u.names=[],u.skips=[];let T,k=(typeof B=="string"?B:"").split(/[\s,]+/),U=k.length;for(T=0;T<U;T++)!k[T]||(B=k[T].replace(/\*/g,".*?"),B[0]==="-"?u.skips.push(new RegExp("^"+B.slice(1)+"$")):u.names.push(new RegExp("^"+B+"$")))}function g(){let B=[...u.names.map($),...u.skips.map($).map(T=>"-"+T)].join(",");return u.enable(""),B}function m(B){if(B[B.length-1]==="*")return!0;let T,k;for(T=0,k=u.skips.length;T<k;T++)if(u.skips[T].test(B))return!1;for(T=0,k=u.names.length;T<k;T++)if(u.names[T].test(B))return!0;return!1}function $(B){return B.toString().substring(2,B.toString().length-2).replace(/\.\*\?$/,"*")}function E(B){return B instanceof Error?B.stack||B.message:B}function A(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return u.enable(u.load()),u}e.exports=r}),ca=S((t,e)=>{a(),t.formatArgs=n,t.save=o,t.load=u,t.useColors=r,t.storage=y(),t.destroy=(()=>{let g=!1;return()=>{g||(g=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(g){if(g[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+g[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let m="color: "+this.color;g.splice(1,0,m,"color: inherit");let $=0,E=0;g[0].replace(/%[a-zA-Z%]/g,A=>{A!=="%%"&&($++,A==="%c"&&(E=$))}),g.splice(E,0,m)}t.log=console.debug||console.log||(()=>{});function o(g){try{g?t.storage.setItem("debug",g):t.storage.removeItem("debug")}catch{}}function u(){let g;try{g=t.storage.getItem("debug")}catch{}return!g&&typeof p<"u"&&"env"in p&&(g=p.env.DEBUG),g}function y(){try{return localStorage}catch{}}e.exports=ua()(t);var{formatters:h}=e.exports;h.j=function(g){try{return JSON.stringify(g)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}}}),On={};M(On,{base64:()=>Mn,base64pad:()=>md,base64url:()=>yd,base64urlpad:()=>wd});var Mn,md,yd,wd,zn=F(()=>{a(),pe(),Mn=_({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),md=_({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),yd=_({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),wd=_({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})}),qn=F(()=>{a(),Ne()}),Hn=F(()=>{a(),new TextEncoder,new TextDecoder}),wa=S((t,e)=>{a();var r=async n=>{for await(let o of n)return o};e.exports=r}),Da=S((t,e)=>{a();var r=async n=>{let o;for await(let u of n)o=u;return o};e.exports=r}),xa=S((t,e)=>{a();var r="[a-fA-F\\d:]",n=E=>E&&E.includeBoundaries?`(?:(?<=\\s|^)(?=${r})|(?<=${r})(?=\\s|$))`:"",o="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",u="[a-fA-F\\d]{1,4}",y=`
(?:
(?:${u}:){7}(?:${u}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${u}:){6}(?:${o}|:${u}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${u}:){5}(?::${o}|(?::${u}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${u}:){4}(?:(?::${u}){0,1}:${o}|(?::${u}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${u}:){3}(?:(?::${u}){0,2}:${o}|(?::${u}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${u}:){2}(?:(?::${u}){0,3}:${o}|(?::${u}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${u}:){1}(?:(?::${u}){0,4}:${o}|(?::${u}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${u}){0,5}:${o}|(?::${u}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),h=new RegExp(`(?:^${o}$)|(?:^${y}$)`),g=new RegExp(`^${o}$`),m=new RegExp(`^${y}$`),$=E=>E&&E.exact?h:new RegExp(`(?:${n(E)}${o}${n(E)})|(?:${n(E)}${y}${n(E)})`,"g");$.v4=E=>E&&E.exact?g:new RegExp(`${n(E)}${o}${n(E)}`,"g"),$.v6=E=>E&&E.exact?m:new RegExp(`${n(E)}${y}${n(E)}`,"g"),e.exports=$}),Ba=S((t,e)=>{a();var r=xa(),n=o=>r({exact:!0}).test(o);n.v4=o=>r.v4({exact:!0}).test(o),n.v6=o=>r.v6({exact:!0}).test(o),n.version=o=>n(o)?n.v4(o)?4:6:void 0,e.exports=n}),Wn={};M(Wn,{identity:()=>Ad});var Ad,Aa=F(()=>{a(),pe(),Ne(),Ad=lt({prefix:"\0",name:"identity",encode:t=>hi(t),decode:t=>di(t)})}),Jn={};M(Jn,{base2:()=>Td});var Td,Ta=F(()=>{a(),pe(),Td=_({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),Xn={};M(Xn,{base8:()=>Id});var Id,Ia=F(()=>{a(),pe(),Id=_({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),Yn={};M(Yn,{base10:()=>Sd});var Sd,Sa=F(()=>{a(),pe(),Sd=Pe({prefix:"9",name:"base10",alphabet:"0123456789"})}),Qn={};M(Qn,{base16:()=>Ud,base16upper:()=>Fd});var Ud,Fd,Ua=F(()=>{a(),pe(),Ud=_({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Fd=_({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})}),Zn={};M(Zn,{base36:()=>vd,base36upper:()=>kd});var vd,kd,Fa=F(()=>{a(),pe(),vd=Pe({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),kd=Pe({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),Kn={};M(Kn,{base256emoji:()=>Pd});function $d(t){return t.reduce((e,r)=>(e+=_d[r],e),"")}function Ld(t){let e=[];for(let r of t){let n=Nd[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var va,_d,Nd,Pd,ka=F(()=>{a(),pe(),va=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),_d=va.reduce((t,e,r)=>(t[r]=e,t),[]),Nd=va.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]),Pd=lt({prefix:"\u{1F680}",name:"base256emoji",encode:$d,decode:Ld})}),eo={};M(eo,{sha256:()=>Rd,sha512:()=>Md});var _a,Rd,Md,Na=F(()=>{a(),wn(),_a=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Rd=yn({name:"sha2-256",code:18,encode:_a("SHA-256")}),Md=yn({name:"sha2-512",code:19,encode:_a("SHA-512")})}),to={};M(to,{identity:()=>qd});var $a,Od,La,zd,qd,Pa=F(()=>{a(),Ne(),Le(),$a=0,Od="identity",La=Se,zd=t=>$e($a,La(t)),qd={code:$a,name:Od,encode:La,digest:zd}}),ro,Ra=F(()=>{a(),Aa(),Ta(),Ia(),Sa(),Ua(),ht(),Fa(),Re(),zn(),ka(),Na(),Pa(),qn(),Hn(),gn(),ro={...Wn,...Jn,...Xn,...Yn,...Qn,...Rt,...Zn,...dt,...On,...Kn},{...eo,...to}});function Nr(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}var no=F(()=>{a()});function Oa(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var Ma,oo,Hd,$r,io=F(()=>{a(),Ra(),no(),Ma=Oa("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),oo=Oa("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=Nr(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Hd={utf8:Ma,"utf-8":Ma,hex:ro.base16,latin1:oo,ascii:oo,binary:oo,...ro},$r=Hd}),Tt={};M(Tt,{toString:()=>so});function so(t,e="utf8"){let r=$r[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var Ke=F(()=>{a(),io()}),Va=S((t,e)=>{a();var r=Ba(),{toString:n}=(Ke(),R(Tt)),o=r,u=r.v4,y=r.v6,h=function(m,$,E){E=~~E;let A;if(u(m))A=$||new Uint8Array(E+4),m.split(/\./g).map(function(B){A[E++]=parseInt(B,10)&255});else if(y(m)){let B=m.split(":",8),T;for(T=0;T<B.length;T++){let k=u(B[T]),U;k&&(U=h(B[T]),B[T]=n(U.slice(0,2),"base16")),U&&++T<8&&B.splice(T,0,n(U.slice(2,4),"base16"))}if(B[0]==="")for(;B.length<8;)B.unshift("0");else if(B[B.length-1]==="")for(;B.length<8;)B.push("0");else if(B.length<8){for(T=0;T<B.length&&B[T]!=="";T++);let k=[T,"1"];for(T=9-B.length;T>0;T--)k.push("0");B.splice.apply(B,k)}for(A=$||new Uint8Array(E+16),T=0;T<B.length;T++){let k=parseInt(B[T],16);A[E++]=k>>8&255,A[E++]=k&255}}if(!A)throw Error("Invalid ip address: "+m);return A},g=function(m,$,E){$=~~$,E=E||m.length-$;let A=[],B,T=new DataView(m.buffer);if(E===4){for(let k=0;k<E;k++)A.push(m[$+k]);B=A.join(".")}else if(E===16){for(let k=0;k<E;k+=2)A.push(T.getUint16($+k).toString(16));B=A.join(":"),B=B.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),B=B.replace(/:{3,4}/,"::")}return B};e.exports={isIP:o,isV4:u,isV6:y,toBytes:h,toString:g}}),Lr=S((t,e)=>{a();function r(u){if(typeof u=="number"){if(r.codes[u])return r.codes[u];throw new Error("no protocol with code: "+u)}else if(typeof u=="string"){if(r.names[u])return r.names[u];throw new Error("no protocol with name: "+u)}throw new Error("invalid protocol id type: "+u)}var n=-1;r.lengthPrefixedVarSize=n,r.V=n,r.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,n,"ip6zone"],[53,n,"dns","resolvable"],[54,n,"dns4","resolvable"],[55,n,"dns6","resolvable"],[56,n,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,n,"unix",!1,"path"],[421,n,"ipfs"],[421,n,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,n,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,n,"memory"]],r.names={},r.codes={},r.table.map(u=>{let y=o.apply(null,u);return r.codes[y.code]=y,r.names[y.name]=y,null}),r.object=o;function o(u,y,h,g,m){return{code:u,size:y,name:h,resolvable:Boolean(g),path:Boolean(m)}}e.exports=r}),Ja={};M(Ja,{fromString:()=>co});function co(t,e="utf8"){let r=$r[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var fo=F(()=>{a(),io()}),lo={};M(lo,{concat:()=>Gd});function Gd(t,e){e||(e=t.reduce((o,u)=>o+u.length,0));let r=Nr(e),n=0;for(let o of t)r.set(o,n),n+=o.length;return r}var ho=F(()=>{a(),no()}),ru=S((t,e)=>{a();var r=Va(),n=Lr(),{CID:o}=(Q(),R(dr)),{base32:u}=(ht(),R(Rt)),{base58btc:y}=(Re(),R(dt)),h=(Le(),R(Ue)),g=pt(),{toString:m}=(Ke(),R(Tt)),{fromString:$}=(fo(),R(Ja)),{concat:E}=(ho(),R(lo));e.exports=A;function A(K,se){return se instanceof Uint8Array?A.toString(K,se):A.toBytes(K,se)}A.toString=function(K,se){switch(n(K).code){case 4:case 41:return T(se);case 6:case 273:case 33:case 132:return U(se).toString();case 53:case 54:case 55:case 56:case 400:case 777:return te(se);case 421:return N(se);case 444:return j(se);case 445:return j(se);default:return m(se,"base16")}},A.toBytes=function(K,se){switch(n(K).code){case 4:return B(se);case 41:return B(se);case 6:case 273:case 33:case 132:return k(parseInt(se,10));case 53:case 54:case 55:case 56:case 400:case 777:return W(se);case 421:return X(se);case 444:return O(se);case 445:return Z(se);default:return $(se,"base16")}};function B(K){if(!r.isIP(K))throw new Error("invalid ip address");return r.toBytes(K)}function T(K){let se=r.toString(K);if(!se||!r.isIP(se))throw new Error("invalid ip address");return se}function k(K){let se=new ArrayBuffer(2);return new DataView(se).setUint16(0,K),new Uint8Array(se)}function U(K){return new DataView(K.buffer).getUint16(K.byteOffset)}function W(K){let se=$(K),le=Uint8Array.from(g.encode(se.length));return E([le,se],le.length+se.length)}function te(K){let se=g.decode(K);if(K=K.slice(g.decode.bytes),K.length!==se)throw new Error("inconsistent lengths");return m(K)}function X(K){let se;K[0]==="Q"||K[0]==="1"?se=h.decode(y.decode(`z${K}`)).bytes:se=o.parse(K).multihash.bytes;let le=Uint8Array.from(g.encode(se.length));return E([le,se],le.length+se.length)}function N(K){let se=g.decode(K),le=K.slice(g.decode.bytes);if(le.length!==se)throw new Error("inconsistent lengths");return m(le,"base58btc")}function O(K){let se=K.split(":");if(se.length!==2)throw new Error("failed to parse onion addr: "+se+" does not contain a port number");if(se[0].length!==16)throw new Error("failed to parse onion addr: "+se[0]+" not a Tor onion address.");let le=u.decode("b"+se[0]),ye=parseInt(se[1],10);if(ye<1||ye>65536)throw new Error("Port number is not in range(1, 65536)");let Ee=k(ye);return E([le,Ee],le.length+Ee.length)}function Z(K){let se=K.split(":");if(se.length!==2)throw new Error("failed to parse onion addr: "+se+" does not contain a port number");if(se[0].length!==56)throw new Error("failed to parse onion addr: "+se[0]+" not a Tor onion3 address.");let le=u.decode("b"+se[0]),ye=parseInt(se[1],10);if(ye<1||ye>65536)throw new Error("Port number is not in range(1, 65536)");let Ee=k(ye);return E([le,Ee],le.length+Ee.length)}function j(K){let se=K.slice(0,K.length-2),le=K.slice(K.length-2),ye=m(se,"base32"),Ee=U(le);return ye+":"+Ee}}),pu=S((t,e)=>{a();var r=ru(),n=Lr(),o=pt(),{concat:u}=(ho(),R(lo)),{toString:y}=(Ke(),R(Tt));e.exports={stringToStringTuples:h,stringTuplesToString:g,tuplesToStringTuples:$,stringTuplesToTuples:m,bytesToTuples:B,tuplesToBytes:E,bytesToString:T,stringToBytes:k,fromString:U,fromBytes:W,validateBytes:te,isValidBytes:X,cleanPath:N,ParseError:O,protoFromTuple:Z,sizeForAddr:A};function h(j){let K=[],se=j.split("/").slice(1);if(se.length===1&&se[0]==="")return[];for(let le=0;le<se.length;le++){let ye=se[le],Ee=n(ye);if(Ee.size===0){K.push([ye]);continue}if(le++,le>=se.length)throw O("invalid address: "+j);if(Ee.path){K.push([ye,N(se.slice(le).join("/"))]);break}K.push([ye,se[le]])}return K}function g(j){let K=[];return j.map(se=>{let le=Z(se);return K.push(le.name),se.length>1&&K.push(se[1]),null}),N(K.join("/"))}function m(j){return j.map(K=>{Array.isArray(K)||(K=[K]);let se=Z(K);return K.length>1?[se.code,r.toBytes(se.code,K[1])]:[se.code]})}function $(j){return j.map(K=>{let se=Z(K);return K[1]?[se.code,r.toString(se.code,K[1])]:[se.code]})}function E(j){return W(u(j.map(K=>{let se=Z(K),le=Uint8Array.from(o.encode(se.code));return K.length>1&&(le=u([le,K[1]])),le})))}function A(j,K){return j.size>0?j.size/8:j.size===0?0:o.decode(K)+o.decode.bytes}function B(j){let K=[],se=0;for(;se<j.length;){let le=o.decode(j,se),ye=o.decode.bytes,Ee=n(le),be=A(Ee,j.slice(se+ye));if(be===0){K.push([le]),se+=ye;continue}let De=j.slice(se+ye,se+ye+be);if(se+=be+ye,se>j.length)throw O("Invalid address Uint8Array: "+y(j,"base16"));K.push([le,De])}return K}function T(j){let K=B(j),se=$(K);return g(se)}function k(j){j=N(j);let K=h(j),se=m(K);return E(se)}function U(j){return k(j)}function W(j){let K=te(j);if(K)throw K;return Uint8Array.from(j)}function te(j){try{B(j)}catch(K){return K}}function X(j){return te(j)===void 0}function N(j){return"/"+j.trim().split("/").filter(K=>K).join("/")}function O(j){return new Error("Error parsing address: "+j)}function Z(j){return n(j[0])}}),Yt=S((t,e)=>{a();function r(o,u){for(let y in u)Object.defineProperty(o,y,{value:u[y],enumerable:!0,configurable:!0});return o}function n(o,u,y){if(!o||typeof o=="string")throw new TypeError("Please pass an Error to err-code");y||(y={}),typeof u=="object"&&(y=u,u=""),u&&(y.code=u);try{return r(o,y)}catch{y.message=o.message,y.stack=o.stack;let h=function(){};return h.prototype=Object.create(Object.getPrototypeOf(o)),r(new h,y)}}e.exports=n}),wu={};M(wu,{equals:()=>uh});function uh(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var gu=F(()=>{a()}),bo=S((t,e)=>{a();var r=pu(),n=Lr(),o=pt(),{CID:u}=(Q(),R(dr)),{base58btc:y}=(Re(),R(dt)),h=Yt(),g=Symbol.for("nodejs.util.inspect.custom"),{toString:m}=(Ke(),R(Tt)),{equals:$}=(gu(),R(wu)),E=new Map,A=Symbol.for("@multiformats/js-multiaddr/multiaddr"),B=class{constructor(k){if(k==null&&(k=""),Object.defineProperty(this,A,{value:!0}),k instanceof Uint8Array)this.bytes=r.fromBytes(k);else if(typeof k=="string"){if(k.length>0&&k.charAt(0)!=="/")throw new Error(`multiaddr "${k}" must start with a "/"`);this.bytes=r.fromString(k)}else if(B.isMultiaddr(k))this.bytes=r.fromBytes(k.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return r.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let k={},U=this.toString().split("/");return k.family=U[1]==="ip4"?4:6,k.host=U[2],k.transport=U[3],k.port=parseInt(U[4]),k}protos(){return this.protoCodes().map(k=>Object.assign({},n(k)))}protoCodes(){let k=[],U=this.bytes,W=0;for(;W<U.length;){let te=o.decode(U,W),X=o.decode.bytes,N=n(te);W+=r.sizeForAddr(N,U.slice(W+X))+X,k.push(te)}return k}protoNames(){return this.protos().map(k=>k.name)}tuples(){return r.bytesToTuples(this.bytes)}stringTuples(){let k=r.bytesToTuples(this.bytes);return r.tuplesToStringTuples(k)}encapsulate(k){return k=new B(k),new B(this.toString()+k.toString())}decapsulate(k){let U=k.toString(),W=this.toString(),te=W.lastIndexOf(U);if(te<0)throw new Error("Address "+this+" does not contain subaddress: "+k);return new B(W.slice(0,te))}decapsulateCode(k){let U=this.tuples();for(let W=U.length-1;W>=0;W--)if(U[W][0]===k)return new B(r.tuplesToBytes(U.slice(0,W)));return this}getPeerId(){try{let k=this.stringTuples().filter(U=>U[0]===n.names.ipfs.code).pop();if(k&&k[1]){let U=k[1];return U[0]==="Q"||U[0]==="1"?m(y.decode(`z${U}`),"base58btc"):m(u.parse(U).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let k=null;try{k=this.stringTuples().filter(U=>!!n(U[0]).path)[0][1],k||(k=null)}catch{k=null}return k}equals(k){return $(this.bytes,k.bytes)}async resolve(){let k=this.protos().find(W=>W.resolvable);if(!k)return[this];let U=E.get(k.name);if(!U)throw h(new Error(`no available resolver for ${k.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await U(this)).map(W=>new B(W))}nodeAddress(){let k=this.protoCodes(),U=this.protoNames(),W=this.toString().split("/").slice(1);if(W.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(k[0]!==4&&k[0]!==41&&k[0]!==54&&k[0]!==55)throw new Error(`no protocol with name: "'${U[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(W[2]!=="tcp"&&W[2]!=="udp")throw new Error(`no protocol with name: "'${U[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:k[0]===41||k[0]===55?6:4,address:W[1],port:parseInt(W[3])}}isThinWaistAddress(k){let U=(k||this).protos();return!(U.length!==2||U[0].code!==4&&U[0].code!==41||U[1].code!==6&&U[1].code!==273)}static fromNodeAddress(k,U){if(!k)throw new Error("requires node address object");if(!U)throw new Error("requires transport protocol");let W;switch(k.family){case 4:W="ip4";break;case 6:W="ip6";break;default:throw Error(`Invalid addr family. Got '${k.family}' instead of 4 or 6`)}return new B("/"+[W,k.address,U,k.port].join("/"))}static isName(k){return B.isMultiaddr(k)?k.protos().some(U=>U.resolvable):!1}static isMultiaddr(k){return k instanceof B||Boolean(k&&k[A])}[g](){return"<Multiaddr "+m(this.bytes,"base16")+" - "+r.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+m(this.bytes,"base16")+" - "+r.bytesToString(this.bytes)+">"}};B.protocols=n,B.resolvers=E;function T(k){return new B(k)}e.exports={Multiaddr:B,multiaddr:T,protocols:n,resolvers:E}}),ku=S((t,e)=>{a();var{Multiaddr:r}=bo(),n=be("dns4"),o=be("dns6"),u=be("dnsaddr"),y=Ee(be("dns"),u,n,o),h=Ee(be("ip4"),be("ip6")),g=Ee(ye(h,be("tcp")),ye(y,be("tcp"))),m=ye(h,be("udp")),$=ye(m,be("utp")),E=ye(m,be("quic")),A=Ee(ye(g,be("ws")),ye(y,be("ws"))),B=Ee(ye(g,be("wss")),ye(y,be("wss"))),T=Ee(ye(g,be("http")),ye(h,be("http")),ye(y,be("http"))),k=Ee(ye(g,be("https")),ye(h,be("https")),ye(y,be("https"))),U=Ee(ye(A,be("p2p-webrtc-star"),be("p2p")),ye(B,be("p2p-webrtc-star"),be("p2p")),ye(A,be("p2p-webrtc-star")),ye(B,be("p2p-webrtc-star"))),W=Ee(ye(A,be("p2p-websocket-star"),be("p2p")),ye(B,be("p2p-websocket-star"),be("p2p")),ye(A,be("p2p-websocket-star")),ye(B,be("p2p-websocket-star"))),te=Ee(ye(T,be("p2p-webrtc-direct"),be("p2p")),ye(k,be("p2p-webrtc-direct"),be("p2p")),ye(T,be("p2p-webrtc-direct")),ye(k,be("p2p-webrtc-direct"))),X=Ee(A,B,T,k,U,te,g,$,E,y),N=Ee(ye(X,be("p2p-stardust"),be("p2p")),ye(X,be("p2p-stardust"))),O=Ee(ye(X,be("p2p")),U,te,be("p2p")),Z=Ee(ye(O,be("p2p-circuit"),O),ye(O,be("p2p-circuit")),ye(be("p2p-circuit"),O),ye(X,be("p2p-circuit")),ye(be("p2p-circuit"),X),be("p2p-circuit")),j=()=>Ee(ye(Z,j),Z),K=j(),se=Ee(ye(K,O,K),ye(O,K),ye(K,O),K,O);e.exports={DNS:y,DNS4:n,DNS6:o,DNSADDR:u,IP:h,TCP:g,UDP:m,QUIC:E,UTP:$,HTTP:T,HTTPS:k,WebSockets:A,WebSocketsSecure:B,WebSocketStar:W,WebRTCStar:U,WebRTCDirect:te,Reliable:X,Stardust:N,Circuit:K,P2P:se,IPFS:se};function le(De){function We(Qe){if(!r.isMultiaddr(Qe))try{Qe=new r(Qe)}catch{return!1}let Je=De(Qe.protoNames());return Je===null?!1:Je===!0||Je===!1?Je:Je.length===0}return We}function ye(...De){function We(Qe){if(Qe.length<De.length)return null;let Je=Qe;return De.some(Te=>(Je=typeof Te=="function"?Te().partialMatch(Qe):Te.partialMatch(Qe),Array.isArray(Je)&&(Qe=Je),Je===null)),Je}return{toString:function(){return"{ "+De.join(" ")+" }"},input:De,matches:le(We),partialMatch:We}}function Ee(...De){function We(Qe){let Je=null;return De.some(Te=>{let rt=typeof Te=="function"?Te().partialMatch(Qe):Te.partialMatch(Qe);return rt?(Je=rt,!0):!1}),Je}return{toString:function(){return"{ "+De.join(" ")+" }"},input:De,matches:le(We),partialMatch:We}}function be(De){let We=De;function Qe(Te){let rt;if(typeof Te=="string"||Te instanceof Uint8Array)try{rt=new r(Te)}catch{return!1}else rt=Te;let it=rt.protoNames();return it.length===1&&it[0]===We}function Je(Te){return Te.length===0?null:Te[0]===We?Te.slice(1):null}return{toString:function(){return We},matches:Qe,partialMatch:Je}}}),To=S((t,e)=>{a();var r=typeof navigator<"u"&&navigator.product==="ReactNative";function n(){return r?"http://localhost":d.location?d.location.protocol+"//"+d.location.host:""}var o=d.URL,u=n(),y=class{constructor(g="",m=u){this.super=new o(g,m),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(g){this.super.hash=g}set host(g){this.super.host=g}set hostname(g){this.super.hostname=g}set href(g){this.super.href=g}set password(g){this.super.password=g}set pathname(g){this.super.pathname=g}set port(g){this.super.port=g}set protocol(g){this.super.protocol=g}set search(g){this.super.search=g}set username(g){this.super.username=g}static createObjectURL(g){return o.createObjectURL(g)}static revokeObjectURL(g){o.revokeObjectURL(g)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function h(g){if(typeof g=="string")return new o(g).toString();if(!(g instanceof o)){let m=g.username&&g.password?`${g.username}:${g.password}@`:"",$=g.auth?g.auth+"@":"",E=g.port?":"+g.port:"",A=g.protocol?g.protocol+"//":"",B=g.host||"",T=g.hostname||"",k=g.search||(g.query?"?"+g.query:""),U=g.hash||"",W=g.pathname||"",te=g.path||W+k;return`${A}${m||$}${B||T+E}${te}${U}`}}e.exports={URLWithLegacySupport:y,URLSearchParams:d.URLSearchParams,defaultBase:u,format:h}}),Pu=S((t,e)=>{a();var{URLWithLegacySupport:r,format:n}=To();e.exports=(o,u={},y={},h)=>{let g=u.protocol?u.protocol.replace(":",""):"http";g=(y[g]||h||g)+":";let m;try{m=new r(o)}catch{m={}}let $=Object.assign({},u,{protocol:g||m.protocol,host:u.host||m.host});return new r(o,n($)).toString()}}),Mu=S((t,e)=>{a();var{URLWithLegacySupport:r,format:n,URLSearchParams:o,defaultBase:u}=To(),y=Pu();e.exports={URL:r,URLSearchParams:o,format:n,relative:y,defaultBase:u}}),Ku=S((t,e)=>{a();var{base58btc:r}=(Re(),R(dt)),{base32:n}=(ht(),R(Rt)),o=(Le(),R(Ue)),{Multiaddr:u}=bo(),y=ku(),{CID:h}=(Q(),R(dr)),{URL:g}=Mu(),{toString:m}=(Ke(),R(Tt)),$=/^https?:\/\/[^/]+\/(ip[fn]s)\/([^/?#]+)/,E=/^\/(ip[fn]s)\/([^/?#]+)/,A=1,B=2,T=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,k=1,U=2,W=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function te(Te){let rt=le(Te);try{o.decode(r.decode("z"+rt))}catch{return!1}return!0}function X(Te){try{n.decode(Te)}catch{return!1}return!0}function N(Te){try{return typeof Te=="string"?Boolean(h.parse(Te)):Te instanceof Uint8Array?Boolean(h.decode(Te)):Boolean(h.asCID(Te))}catch{return!1}}function O(Te){if(!Te)return!1;if(u.isMultiaddr(Te))return!0;try{return new u(Te),!0}catch{return!1}}function Z(Te){return O(Te)&&y.P2P.matches(Te)}function j(Te,rt,it=A,qe=B){let re=le(Te);if(!re)return!1;let we=re.match(rt);if(!we||we[it]!=="ipfs")return!1;let ne=we[qe];return ne&&rt===T&&(ne=ne.toLowerCase()),N(ne)}function K(Te,rt,it=A,qe=B){let re=le(Te);if(!re)return!1;let we=re.match(rt);if(!we||we[it]!=="ipns")return!1;let ne=we[qe];if(ne&&rt===T){if(ne=ne.toLowerCase(),N(ne))return!0;try{!ne.includes(".")&&ne.includes("-")&&(ne=ne.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));let{hostname:He}=new g(`http://${ne}`);return W.test(He)}catch{return!1}}return!0}function se(Te){return typeof Te=="string"}function le(Te){return Te instanceof Uint8Array?m(Te,"base58btc"):se(Te)?Te:!1}var ye=Te=>j(Te,T,U,k),Ee=Te=>K(Te,T,U,k),be=Te=>ye(Te)||Ee(Te),De=Te=>j(Te,$)||ye(Te),We=Te=>K(Te,$)||Ee(Te),Qe=Te=>De(Te)||We(Te)||be(Te),Je=Te=>j(Te,E)||K(Te,E);e.exports={multihash:te,multiaddr:O,peerMultiaddr:Z,cid:N,base32cid:Te=>X(Te)&&N(Te),ipfsSubdomain:ye,ipnsSubdomain:Ee,subdomain:be,subdomainGatewayPattern:T,ipfsUrl:De,ipnsUrl:We,url:Qe,pathGatewayPattern:$,ipfsPath:Te=>j(Te,E),ipnsPath:Te=>K(Te,E),path:Je,pathPattern:E,urlOrPath:Te=>Qe(Te)||Je(Te),cidPath:Te=>se(Te)&&!N(Te)&&j(`/ipfs/${Te}`,E)}}),hc=S((t,e)=>{a();function r(n){let[o,u]=n[Symbol.asyncIterator]?[n[Symbol.asyncIterator](),Symbol.asyncIterator]:[n[Symbol.iterator](),Symbol.iterator],y=[];return{peek:()=>o.next(),push:h=>{y.push(h)},next:()=>y.length?{done:!1,value:y.shift()}:o.next(),[u](){return this}}}e.exports=r}),mc=S((t,e)=>{a();var r=async n=>{for await(let o of n);};e.exports=r}),wc=S((t,e)=>{a();var r=async function*(n,o){for await(let u of n)yield o(u)};e.exports=r});a();a();Q();a();gn();a();Q();a();J(pt(),1);a();a();a();a();var ll=["string","number","bigint","symbol"],dl=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Fi(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;return ll.includes(e)?e:e==="function"?"Function":Array.isArray(t)?"Array":hl(t)?"Buffer":pl(t)||"Object"}function hl(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function pl(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(dl.includes(e))return e}a();var l=class{constructor(t,e,r){this.major=t,this.majorEncoded=t<<5,this.name=e,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}};l.uint=new l(0,"uint",!0);l.negint=new l(1,"negint",!0);l.bytes=new l(2,"bytes",!0);l.string=new l(3,"string",!0);l.array=new l(4,"array",!1);l.map=new l(5,"map",!1);l.tag=new l(6,"tag",!1);l.float=new l(7,"float",!0);l.false=new l(7,"false",!0);l.true=new l(7,"true",!0);l.null=new l(7,"null",!0);l.undefined=new l(7,"undefined",!0);l.break=new l(7,"break",!0);var b=class{constructor(t,e,r){this.type=t,this.value=e,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};a();a();var mt=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function";new TextDecoder;var yl=new TextEncoder;function pr(t){return mt&&globalThis.Buffer.isBuffer(t)}var $i=mt?t=>t.length>64?globalThis.Buffer.from(t):vi(t):t=>t.length>64?yl.encode(t):vi(t);function Ri(t,e){if(pr(t)&&pr(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function vi(t,e=1/0){let r,n=t.length,o=null,u=[];for(let y=0;y<n;++y){if(r=t.charCodeAt(y),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&u.push(239,191,189);continue}else if(y+1===n){(e-=3)>-1&&u.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&u.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(e-=3)>-1&&u.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;u.push(r)}else if(r<2048){if((e-=2)<0)break;u.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;u.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;u.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return u}a();var C="CBOR decode error:",An="CBOR encode error:";a();a();var z=[24,256,65536,4294967296,BigInt("18446744073709551616")];function ce(t,e){return H(t,0,e.value)}function H(t,e,r){if(r<z[0]){let n=Number(r);t.push([e|n])}else if(r<z[1]){let n=Number(r);t.push([e|24,n])}else if(r<z[2]){let n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<z[3]){let n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<z[4]){let o=[e|27,0,0,0,0,0,0,0],u=Number(n&BigInt(4294967295)),y=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=u&255,u=u>>8,o[7]=u&255,u=u>>8,o[6]=u&255,u=u>>8,o[5]=u&255,o[4]=y&255,y=y>>8,o[3]=y&255,y=y>>8,o[2]=y&255,y=y>>8,o[1]=y&255,t.push(o)}else throw new Error(`${C} encountered BigInt larger than allowable range`)}}ce.encodedSize=function(t){return H.encodedSize(t.value)};H.encodedSize=function(t){return t<z[0]?1:t<z[1]?2:t<z[2]?3:t<z[3]?5:9};ce.compareTokens=function(t,e){return t.value<e.value?-1:t.value>e.value?1:0};a();var Tn=BigInt(-1),Gi=BigInt(1);function mr(t,e){let r=e.value,n=typeof r=="bigint"?r*Tn-Gi:r*-1-1;H(t,e.type.majorEncoded,n)}mr.encodedSize=function(t){let e=t.value,r=typeof e=="bigint"?e*Tn-Gi:e*-1-1;return r<z[0]?1:r<z[1]?2:r<z[2]?3:r<z[3]?5:9};mr.compareTokens=function(t,e){return t.value<e.value?1:t.value>e.value?-1:0};a();function yr(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===l.string?$i(t.value):t.value),t.encodedBytes}function wt(t,e){let r=yr(e);H(t,e.type.majorEncoded,r.length),t.push(r)}wt.encodedSize=function(t){let e=yr(t);return H.encodedSize(e.length)+e.length};wt.compareTokens=function(t,e){return bl(yr(t),yr(e))};function bl(t,e){return t.length<e.length?-1:t.length>e.length?1:Ri(t,e)}a();var os=wt;a();function wr(t,e){H(t,l.array.majorEncoded,e.value)}wr.compareTokens=ce.compareTokens;wr.encodedSize=function(t){return H.encodedSize(t.value)};a();function gr(t,e){H(t,l.map.majorEncoded,e.value)}gr.compareTokens=ce.compareTokens;gr.encodedSize=function(t){return H.encodedSize(t.value)};a();function Dr(t,e){H(t,l.tag.majorEncoded,e.value)}Dr.compareTokens=ce.compareTokens;Dr.encodedSize=function(t){return H.encodedSize(t.value)};a();var Tl=20,Il=21,Sl=22,Ul=23;function br(t,e,r){let n=e.value;if(n===!1)t.push([l.float.majorEncoded|Tl]);else if(n===!0)t.push([l.float.majorEncoded|Il]);else if(n===null)t.push([l.float.majorEncoded|Sl]);else if(n===void 0)t.push([l.float.majorEncoded|Ul]);else{let o,u=!1;(!r||r.float64!==!0)&&(Ss(n),o=Sn(me,1),n===o||Number.isNaN(n)?(me[0]=249,t.push(me.slice(0,3)),u=!0):(Us(n),o=Un(me,1),n===o&&(me[0]=250,t.push(me.slice(0,5)),u=!0))),u||(Fl(n),o=Fs(me,1),me[0]=251,t.push(me.slice(0,9)))}}br.encodedSize=function(t,e){let r=t.value;if(r===!1||r===!0||r===null||r===void 0)return 1;if(!e||e.float64!==!0){Ss(r);let n=Sn(me,1);if(r===n||Number.isNaN(r))return 3;if(Us(r),n=Un(me,1),r===n)return 5}return 9};var Is=new ArrayBuffer(9),fe=new DataView(Is,1),me=new Uint8Array(Is,0);function Ss(t){if(t===1/0)fe.setUint16(0,31744,!1);else if(t===-1/0)fe.setUint16(0,64512,!1);else if(Number.isNaN(t))fe.setUint16(0,32256,!1);else{fe.setFloat32(0,t);let e=fe.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)fe.setUint16(0,31744,!1);else if(r===0)fe.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{let o=r-127;o<-24?fe.setUint16(0,0):o<-14?fe.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):fe.setUint16(0,(e&2147483648)>>16|o+15<<10|n>>13,!1)}}}function Sn(t,e){if(t.length-e<2)throw new Error(`${C} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,o=r&1023,u;return n===0?u=o*2**-24:n!==31?u=(o+1024)*2**(n-25):u=o===0?1/0:NaN,r&32768?-u:u}function Us(t){fe.setFloat32(0,t,!1)}function Un(t,e){if(t.length-e<4)throw new Error(`${C} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function Fl(t){fe.setFloat64(0,t,!1)}function Fs(t,e){if(t.length-e<8)throw new Error(`${C} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}br.compareTokens=ce.compareTokens;for(let t=0;t<24;t++)new b(l.uint,t,1);for(let t=-1;t>=-24;t--)new b(l.negint,t,1);new b(l.bytes,new Uint8Array(0),1);new b(l.string,"",1);new b(l.array,0,1);new b(l.map,0,1);new b(l.false,!1,1);new b(l.true,!0,1);new b(l.null,null,1);function _l(){let t=[];return t[l.uint.major]=ce,t[l.negint.major]=mr,t[l.bytes.major]=wt,t[l.string.major]=os,t[l.array.major]=wr,t[l.map.major]=gr,t[l.tag.major]=Dr,t[l.float.major]=br,t}_l();var bt=class{constructor(t,e){this.obj=t,this.parent=e}includes(t){let e=this;do if(e.obj===t)return!0;while(e=e.parent);return!1}static createCheck(t,e){if(t&&t.includes(e))throw new Error(`${An} object contains circular references`);return new bt(e,t)}},Oe={null:new b(l.null,null),undefined:new b(l.undefined,void 0),true:new b(l.true,!0),false:new b(l.false,!1),emptyArray:new b(l.array,0),emptyMap:new b(l.map,0)},ze={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new b(l.float,t):t>=0?new b(l.uint,t):new b(l.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new b(l.uint,t):new b(l.negint,t)},Uint8Array(t,e,r,n){return new b(l.bytes,t)},string(t,e,r,n){return new b(l.string,t)},boolean(t,e,r,n){return t?Oe.true:Oe.false},null(t,e,r,n){return Oe.null},undefined(t,e,r,n){return Oe.undefined},ArrayBuffer(t,e,r,n){return new b(l.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new b(l.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[Oe.emptyArray,new b(l.break)]:Oe.emptyArray;n=bt.createCheck(n,t);let o=[],u=0;for(let y of t)o[u++]=xr(y,r,n);return r.addBreakTokens?[new b(l.array,t.length),o,new b(l.break)]:[new b(l.array,t.length),o]},Object(t,e,r,n){let o=e!=="Object",u=o?t.keys():Object.keys(t),y=o?t.size:u.length;if(!y)return r.addBreakTokens===!0?[Oe.emptyMap,new b(l.break)]:Oe.emptyMap;n=bt.createCheck(n,t);let h=[],g=0;for(let m of u)h[g++]=[xr(m,r,n),xr(o?t.get(m):t[m],r,n)];return Nl(h,r),r.addBreakTokens?[new b(l.map,y),h,new b(l.break)]:[new b(l.map,y),h]}};ze.Map=ze.Object;ze.Buffer=ze.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))ze[`${t}Array`]=ze.DataView;function xr(t,e={},r){let n=Fi(t),o=e&&e.typeEncoders&&e.typeEncoders[n]||ze[n];if(typeof o=="function"){let y=o(t,n,e,r);if(y!=null)return y}let u=ze[n];if(!u)throw new Error(`${An} unsupported type: ${n}`);return u(t,n,e,r)}function Nl(t,e){e.mapSorter&&t.sort(e.mapSorter)}a();Q();a();a();J(pt(),1);Q();Le();a();a();J(Zs(),1);J(ea(),1);a();a();var ve=class extends Error{constructor(t="request timed out"){super(t),this.name="TimeoutError",this.code=ve.code}};ve.code="ERR_TIMEOUT";a();var Be=J(ca(),1);Re();ht();zn();Be.default.formatters.b=t=>t==null?"undefined":Y.baseEncode(t);Be.default.formatters.t=t=>t==null?"undefined":Me.baseEncode(t);Be.default.formatters.m=t=>t==null?"undefined":Mn.baseEncode(t);Be.default.formatters.p=t=>t==null?"undefined":t.toString();Be.default.formatters.c=t=>t==null?"undefined":t.toString();Be.default.formatters.k=t=>t==null?"undefined":t.toString();function kr(t){return Object.assign((0,Be.default)(t),{error:(0,Be.default)(`${t}:error`),trace:(0,Be.default)(`${t}:trace`)})}qn();Hn();a();Re();kr("ipfs:components:dag:import");a();J(wa(),1);J(Da(),1);a();J(Ku(),1);Q();a();a();a();var ec=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");Ke();fo();var ke="/",tc=new TextEncoder().encode(ke),Vr=tc[0],G=class{constructor(t,e){if(typeof t=="string")this._buf=co(t);else if(t instanceof Uint8Array)this._buf=t;else throw new Error("Invalid key, should be String of Uint8Array");if(e==null&&(e=!0),e&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Vr)throw new Error("Invalid key")}toString(t="utf8"){return so(this._buf,t)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(t){return new G(t.join(ke))}static random(){return new G(ec().replace(/-/g,""))}static asKey(t){return t instanceof Uint8Array||typeof t=="string"?new G(t):t.uint8Array?new G(t.uint8Array()):null}clean(){if((!this._buf||this._buf.byteLength===0)&&(this._buf=tc),this._buf[0]!==Vr){let t=new Uint8Array(this._buf.byteLength+1);t.fill(Vr,0,1),t.set(this._buf,1),this._buf=t}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Vr;)this._buf=this._buf.subarray(0,-1)}less(t){let e=this.list(),r=t.list();for(let n=0;n<e.length;n++){if(r.length<n+1)return!1;let o=e[n],u=r[n];if(o<u)return!0;if(o>u)return!1}return e.length<r.length}reverse(){return G.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let t=this.namespaces();return t[t.length-1]}list(){return this.toString().split(ke).slice(1)}type(){return Lh(this.baseNamespace())}name(){return Ph(this.baseNamespace())}instance(t){return new G(this.toString()+":"+t)}path(){let t=this.parent().toString();return t.endsWith(ke)||(t+=ke),t+=this.type(),new G(t)}parent(){let t=this.list();return t.length===1?new G(ke):new G(t.slice(0,-1).join(ke))}child(t){return this.toString()===ke?t:t.toString()===ke?this:new G(this.toString()+t.toString(),!1)}isAncestorOf(t){return t.toString()===this.toString()?!1:t.toString().startsWith(this.toString())}isDecendantOf(t){return t.toString()===this.toString()?!1:this.toString().startsWith(t.toString())}isTopLevel(){return this.list().length===1}concat(...t){return G.withNamespaces([...this.namespaces(),...Rh(t.map(e=>e.namespaces()))])}};function Lh(t){let e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function Ph(t){let e=t.split(":");return e[e.length-1]}function Rh(t){return[].concat(...t)}J(Yt(),1);a();Q();J(Yt(),1);a();Q();a();new TextDecoder;a();new TextEncoder;a();Q();new TextEncoder;new G("/local/filesroot");J(Yt(),1);a();a();J(hc(),1);J(mc(),1);J(wc(),1);kr("ipfs:components:dag:import");a();Q();a();/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */class JSONEncoder extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===Type.array&&(r.elements++,r.elements!==1&&e.push([44])),r.type===Type.map&&(r.elements++,r.elements!==1&&(r.elements%2===1?e.push([44]):e.push([58]))))}[Type.uint.major](e,r){this.prefix(e);const n=String(r.value),o=[];for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);e.push(o)}[Type.negint.major](e,r){this[Type.uint.major](e,r)}[Type.bytes.major](e,r){throw new Error(`${encodeErrPrefix} unsupported type: Uint8Array`)}[Type.string.major](e,r){this.prefix(e);const n=fromString$7(JSON.stringify(r.value));e.push(n.length>32?asU8A(n):n)}[Type.array.major](e,r){this.prefix(e),this.inRecursive.push({type:Type.array,elements:0}),e.push([91])}[Type.map.major](e,r){this.prefix(e),this.inRecursive.push({type:Type.map,elements:0}),e.push([123])}[Type.tag.major](e,r){}[Type.float.major](e,r){if(r.type.name==="break"){const y=this.inRecursive.pop();if(y){if(y.type===Type.array)e.push([93]);else if(y.type===Type.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${encodeErrPrefix} unsupported type: undefined`);if(this.prefix(e),r.type.name==="true"){e.push([116,114,117,101]);return}else if(r.type.name==="false"){e.push([102,97,108,115,101]);return}else if(r.type.name==="null"){e.push([110,117,108,108]);return}const n=String(r.value),o=[];let u=!1;for(let y=0;y<n.length;y++)o[y]=n.charCodeAt(y),!u&&(o[y]===46||o[y]===101||o[y]===69)&&(u=!0);u||(o.push(46),o.push(48)),e.push(o)}}CID$1.parse;async function*makeIterable(t){let e=0;for(;e<t.length;)yield t[e++]}async function importBuffer(t,e){const r=await makeIterable([e]),[{root:n}]=await itAll(t.import(r));return n.cid}var axios$3={exports:{}},axios$2={exports:{}},bind$2=function t(e,r){return function(){for(var o=new Array(arguments.length),u=0;u<o.length;u++)o[u]=arguments[u];return e.apply(r,o)}},bind$1=bind$2,toString=Object.prototype.toString,kindOf=function(t){return function(e){var r=toString.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function kindOfTest(t){return t=t.toLowerCase(),function(r){return kindOf(r)===t}}function isArray(t){return Array.isArray(t)}function isUndefined(t){return typeof t>"u"}function isBuffer(t){return t!==null&&!isUndefined(t)&&t.constructor!==null&&!isUndefined(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&isArrayBuffer(t.buffer),e}function isString(t){return typeof t=="string"}function isNumber(t){return typeof t=="number"}function isObject(t){return t!==null&&typeof t=="object"}function isPlainObject(t){if(kindOf(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList");function isFunction(t){return toString.call(t)==="[object Function]"}function isStream(t){return isObject(t)&&isFunction(t.pipe)}function isFormData(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||toString.call(t)===e||isFunction(t.toString)&&t.toString()===e)}var isURLSearchParams=kindOfTest("URLSearchParams");function trim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function forEach(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),isArray(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function merge(){var t={};function e(o,u){isPlainObject(t[u])&&isPlainObject(o)?t[u]=merge(t[u],o):isPlainObject(o)?t[u]=merge({},o):isArray(o)?t[u]=o.slice():t[u]=o}for(var r=0,n=arguments.length;r<n;r++)forEach(arguments[r],e);return t}function extend(t,e,r){return forEach(e,function(o,u){r&&typeof o=="function"?t[u]=bind$1(o,r):t[u]=o}),t}function stripBOM(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function inherits(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function toFlatObject(t,e,r){var n,o,u,y={};e=e||{};do{for(n=Object.getOwnPropertyNames(t),o=n.length;o-- >0;)u=n[o],y[u]||(e[u]=t[u],y[u]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function endsWith(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return n!==-1&&n===r}function toArray(t){if(!t)return null;var e=t.length;if(isUndefined(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var isTypedArray=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),utils$b={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,isTypedArray,isFileList},utils$a=utils$b;function encode(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$1=function t(e,r,n){if(!r)return e;var o;if(n)o=n(r);else if(utils$a.isURLSearchParams(r))o=r.toString();else{var u=[];utils$a.forEach(r,function(g,m){g===null||typeof g>"u"||(utils$a.isArray(g)?m=m+"[]":g=[g],utils$a.forEach(g,function(E){utils$a.isDate(E)?E=E.toISOString():utils$a.isObject(E)&&(E=JSON.stringify(E)),u.push(encode(m)+"="+encode(E))}))}),o=u.join("&")}if(o){var y=e.indexOf("#");y!==-1&&(e=e.slice(0,y)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e},utils$9=utils$b;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function t(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function t(e){this.handlers[e]&&(this.handlers[e]=null)};InterceptorManager$1.prototype.forEach=function t(e){utils$9.forEach(this.handlers,function(n){n!==null&&e(n)})};var InterceptorManager_1=InterceptorManager$1,utils$8=utils$b,normalizeHeaderName$1=function t(e,r){utils$8.forEach(e,function(o,u){u!==r&&u.toUpperCase()===r.toUpperCase()&&(e[r]=o,delete e[u])})},utils$7=utils$b;function AxiosError$2(t,e,r,n,o){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o)}utils$7.inherits(AxiosError$2,Error,{toJSON:function t(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var prototype=AxiosError$2.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){descriptors[t]={value:t}});Object.defineProperties(AxiosError$2,descriptors);Object.defineProperty(prototype,"isAxiosError",{value:!0});AxiosError$2.from=function(t,e,r,n,o,u){var y=Object.create(prototype);return utils$7.toFlatObject(t,y,function(g){return g!==Error.prototype}),AxiosError$2.call(y,t.message,e,r,n,o),y.name=t.name,u&&Object.assign(y,u),y};var AxiosError_1=AxiosError$2,transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},utils$6=utils$b;function toFormData$1(t,e){e=e||new FormData;var r=[];function n(u){return u===null?"":utils$6.isDate(u)?u.toISOString():utils$6.isArrayBuffer(u)||utils$6.isTypedArray(u)?typeof Blob=="function"?new Blob([u]):Buffer.from(u):u}function o(u,y){if(utils$6.isPlainObject(u)||utils$6.isArray(u)){if(r.indexOf(u)!==-1)throw Error("Circular reference detected in "+y);r.push(u),utils$6.forEach(u,function(g,m){if(!utils$6.isUndefined(g)){var $=y?y+"."+m:m,E;if(g&&!y&&typeof g=="object"){if(utils$6.endsWith(m,"{}"))g=JSON.stringify(g);else if(utils$6.endsWith(m,"[]")&&(E=utils$6.toArray(g))){E.forEach(function(A){!utils$6.isUndefined(A)&&e.append($,n(A))});return}}o(g,$)}}),r.pop()}else e.append(y,n(u))}return o(t),e}var toFormData_1=toFormData$1,settle,hasRequiredSettle;function requireSettle(){if(hasRequiredSettle)return settle;hasRequiredSettle=1;var t=AxiosError_1;return settle=function(r,n,o){var u=o.config.validateStatus;!o.status||!u||u(o.status)?r(o):n(new t("Request failed with status code "+o.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))},settle}var cookies,hasRequiredCookies;function requireCookies(){if(hasRequiredCookies)return cookies;hasRequiredCookies=1;var t=utils$b;return cookies=t.isStandardBrowserEnv()?function(){return{write:function(n,o,u,y,h,g){var m=[];m.push(n+"="+encodeURIComponent(o)),t.isNumber(u)&&m.push("expires="+new Date(u).toGMTString()),t.isString(y)&&m.push("path="+y),t.isString(h)&&m.push("domain="+h),g===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(n){var o=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cookies}var isAbsoluteURL$1=function t(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},combineURLs$1=function t(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function t(e,r){return e&&!isAbsoluteURL(r)?combineURLs(e,r):r},parseHeaders,hasRequiredParseHeaders;function requireParseHeaders(){if(hasRequiredParseHeaders)return parseHeaders;hasRequiredParseHeaders=1;var t=utils$b,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return parseHeaders=function(n){var o={},u,y,h;return n&&t.forEach(n.split(`
`),function(m){if(h=m.indexOf(":"),u=t.trim(m.substr(0,h)).toLowerCase(),y=t.trim(m.substr(h+1)),u){if(o[u]&&e.indexOf(u)>=0)return;u==="set-cookie"?o[u]=(o[u]?o[u]:[]).concat([y]):o[u]=o[u]?o[u]+", "+y:y}}),o},parseHeaders}var isURLSameOrigin,hasRequiredIsURLSameOrigin;function requireIsURLSameOrigin(){if(hasRequiredIsURLSameOrigin)return isURLSameOrigin;hasRequiredIsURLSameOrigin=1;var t=utils$b;return isURLSameOrigin=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),o;function u(y){var h=y;return r&&(n.setAttribute("href",h),h=n.href),n.setAttribute("href",h),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=u(window.location.href),function(h){var g=t.isString(h)?u(h):h;return g.protocol===o.protocol&&g.host===o.host}}():function(){return function(){return!0}}(),isURLSameOrigin}var CanceledError_1,hasRequiredCanceledError;function requireCanceledError(){if(hasRequiredCanceledError)return CanceledError_1;hasRequiredCanceledError=1;var t=AxiosError_1,e=utils$b;function r(n){t.call(this,n==null?"canceled":n,t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(r,t,{__CANCEL__:!0}),CanceledError_1=r,CanceledError_1}var parseProtocol,hasRequiredParseProtocol;function requireParseProtocol(){return hasRequiredParseProtocol||(hasRequiredParseProtocol=1,parseProtocol=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}),parseProtocol}var xhr,hasRequiredXhr;function requireXhr(){if(hasRequiredXhr)return xhr;hasRequiredXhr=1;var t=utils$b,e=requireSettle(),r=requireCookies(),n=buildURL$1,o=buildFullPath$1,u=requireParseHeaders(),y=requireIsURLSameOrigin(),h=transitional,g=AxiosError_1,m=requireCanceledError(),$=requireParseProtocol();return xhr=function(A){return new Promise(function(T,k){var U=A.data,W=A.headers,te=A.responseType,X;function N(){A.cancelToken&&A.cancelToken.unsubscribe(X),A.signal&&A.signal.removeEventListener("abort",X)}t.isFormData(U)&&t.isStandardBrowserEnv()&&delete W["Content-Type"];var O=new XMLHttpRequest;if(A.auth){var Z=A.auth.username||"",j=A.auth.password?unescape(encodeURIComponent(A.auth.password)):"";W.Authorization="Basic "+btoa(Z+":"+j)}var K=o(A.baseURL,A.url);O.open(A.method.toUpperCase(),n(K,A.params,A.paramsSerializer),!0),O.timeout=A.timeout;function se(){if(!!O){var Ee="getAllResponseHeaders"in O?u(O.getAllResponseHeaders()):null,be=!te||te==="text"||te==="json"?O.responseText:O.response,De={data:be,status:O.status,statusText:O.statusText,headers:Ee,config:A,request:O};e(function(Qe){T(Qe),N()},function(Qe){k(Qe),N()},De),O=null}}if("onloadend"in O?O.onloadend=se:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(se)},O.onabort=function(){!O||(k(new g("Request aborted",g.ECONNABORTED,A,O)),O=null)},O.onerror=function(){k(new g("Network Error",g.ERR_NETWORK,A,O,O)),O=null},O.ontimeout=function(){var be=A.timeout?"timeout of "+A.timeout+"ms exceeded":"timeout exceeded",De=A.transitional||h;A.timeoutErrorMessage&&(be=A.timeoutErrorMessage),k(new g(be,De.clarifyTimeoutError?g.ETIMEDOUT:g.ECONNABORTED,A,O)),O=null},t.isStandardBrowserEnv()){var le=(A.withCredentials||y(K))&&A.xsrfCookieName?r.read(A.xsrfCookieName):void 0;le&&(W[A.xsrfHeaderName]=le)}"setRequestHeader"in O&&t.forEach(W,function(be,De){typeof U>"u"&&De.toLowerCase()==="content-type"?delete W[De]:O.setRequestHeader(De,be)}),t.isUndefined(A.withCredentials)||(O.withCredentials=!!A.withCredentials),te&&te!=="json"&&(O.responseType=A.responseType),typeof A.onDownloadProgress=="function"&&O.addEventListener("progress",A.onDownloadProgress),typeof A.onUploadProgress=="function"&&O.upload&&O.upload.addEventListener("progress",A.onUploadProgress),(A.cancelToken||A.signal)&&(X=function(Ee){!O||(k(!Ee||Ee&&Ee.type?new m:Ee),O.abort(),O=null)},A.cancelToken&&A.cancelToken.subscribe(X),A.signal&&(A.signal.aborted?X():A.signal.addEventListener("abort",X))),U||(U=null);var ye=$(K);if(ye&&["http","https","file"].indexOf(ye)===-1){k(new g("Unsupported protocol "+ye+":",g.ERR_BAD_REQUEST,A));return}O.send(U)})},xhr}var _null,hasRequired_null;function require_null(){return hasRequired_null||(hasRequired_null=1,_null=null),_null}var utils$5=utils$b,normalizeHeaderName=normalizeHeaderName$1,AxiosError$1=AxiosError_1,transitionalDefaults=transitional,toFormData=toFormData_1,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(t,e){!utils$5.isUndefined(t)&&utils$5.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function getDefaultAdapter(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=requireXhr()),t}function stringifySafely(t,e,r){if(utils$5.isString(t))try{return(e||JSON.parse)(t),utils$5.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var defaults$3={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function t(e,r){if(normalizeHeaderName(r,"Accept"),normalizeHeaderName(r,"Content-Type"),utils$5.isFormData(e)||utils$5.isArrayBuffer(e)||utils$5.isBuffer(e)||utils$5.isStream(e)||utils$5.isFile(e)||utils$5.isBlob(e))return e;if(utils$5.isArrayBufferView(e))return e.buffer;if(utils$5.isURLSearchParams(e))return setContentTypeIfUnset(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=utils$5.isObject(e),o=r&&r["Content-Type"],u;if((u=utils$5.isFileList(e))||n&&o==="multipart/form-data"){var y=this.env&&this.env.FormData;return toFormData(u?{"files[]":e}:e,y&&new y)}else if(n||o==="application/json")return setContentTypeIfUnset(r,"application/json"),stringifySafely(e);return e}],transformResponse:[function t(e){var r=this.transitional||defaults$3.transitional,n=r&&r.silentJSONParsing,o=r&&r.forcedJSONParsing,u=!n&&this.responseType==="json";if(u||o&&utils$5.isString(e)&&e.length)try{return JSON.parse(e)}catch(y){if(u)throw y.name==="SyntaxError"?AxiosError$1.from(y,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):y}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:require_null()},validateStatus:function t(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$5.forEach(["delete","get","head"],function t(e){defaults$3.headers[e]={}});utils$5.forEach(["post","put","patch"],function t(e){defaults$3.headers[e]=utils$5.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$3,utils$4=utils$b,defaults$2=defaults_1,transformData$1=function t(e,r,n){var o=this||defaults$2;return utils$4.forEach(n,function(y){e=y.call(o,e,r)}),e},isCancel$1,hasRequiredIsCancel;function requireIsCancel(){return hasRequiredIsCancel||(hasRequiredIsCancel=1,isCancel$1=function(e){return!!(e&&e.__CANCEL__)}),isCancel$1}var utils$3=utils$b,transformData=transformData$1,isCancel=requireIsCancel(),defaults$1=defaults_1,CanceledError=requireCanceledError();function throwIfCancellationRequested(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError}var dispatchRequest$1=function t(e){throwIfCancellationRequested(e),e.headers=e.headers||{},e.data=transformData.call(e,e.data,e.headers,e.transformRequest),e.headers=utils$3.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),utils$3.forEach(["delete","get","head","post","put","patch","common"],function(o){delete e.headers[o]});var r=e.adapter||defaults$1.adapter;return r(e).then(function(o){return throwIfCancellationRequested(e),o.data=transformData.call(e,o.data,o.headers,e.transformResponse),o},function(o){return isCancel(o)||(throwIfCancellationRequested(e),o&&o.response&&(o.response.data=transformData.call(e,o.response.data,o.response.headers,e.transformResponse))),Promise.reject(o)})},utils$2=utils$b,mergeConfig$2=function t(e,r){r=r||{};var n={};function o($,E){return utils$2.isPlainObject($)&&utils$2.isPlainObject(E)?utils$2.merge($,E):utils$2.isPlainObject(E)?utils$2.merge({},E):utils$2.isArray(E)?E.slice():E}function u($){if(utils$2.isUndefined(r[$])){if(!utils$2.isUndefined(e[$]))return o(void 0,e[$])}else return o(e[$],r[$])}function y($){if(!utils$2.isUndefined(r[$]))return o(void 0,r[$])}function h($){if(utils$2.isUndefined(r[$])){if(!utils$2.isUndefined(e[$]))return o(void 0,e[$])}else return o(void 0,r[$])}function g($){if($ in r)return o(e[$],r[$]);if($ in e)return o(void 0,e[$])}var m={url:y,method:y,data:y,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:g};return utils$2.forEach(Object.keys(e).concat(Object.keys(r)),function(E){var A=m[E]||u,B=A(E);utils$2.isUndefined(B)&&A!==g||(n[E]=B)}),n},data,hasRequiredData;function requireData(){return hasRequiredData||(hasRequiredData=1,data={version:"0.27.2"}),data}var VERSION=requireData().version,AxiosError=AxiosError_1,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){validators$1[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var deprecatedWarnings={};validators$1.transitional=function t(e,r,n){function o(u,y){return"[Axios v"+VERSION+"] Transitional option '"+u+"'"+y+(n?". "+n:"")}return function(u,y,h){if(e===!1)throw new AxiosError(o(y," has been removed"+(r?" in "+r:"")),AxiosError.ERR_DEPRECATED);return r&&!deprecatedWarnings[y]&&(deprecatedWarnings[y]=!0,console.warn(o(y," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(u,y,h):!0}};function assertOptions(t,e,r){if(typeof t!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),o=n.length;o-- >0;){var u=n[o],y=e[u];if(y){var h=t[u],g=h===void 0||y(h,u,t);if(g!==!0)throw new AxiosError("option "+u+" must be "+g,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new AxiosError("Unknown option "+u,AxiosError.ERR_BAD_OPTION)}}var validator$1={assertOptions,validators:validators$1},utils$1=utils$b,buildURL=buildURL$1,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,buildFullPath=buildFullPath$1,validator=validator$1,validators=validator.validators;function Axios$1(t){this.defaults=t,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function t(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=mergeConfig$1(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&validator.assertOptions(n,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var o=[],u=!0;this.interceptors.request.forEach(function(B){typeof B.runWhen=="function"&&B.runWhen(r)===!1||(u=u&&B.synchronous,o.unshift(B.fulfilled,B.rejected))});var y=[];this.interceptors.response.forEach(function(B){y.push(B.fulfilled,B.rejected)});var h;if(!u){var g=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(g,o),g=g.concat(y),h=Promise.resolve(r);g.length;)h=h.then(g.shift(),g.shift());return h}for(var m=r;o.length;){var $=o.shift(),E=o.shift();try{m=$(m)}catch(A){E(A);break}}try{h=dispatchRequest(m)}catch(A){return Promise.reject(A)}for(;y.length;)h=h.then(y.shift(),y.shift());return h};Axios$1.prototype.getUri=function t(e){e=mergeConfig$1(this.defaults,e);var r=buildFullPath(e.baseURL,e.url);return buildURL(r,e.params,e.paramsSerializer)};utils$1.forEach(["delete","get","head","options"],function t(e){Axios$1.prototype[e]=function(r,n){return this.request(mergeConfig$1(n||{},{method:e,url:r,data:(n||{}).data}))}});utils$1.forEach(["post","put","patch"],function t(e){function r(n){return function(u,y,h){return this.request(mergeConfig$1(h||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:u,data:y}))}}Axios$1.prototype[e]=r(),Axios$1.prototype[e+"Form"]=r(!0)});var Axios_1=Axios$1,CancelToken_1,hasRequiredCancelToken;function requireCancelToken(){if(hasRequiredCancelToken)return CancelToken_1;hasRequiredCancelToken=1;var t=requireCanceledError();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(y){n=y});var o=this;this.promise.then(function(u){if(!!o._listeners){var y,h=o._listeners.length;for(y=0;y<h;y++)o._listeners[y](u);o._listeners=null}}),this.promise.then=function(u){var y,h=new Promise(function(g){o.subscribe(g),y=g}).then(u);return h.cancel=function(){o.unsubscribe(y)},h},r(function(y){o.reason||(o.reason=new t(y),n(o.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(!!this._listeners){var o=this._listeners.indexOf(n);o!==-1&&this._listeners.splice(o,1)}},e.source=function(){var n,o=new e(function(y){n=y});return{token:o,cancel:n}},CancelToken_1=e,CancelToken_1}var spread,hasRequiredSpread;function requireSpread(){return hasRequiredSpread||(hasRequiredSpread=1,spread=function(e){return function(n){return e.apply(null,n)}}),spread}var isAxiosError,hasRequiredIsAxiosError;function requireIsAxiosError(){if(hasRequiredIsAxiosError)return isAxiosError;hasRequiredIsAxiosError=1;var t=utils$b;return isAxiosError=function(r){return t.isObject(r)&&r.isAxiosError===!0},isAxiosError}var utils=utils$b,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(t){var e=new Axios(t),r=bind(Axios.prototype.request,e);return utils.extend(r,Axios.prototype,e),utils.extend(r,e),r.create=function(o){return createInstance(mergeConfig(t,o))},r}var axios$1=createInstance(defaults);axios$1.Axios=Axios;axios$1.CanceledError=requireCanceledError();axios$1.CancelToken=requireCancelToken();axios$1.isCancel=requireIsCancel();axios$1.VERSION=requireData().version;axios$1.toFormData=toFormData_1;axios$1.AxiosError=AxiosError_1;axios$1.Cancel=axios$1.CanceledError;axios$1.all=function t(e){return Promise.all(e)};axios$1.spread=requireSpread();axios$1.isAxiosError=requireIsAxiosError();axios$2.exports=axios$1;axios$2.exports.default=axios$1;(function(t){t.exports=axios$2.exports})(axios$3);const axios=getDefaultExportFromCjs(axios$3.exports);let GQL_ENDPOINT="https://arweave.net/graphql";const setEndpointUrl=t=>GQL_ENDPOINT=t,run=async(t,e)=>{const r=JSON.stringify({query:t,variables:e}),{data:n}=await axios.post(GQL_ENDPOINT,r,{headers:{"content-type":"application/json"}});return n},all=async(t,e)=>{let r=!0,n=[],o="";for(;r;){const u=(await run(t,{...e,cursor:o})).data.transactions;u.edges&&u.edges.length&&(n=n.concat(u.edges),o=u.edges[u.edges.length-1].cursor),r=u.pageInfo.hasNextPage}return n},backupEndpoint="https://arweave-search.goldsky.com/graphql";async function getOwnerArDag({arweave:t,searchTags:e,dagOwner:r}){const{host:n,port:o,protocol:u}=t.api.config,y=`${u}://${n}:${o}/graphql`;setEndpointUrl(y);const h=`query($cursor: String) {
    transactions(
    owners: ["${r}"]
    tags: [{ name: "App-Name", values: ["ArDag"] }]
    after: $cursor
    first: 100
  ) {
    pageInfo {
      hasNextPage
    }
    edges {
      cursor
      node {
        id
      }
    }
  }
}`;try{return(await all(h)).map(m=>m.node)}catch(g){console.log("ArGQL failed",g),setEndpointUrl(backupEndpoint)}try{return(await all(h)).map(m=>m.node)}catch(g){console.log("ArGQL failed, both gateways down",g)}}const AR_DAG="ArDag";async function persist({buffer:t=null,arweave:e=null,wallet:r=null,tags:n=[]}){if(!t)throw new Error("buffer is required");if(!e){if(!this.arweave)throw new Error("Arweave is required");e=this.arweave}r||this.wallet&&(r=this.wallet);const{root:o}=await Transaction.load(t),{cid:u}=await encode$d(t);let y=await e.createTransaction({data:t});if(n.push({name:"App-Name",value:[AR_DAG]}),n.push({name:"Root-CID",value:[o.toString()]}),n.push({name:"CAR-CID",value:[u.toString()]}),n&&n.length)for(const h of n)y.addTag(h.name.toString(),h.value.toString());return await e.transactions.sign(y,r),await this.post(y),o}async function load({dagOwner:t,dag:e,arweave:r=null}){if(!t)throw new Error("dagOwner is required");if(!e){if(!this.dag)throw new Error("DagRepo is required");e=this.dag}if(!r){if(!this.arweave)throw new Error("Arweave is required");r=this.arweave}const n=[{name:"App-Name",values:[AR_DAG]}];let o=null;try{o=await getOwnerArDag({arweave:r,searchTags:n,dagOwner:t})}catch(h){console.log("ArDag get failed",h)}let u;const y=async(h,g)=>{try{const m=await getData({arweave:r,txid:g.id}),$=await importBuffer(h,m);u||(u=$),h.hasOwnProperty("rootCID")&&!(h!=null&&h.rootCID)&&(h.rootCID=$)}catch(m){console.log("Import failed",m)}};for(const h of o)await y(e,h);return u}async function get({dagOwner:t,tag:e=null,arweave:r=null,cid:n=null}){if(!t)throw new Error("dagOwner is required");r||(this.arweave?r=this.arweave:r=require("arweave").default.init({host:"arweave.net",port:443,protocol:"https",timeout:2e4,logging:!1}));const o=[{name:"App-Name",values:[AR_DAG]}];let u=null;try{u=await getOwnerArDag({arweave:r,searchTags:o,dagOwner:t})}catch(g){console.log("ArDag get failed",g)}if(!u)return null;let y,h=n;for(;!y&&u.length;){let g,m=u.shift().id;try{g=await getData({arweave:r,txid:m})}catch(B){if(console.log("get Data txid failed",{txid:m},B),!g)continue}const{root:$,get:E}=await Transaction.load(g),A=await E($);if(!e&&!n)return A;e&&A.hasOwnProperty(e)&&!h&&(h=A[e].obj);try{y=await E(h)}catch{}}return y}async function latest(t){return(await this.dag.get(this.rootCID,{path:`/${t}/obj`})).value}async function getInstance({dag:t,wallet:e=null,dagOwner:r=!1}){if(!t)throw new Error("Supply a DagRepo from https://github.com/DougAnderson444/ipld-car-txs");return r?this.rootCID=await this.load({dag:t,dagOwner:r}):r=await this.arweave.wallets.jwkToAddress(e),{arweave:this.arweave,post:this.post,dagOwner:r,wallet:e,dag:t,load,rootCID:this.rootCID||null,latest,persist,async save(n,o,{tags:u}={tags:[]}){const y=await this.dag.tx.add(n,o);this.rootCID=y;const h=await this.dag.tx.commit();return await this.persist({buffer:h,tags:u}),y}}}function initializeArDag({arweave:t,post:e=null}){if(!t)throw new Error("Arweave instance must be provided");const n=t.transactions.post.bind(t.transactions);return{arweave:t,post:e||n,getData,getInstance,persist,get,load}}async function getData({arweave:t=null,txid:e}){if(!e)throw new Error("txid is required");if(!t){if(!this.arweave)throw new Error("Arweave is required");t=this.arweave}try{let r=await t.api.get(`/${e}`,{responseType:"arraybuffer"});if(r.status>=200&&r.status<300)return new Uint8Array(r.data)}catch(r){console.log("get Data failed",{txid:e},r)}}var sha256={},binary={},int={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(h,g){var m=h>>>16&65535,$=h&65535,E=g>>>16&65535,A=g&65535;return $*A+(m*A+$*E<<16>>>0)|0}t.mul=Math.imul||e;function r(h,g){return h+g|0}t.add=r;function n(h,g){return h-g|0}t.sub=n;function o(h,g){return h<<g|h>>>32-g}t.rotl=o;function u(h,g){return h<<32-g|h>>>g}t.rotr=u;function y(h){return typeof h=="number"&&isFinite(h)&&Math.floor(h)===h}t.isInteger=Number.isInteger||y,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(h){return t.isInteger(h)&&h>=-t.MAX_SAFE_INTEGER&&h<=t.MAX_SAFE_INTEGER}})(int);Object.defineProperty(binary,"__esModule",{value:!0});var int_1=int;function readInt16BE(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}binary.readInt16BE=readInt16BE;function readUint16BE(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}binary.readUint16BE=readUint16BE;function readInt16LE(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}binary.readInt16LE=readInt16LE;function readUint16LE(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}binary.readUint16LE=readUint16LE;function writeUint16BE(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}binary.writeUint16BE=writeUint16BE;binary.writeInt16BE=writeUint16BE;function writeUint16LE(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}binary.writeUint16LE=writeUint16LE;binary.writeInt16LE=writeUint16LE;function readInt32BE(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}binary.readInt32BE=readInt32BE;function readUint32BE(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}binary.readUint32BE=readUint32BE;function readInt32LE(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}binary.readInt32LE=readInt32LE;function readUint32LE(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}binary.readUint32LE=readUint32LE;function writeUint32BE(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}binary.writeUint32BE=writeUint32BE;binary.writeInt32BE=writeUint32BE;function writeUint32LE(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}binary.writeUint32LE=writeUint32LE;binary.writeInt32LE=writeUint32LE;function readInt64BE(t,e){e===void 0&&(e=0);var r=readInt32BE(t,e),n=readInt32BE(t,e+4);return r*4294967296+n-(n>>31)*4294967296}binary.readInt64BE=readInt64BE;function readUint64BE(t,e){e===void 0&&(e=0);var r=readUint32BE(t,e),n=readUint32BE(t,e+4);return r*4294967296+n}binary.readUint64BE=readUint64BE;function readInt64LE(t,e){e===void 0&&(e=0);var r=readInt32LE(t,e),n=readInt32LE(t,e+4);return n*4294967296+r-(r>>31)*4294967296}binary.readInt64LE=readInt64LE;function readUint64LE(t,e){e===void 0&&(e=0);var r=readUint32LE(t,e),n=readUint32LE(t,e+4);return n*4294967296+r}binary.readUint64LE=readUint64LE;function writeUint64BE(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),writeUint32BE(t/4294967296>>>0,e,r),writeUint32BE(t>>>0,e,r+4),e}binary.writeUint64BE=writeUint64BE;binary.writeInt64BE=writeUint64BE;function writeUint64LE(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),writeUint32LE(t>>>0,e,r),writeUint32LE(t/4294967296>>>0,e,r+4),e}binary.writeUint64LE=writeUint64LE;binary.writeInt64LE=writeUint64LE;function readUintBE(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,o=1,u=t/8+r-1;u>=r;u--)n+=e[u]*o,o*=256;return n}binary.readUintBE=readUintBE;function readUintLE(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,o=1,u=r;u<r+t/8;u++)n+=e[u]*o,o*=256;return n}binary.readUintLE=readUintLE;function writeUintBE(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,u=t/8+n-1;u>=n;u--)r[u]=e/o&255,o*=256;return r}binary.writeUintBE=writeUintBE;function writeUintLE(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,u=n;u<n+t/8;u++)r[u]=e/o&255,o*=256;return r}binary.writeUintLE=writeUintLE;function readFloat32BE(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}binary.readFloat32BE=readFloat32BE;function readFloat32LE(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}binary.readFloat32LE=readFloat32LE;function readFloat64BE(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}binary.readFloat64BE=readFloat64BE;function readFloat64LE(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}binary.readFloat64LE=readFloat64LE;function writeFloat32BE(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}binary.writeFloat32BE=writeFloat32BE;function writeFloat32LE(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}binary.writeFloat32LE=writeFloat32LE;function writeFloat64BE(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}binary.writeFloat64BE=writeFloat64BE;function writeFloat64LE(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}binary.writeFloat64LE=writeFloat64LE;var wipe$1={};Object.defineProperty(wipe$1,"__esModule",{value:!0});function wipe(t){for(var e=0;e<t.length;e++)t[e]=0;return t}wipe$1.wipe=wipe;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=binary,r=wipe$1;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function h(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return h.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},h.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},h.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},h.prototype.update=function(g,m){if(m===void 0&&(m=g.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var $=0;if(this._bytesHashed+=m,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&m>0;)this._buffer[this._bufferLength++]=g[$++],m--;this._bufferLength===this.blockSize&&(u(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(m>=this.blockSize&&($=u(this._temp,this._state,g,$,m),m%=this.blockSize);m>0;)this._buffer[this._bufferLength++]=g[$++],m--;return this},h.prototype.finish=function(g){if(!this._finished){var m=this._bytesHashed,$=this._bufferLength,E=m/536870912|0,A=m<<3,B=m%64<56?64:128;this._buffer[$]=128;for(var T=$+1;T<B-8;T++)this._buffer[T]=0;e.writeUint32BE(E,this._buffer,B-8),e.writeUint32BE(A,this._buffer,B-4),u(this._temp,this._state,this._buffer,0,B),this._finished=!0}for(var T=0;T<this.digestLength/4;T++)e.writeUint32BE(this._state[T],g,T*4);return this},h.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},h.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},h.prototype.restoreState=function(g){return this._state.set(g.state),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},h.prototype.cleanSavedState=function(g){r.wipe(g.state),g.buffer&&r.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},h}();t.SHA256=n;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function u(h,g,m,$,E){for(;E>=64;){for(var A=g[0],B=g[1],T=g[2],k=g[3],U=g[4],W=g[5],te=g[6],X=g[7],N=0;N<16;N++){var O=$+N*4;h[N]=e.readUint32BE(m,O)}for(var N=16;N<64;N++){var Z=h[N-2],j=(Z>>>17|Z<<32-17)^(Z>>>19|Z<<32-19)^Z>>>10;Z=h[N-15];var K=(Z>>>7|Z<<32-7)^(Z>>>18|Z<<32-18)^Z>>>3;h[N]=(j+h[N-7]|0)+(K+h[N-16]|0)}for(var N=0;N<64;N++){var j=(((U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7))+(U&W^~U&te)|0)+(X+(o[N]+h[N]|0)|0)|0,K=((A>>>2|A<<32-2)^(A>>>13|A<<32-13)^(A>>>22|A<<32-22))+(A&B^A&T^B&T)|0;X=te,te=W,W=U,U=k+j|0,k=T,T=B,B=A,A=j+K|0}g[0]+=A,g[1]+=B,g[2]+=T,g[3]+=k,g[4]+=U,g[5]+=W,g[6]+=te,g[7]+=X,$+=64,E-=64}return $}function y(h){var g=new n;g.update(h);var m=g.digest();return g.clean(),m}t.hash=y})(sha256);function getArweaveAddress(t){const e=decodeURLSafe_1(t.n),r=sha256.hash(e);return encodeURLSafe_1(new Uint8Array(r)).replace("=","")}function isDID(t){const e=typeof t=="string"&&t.startsWith("did:ar");return console.log("isDID",e),e}function isAddress(t){return typeof t=="string"&&t.length===43}async function fromDid(t){const e=await init({inMemory:!0});return console.log("arnsInstance",e),await e.resolveDID(t)}const arweaveConfig={host:"arweave.net",port:443,protocol:"https",timeout:2e4,logging:!1};function create_if_block(t){let e,r,n,o;const u=[create_if_block_1,create_else_block],y=[];function h(g,m){var $,E;return(E=($=g[1])==null?void 0:$.meta)!=null&&E.networkRequired?0:1}return e=h(t),r=y[e]=u[e](t),{c(){r.c(),n=empty$1()},l(g){r.l(g),n=empty$1()},m(g,m){y[e].m(g,m),insert_hydration(g,n,m),o=!0},p(g,m){let $=e;e=h(g),e===$?y[e].p(g,m):(group_outros(),transition_out(y[$],1,1,()=>{y[$]=null}),check_outros(),r=y[e],r?r.p(g,m):(r=y[e]=u[e](g),r.c()),transition_in(r,1),r.m(n.parentNode,n))},i(g){o||(transition_in(r),o=!0)},o(g){transition_out(r),o=!1},d(g){y[e].d(g),g&&detach(n)}}}function create_else_block(t){let e,r,n;var o=t[0];function u(y){return{props:{esModule:y[2],props:y[3]}}}return o&&(e=construct_svelte_component(o,u(t)),e.$on("change",t[10])),{c(){e&&create_component(e.$$.fragment),r=empty$1()},l(y){e&&claim_component(e.$$.fragment,y),r=empty$1()},m(y,h){e&&mount_component(e,y,h),insert_hydration(y,r,h),n=!0},p(y,h){const g={};if(h&4&&(g.esModule=y[2]),h&8&&(g.props=y[3]),o!==(o=y[0])){if(e){group_outros();const m=e;transition_out(m.$$.fragment,1,0,()=>{destroy_component(m,1)}),check_outros()}o?(e=construct_svelte_component(o,u(y)),e.$on("change",y[10]),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,r.parentNode,r)):e=null}else o&&e.$set(g)},i(y){n||(e&&transition_in(e.$$.fragment,y),n=!0)},o(y){e&&transition_out(e.$$.fragment,y),n=!1},d(y){y&&detach(r),e&&destroy_component(e,y)}}}function create_if_block_1(t){let e,r;return e=new Mount({props:{src:t[2],props:t[3]}}),e.$on("change",t[8]),e.$on("target",t[9]),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,o){mount_component(e,n,o),r=!0},p(n,o){const u={};o&4&&(u.src=n[2]),o&8&&(u.props=n[3]),e.$set(u)},i(n){r||(transition_in(e.$$.fragment,n),r=!0)},o(n){transition_out(e.$$.fragment,n),r=!1},d(n){destroy_component(e,n)}}}function create_fragment$1(t){let e,r,n=t[0]&&(t[2]||t[3]&&t[2])&&create_if_block(t);return{c(){n&&n.c(),e=empty$1()},l(o){n&&n.l(o),e=empty$1()},m(o,u){n&&n.m(o,u),insert_hydration(o,e,u),r=!0},p(o,[u]){o[0]&&(o[2]||o[3]&&o[2])?n?(n.p(o,u),u&13&&transition_in(n,1)):(n=create_if_block(o),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(o){r||(transition_in(n),r=!0)},o(o){transition_out(n),r=!1},d(o){n&&n.d(o),o&&detach(e)}}}function instance$1(t,e,r){let{namespace:n}=e,{tag:o}=e,{arweave:u=null}=e,{arweaveConfig:y=arweaveConfig}=e,h,g,m,$,E,A;onMount(async()=>{var X,N;const U=new RegExp("^[a-zA-Z0-9_-]+$");if(!new RegExp("^.*(^[^/]+.ar|^[^/]+.arweave.dev|^[a-zA-Z0-9_-]{43}|^did:ar.*:[a-zA-Z0-9_-]{43})$").test(n)&&!U.test(n))throw new Error(`Invalid namespace: ${n}. Must be a valid arweave address, name.ar, name.arweave.dev address, or did:ar address.`);if(r(0,{Gateway:m}=await __vitePreload(()=>import("./index-fbc332eb.js"),["./index-fbc332eb.js","./index-c8a32f33.js","./preload-helper-b21cceae.js","..\\assets\\index-e1bedd54.css"],import.meta.url),m),!h&&!globalThis.dag){const{createDagRepo:O}=await __vitePreload(()=>import("./index-724ee7db.js"),["./index-724ee7db.js","./browser-763f2d67.js"],import.meta.url);h=await O({persist:!1}),globalThis.dag=h}else h=globalThis.dag;let te;if(isAddress(n))te=[n];else{let O;try{O=isDID(n)?await fromDid(n):await arnsResolver(n.replace(/\.ar$|\.arweave\.dev$/,""))}catch(j){console.log("Failed to resolve",n,j)}const Z=O.verificationMethod.filter(j=>j.publicKeyJwk.kty==="RSA");if(!Z.length)throw new Error("No RSA keys found in DID document");te=Z.map(j=>getArweaveAddress(j.publicKeyJwk))}r(4,u=u||Arweave.init(y)),g=initializeArDag({arweave:u});for(const O of te)try{r(1,$=await g.get({dagOwner:O,tag:o})),console.log("tagNode",{tagNode:$},{ardag:g}),r(2,E=((X=await g.get({dagOwner:O,cid:$.compiled}))==null?void 0:X.value)||null),r(3,A=((N=await g.get({dagOwner:O,cid:$.data}))==null?void 0:N.value)||null);break}catch(Z){console.log(`No ArDag on address ${O}`,Z)}});function B(U){bubble.call(this,t,U)}function T(U){bubble.call(this,t,U)}function k(U){bubble.call(this,t,U)}return t.$$set=U=>{"namespace"in U&&r(5,n=U.namespace),"tag"in U&&r(6,o=U.tag),"arweave"in U&&r(4,u=U.arweave),"arweaveConfig"in U&&r(7,y=U.arweaveConfig)},[m,$,E,A,u,n,o,y,B,T,k]}class DirectTag extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$1,create_fragment$1,safe_not_equal,{namespace:5,tag:6,arweave:4,arweaveConfig:7})}}function create_fragment(t){let e,r;return e=new DirectTag({props:{namespace:t[0],tag:t[1]}}),e.$on("target",t[2]),e.$on("change",t[3]),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,o){mount_component(e,n,o),r=!0},p(n,[o]){const u={};o&1&&(u.namespace=n[0]),o&2&&(u.tag=n[1]),e.$set(u)},i(n){r||(transition_in(e.$$.fragment,n),r=!0)},o(n){transition_out(e.$$.fragment,n),r=!1},d(n){destroy_component(e,n)}}}function instance(t,e,r){let{namespace:n="douganderson444"}=e,{tag:o="PeerPiper-Web3-Wallet-Connector"}=e;function u(h){bubble.call(this,t,h)}function y(h){bubble.call(this,t,h)}return t.$$set=h=>{"namespace"in h&&r(0,n=h.namespace),"tag"in h&&r(1,o=h.tag)},[n,o,u,y]}class Page extends SvelteComponent{constructor(e){super(),init$1(this,e,instance,create_fragment,safe_not_equal,{namespace:0,tag:1})}}export{Page as P,bignumber as a,base64Js$1 as b,commonjsGlobal as c,axios$6 as d,getAugmentedNamespace as e,requireInherits_browser as f,getDefaultExportFromCjs as g,requireUtil as r,web as w};

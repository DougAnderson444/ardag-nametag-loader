import{I as identity$a,S as SvelteComponent,i as init$1,s as safe_not_equal,k as element,l as claim_element,m as children,h as detach,n as attr,b as insert_hydration,B as noop$3,J as svg_element,K as claim_svg_element,G as append_hydration,L as listen,M as run_all,C as create_slot,a as space,c as claim_space,f as transition_in,g as group_outros,t as transition_out,d as check_outros,D as update_slot_base,E as get_all_dirty_from_scope,F as get_slot_changes,N as binding_callbacks,O as bind$3,w as create_component,x as claim_component,p as set_style,y as mount_component,P as add_flush_callback,Q as create_out_transition,z as destroy_component,R as createEventDispatcher,o as onMount,e as empty$1,T as bubble,v as construct_svelte_component}from"./index-a6d898a6.js";import{_ as __vitePreload}from"./preload-helper-b21cceae.js";function fade(t,{delay:e=0,duration:r=400,easing:n=identity$a}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:n,css:s=>`opacity: ${s*o}`}}const ToolTip_svelte_svelte_type_style_lang="";function create_else_block$1(t){let e,r,n,o,s;return{c(){e=element("div"),r=svg_element("svg"),n=svg_element("path"),this.h()},l(u){e=claim_element(u,"DIV",{class:!0,title:!0});var c=children(e);r=claim_svg_element(c,"svg",{width:!0,height:!0,xmlns:!0});var h=children(r);n=claim_svg_element(h,"path",{d:!0}),children(n).forEach(detach),h.forEach(detach),c.forEach(detach),this.h()},h(){attr(n,"d","M16 2H8C6 2 5 3 5 5v17h2l5-3 6 3 1-1V5c0-2-1-3-3-3z"),attr(r,"width","24"),attr(r,"height","24"),attr(r,"xmlns","http://www.w3.org/2000/svg"),attr(e,"class","h-6 w-6 m-2"),attr(e,"title","Remove Bookmark")},m(u,c){insert_hydration(u,e,c),append_hydration(e,r),append_hydration(r,n),o||(s=[listen(e,"click",t[1]),listen(e,"keypress",t[1])],o=!0)},p:noop$3,d(u){u&&detach(e),o=!1,run_all(s)}}}function create_if_block$2(t){let e,r,n,o,s;return{c(){e=element("div"),r=svg_element("svg"),n=svg_element("path"),this.h()},l(u){e=claim_element(u,"DIV",{class:!0,title:!0});var c=children(e);r=claim_svg_element(c,"svg",{xmlns:!0,viewBox:!0,"xml:space":!0});var h=children(r);n=claim_svg_element(h,"path",{d:!0}),children(n).forEach(detach),h.forEach(detach),c.forEach(detach),this.h()},h(){attr(n,"d","M265 0H65c-8 0-15 7-15 15v300a15 15 0 0 0 24 12l91-73 91 73a15 15 0 0 0 24-12V15c0-8-7-15-15-15zm-15 284-76-61c-2-2-6-3-9-3s-7 1-9 3l-76 61V30h170v254z"),attr(r,"xmlns","http://www.w3.org/2000/svg"),attr(r,"viewBox","0 0 330 330"),attr(r,"xml:space","preserve"),attr(e,"class","h-6 w-6 m-2"),attr(e,"title","Save for Later")},m(u,c){insert_hydration(u,e,c),append_hydration(e,r),append_hydration(r,n),o||(s=[listen(e,"click",t[1]),listen(e,"keypress",t[1])],o=!0)},p:noop$3,d(u){u&&detach(e),o=!1,run_all(s)}}}function create_fragment$7(t){let e;function r(s,u){return s[0]?create_else_block$1:create_if_block$2}let n=r(t),o=n(t);return{c(){e=element("div"),o.c(),this.h()},l(s){e=claim_element(s,"DIV",{class:!0});var u=children(e);o.l(u),u.forEach(detach),this.h()},h(){attr(e,"class","relative right-0")},m(s,u){insert_hydration(s,e,u),o.m(e,null)},p(s,[u]){n===(n=r(s))&&o?o.p(s,u):(o.d(1),o=n(s),o&&(o.c(),o.m(e,null)))},i:noop$3,o:noop$3,d(s){s&&detach(e),o.d()}}}function instance$6(t,e,r){let{link:n}=e,{bookmarked:o=!1}=e;function s(u){r(0,o=!o)}return t.$$set=u=>{"link"in u&&r(2,n=u.link),"bookmarked"in u&&r(0,o=u.bookmarked)},[o,s,n]}class BookMarked extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$6,create_fragment$7,safe_not_equal,{link:2,bookmarked:0})}}function create_fragment$6(t){let e,r,n;return{c(){e=element("div"),r=svg_element("svg"),n=svg_element("path"),this.h()},l(o){e=claim_element(o,"DIV",{class:!0,title:!0});var s=children(e);r=claim_svg_element(s,"svg",{xmlns:!0,viewBox:!0,"xml:space":!0});var u=children(r);n=claim_svg_element(u,"path",{d:!0}),children(n).forEach(detach),u.forEach(detach),s.forEach(detach),this.h()},h(){attr(n,"d","M326 85 245 4c-2-2-6-4-10-4H15C7 0 0 7 0 15v300c0 8 7 15 15 15h300c8 0 15-7 15-15V95c0-4-2-8-4-10zM90 30h30v40a15 15 0 0 0 30 0V30h30v80H90V30zm150 210H90v-30h150v30zM90 300v-30h150v30H90zm210 0h-30V195c0-8-7-15-15-15H75c-8 0-15 7-15 15v105H30V30h30v95c0 8 7 15 15 15h120c8 0 15-7 15-15V30h19l71 71v199z"),attr(r,"xmlns","http://www.w3.org/2000/svg"),attr(r,"viewBox","0 0 330 330"),attr(r,"xml:space","preserve"),attr(e,"class","m-2 h-6 w-6"),attr(e,"title","Save Your Data")},m(o,s){insert_hydration(o,e,s),append_hydration(e,r),append_hydration(r,n)},p:noop$3,i:noop$3,o:noop$3,d(o){o&&detach(e)}}}function instance$5(t,e,r){let{link:n}=e,{bookmarked:o=!1}=e;return t.$$set=s=>{"link"in s&&r(1,n=s.link),"bookmarked"in s&&r(0,o=s.bookmarked)},[o,n]}class Save extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$5,create_fragment$6,safe_not_equal,{link:1,bookmarked:0})}}function create_fragment$5(t){let e,r,n,o;return{c(){e=element("div"),r=svg_element("svg"),n=svg_element("path"),o=svg_element("path"),this.h()},l(s){e=claim_element(s,"DIV",{class:!0,title:!0});var u=children(e);r=claim_svg_element(u,"svg",{xmlns:!0,viewBox:!0,"xml:space":!0});var c=children(r);n=claim_svg_element(c,"path",{d:!0}),children(n).forEach(detach),o=claim_svg_element(c,"path",{d:!0}),children(o).forEach(detach),c.forEach(detach),u.forEach(detach),this.h()},h(){attr(n,"d","m265 23-10-9a56 56 0 0 0-78 5l-29 32c-6 7-5 18 2 24l2 3c8 6 19 5 25-2l28-32c7-7 18-7 25-1l10 9c7 6 7 17 1 24l-62 70c-5 6-14 7-21 3-7-3-17-2-22 5h-1a19 19 0 0 0 6 30 56 56 0 0 0 67-13l62-70c20-23 18-58-5-78z"),attr(o,"d","m134 209-3-3c-7-6-18-5-24 2l-29 32c-6 7-17 7-24 1l-10-9c-7-6-8-17-1-24l62-70c5-6 13-7 20-4 8 4 18 2 24-4v-1a18 18 0 0 0-5-28c-23-13-51-8-68 12l-62 69a56 56 0 0 0 5 79l10 9a55 55 0 0 0 78-5l28-32c7-7 6-18-1-24z"),attr(r,"xmlns","http://www.w3.org/2000/svg"),attr(r,"viewBox","0 0 283.8 283.8"),attr(r,"xml:space","preserve"),attr(e,"class","h-6 w-6 m-2"),attr(e,"title","Open App in New Window")},m(s,u){insert_hydration(s,e,u),append_hydration(e,r),append_hydration(r,n),append_hydration(r,o)},p:noop$3,i:noop$3,o:noop$3,d(s){s&&detach(e)}}}function instance$4(t,e,r){let{link:n}=e,{bookmarked:o=!1}=e;return t.$$set=s=>{"link"in s&&r(1,n=s.link),"bookmarked"in s&&r(0,o=s.bookmarked)},[o,n]}class Link extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$4,create_fragment$5,safe_not_equal,{link:1,bookmarked:0})}}function create_fragment$4(t){let e,r,n;return{c(){e=element("div"),r=svg_element("svg"),n=svg_element("path"),this.h()},l(o){e=claim_element(o,"DIV",{class:!0,title:!0});var s=children(e);r=claim_svg_element(s,"svg",{xmlns:!0,viewBox:!0,"xml:space":!0});var u=children(r);n=claim_svg_element(u,"path",{d:!0}),children(n).forEach(detach),u.forEach(detach),s.forEach(detach),this.h()},h(){attr(n,"d","M491 85h-64V21c0-11-10-21-22-21H21C10 0 0 10 0 21v427c0 12 10 21 21 21h64v22c0 11 10 21 22 21h384c11 0 21-10 21-21V107c0-12-10-22-21-22zM85 107v320H43V43h341v42H107c-12 0-22 10-22 22zm320 213h-85v85a21 21 0 1 1-43 0v-85h-85a21 21 0 1 1 0-43h85v-85a21 21 0 1 1 43 0v85h85a21 21 0 1 1 0 43z"),attr(r,"xmlns","http://www.w3.org/2000/svg"),attr(r,"viewBox","0 0 512 512"),attr(r,"xml:space","preserve"),attr(e,"class","h-6 w-6 m-2"),attr(e,"title","Copy App to you page")},m(o,s){insert_hydration(o,e,s),append_hydration(e,r),append_hydration(r,n)},p:noop$3,i:noop$3,o:noop$3,d(o){o&&detach(e)}}}class CopyApp extends SvelteComponent{constructor(e){super(),init$1(this,e,null,create_fragment$4,safe_not_equal,{})}}const get_default_slot_changes=t=>({}),get_default_slot_context=t=>({handleTarget:t[8]});function create_if_block$1(t){let e,r,n,o,s,u,c,h,w,m,v,E,O;function $(B){t[13](B)}let k={link:t[1]};return t[0]!==void 0&&(k.bookmarked=t[0]),r=new BookMarked({props:k}),binding_callbacks.push(()=>bind$3(r,"bookmarked",$)),s=new CopyApp({props:{link:t[1]}}),c=new Link({}),w=new Save({}),{c(){e=element("div"),create_component(r.$$.fragment),o=space(),create_component(s.$$.fragment),u=space(),create_component(c.$$.fragment),h=space(),create_component(w.$$.fragment),this.h()},l(B){e=claim_element(B,"DIV",{class:!0});var j=children(e);claim_component(r.$$.fragment,j),o=claim_space(j),claim_component(s.$$.fragment,j),u=claim_space(j),claim_component(c.$$.fragment,j),h=claim_space(j),claim_component(w.$$.fragment,j),j.forEach(detach),this.h()},h(){attr(e,"class","flex flex-row absolute"),set_style(e,"position",t[5]),set_style(e,"top",t[6]),set_style(e,"left",t[7])},m(B,j){insert_hydration(B,e,j),mount_component(r,e,null),append_hydration(e,o),mount_component(s,e,null),append_hydration(e,u),mount_component(c,e,null),append_hydration(e,h),mount_component(w,e,null),t[14](e),v=!0,E||(O=[listen(e,"mouseleave",t[10]),listen(e,"mouseout",t[10]),listen(e,"blur",t[10]),listen(e,"mouseover",t[9]),listen(e,"focus",t[9])],E=!0)},p(B,j){const ie={};j&2&&(ie.link=B[1]),!n&&j&1&&(n=!0,ie.bookmarked=B[0],add_flush_callback(()=>n=!1)),r.$set(ie);const se={};j&2&&(se.link=B[1]),s.$set(se),j&32&&set_style(e,"position",B[5]),j&64&&set_style(e,"top",B[6]),j&128&&set_style(e,"left",B[7])},i(B){v||(transition_in(r.$$.fragment,B),transition_in(s.$$.fragment,B),transition_in(c.$$.fragment,B),transition_in(w.$$.fragment,B),m&&m.end(1),v=!0)},o(B){transition_out(r.$$.fragment,B),transition_out(s.$$.fragment,B),transition_out(c.$$.fragment,B),transition_out(w.$$.fragment,B),m=create_out_transition(e,fade,{duration:3e3}),v=!1},d(B){B&&detach(e),destroy_component(r),destroy_component(s),destroy_component(c),destroy_component(w),t[14](null),B&&m&&m.end(),E=!1,run_all(O)}}}function create_fragment$3(t){let e,r,n,o,s,u=t[4]&&create_if_block$1(t);const c=t[12].default,h=create_slot(c,t,t[11],get_default_slot_context);return{c(){u&&u.c(),e=space(),r=element("div"),h&&h.c()},l(w){u&&u.l(w),e=claim_space(w),r=claim_element(w,"DIV",{});var m=children(r);h&&h.l(m),m.forEach(detach)},m(w,m){u&&u.m(w,m),insert_hydration(w,e,m),insert_hydration(w,r,m),h&&h.m(r,null),t[15](r),n=!0,o||(s=[listen(r,"mouseover",t[9]),listen(r,"focus",t[9]),listen(r,"mouseout",t[10]),listen(r,"blur",t[10])],o=!0)},p(w,[m]){w[4]?u?(u.p(w,m),m&16&&transition_in(u,1)):(u=create_if_block$1(w),u.c(),transition_in(u,1),u.m(e.parentNode,e)):u&&(group_outros(),transition_out(u,1,1,()=>{u=null}),check_outros()),h&&h.p&&(!n||m&2048)&&update_slot_base(h,c,w,w[11],n?get_slot_changes(c,w[11],m,get_default_slot_changes):get_all_dirty_from_scope(w[11]),get_default_slot_context)},i(w){n||(transition_in(u),transition_in(h,w),n=!0)},o(w){transition_out(u),transition_out(h,w),n=!1},d(w){u&&u.d(w),w&&detach(e),w&&detach(r),h&&h.d(w),t[15](null),o=!1,run_all(s)}}}function instance$3(t,e,r){let{$$slots:n={},$$scope:o}=e,{link:s}=e,{bookmarked:u=!1}=e,c,h,w=!1,m,v,E,O=null;async function $(N){console.log("e",N.detail.children[0]),O=N.detail.children[0]}function k(N){var L,oe,q;O&&r(5,m=((L=window==null?void 0:window.getComputedStyle(O))==null?void 0:L.position)||"absolute"),O&&r(6,v=(((oe=O.getBoundingClientRect())==null?void 0:oe.top)||0)-(c==null?void 0:c.offsetHeight)+"px"),O&&r(7,E=(((q=O.getBoundingClientRect())==null?void 0:q.right)||0)+"px"),r(4,w=!0)}function B(N){r(4,w=!1)}function j(N){u=N,r(0,u)}function ie(N){binding_callbacks[N?"unshift":"push"](()=>{c=N,r(2,c)})}function se(N){binding_callbacks[N?"unshift":"push"](()=>{h=N,r(3,h)})}return t.$$set=N=>{"link"in N&&r(1,s=N.link),"bookmarked"in N&&r(0,u=N.bookmarked),"$$scope"in N&&r(11,o=N.$$scope)},[u,s,c,h,w,m,v,E,$,k,B,o,n,j,ie,se]}class MenuWrapper extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$3,create_fragment$3,safe_not_equal,{link:1,bookmarked:0})}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){var e=t.default;if(typeof e=="function"){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}),r}var base64$9={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)o.hasOwnProperty(s)&&(n[s]=o[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(base64$9,"__esModule",{value:!0});var INVALID_BYTE=256,Coder=function(){function t(e){e===void 0&&(e="="),this._paddingCharacter=e}return t.prototype.encodedLength=function(e){return this._paddingCharacter?(e+2)/3*4|0:(e*8+5)/6|0},t.prototype.encode=function(e){for(var r="",n=0;n<e.length-2;n+=3){var o=e[n]<<16|e[n+1]<<8|e[n+2];r+=this._encodeByte(o>>>3*6&63),r+=this._encodeByte(o>>>2*6&63),r+=this._encodeByte(o>>>1*6&63),r+=this._encodeByte(o>>>0*6&63)}var s=e.length-n;if(s>0){var o=e[n]<<16|(s===2?e[n+1]<<8:0);r+=this._encodeByte(o>>>3*6&63),r+=this._encodeByte(o>>>2*6&63),s===2?r+=this._encodeByte(o>>>1*6&63):r+=this._paddingCharacter||"",r+=this._paddingCharacter||""}return r},t.prototype.maxDecodedLength=function(e){return this._paddingCharacter?e/4*3|0:(e*6+7)/8|0},t.prototype.decodedLength=function(e){return this.maxDecodedLength(e.length-this._getPaddingLength(e))},t.prototype.decode=function(e){if(e.length===0)return new Uint8Array(0);for(var r=this._getPaddingLength(e),n=e.length-r,o=new Uint8Array(this.maxDecodedLength(n)),s=0,u=0,c=0,h=0,w=0,m=0,v=0;u<n-4;u+=4)h=this._decodeChar(e.charCodeAt(u+0)),w=this._decodeChar(e.charCodeAt(u+1)),m=this._decodeChar(e.charCodeAt(u+2)),v=this._decodeChar(e.charCodeAt(u+3)),o[s++]=h<<2|w>>>4,o[s++]=w<<4|m>>>2,o[s++]=m<<6|v,c|=h&INVALID_BYTE,c|=w&INVALID_BYTE,c|=m&INVALID_BYTE,c|=v&INVALID_BYTE;if(u<n-1&&(h=this._decodeChar(e.charCodeAt(u)),w=this._decodeChar(e.charCodeAt(u+1)),o[s++]=h<<2|w>>>4,c|=h&INVALID_BYTE,c|=w&INVALID_BYTE),u<n-2&&(m=this._decodeChar(e.charCodeAt(u+2)),o[s++]=w<<4|m>>>2,c|=m&INVALID_BYTE),u<n-3&&(v=this._decodeChar(e.charCodeAt(u+3)),o[s++]=m<<6|v,c|=v&INVALID_BYTE),c!==0)throw new Error("Base64Coder: incorrect characters for decoding");return o},t.prototype._encodeByte=function(e){var r=e;return r+=65,r+=25-e>>>8&0-65-26+97,r+=51-e>>>8&26-97-52+48,r+=61-e>>>8&52-48-62+43,r+=62-e>>>8&62-43-63+47,String.fromCharCode(r)},t.prototype._decodeChar=function(e){var r=INVALID_BYTE;return r+=(42-e&e-44)>>>8&-INVALID_BYTE+e-43+62,r+=(46-e&e-48)>>>8&-INVALID_BYTE+e-47+63,r+=(47-e&e-58)>>>8&-INVALID_BYTE+e-48+52,r+=(64-e&e-91)>>>8&-INVALID_BYTE+e-65+0,r+=(96-e&e-123)>>>8&-INVALID_BYTE+e-97+26,r},t.prototype._getPaddingLength=function(e){var r=0;if(this._paddingCharacter){for(var n=e.length-1;n>=0&&e[n]===this._paddingCharacter;n--)r++;if(e.length<4||r>2)throw new Error("Base64Coder: incorrect padding")}return r},t}();base64$9.Coder=Coder;var stdCoder=new Coder;function encode$t(t){return stdCoder.encode(t)}base64$9.encode=encode$t;function decode$u(t){return stdCoder.decode(t)}base64$9.decode=decode$u;var URLSafeCoder=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype._encodeByte=function(r){var n=r;return n+=65,n+=25-r>>>8&0-65-26+97,n+=51-r>>>8&26-97-52+48,n+=61-r>>>8&52-48-62+45,n+=62-r>>>8&62-45-63+95,String.fromCharCode(n)},e.prototype._decodeChar=function(r){var n=INVALID_BYTE;return n+=(44-r&r-46)>>>8&-INVALID_BYTE+r-45+62,n+=(94-r&r-96)>>>8&-INVALID_BYTE+r-95+63,n+=(47-r&r-58)>>>8&-INVALID_BYTE+r-48+52,n+=(64-r&r-91)>>>8&-INVALID_BYTE+r-65+0,n+=(96-r&r-123)>>>8&-INVALID_BYTE+r-97+26,n},e}(Coder);base64$9.URLSafeCoder=URLSafeCoder;var urlSafeCoder=new URLSafeCoder;function encodeURLSafe(t){return urlSafeCoder.encode(t)}var encodeURLSafe_1=base64$9.encodeURLSafe=encodeURLSafe;function decodeURLSafe(t){return urlSafeCoder.decode(t)}var decodeURLSafe_1=base64$9.decodeURLSafe=decodeURLSafe;base64$9.encodedLength=function(t){return stdCoder.encodedLength(t)};base64$9.maxDecodedLength=function(t){return stdCoder.maxDecodedLength(t)};base64$9.decodedLength=function(t){return stdCoder.decodedLength(t)};const JSONArrow_svelte_svelte_type_style_lang="",JSONNested_svelte_svelte_type_style_lang="",PreviewList_svelte_svelte_type_style_lang="",JSONValueNode_svelte_svelte_type_style_lang="",ErrorStack_svelte_svelte_type_style_lang="",JSONStringNode_svelte_svelte_type_style_lang="",JSONFunctionNode_svelte_svelte_type_style_lang="",RegExpNode_svelte_svelte_type_style_lang="",Root_svelte_svelte_type_style_lang="",Clipboard_svelte_svelte_type_style_lang="",ResolveDID_svelte_svelte_type_style_lang="",REGISTRY="bLAgYxAdX2Ry-nt6aH2ixgvJXbpsEYm28NgJgyqfs-U";async function arnsResolver(t,{CacheOptions:e}={}){const r=await init({CacheOptions:e}),n=await r.resolveARNS(t),o=await r.resolveANT(n);return await r.resolveDID(o)}async function init({local:t,CacheOptions:e}={local:!1,CacheOptions:void 0}){const{WarpFactory:r}=await __vitePreload(()=>import("./index-47a55e3a.js").then(o=>o.i),[],import.meta.url);return{warp:t?r.forLocal(void 0,void 0,e):r.forMainnet(e),resolveARNS,resolveANT,resolveDID}}async function resolveARNS(t){return(await this.warp.contract(REGISTRY).readState()).cachedValue.state.records[t]}async function resolveANT(t){return`did:ar:${(await this.warp.contract(t).readState()).cachedValue.state.records["did-ar"].transactionId}`}async function resolveDID(t){const e=t.replace("did:ar:","");return(await this.warp.contract(e).readState()).cachedValue.state}var axios$3={exports:{}},axios$2={exports:{}},bind$2=function(e,r){return function(){for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];return e.apply(r,o)}},bind$1=bind$2,toString$9=Object.prototype.toString,kindOf=function(t){return function(e){var r=toString$9.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function kindOfTest(t){return t=t.toLowerCase(),function(r){return kindOf(r)===t}}function isArray(t){return Array.isArray(t)}function isUndefined(t){return typeof t>"u"}function isBuffer$2(t){return t!==null&&!isUndefined(t)&&t.constructor!==null&&!isUndefined(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&isArrayBuffer(t.buffer),e}function isString(t){return typeof t=="string"}function isNumber(t){return typeof t=="number"}function isObject(t){return t!==null&&typeof t=="object"}function isPlainObject$1(t){if(kindOf(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList");function isFunction(t){return toString$9.call(t)==="[object Function]"}function isStream(t){return isObject(t)&&isFunction(t.pipe)}function isFormData(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||toString$9.call(t)===e||isFunction(t.toString)&&t.toString()===e)}var isURLSearchParams=kindOfTest("URLSearchParams");function trim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function forEach(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),isArray(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function merge$2(){var t={};function e(o,s){isPlainObject$1(t[s])&&isPlainObject$1(o)?t[s]=merge$2(t[s],o):isPlainObject$1(o)?t[s]=merge$2({},o):isArray(o)?t[s]=o.slice():t[s]=o}for(var r=0,n=arguments.length;r<n;r++)forEach(arguments[r],e);return t}function extend(t,e,r){return forEach(e,function(o,s){r&&typeof o=="function"?t[s]=bind$1(o,r):t[s]=o}),t}function stripBOM(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function inherits(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function toFlatObject(t,e,r){var n,o,s,u={};e=e||{};do{for(n=Object.getOwnPropertyNames(t),o=n.length;o-- >0;)s=n[o],u[s]||(e[s]=t[s],u[s]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function endsWith(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return n!==-1&&n===r}function toArray(t){if(!t)return null;var e=t.length;if(isUndefined(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var isTypedArray$1=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),utils$c={isArray,isArrayBuffer,isBuffer:isBuffer$2,isFormData,isArrayBufferView,isString,isNumber,isObject,isPlainObject:isPlainObject$1,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge:merge$2,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,isTypedArray:isTypedArray$1,isFileList},utils$b=utils$c;function encode$s(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$1=function(e,r,n){if(!r)return e;var o;if(n)o=n(r);else if(utils$b.isURLSearchParams(r))o=r.toString();else{var s=[];utils$b.forEach(r,function(h,w){h===null||typeof h>"u"||(utils$b.isArray(h)?w=w+"[]":h=[h],utils$b.forEach(h,function(v){utils$b.isDate(v)?v=v.toISOString():utils$b.isObject(v)&&(v=JSON.stringify(v)),s.push(encode$s(w)+"="+encode$s(v))}))}),o=s.join("&")}if(o){var u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e},utils$a=utils$c;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};InterceptorManager$1.prototype.forEach=function(e){utils$a.forEach(this.handlers,function(n){n!==null&&e(n)})};var InterceptorManager_1=InterceptorManager$1,utils$9=utils$c,normalizeHeaderName$1=function(e,r){utils$9.forEach(e,function(o,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=o,delete e[s])})},utils$8=utils$c;function AxiosError$2(t,e,r,n,o){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o)}utils$8.inherits(AxiosError$2,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var prototype=AxiosError$2.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){descriptors[t]={value:t}});Object.defineProperties(AxiosError$2,descriptors);Object.defineProperty(prototype,"isAxiosError",{value:!0});AxiosError$2.from=function(t,e,r,n,o,s){var u=Object.create(prototype);return utils$8.toFlatObject(t,u,function(h){return h!==Error.prototype}),AxiosError$2.call(u,t.message,e,r,n,o),u.name=t.name,s&&Object.assign(u,s),u};var AxiosError_1=AxiosError$2,transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},utils$7=utils$c;function toFormData$1(t,e){e=e||new FormData;var r=[];function n(s){return s===null?"":utils$7.isDate(s)?s.toISOString():utils$7.isArrayBuffer(s)||utils$7.isTypedArray(s)?typeof Blob=="function"?new Blob([s]):Buffer.from(s):s}function o(s,u){if(utils$7.isPlainObject(s)||utils$7.isArray(s)){if(r.indexOf(s)!==-1)throw Error("Circular reference detected in "+u);r.push(s),utils$7.forEach(s,function(h,w){if(!utils$7.isUndefined(h)){var m=u?u+"."+w:w,v;if(h&&!u&&typeof h=="object"){if(utils$7.endsWith(w,"{}"))h=JSON.stringify(h);else if(utils$7.endsWith(w,"[]")&&(v=utils$7.toArray(h))){v.forEach(function(E){!utils$7.isUndefined(E)&&e.append(m,n(E))});return}}o(h,m)}}),r.pop()}else e.append(u,n(s))}return o(t),e}var toFormData_1=toFormData$1,settle,hasRequiredSettle;function requireSettle(){if(hasRequiredSettle)return settle;hasRequiredSettle=1;var t=AxiosError_1;return settle=function(r,n,o){var s=o.config.validateStatus;!o.status||!s||s(o.status)?r(o):n(new t("Request failed with status code "+o.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))},settle}var cookies,hasRequiredCookies;function requireCookies(){if(hasRequiredCookies)return cookies;hasRequiredCookies=1;var t=utils$c;return cookies=t.isStandardBrowserEnv()?function(){return{write:function(n,o,s,u,c,h){var w=[];w.push(n+"="+encodeURIComponent(o)),t.isNumber(s)&&w.push("expires="+new Date(s).toGMTString()),t.isString(u)&&w.push("path="+u),t.isString(c)&&w.push("domain="+c),h===!0&&w.push("secure"),document.cookie=w.join("; ")},read:function(n){var o=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cookies}var isAbsoluteURL$1=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},combineURLs$1=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function(e,r){return e&&!isAbsoluteURL(r)?combineURLs(e,r):r},parseHeaders,hasRequiredParseHeaders;function requireParseHeaders(){if(hasRequiredParseHeaders)return parseHeaders;hasRequiredParseHeaders=1;var t=utils$c,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return parseHeaders=function(n){var o={},s,u,c;return n&&t.forEach(n.split(`
`),function(w){if(c=w.indexOf(":"),s=t.trim(w.substr(0,c)).toLowerCase(),u=t.trim(w.substr(c+1)),s){if(o[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?o[s]=(o[s]?o[s]:[]).concat([u]):o[s]=o[s]?o[s]+", "+u:u}}),o},parseHeaders}var isURLSameOrigin,hasRequiredIsURLSameOrigin;function requireIsURLSameOrigin(){if(hasRequiredIsURLSameOrigin)return isURLSameOrigin;hasRequiredIsURLSameOrigin=1;var t=utils$c;return isURLSameOrigin=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),o;function s(u){var c=u;return r&&(n.setAttribute("href",c),c=n.href),n.setAttribute("href",c),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=s(window.location.href),function(c){var h=t.isString(c)?s(c):c;return h.protocol===o.protocol&&h.host===o.host}}():function(){return function(){return!0}}(),isURLSameOrigin}var CanceledError_1,hasRequiredCanceledError;function requireCanceledError(){if(hasRequiredCanceledError)return CanceledError_1;hasRequiredCanceledError=1;var t=AxiosError_1,e=utils$c;function r(n){t.call(this,n==null?"canceled":n,t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(r,t,{__CANCEL__:!0}),CanceledError_1=r,CanceledError_1}var parseProtocol,hasRequiredParseProtocol;function requireParseProtocol(){return hasRequiredParseProtocol||(hasRequiredParseProtocol=1,parseProtocol=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}),parseProtocol}var xhr,hasRequiredXhr;function requireXhr(){if(hasRequiredXhr)return xhr;hasRequiredXhr=1;var t=utils$c,e=requireSettle(),r=requireCookies(),n=buildURL$1,o=buildFullPath$1,s=requireParseHeaders(),u=requireIsURLSameOrigin(),c=transitional,h=AxiosError_1,w=requireCanceledError(),m=requireParseProtocol();return xhr=function(E){return new Promise(function($,k){var B=E.data,j=E.headers,ie=E.responseType,se;function N(){E.cancelToken&&E.cancelToken.unsubscribe(se),E.signal&&E.signal.removeEventListener("abort",se)}t.isFormData(B)&&t.isStandardBrowserEnv()&&delete j["Content-Type"];var L=new XMLHttpRequest;if(E.auth){var oe=E.auth.username||"",q=E.auth.password?unescape(encodeURIComponent(E.auth.password)):"";j.Authorization="Basic "+btoa(oe+":"+q)}var X=o(E.baseURL,E.url);L.open(E.method.toUpperCase(),n(X,E.params,E.paramsSerializer),!0),L.timeout=E.timeout;function de(){if(!!L){var We="getAllResponseHeaders"in L?s(L.getAllResponseHeaders()):null,Ve=!ie||ie==="text"||ie==="json"?L.responseText:L.response,Ye={data:Ve,status:L.status,statusText:L.statusText,headers:We,config:E,request:L};e(function(kt){$(kt),N()},function(kt){k(kt),N()},Ye),L=null}}if("onloadend"in L?L.onloadend=de:L.onreadystatechange=function(){!L||L.readyState!==4||L.status===0&&!(L.responseURL&&L.responseURL.indexOf("file:")===0)||setTimeout(de)},L.onabort=function(){!L||(k(new h("Request aborted",h.ECONNABORTED,E,L)),L=null)},L.onerror=function(){k(new h("Network Error",h.ERR_NETWORK,E,L,L)),L=null},L.ontimeout=function(){var Ve=E.timeout?"timeout of "+E.timeout+"ms exceeded":"timeout exceeded",Ye=E.transitional||c;E.timeoutErrorMessage&&(Ve=E.timeoutErrorMessage),k(new h(Ve,Ye.clarifyTimeoutError?h.ETIMEDOUT:h.ECONNABORTED,E,L)),L=null},t.isStandardBrowserEnv()){var _e=(E.withCredentials||u(X))&&E.xsrfCookieName?r.read(E.xsrfCookieName):void 0;_e&&(j[E.xsrfHeaderName]=_e)}"setRequestHeader"in L&&t.forEach(j,function(Ve,Ye){typeof B>"u"&&Ye.toLowerCase()==="content-type"?delete j[Ye]:L.setRequestHeader(Ye,Ve)}),t.isUndefined(E.withCredentials)||(L.withCredentials=!!E.withCredentials),ie&&ie!=="json"&&(L.responseType=E.responseType),typeof E.onDownloadProgress=="function"&&L.addEventListener("progress",E.onDownloadProgress),typeof E.onUploadProgress=="function"&&L.upload&&L.upload.addEventListener("progress",E.onUploadProgress),(E.cancelToken||E.signal)&&(se=function(We){!L||(k(!We||We&&We.type?new w:We),L.abort(),L=null)},E.cancelToken&&E.cancelToken.subscribe(se),E.signal&&(E.signal.aborted?se():E.signal.addEventListener("abort",se))),B||(B=null);var xe=m(X);if(xe&&["http","https","file"].indexOf(xe)===-1){k(new h("Unsupported protocol "+xe+":",h.ERR_BAD_REQUEST,E));return}L.send(B)})},xhr}var _null,hasRequired_null;function require_null(){return hasRequired_null||(hasRequired_null=1,_null=null),_null}var utils$6=utils$c,normalizeHeaderName=normalizeHeaderName$1,AxiosError$1=AxiosError_1,transitionalDefaults=transitional,toFormData=toFormData_1,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(t,e){!utils$6.isUndefined(t)&&utils$6.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function getDefaultAdapter(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=requireXhr()),t}function stringifySafely(t,e,r){if(utils$6.isString(t))try{return(e||JSON.parse)(t),utils$6.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var defaults$3={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function(e,r){if(normalizeHeaderName(r,"Accept"),normalizeHeaderName(r,"Content-Type"),utils$6.isFormData(e)||utils$6.isArrayBuffer(e)||utils$6.isBuffer(e)||utils$6.isStream(e)||utils$6.isFile(e)||utils$6.isBlob(e))return e;if(utils$6.isArrayBufferView(e))return e.buffer;if(utils$6.isURLSearchParams(e))return setContentTypeIfUnset(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=utils$6.isObject(e),o=r&&r["Content-Type"],s;if((s=utils$6.isFileList(e))||n&&o==="multipart/form-data"){var u=this.env&&this.env.FormData;return toFormData(s?{"files[]":e}:e,u&&new u)}else if(n||o==="application/json")return setContentTypeIfUnset(r,"application/json"),stringifySafely(e);return e}],transformResponse:[function(e){var r=this.transitional||defaults$3.transitional,n=r&&r.silentJSONParsing,o=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||o&&utils$6.isString(e)&&e.length)try{return JSON.parse(e)}catch(u){if(s)throw u.name==="SyntaxError"?AxiosError$1.from(u,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):u}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:require_null()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$6.forEach(["delete","get","head"],function(e){defaults$3.headers[e]={}});utils$6.forEach(["post","put","patch"],function(e){defaults$3.headers[e]=utils$6.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$3,utils$5=utils$c,defaults$2=defaults_1,transformData$1=function(e,r,n){var o=this||defaults$2;return utils$5.forEach(n,function(u){e=u.call(o,e,r)}),e},isCancel$1,hasRequiredIsCancel;function requireIsCancel(){return hasRequiredIsCancel||(hasRequiredIsCancel=1,isCancel$1=function(e){return!!(e&&e.__CANCEL__)}),isCancel$1}var utils$4=utils$c,transformData=transformData$1,isCancel=requireIsCancel(),defaults$1=defaults_1,CanceledError=requireCanceledError();function throwIfCancellationRequested(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError}var dispatchRequest$1=function(e){throwIfCancellationRequested(e),e.headers=e.headers||{},e.data=transformData.call(e,e.data,e.headers,e.transformRequest),e.headers=utils$4.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),utils$4.forEach(["delete","get","head","post","put","patch","common"],function(o){delete e.headers[o]});var r=e.adapter||defaults$1.adapter;return r(e).then(function(o){return throwIfCancellationRequested(e),o.data=transformData.call(e,o.data,o.headers,e.transformResponse),o},function(o){return isCancel(o)||(throwIfCancellationRequested(e),o&&o.response&&(o.response.data=transformData.call(e,o.response.data,o.response.headers,e.transformResponse))),Promise.reject(o)})},utils$3=utils$c,mergeConfig$2=function(e,r){r=r||{};var n={};function o(m,v){return utils$3.isPlainObject(m)&&utils$3.isPlainObject(v)?utils$3.merge(m,v):utils$3.isPlainObject(v)?utils$3.merge({},v):utils$3.isArray(v)?v.slice():v}function s(m){if(utils$3.isUndefined(r[m])){if(!utils$3.isUndefined(e[m]))return o(void 0,e[m])}else return o(e[m],r[m])}function u(m){if(!utils$3.isUndefined(r[m]))return o(void 0,r[m])}function c(m){if(utils$3.isUndefined(r[m])){if(!utils$3.isUndefined(e[m]))return o(void 0,e[m])}else return o(void 0,r[m])}function h(m){if(m in r)return o(e[m],r[m]);if(m in e)return o(void 0,e[m])}var w={url:u,method:u,data:u,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:h};return utils$3.forEach(Object.keys(e).concat(Object.keys(r)),function(v){var E=w[v]||s,O=E(v);utils$3.isUndefined(O)&&E!==h||(n[v]=O)}),n},data,hasRequiredData;function requireData(){return hasRequiredData||(hasRequiredData=1,data={version:"0.27.2"}),data}var VERSION=requireData().version,AxiosError=AxiosError_1,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){validators$1[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var deprecatedWarnings={};validators$1.transitional=function(e,r,n){function o(s,u){return"[Axios v"+VERSION+"] Transitional option '"+s+"'"+u+(n?". "+n:"")}return function(s,u,c){if(e===!1)throw new AxiosError(o(u," has been removed"+(r?" in "+r:"")),AxiosError.ERR_DEPRECATED);return r&&!deprecatedWarnings[u]&&(deprecatedWarnings[u]=!0,console.warn(o(u," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,u,c):!0}};function assertOptions(t,e,r){if(typeof t!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),o=n.length;o-- >0;){var s=n[o],u=e[s];if(u){var c=t[s],h=c===void 0||u(c,s,t);if(h!==!0)throw new AxiosError("option "+s+" must be "+h,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new AxiosError("Unknown option "+s,AxiosError.ERR_BAD_OPTION)}}var validator$1={assertOptions,validators:validators$1},utils$2=utils$c,buildURL=buildURL$1,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,buildFullPath=buildFullPath$1,validator=validator$1,validators=validator.validators;function Axios$1(t){this.defaults=t,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=mergeConfig$1(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&validator.assertOptions(n,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var o=[],s=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(r)===!1||(s=s&&O.synchronous,o.unshift(O.fulfilled,O.rejected))});var u=[];this.interceptors.response.forEach(function(O){u.push(O.fulfilled,O.rejected)});var c;if(!s){var h=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(h,o),h=h.concat(u),c=Promise.resolve(r);h.length;)c=c.then(h.shift(),h.shift());return c}for(var w=r;o.length;){var m=o.shift(),v=o.shift();try{w=m(w)}catch(E){v(E);break}}try{c=dispatchRequest(w)}catch(E){return Promise.reject(E)}for(;u.length;)c=c.then(u.shift(),u.shift());return c};Axios$1.prototype.getUri=function(e){e=mergeConfig$1(this.defaults,e);var r=buildFullPath(e.baseURL,e.url);return buildURL(r,e.params,e.paramsSerializer)};utils$2.forEach(["delete","get","head","options"],function(e){Axios$1.prototype[e]=function(r,n){return this.request(mergeConfig$1(n||{},{method:e,url:r,data:(n||{}).data}))}});utils$2.forEach(["post","put","patch"],function(e){function r(n){return function(s,u,c){return this.request(mergeConfig$1(c||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:u}))}}Axios$1.prototype[e]=r(),Axios$1.prototype[e+"Form"]=r(!0)});var Axios_1=Axios$1,CancelToken_1,hasRequiredCancelToken;function requireCancelToken(){if(hasRequiredCancelToken)return CancelToken_1;hasRequiredCancelToken=1;var t=requireCanceledError();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(u){n=u});var o=this;this.promise.then(function(s){if(!!o._listeners){var u,c=o._listeners.length;for(u=0;u<c;u++)o._listeners[u](s);o._listeners=null}}),this.promise.then=function(s){var u,c=new Promise(function(h){o.subscribe(h),u=h}).then(s);return c.cancel=function(){o.unsubscribe(u)},c},r(function(u){o.reason||(o.reason=new t(u),n(o.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(!!this._listeners){var o=this._listeners.indexOf(n);o!==-1&&this._listeners.splice(o,1)}},e.source=function(){var n,o=new e(function(u){n=u});return{token:o,cancel:n}},CancelToken_1=e,CancelToken_1}var spread,hasRequiredSpread;function requireSpread(){return hasRequiredSpread||(hasRequiredSpread=1,spread=function(e){return function(n){return e.apply(null,n)}}),spread}var isAxiosError,hasRequiredIsAxiosError;function requireIsAxiosError(){if(hasRequiredIsAxiosError)return isAxiosError;hasRequiredIsAxiosError=1;var t=utils$c;return isAxiosError=function(r){return t.isObject(r)&&r.isAxiosError===!0},isAxiosError}var utils$1=utils$c,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(t){var e=new Axios(t),r=bind(Axios.prototype.request,e);return utils$1.extend(r,Axios.prototype,e),utils$1.extend(r,e),r.create=function(o){return createInstance(mergeConfig(t,o))},r}var axios$1=createInstance(defaults);axios$1.Axios=Axios;axios$1.CanceledError=requireCanceledError();axios$1.CancelToken=requireCancelToken();axios$1.isCancel=requireIsCancel();axios$1.VERSION=requireData().version;axios$1.toFormData=toFormData_1;axios$1.AxiosError=AxiosError_1;axios$1.Cancel=axios$1.CanceledError;axios$1.all=function(e){return Promise.all(e)};axios$1.spread=requireSpread();axios$1.isAxiosError=requireIsAxiosError();axios$2.exports=axios$1;axios$2.exports.default=axios$1;(function(t){t.exports=axios$2.exports})(axios$3);const axios=getDefaultExportFromCjs(axios$3.exports);let GQL_ENDPOINT="https://arweave.net/graphql";const setEndpointUrl=t=>GQL_ENDPOINT=t,run=async(t,e)=>{const r=JSON.stringify({query:t,variables:e}),{data:n}=await axios.post(GQL_ENDPOINT,r,{headers:{"content-type":"application/json"}});return n},all$2=async(t,e)=>{let r=!0,n=[],o="";for(;r;){const s=(await run(t,{...e,cursor:o})).data.transactions;s.edges&&s.edges.length&&(n=n.concat(s.edges),o=s.edges[s.edges.length-1].cursor),r=s.pageInfo.hasNextPage}return n},Spinner_svelte_svelte_type_style_lang="",DIDAr_svelte_svelte_type_style_lang="";var web={},common$2={},ar={},bignumber={exports:{}};(function(t){(function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,s=Math.floor,u="[BigNumber Error] ",c=u+"Number primitive has more than 15 significant digits: ",h=1e14,w=14,m=9007199254740991,v=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],E=1e7,O=1e9;function $(oe){var q,X,de,_e=he.prototype={constructor:he,toString:null,valueOf:null},xe=new he(1),We=20,Ve=4,Ye=-7,$t=21,kt=-1e7,at=1e7,Je=!1,Bt=1,Ut=0,vt={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},be="0123456789abcdefghijklmnopqrstuvwxyz",je=!0;function he(P,W){var ae,Ae,ge,Te,Ie,we,Ee,Z,De=this;if(!(De instanceof he))return new he(P,W);if(W==null){if(P&&P._isBigNumber===!0){De.s=P.s,!P.c||P.e>at?De.c=De.e=null:P.e<kt?De.c=[De.e=0]:(De.e=P.e,De.c=P.c.slice());return}if((we=typeof P=="number")&&P*0==0){if(De.s=1/P<0?(P=-P,-1):1,P===~~P){for(Te=0,Ie=P;Ie>=10;Ie/=10,Te++);Te>at?De.c=De.e=null:(De.e=Te,De.c=[P]);return}Z=String(P)}else{if(!n.test(Z=String(P)))return de(De,Z,we);De.s=Z.charCodeAt(0)==45?(Z=Z.slice(1),-1):1}(Te=Z.indexOf("."))>-1&&(Z=Z.replace(".","")),(Ie=Z.search(/e/i))>0?(Te<0&&(Te=Ie),Te+=+Z.slice(Ie+1),Z=Z.substring(0,Ie)):Te<0&&(Te=Z.length)}else{if(ie(W,2,be.length,"Base"),W==10&&je)return De=new he(P),it(De,We+De.e+1,Ve);if(Z=String(P),we=typeof P=="number"){if(P*0!=0)return de(De,Z,we,W);if(De.s=1/P<0?(Z=Z.slice(1),-1):1,he.DEBUG&&Z.replace(/^0\.0*|\./,"").length>15)throw Error(c+P)}else De.s=Z.charCodeAt(0)===45?(Z=Z.slice(1),-1):1;for(ae=be.slice(0,W),Te=Ie=0,Ee=Z.length;Ie<Ee;Ie++)if(ae.indexOf(Ae=Z.charAt(Ie))<0){if(Ae=="."){if(Ie>Te){Te=Ee;continue}}else if(!ge&&(Z==Z.toUpperCase()&&(Z=Z.toLowerCase())||Z==Z.toLowerCase()&&(Z=Z.toUpperCase()))){ge=!0,Ie=-1,Te=0;continue}return de(De,String(P),we,W)}we=!1,Z=X(Z,W,10,De.s),(Te=Z.indexOf("."))>-1?Z=Z.replace(".",""):Te=Z.length}for(Ie=0;Z.charCodeAt(Ie)===48;Ie++);for(Ee=Z.length;Z.charCodeAt(--Ee)===48;);if(Z=Z.slice(Ie,++Ee)){if(Ee-=Ie,we&&he.DEBUG&&Ee>15&&(P>m||P!==s(P)))throw Error(c+De.s*P);if((Te=Te-Ie-1)>at)De.c=De.e=null;else if(Te<kt)De.c=[De.e=0];else{if(De.e=Te,De.c=[],Ie=(Te+1)%w,Te<0&&(Ie+=w),Ie<Ee){for(Ie&&De.c.push(+Z.slice(0,Ie)),Ee-=w;Ie<Ee;)De.c.push(+Z.slice(Ie,Ie+=w));Ie=w-(Z=Z.slice(Ie)).length}else Ie-=Ee;for(;Ie--;Z+="0");De.c.push(+Z)}}else De.c=[De.e=0]}he.clone=$,he.ROUND_UP=0,he.ROUND_DOWN=1,he.ROUND_CEIL=2,he.ROUND_FLOOR=3,he.ROUND_HALF_UP=4,he.ROUND_HALF_DOWN=5,he.ROUND_HALF_EVEN=6,he.ROUND_HALF_CEIL=7,he.ROUND_HALF_FLOOR=8,he.EUCLID=9,he.config=he.set=function(P){var W,ae;if(P!=null)if(typeof P=="object"){if(P.hasOwnProperty(W="DECIMAL_PLACES")&&(ae=P[W],ie(ae,0,O,W),We=ae),P.hasOwnProperty(W="ROUNDING_MODE")&&(ae=P[W],ie(ae,0,8,W),Ve=ae),P.hasOwnProperty(W="EXPONENTIAL_AT")&&(ae=P[W],ae&&ae.pop?(ie(ae[0],-O,0,W),ie(ae[1],0,O,W),Ye=ae[0],$t=ae[1]):(ie(ae,-O,O,W),Ye=-($t=ae<0?-ae:ae))),P.hasOwnProperty(W="RANGE"))if(ae=P[W],ae&&ae.pop)ie(ae[0],-O,-1,W),ie(ae[1],1,O,W),kt=ae[0],at=ae[1];else if(ie(ae,-O,O,W),ae)kt=-(at=ae<0?-ae:ae);else throw Error(u+W+" cannot be zero: "+ae);if(P.hasOwnProperty(W="CRYPTO"))if(ae=P[W],ae===!!ae)if(ae)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Je=ae;else throw Je=!ae,Error(u+"crypto unavailable");else Je=ae;else throw Error(u+W+" not true or false: "+ae);if(P.hasOwnProperty(W="MODULO_MODE")&&(ae=P[W],ie(ae,0,9,W),Bt=ae),P.hasOwnProperty(W="POW_PRECISION")&&(ae=P[W],ie(ae,0,O,W),Ut=ae),P.hasOwnProperty(W="FORMAT"))if(ae=P[W],typeof ae=="object")vt=ae;else throw Error(u+W+" not an object: "+ae);if(P.hasOwnProperty(W="ALPHABET"))if(ae=P[W],typeof ae=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(ae))je=ae.slice(0,10)=="0123456789",be=ae;else throw Error(u+W+" invalid: "+ae)}else throw Error(u+"Object expected: "+P);return{DECIMAL_PLACES:We,ROUNDING_MODE:Ve,EXPONENTIAL_AT:[Ye,$t],RANGE:[kt,at],CRYPTO:Je,MODULO_MODE:Bt,POW_PRECISION:Ut,FORMAT:vt,ALPHABET:be}},he.isBigNumber=function(P){if(!P||P._isBigNumber!==!0)return!1;if(!he.DEBUG)return!0;var W,ae,Ae=P.c,ge=P.e,Te=P.s;e:if({}.toString.call(Ae)=="[object Array]"){if((Te===1||Te===-1)&&ge>=-O&&ge<=O&&ge===s(ge)){if(Ae[0]===0){if(ge===0&&Ae.length===1)return!0;break e}if(W=(ge+1)%w,W<1&&(W+=w),String(Ae[0]).length==W){for(W=0;W<Ae.length;W++)if(ae=Ae[W],ae<0||ae>=h||ae!==s(ae))break e;if(ae!==0)return!0}}}else if(Ae===null&&ge===null&&(Te===null||Te===1||Te===-1))return!0;throw Error(u+"Invalid BigNumber: "+P)},he.maximum=he.max=function(){return St(arguments,_e.lt)},he.minimum=he.min=function(){return St(arguments,_e.gt)},he.random=function(){var P=9007199254740992,W=Math.random()*P&2097151?function(){return s(Math.random()*P)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(ae){var Ae,ge,Te,Ie,we,Ee=0,Z=[],De=new he(xe);if(ae==null?ae=We:ie(ae,0,O),Ie=o(ae/w),Je)if(crypto.getRandomValues){for(Ae=crypto.getRandomValues(new Uint32Array(Ie*=2));Ee<Ie;)we=Ae[Ee]*131072+(Ae[Ee+1]>>>11),we>=9e15?(ge=crypto.getRandomValues(new Uint32Array(2)),Ae[Ee]=ge[0],Ae[Ee+1]=ge[1]):(Z.push(we%1e14),Ee+=2);Ee=Ie/2}else if(crypto.randomBytes){for(Ae=crypto.randomBytes(Ie*=7);Ee<Ie;)we=(Ae[Ee]&31)*281474976710656+Ae[Ee+1]*1099511627776+Ae[Ee+2]*4294967296+Ae[Ee+3]*16777216+(Ae[Ee+4]<<16)+(Ae[Ee+5]<<8)+Ae[Ee+6],we>=9e15?crypto.randomBytes(7).copy(Ae,Ee):(Z.push(we%1e14),Ee+=7);Ee=Ie/7}else throw Je=!1,Error(u+"crypto unavailable");if(!Je)for(;Ee<Ie;)we=W(),we<9e15&&(Z[Ee++]=we%1e14);for(Ie=Z[--Ee],ae%=w,Ie&&ae&&(we=v[w-ae],Z[Ee]=s(Ie/we)*we);Z[Ee]===0;Z.pop(),Ee--);if(Ee<0)Z=[Te=0];else{for(Te=-1;Z[0]===0;Z.splice(0,1),Te-=w);for(Ee=1,we=Z[0];we>=10;we/=10,Ee++);Ee<w&&(Te-=w-Ee)}return De.e=Te,De.c=Z,De}}(),he.sum=function(){for(var P=1,W=arguments,ae=new he(W[0]);P<W.length;)ae=ae.plus(W[P++]);return ae},X=function(){var P="0123456789";function W(ae,Ae,ge,Te){for(var Ie,we=[0],Ee,Z=0,De=ae.length;Z<De;){for(Ee=we.length;Ee--;we[Ee]*=Ae);for(we[0]+=Te.indexOf(ae.charAt(Z++)),Ie=0;Ie<we.length;Ie++)we[Ie]>ge-1&&(we[Ie+1]==null&&(we[Ie+1]=0),we[Ie+1]+=we[Ie]/ge|0,we[Ie]%=ge)}return we.reverse()}return function(ae,Ae,ge,Te,Ie){var we,Ee,Z,De,Ge,Ze,ot,Ft,xt=ae.indexOf("."),Nt=We,y=Ve;for(xt>=0&&(De=Ut,Ut=0,ae=ae.replace(".",""),Ft=new he(Ae),Ze=Ft.pow(ae.length-xt),Ut=De,Ft.c=W(L(B(Ze.c),Ze.e,"0"),10,ge,P),Ft.e=Ft.c.length),ot=W(ae,Ae,ge,Ie?(we=be,P):(we=P,be)),Z=De=ot.length;ot[--De]==0;ot.pop());if(!ot[0])return we.charAt(0);if(xt<0?--Z:(Ze.c=ot,Ze.e=Z,Ze.s=Te,Ze=q(Ze,Ft,Nt,y,ge),ot=Ze.c,Ge=Ze.r,Z=Ze.e),Ee=Z+Nt+1,xt=ot[Ee],De=ge/2,Ge=Ge||Ee<0||ot[Ee+1]!=null,Ge=y<4?(xt!=null||Ge)&&(y==0||y==(Ze.s<0?3:2)):xt>De||xt==De&&(y==4||Ge||y==6&&ot[Ee-1]&1||y==(Ze.s<0?8:7)),Ee<1||!ot[0])ae=Ge?L(we.charAt(1),-Nt,we.charAt(0)):we.charAt(0);else{if(ot.length=Ee,Ge)for(--ge;++ot[--Ee]>ge;)ot[Ee]=0,Ee||(++Z,ot=[1].concat(ot));for(De=ot.length;!ot[--De];);for(xt=0,ae="";xt<=De;ae+=we.charAt(ot[xt++]));ae=L(ae,Z,we.charAt(0))}return ae}}(),q=function(){function P(Ae,ge,Te){var Ie,we,Ee,Z,De=0,Ge=Ae.length,Ze=ge%E,ot=ge/E|0;for(Ae=Ae.slice();Ge--;)Ee=Ae[Ge]%E,Z=Ae[Ge]/E|0,Ie=ot*Ee+Z*Ze,we=Ze*Ee+Ie%E*E+De,De=(we/Te|0)+(Ie/E|0)+ot*Z,Ae[Ge]=we%Te;return De&&(Ae=[De].concat(Ae)),Ae}function W(Ae,ge,Te,Ie){var we,Ee;if(Te!=Ie)Ee=Te>Ie?1:-1;else for(we=Ee=0;we<Te;we++)if(Ae[we]!=ge[we]){Ee=Ae[we]>ge[we]?1:-1;break}return Ee}function ae(Ae,ge,Te,Ie){for(var we=0;Te--;)Ae[Te]-=we,we=Ae[Te]<ge[Te]?1:0,Ae[Te]=we*Ie+Ae[Te]-ge[Te];for(;!Ae[0]&&Ae.length>1;Ae.splice(0,1));}return function(Ae,ge,Te,Ie,we){var Ee,Z,De,Ge,Ze,ot,Ft,xt,Nt,y,f,g,A,I,K,ue,rt,_t=Ae.s==ge.s?1:-1,nt=Ae.c,et=ge.c;if(!nt||!nt[0]||!et||!et[0])return new he(!Ae.s||!ge.s||(nt?et&&nt[0]==et[0]:!et)?NaN:nt&&nt[0]==0||!et?_t*0:_t/0);for(xt=new he(_t),Nt=xt.c=[],Z=Ae.e-ge.e,_t=Te+Z+1,we||(we=h,Z=k(Ae.e/w)-k(ge.e/w),_t=_t/w|0),De=0;et[De]==(nt[De]||0);De++);if(et[De]>(nt[De]||0)&&Z--,_t<0)Nt.push(1),Ge=!0;else{for(I=nt.length,ue=et.length,De=0,_t+=2,Ze=s(we/(et[0]+1)),Ze>1&&(et=P(et,Ze,we),nt=P(nt,Ze,we),ue=et.length,I=nt.length),A=ue,y=nt.slice(0,ue),f=y.length;f<ue;y[f++]=0);rt=et.slice(),rt=[0].concat(rt),K=et[0],et[1]>=we/2&&K++;do{if(Ze=0,Ee=W(et,y,ue,f),Ee<0){if(g=y[0],ue!=f&&(g=g*we+(y[1]||0)),Ze=s(g/K),Ze>1)for(Ze>=we&&(Ze=we-1),ot=P(et,Ze,we),Ft=ot.length,f=y.length;W(ot,y,Ft,f)==1;)Ze--,ae(ot,ue<Ft?rt:et,Ft,we),Ft=ot.length,Ee=1;else Ze==0&&(Ee=Ze=1),ot=et.slice(),Ft=ot.length;if(Ft<f&&(ot=[0].concat(ot)),ae(y,ot,f,we),f=y.length,Ee==-1)for(;W(et,y,ue,f)<1;)Ze++,ae(y,ue<f?rt:et,f,we),f=y.length}else Ee===0&&(Ze++,y=[0]);Nt[De++]=Ze,y[0]?y[f++]=nt[A]||0:(y=[nt[A]],f=1)}while((A++<I||y[0]!=null)&&_t--);Ge=y[0]!=null,Nt[0]||Nt.splice(0,1)}if(we==h){for(De=1,_t=Nt[0];_t>=10;_t/=10,De++);it(xt,Te+(xt.e=De+Z*w-1)+1,Ie,Ge)}else xt.e=Z,xt.r=+Ge;return xt}}();function st(P,W,ae,Ae){var ge,Te,Ie,we,Ee;if(ae==null?ae=Ve:ie(ae,0,8),!P.c)return P.toString();if(ge=P.c[0],Ie=P.e,W==null)Ee=B(P.c),Ee=Ae==1||Ae==2&&(Ie<=Ye||Ie>=$t)?N(Ee,Ie):L(Ee,Ie,"0");else if(P=it(new he(P),W,ae),Te=P.e,Ee=B(P.c),we=Ee.length,Ae==1||Ae==2&&(W<=Te||Te<=Ye)){for(;we<W;Ee+="0",we++);Ee=N(Ee,Te)}else if(W-=Ie,Ee=L(Ee,Te,"0"),Te+1>we){if(--W>0)for(Ee+=".";W--;Ee+="0");}else if(W+=Te-we,W>0)for(Te+1==we&&(Ee+=".");W--;Ee+="0");return P.s<0&&ge?"-"+Ee:Ee}function St(P,W){for(var ae,Ae=1,ge=new he(P[0]);Ae<P.length;Ae++)if(ae=new he(P[Ae]),ae.s)W.call(ge,ae)&&(ge=ae);else{ge=ae;break}return ge}function It(P,W,ae){for(var Ae=1,ge=W.length;!W[--ge];W.pop());for(ge=W[0];ge>=10;ge/=10,Ae++);return(ae=Ae+ae*w-1)>at?P.c=P.e=null:ae<kt?P.c=[P.e=0]:(P.e=ae,P.c=W),P}de=function(){var P=/^(-?)0([xbo])(?=\w[\w.]*$)/i,W=/^([^.]+)\.$/,ae=/^\.([^.]+)$/,Ae=/^-?(Infinity|NaN)$/,ge=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Te,Ie,we,Ee){var Z,De=we?Ie:Ie.replace(ge,"");if(Ae.test(De))Te.s=isNaN(De)?null:De<0?-1:1;else{if(!we&&(De=De.replace(P,function(Ge,Ze,ot){return Z=(ot=ot.toLowerCase())=="x"?16:ot=="b"?2:8,!Ee||Ee==Z?Ze:Ge}),Ee&&(Z=Ee,De=De.replace(W,"$1").replace(ae,"0.$1")),Ie!=De))return new he(De,Z);if(he.DEBUG)throw Error(u+"Not a"+(Ee?" base "+Ee:"")+" number: "+Ie);Te.s=null}Te.c=Te.e=null}}();function it(P,W,ae,Ae){var ge,Te,Ie,we,Ee,Z,De,Ge=P.c,Ze=v;if(Ge){e:{for(ge=1,we=Ge[0];we>=10;we/=10,ge++);if(Te=W-ge,Te<0)Te+=w,Ie=W,Ee=Ge[Z=0],De=Ee/Ze[ge-Ie-1]%10|0;else if(Z=o((Te+1)/w),Z>=Ge.length)if(Ae){for(;Ge.length<=Z;Ge.push(0));Ee=De=0,ge=1,Te%=w,Ie=Te-w+1}else break e;else{for(Ee=we=Ge[Z],ge=1;we>=10;we/=10,ge++);Te%=w,Ie=Te-w+ge,De=Ie<0?0:Ee/Ze[ge-Ie-1]%10|0}if(Ae=Ae||W<0||Ge[Z+1]!=null||(Ie<0?Ee:Ee%Ze[ge-Ie-1]),Ae=ae<4?(De||Ae)&&(ae==0||ae==(P.s<0?3:2)):De>5||De==5&&(ae==4||Ae||ae==6&&(Te>0?Ie>0?Ee/Ze[ge-Ie]:0:Ge[Z-1])%10&1||ae==(P.s<0?8:7)),W<1||!Ge[0])return Ge.length=0,Ae?(W-=P.e+1,Ge[0]=Ze[(w-W%w)%w],P.e=-W||0):Ge[0]=P.e=0,P;if(Te==0?(Ge.length=Z,we=1,Z--):(Ge.length=Z+1,we=Ze[w-Te],Ge[Z]=Ie>0?s(Ee/Ze[ge-Ie]%Ze[Ie])*we:0),Ae)for(;;)if(Z==0){for(Te=1,Ie=Ge[0];Ie>=10;Ie/=10,Te++);for(Ie=Ge[0]+=we,we=1;Ie>=10;Ie/=10,we++);Te!=we&&(P.e++,Ge[0]==h&&(Ge[0]=1));break}else{if(Ge[Z]+=we,Ge[Z]!=h)break;Ge[Z--]=0,we=1}for(Te=Ge.length;Ge[--Te]===0;Ge.pop());}P.e>at?P.c=P.e=null:P.e<kt&&(P.c=[P.e=0])}return P}function At(P){var W,ae=P.e;return ae===null?P.toString():(W=B(P.c),W=ae<=Ye||ae>=$t?N(W,ae):L(W,ae,"0"),P.s<0?"-"+W:W)}return _e.absoluteValue=_e.abs=function(){var P=new he(this);return P.s<0&&(P.s=1),P},_e.comparedTo=function(P,W){return j(this,new he(P,W))},_e.decimalPlaces=_e.dp=function(P,W){var ae,Ae,ge,Te=this;if(P!=null)return ie(P,0,O),W==null?W=Ve:ie(W,0,8),it(new he(Te),P+Te.e+1,W);if(!(ae=Te.c))return null;if(Ae=((ge=ae.length-1)-k(this.e/w))*w,ge=ae[ge])for(;ge%10==0;ge/=10,Ae--);return Ae<0&&(Ae=0),Ae},_e.dividedBy=_e.div=function(P,W){return q(this,new he(P,W),We,Ve)},_e.dividedToIntegerBy=_e.idiv=function(P,W){return q(this,new he(P,W),0,1)},_e.exponentiatedBy=_e.pow=function(P,W){var ae,Ae,ge,Te,Ie,we,Ee,Z,De,Ge=this;if(P=new he(P),P.c&&!P.isInteger())throw Error(u+"Exponent not an integer: "+At(P));if(W!=null&&(W=new he(W)),we=P.e>14,!Ge.c||!Ge.c[0]||Ge.c[0]==1&&!Ge.e&&Ge.c.length==1||!P.c||!P.c[0])return De=new he(Math.pow(+At(Ge),we?2-se(P):+At(P))),W?De.mod(W):De;if(Ee=P.s<0,W){if(W.c?!W.c[0]:!W.s)return new he(NaN);Ae=!Ee&&Ge.isInteger()&&W.isInteger(),Ae&&(Ge=Ge.mod(W))}else{if(P.e>9&&(Ge.e>0||Ge.e<-1||(Ge.e==0?Ge.c[0]>1||we&&Ge.c[1]>=24e7:Ge.c[0]<8e13||we&&Ge.c[0]<=9999975e7)))return Te=Ge.s<0&&se(P)?-0:0,Ge.e>-1&&(Te=1/Te),new he(Ee?1/Te:Te);Ut&&(Te=o(Ut/w+2))}for(we?(ae=new he(.5),Ee&&(P.s=1),Z=se(P)):(ge=Math.abs(+At(P)),Z=ge%2),De=new he(xe);;){if(Z){if(De=De.times(Ge),!De.c)break;Te?De.c.length>Te&&(De.c.length=Te):Ae&&(De=De.mod(W))}if(ge){if(ge=s(ge/2),ge===0)break;Z=ge%2}else if(P=P.times(ae),it(P,P.e+1,1),P.e>14)Z=se(P);else{if(ge=+At(P),ge===0)break;Z=ge%2}Ge=Ge.times(Ge),Te?Ge.c&&Ge.c.length>Te&&(Ge.c.length=Te):Ae&&(Ge=Ge.mod(W))}return Ae?De:(Ee&&(De=xe.div(De)),W?De.mod(W):Te?it(De,Ut,Ve,Ie):De)},_e.integerValue=function(P){var W=new he(this);return P==null?P=Ve:ie(P,0,8),it(W,W.e+1,P)},_e.isEqualTo=_e.eq=function(P,W){return j(this,new he(P,W))===0},_e.isFinite=function(){return!!this.c},_e.isGreaterThan=_e.gt=function(P,W){return j(this,new he(P,W))>0},_e.isGreaterThanOrEqualTo=_e.gte=function(P,W){return(W=j(this,new he(P,W)))===1||W===0},_e.isInteger=function(){return!!this.c&&k(this.e/w)>this.c.length-2},_e.isLessThan=_e.lt=function(P,W){return j(this,new he(P,W))<0},_e.isLessThanOrEqualTo=_e.lte=function(P,W){return(W=j(this,new he(P,W)))===-1||W===0},_e.isNaN=function(){return!this.s},_e.isNegative=function(){return this.s<0},_e.isPositive=function(){return this.s>0},_e.isZero=function(){return!!this.c&&this.c[0]==0},_e.minus=function(P,W){var ae,Ae,ge,Te,Ie=this,we=Ie.s;if(P=new he(P,W),W=P.s,!we||!W)return new he(NaN);if(we!=W)return P.s=-W,Ie.plus(P);var Ee=Ie.e/w,Z=P.e/w,De=Ie.c,Ge=P.c;if(!Ee||!Z){if(!De||!Ge)return De?(P.s=-W,P):new he(Ge?Ie:NaN);if(!De[0]||!Ge[0])return Ge[0]?(P.s=-W,P):new he(De[0]?Ie:Ve==3?-0:0)}if(Ee=k(Ee),Z=k(Z),De=De.slice(),we=Ee-Z){for((Te=we<0)?(we=-we,ge=De):(Z=Ee,ge=Ge),ge.reverse(),W=we;W--;ge.push(0));ge.reverse()}else for(Ae=(Te=(we=De.length)<(W=Ge.length))?we:W,we=W=0;W<Ae;W++)if(De[W]!=Ge[W]){Te=De[W]<Ge[W];break}if(Te&&(ge=De,De=Ge,Ge=ge,P.s=-P.s),W=(Ae=Ge.length)-(ae=De.length),W>0)for(;W--;De[ae++]=0);for(W=h-1;Ae>we;){if(De[--Ae]<Ge[Ae]){for(ae=Ae;ae&&!De[--ae];De[ae]=W);--De[ae],De[Ae]+=h}De[Ae]-=Ge[Ae]}for(;De[0]==0;De.splice(0,1),--Z);return De[0]?It(P,De,Z):(P.s=Ve==3?-1:1,P.c=[P.e=0],P)},_e.modulo=_e.mod=function(P,W){var ae,Ae,ge=this;return P=new he(P,W),!ge.c||!P.s||P.c&&!P.c[0]?new he(NaN):!P.c||ge.c&&!ge.c[0]?new he(ge):(Bt==9?(Ae=P.s,P.s=1,ae=q(ge,P,0,3),P.s=Ae,ae.s*=Ae):ae=q(ge,P,0,Bt),P=ge.minus(ae.times(P)),!P.c[0]&&Bt==1&&(P.s=ge.s),P)},_e.multipliedBy=_e.times=function(P,W){var ae,Ae,ge,Te,Ie,we,Ee,Z,De,Ge,Ze,ot,Ft,xt,Nt,y=this,f=y.c,g=(P=new he(P,W)).c;if(!f||!g||!f[0]||!g[0])return!y.s||!P.s||f&&!f[0]&&!g||g&&!g[0]&&!f?P.c=P.e=P.s=null:(P.s*=y.s,!f||!g?P.c=P.e=null:(P.c=[0],P.e=0)),P;for(Ae=k(y.e/w)+k(P.e/w),P.s*=y.s,Ee=f.length,Ge=g.length,Ee<Ge&&(Ft=f,f=g,g=Ft,ge=Ee,Ee=Ge,Ge=ge),ge=Ee+Ge,Ft=[];ge--;Ft.push(0));for(xt=h,Nt=E,ge=Ge;--ge>=0;){for(ae=0,Ze=g[ge]%Nt,ot=g[ge]/Nt|0,Ie=Ee,Te=ge+Ie;Te>ge;)Z=f[--Ie]%Nt,De=f[Ie]/Nt|0,we=ot*Z+De*Ze,Z=Ze*Z+we%Nt*Nt+Ft[Te]+ae,ae=(Z/xt|0)+(we/Nt|0)+ot*De,Ft[Te--]=Z%xt;Ft[Te]=ae}return ae?++Ae:Ft.splice(0,1),It(P,Ft,Ae)},_e.negated=function(){var P=new he(this);return P.s=-P.s||null,P},_e.plus=function(P,W){var ae,Ae=this,ge=Ae.s;if(P=new he(P,W),W=P.s,!ge||!W)return new he(NaN);if(ge!=W)return P.s=-W,Ae.minus(P);var Te=Ae.e/w,Ie=P.e/w,we=Ae.c,Ee=P.c;if(!Te||!Ie){if(!we||!Ee)return new he(ge/0);if(!we[0]||!Ee[0])return Ee[0]?P:new he(we[0]?Ae:ge*0)}if(Te=k(Te),Ie=k(Ie),we=we.slice(),ge=Te-Ie){for(ge>0?(Ie=Te,ae=Ee):(ge=-ge,ae=we),ae.reverse();ge--;ae.push(0));ae.reverse()}for(ge=we.length,W=Ee.length,ge-W<0&&(ae=Ee,Ee=we,we=ae,W=ge),ge=0;W;)ge=(we[--W]=we[W]+Ee[W]+ge)/h|0,we[W]=h===we[W]?0:we[W]%h;return ge&&(we=[ge].concat(we),++Ie),It(P,we,Ie)},_e.precision=_e.sd=function(P,W){var ae,Ae,ge,Te=this;if(P!=null&&P!==!!P)return ie(P,1,O),W==null?W=Ve:ie(W,0,8),it(new he(Te),P,W);if(!(ae=Te.c))return null;if(ge=ae.length-1,Ae=ge*w+1,ge=ae[ge]){for(;ge%10==0;ge/=10,Ae--);for(ge=ae[0];ge>=10;ge/=10,Ae++);}return P&&Te.e+1>Ae&&(Ae=Te.e+1),Ae},_e.shiftedBy=function(P){return ie(P,-m,m),this.times("1e"+P)},_e.squareRoot=_e.sqrt=function(){var P,W,ae,Ae,ge,Te=this,Ie=Te.c,we=Te.s,Ee=Te.e,Z=We+4,De=new he("0.5");if(we!==1||!Ie||!Ie[0])return new he(!we||we<0&&(!Ie||Ie[0])?NaN:Ie?Te:1/0);if(we=Math.sqrt(+At(Te)),we==0||we==1/0?(W=B(Ie),(W.length+Ee)%2==0&&(W+="0"),we=Math.sqrt(+W),Ee=k((Ee+1)/2)-(Ee<0||Ee%2),we==1/0?W="5e"+Ee:(W=we.toExponential(),W=W.slice(0,W.indexOf("e")+1)+Ee),ae=new he(W)):ae=new he(we+""),ae.c[0]){for(Ee=ae.e,we=Ee+Z,we<3&&(we=0);;)if(ge=ae,ae=De.times(ge.plus(q(Te,ge,Z,1))),B(ge.c).slice(0,we)===(W=B(ae.c)).slice(0,we))if(ae.e<Ee&&--we,W=W.slice(we-3,we+1),W=="9999"||!Ae&&W=="4999"){if(!Ae&&(it(ge,ge.e+We+2,0),ge.times(ge).eq(Te))){ae=ge;break}Z+=4,we+=4,Ae=1}else{(!+W||!+W.slice(1)&&W.charAt(0)=="5")&&(it(ae,ae.e+We+2,1),P=!ae.times(ae).eq(Te));break}}return it(ae,ae.e+We+1,Ve,P)},_e.toExponential=function(P,W){return P!=null&&(ie(P,0,O),P++),st(this,P,W,1)},_e.toFixed=function(P,W){return P!=null&&(ie(P,0,O),P=P+this.e+1),st(this,P,W)},_e.toFormat=function(P,W,ae){var Ae,ge=this;if(ae==null)P!=null&&W&&typeof W=="object"?(ae=W,W=null):P&&typeof P=="object"?(ae=P,P=W=null):ae=vt;else if(typeof ae!="object")throw Error(u+"Argument not an object: "+ae);if(Ae=ge.toFixed(P,W),ge.c){var Te,Ie=Ae.split("."),we=+ae.groupSize,Ee=+ae.secondaryGroupSize,Z=ae.groupSeparator||"",De=Ie[0],Ge=Ie[1],Ze=ge.s<0,ot=Ze?De.slice(1):De,Ft=ot.length;if(Ee&&(Te=we,we=Ee,Ee=Te,Ft-=Te),we>0&&Ft>0){for(Te=Ft%we||we,De=ot.substr(0,Te);Te<Ft;Te+=we)De+=Z+ot.substr(Te,we);Ee>0&&(De+=Z+ot.slice(Te)),Ze&&(De="-"+De)}Ae=Ge?De+(ae.decimalSeparator||"")+((Ee=+ae.fractionGroupSize)?Ge.replace(new RegExp("\\d{"+Ee+"}\\B","g"),"$&"+(ae.fractionGroupSeparator||"")):Ge):De}return(ae.prefix||"")+Ae+(ae.suffix||"")},_e.toFraction=function(P){var W,ae,Ae,ge,Te,Ie,we,Ee,Z,De,Ge,Ze,ot=this,Ft=ot.c;if(P!=null&&(we=new he(P),!we.isInteger()&&(we.c||we.s!==1)||we.lt(xe)))throw Error(u+"Argument "+(we.isInteger()?"out of range: ":"not an integer: ")+At(we));if(!Ft)return new he(ot);for(W=new he(xe),Z=ae=new he(xe),Ae=Ee=new he(xe),Ze=B(Ft),Te=W.e=Ze.length-ot.e-1,W.c[0]=v[(Ie=Te%w)<0?w+Ie:Ie],P=!P||we.comparedTo(W)>0?Te>0?W:Z:we,Ie=at,at=1/0,we=new he(Ze),Ee.c[0]=0;De=q(we,W,0,1),ge=ae.plus(De.times(Ae)),ge.comparedTo(P)!=1;)ae=Ae,Ae=ge,Z=Ee.plus(De.times(ge=Z)),Ee=ge,W=we.minus(De.times(ge=W)),we=ge;return ge=q(P.minus(ae),Ae,0,1),Ee=Ee.plus(ge.times(Z)),ae=ae.plus(ge.times(Ae)),Ee.s=Z.s=ot.s,Te=Te*2,Ge=q(Z,Ae,Te,Ve).minus(ot).abs().comparedTo(q(Ee,ae,Te,Ve).minus(ot).abs())<1?[Z,Ae]:[Ee,ae],at=Ie,Ge},_e.toNumber=function(){return+At(this)},_e.toPrecision=function(P,W){return P!=null&&ie(P,1,O),st(this,P,W,2)},_e.toString=function(P){var W,ae=this,Ae=ae.s,ge=ae.e;return ge===null?Ae?(W="Infinity",Ae<0&&(W="-"+W)):W="NaN":(P==null?W=ge<=Ye||ge>=$t?N(B(ae.c),ge):L(B(ae.c),ge,"0"):P===10&&je?(ae=it(new he(ae),We+ge+1,Ve),W=L(B(ae.c),ae.e,"0")):(ie(P,2,be.length,"Base"),W=X(L(B(ae.c),ge,"0"),10,P,Ae,!0)),Ae<0&&ae.c[0]&&(W="-"+W)),W},_e.valueOf=_e.toJSON=function(){return At(this)},_e._isBigNumber=!0,oe!=null&&he.set(oe),he}function k(oe){var q=oe|0;return oe>0||oe===q?q:q-1}function B(oe){for(var q,X,de=1,_e=oe.length,xe=oe[0]+"";de<_e;){for(q=oe[de++]+"",X=w-q.length;X--;q="0"+q);xe+=q}for(_e=xe.length;xe.charCodeAt(--_e)===48;);return xe.slice(0,_e+1||1)}function j(oe,q){var X,de,_e=oe.c,xe=q.c,We=oe.s,Ve=q.s,Ye=oe.e,$t=q.e;if(!We||!Ve)return null;if(X=_e&&!_e[0],de=xe&&!xe[0],X||de)return X?de?0:-Ve:We;if(We!=Ve)return We;if(X=We<0,de=Ye==$t,!_e||!xe)return de?0:!_e^X?1:-1;if(!de)return Ye>$t^X?1:-1;for(Ve=(Ye=_e.length)<($t=xe.length)?Ye:$t,We=0;We<Ve;We++)if(_e[We]!=xe[We])return _e[We]>xe[We]^X?1:-1;return Ye==$t?0:Ye>$t^X?1:-1}function ie(oe,q,X,de){if(oe<q||oe>X||oe!==s(oe))throw Error(u+(de||"Argument")+(typeof oe=="number"?oe<q||oe>X?" out of range: ":" not an integer: ":" not a primitive number: ")+String(oe))}function se(oe){var q=oe.c.length-1;return k(oe.e/w)==q&&oe.c[q]%2!=0}function N(oe,q){return(oe.length>1?oe.charAt(0)+"."+oe.slice(1):oe)+(q<0?"e":"e+")+q}function L(oe,q,X){var de,_e;if(q<0){for(_e=X+".";++q;_e+=X);oe=_e+oe}else if(de=oe.length,++q>de){for(_e=X,q-=de;--q;_e+=X);oe+=_e}else q<de&&(oe=oe.slice(0,q)+"."+oe.slice(q));return oe}r=$(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(commonjsGlobal)})(bignumber);Object.defineProperty(ar,"__esModule",{value:!0});const bignumber_js_1=bignumber.exports;class Ar$1{constructor(){this.BigNum=(e,r)=>{let n=bignumber_js_1.BigNumber.clone({DECIMAL_PLACES:r});return new n(e)}}winstonToAr(e,{formatted:r=!1,decimals:n=12,trim:o=!0}={}){let s=this.stringToBigNum(e,n).shiftedBy(-12);return r?s.toFormat(n):s.toFixed(n)}arToWinston(e,{formatted:r=!1}={}){let n=this.stringToBigNum(e).shiftedBy(12);return r?n.toFormat():n.toFixed(0)}compare(e,r){let n=this.stringToBigNum(e),o=this.stringToBigNum(r);return n.comparedTo(o)}isEqual(e,r){return this.compare(e,r)===0}isLessThan(e,r){let n=this.stringToBigNum(e),o=this.stringToBigNum(r);return n.isLessThan(o)}isGreaterThan(e,r){let n=this.stringToBigNum(e),o=this.stringToBigNum(r);return n.isGreaterThan(o)}add(e,r){let n=this.stringToBigNum(e);return this.stringToBigNum(r),n.plus(r).toFixed(0)}sub(e,r){let n=this.stringToBigNum(e);return this.stringToBigNum(r),n.minus(r).toFixed(0)}stringToBigNum(e,r=12){return this.BigNum(e,r)}}ar.default=Ar$1;var api={};Object.defineProperty(api,"__esModule",{value:!0});const axios_1=axios$3.exports;class Api{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){const r=e.protocol||"http",n=e.port||(r==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:r,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log,network:e.network}}async get(e,r){try{return await this.request().get(e,r)}catch(n){if(n.response&&n.response.status)return n.response;throw n}}async post(e,r,n){try{return await this.request().post(e,r,n)}catch(o){if(o.response&&o.response.status)return o.response;throw o}}request(){const e={};this.config.network&&(e["x-network"]=this.config.network);let r=axios_1.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:1024*1024*512,headers:e});return this.config.logging&&(r.interceptors.request.use(n=>(this.config.logger(`Requesting: ${n.baseURL}/${n.url}`),n)),r.interceptors.response.use(n=>(this.config.logger(`Response:   ${n.config.url} - ${n.status}`),n))),r}}api.default=Api;var webcryptoDriver={},utils={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup$1=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code$a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code$a.length;i<len;++i)lookup$1[i]=code$a[i],revLookup[code$a.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function byteLength(t){var e=getLens(t),r=e[0],n=e[1];return(r+n)*3/4-n}function _byteLength(t,e,r){return(e+r)*3/4-r}function toByteArray(t){var e,r=getLens(t),n=r[0],o=r[1],s=new Arr(_byteLength(t,n,o)),u=0,c=o>0?n-4:n,h;for(h=0;h<c;h+=4)e=revLookup[t.charCodeAt(h)]<<18|revLookup[t.charCodeAt(h+1)]<<12|revLookup[t.charCodeAt(h+2)]<<6|revLookup[t.charCodeAt(h+3)],s[u++]=e>>16&255,s[u++]=e>>8&255,s[u++]=e&255;return o===2&&(e=revLookup[t.charCodeAt(h)]<<2|revLookup[t.charCodeAt(h+1)]>>4,s[u++]=e&255),o===1&&(e=revLookup[t.charCodeAt(h)]<<10|revLookup[t.charCodeAt(h+1)]<<4|revLookup[t.charCodeAt(h+2)]>>2,s[u++]=e>>8&255,s[u++]=e&255),s}function tripletToBase64(t){return lookup$1[t>>18&63]+lookup$1[t>>12&63]+lookup$1[t>>6&63]+lookup$1[t&63]}function encodeChunk(t,e,r){for(var n,o=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),o.push(tripletToBase64(n));return o.join("")}function fromByteArray(t){for(var e,r=t.length,n=r%3,o=[],s=16383,u=0,c=r-n;u<c;u+=s)o.push(encodeChunk(t,u,u+s>c?c:u+s));return n===1?(e=t[r-1],o.push(lookup$1[e>>2]+lookup$1[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],o.push(lookup$1[e>>10]+lookup$1[e>>4&63]+lookup$1[e<<2&63]+"=")),o.join("")}var util$5={},types={},shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;e[r]=o;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var u=Object.getOwnPropertyDescriptor(e,r);if(u.value!==o||u.enumerable!==!0)return!1}return!0}),shams$1}var shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var t=requireShams$1();return shams=function(){return t()&&!!Symbol.toStringTag},shams}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var t=typeof Symbol<"u"&&Symbol,e=requireShams$1();return hasSymbols=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},hasSymbols}var implementation$1,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation$1;hasRequiredImplementation=1;var t="Function.prototype.bind called on incompatible ",e=Array.prototype.slice,r=Object.prototype.toString,n="[object Function]";return implementation$1=function(s){var u=this;if(typeof u!="function"||r.call(u)!==n)throw new TypeError(t+u);for(var c=e.call(arguments,1),h,w=function(){if(this instanceof h){var $=u.apply(this,c.concat(e.call(arguments)));return Object($)===$?$:this}else return u.apply(s,c.concat(e.call(arguments)))},m=Math.max(0,u.length-c.length),v=[],E=0;E<m;E++)v.push("$"+E);if(h=Function("binder","return function ("+v.join(",")+"){ return binder.apply(this,arguments); }")(w),u.prototype){var O=function(){};O.prototype=u.prototype,h.prototype=new O,O.prototype=null}return h},implementation$1}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var t=requireImplementation();return functionBind=Function.prototype.bind||t,functionBind}var src$5,hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src$5;hasRequiredSrc=1;var t=requireFunctionBind();return src$5=t.call(Function.call,Object.prototype.hasOwnProperty),src$5}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var t,e=SyntaxError,r=Function,n=TypeError,o=function(_e){try{return r('"use strict"; return ('+_e+").constructor;")()}catch{}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"")}catch{s=null}var u=function(){throw new n},c=s?function(){try{return arguments.callee,u}catch{try{return s(arguments,"callee").get}catch{return u}}}():u,h=requireHasSymbols()(),w=Object.getPrototypeOf||function(_e){return _e.__proto__},m={},v=typeof Uint8Array>"u"?t:w(Uint8Array),E={"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":h?w([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":m,"%AsyncGenerator%":m,"%AsyncGeneratorFunction%":m,"%AsyncIteratorPrototype%":m,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":r,"%GeneratorFunction%":m,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?w(w([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!h?t:w(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!h?t:w(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?w(""[Symbol.iterator]()):t,"%Symbol%":h?Symbol:t,"%SyntaxError%":e,"%ThrowTypeError%":c,"%TypedArray%":v,"%TypeError%":n,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet},O=function _e(xe){var We;if(xe==="%AsyncFunction%")We=o("async function () {}");else if(xe==="%GeneratorFunction%")We=o("function* () {}");else if(xe==="%AsyncGeneratorFunction%")We=o("async function* () {}");else if(xe==="%AsyncGenerator%"){var Ve=_e("%AsyncGeneratorFunction%");Ve&&(We=Ve.prototype)}else if(xe==="%AsyncIteratorPrototype%"){var Ye=_e("%AsyncGenerator%");Ye&&(We=w(Ye.prototype))}return E[xe]=We,We},$={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},k=requireFunctionBind(),B=requireSrc(),j=k.call(Function.call,Array.prototype.concat),ie=k.call(Function.apply,Array.prototype.splice),se=k.call(Function.call,String.prototype.replace),N=k.call(Function.call,String.prototype.slice),L=k.call(Function.call,RegExp.prototype.exec),oe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,q=/\\(\\)?/g,X=function(xe){var We=N(xe,0,1),Ve=N(xe,-1);if(We==="%"&&Ve!=="%")throw new e("invalid intrinsic syntax, expected closing `%`");if(Ve==="%"&&We!=="%")throw new e("invalid intrinsic syntax, expected opening `%`");var Ye=[];return se(xe,oe,function($t,kt,at,Je){Ye[Ye.length]=at?se(Je,q,"$1"):kt||$t}),Ye},de=function(xe,We){var Ve=xe,Ye;if(B($,Ve)&&(Ye=$[Ve],Ve="%"+Ye[0]+"%"),B(E,Ve)){var $t=E[Ve];if($t===m&&($t=O(Ve)),typeof $t>"u"&&!We)throw new n("intrinsic "+xe+" exists, but is not available. Please file an issue!");return{alias:Ye,name:Ve,value:$t}}throw new e("intrinsic "+xe+" does not exist!")};return getIntrinsic=function(xe,We){if(typeof xe!="string"||xe.length===0)throw new n("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof We!="boolean")throw new n('"allowMissing" argument must be a boolean');if(L(/^%?[^%]*%?$/,xe)===null)throw new e("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ve=X(xe),Ye=Ve.length>0?Ve[0]:"",$t=de("%"+Ye+"%",We),kt=$t.name,at=$t.value,Je=!1,Bt=$t.alias;Bt&&(Ye=Bt[0],ie(Ve,j([0,1],Bt)));for(var Ut=1,vt=!0;Ut<Ve.length;Ut+=1){var be=Ve[Ut],je=N(be,0,1),he=N(be,-1);if((je==='"'||je==="'"||je==="`"||he==='"'||he==="'"||he==="`")&&je!==he)throw new e("property names with quotes must have matching quotes");if((be==="constructor"||!vt)&&(Je=!0),Ye+="."+be,kt="%"+Ye+"%",B(E,kt))at=E[kt];else if(at!=null){if(!(be in at)){if(!We)throw new n("base intrinsic for "+xe+" exists, but the property is not available.");return}if(s&&Ut+1>=Ve.length){var st=s(at,be);vt=!!st,vt&&"get"in st&&!("originalValue"in st.get)?at=st.get:at=at[be]}else vt=B(at,be),at=at[be];vt&&!Je&&(E[kt]=at)}}return at},getIntrinsic}var callBind={exports:{}},hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,function(t){var e=requireFunctionBind(),r=requireGetIntrinsic(),n=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),s=r("%Reflect.apply%",!0)||e.call(o,n),u=r("%Object.getOwnPropertyDescriptor%",!0),c=r("%Object.defineProperty%",!0),h=r("%Math.max%");if(c)try{c({},"a",{value:1})}catch{c=null}t.exports=function(v){var E=s(e,o,arguments);if(u&&c){var O=u(E,"length");O.configurable&&c(E,"length",{value:1+h(0,v.length-(arguments.length-1))})}return E};var w=function(){return s(e,n,arguments)};c?c(t.exports,"apply",{value:w}):t.exports.apply=w}(callBind)),callBind.exports}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var t=requireGetIntrinsic(),e=requireCallBind(),r=e(t("String.prototype.indexOf"));return callBound=function(o,s){var u=t(o,!!s);return typeof u=="function"&&r(o,".prototype.")>-1?e(u):u},callBound}var isArguments,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var t=requireShams()(),e=requireCallBound(),r=e("Object.prototype.toString"),n=function(c){return t&&c&&typeof c=="object"&&Symbol.toStringTag in c?!1:r(c)==="[object Arguments]"},o=function(c){return n(c)?!0:c!==null&&typeof c=="object"&&typeof c.length=="number"&&c.length>=0&&r(c)!=="[object Array]"&&r(c.callee)==="[object Function]"},s=function(){return n(arguments)}();return n.isLegacyArguments=o,isArguments=s?n:o,isArguments}var isGeneratorFunction,hasRequiredIsGeneratorFunction;function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var t=Object.prototype.toString,e=Function.prototype.toString,r=/^\s*(?:function)?\*/,n=requireShams()(),o=Object.getPrototypeOf,s=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},u;return isGeneratorFunction=function(h){if(typeof h!="function")return!1;if(r.test(e.call(h)))return!0;if(!n){var w=t.call(h);return w==="[object GeneratorFunction]"}if(!o)return!1;if(typeof u>"u"){var m=s();u=m?o(m):!1}return o(h)===u},isGeneratorFunction}var isCallable,hasRequiredIsCallable;function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,r,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{r=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,r)}catch(ie){ie!==n&&(e=null)}else e=null;var o=/^\s*class\b/,s=function(se){try{var N=t.call(se);return o.test(N)}catch{return!1}},u=function(se){try{return s(se)?!1:(t.call(se),!0)}catch{return!1}},c=Object.prototype.toString,h="[object Object]",w="[object Function]",m="[object GeneratorFunction]",v="[object HTMLAllCollection]",E="[object HTML document.all class]",O="[object HTMLCollection]",$=typeof Symbol=="function"&&!!Symbol.toStringTag,k=!(0 in[,]),B=function(){return!1};if(typeof document=="object"){var j=document.all;c.call(j)===c.call(document.all)&&(B=function(se){if((k||!se)&&(typeof se>"u"||typeof se=="object"))try{var N=c.call(se);return(N===v||N===E||N===O||N===h)&&se("")==null}catch{}return!1})}return isCallable=e?function(se){if(B(se))return!0;if(!se||typeof se!="function"&&typeof se!="object")return!1;try{e(se,null,r)}catch(N){if(N!==n)return!1}return!s(se)&&u(se)}:function(se){if(B(se))return!0;if(!se||typeof se!="function"&&typeof se!="object")return!1;if($)return u(se);if(s(se))return!1;var N=c.call(se);return N!==w&&N!==m&&!/^\[object HTML/.test(N)?!1:u(se)},isCallable}var forEach_1,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach_1;hasRequiredForEach=1;var t=requireIsCallable(),e=Object.prototype.toString,r=Object.prototype.hasOwnProperty,n=function(h,w,m){for(var v=0,E=h.length;v<E;v++)r.call(h,v)&&(m==null?w(h[v],v,h):w.call(m,h[v],v,h))},o=function(h,w,m){for(var v=0,E=h.length;v<E;v++)m==null?w(h.charAt(v),v,h):w.call(m,h.charAt(v),v,h)},s=function(h,w,m){for(var v in h)r.call(h,v)&&(m==null?w(h[v],v,h):w.call(m,h[v],v,h))},u=function(h,w,m){if(!t(w))throw new TypeError("iterator must be a function");var v;arguments.length>=3&&(v=m),e.call(h)==="[object Array]"?n(h,w,v):typeof h=="string"?o(h,w,v):s(h,w,v)};return forEach_1=u,forEach_1}var availableTypedArrays,hasRequiredAvailableTypedArrays;function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var t=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],e=typeof globalThis>"u"?commonjsGlobal:globalThis;return availableTypedArrays=function(){for(var n=[],o=0;o<t.length;o++)typeof e[t[o]]=="function"&&(n[n.length]=t[o]);return n},availableTypedArrays}var getOwnPropertyDescriptor,hasRequiredGetOwnPropertyDescriptor;function requireGetOwnPropertyDescriptor(){if(hasRequiredGetOwnPropertyDescriptor)return getOwnPropertyDescriptor;hasRequiredGetOwnPropertyDescriptor=1;var t=requireGetIntrinsic(),e=t("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return getOwnPropertyDescriptor=e,getOwnPropertyDescriptor}var isTypedArray,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray;hasRequiredIsTypedArray=1;var t=requireForEach(),e=requireAvailableTypedArrays(),r=requireCallBound(),n=r("Object.prototype.toString"),o=requireShams()(),s=typeof globalThis>"u"?commonjsGlobal:globalThis,u=e(),c=r("Array.prototype.indexOf",!0)||function($,k){for(var B=0;B<$.length;B+=1)if($[B]===k)return B;return-1},h=r("String.prototype.slice"),w={},m=requireGetOwnPropertyDescriptor(),v=Object.getPrototypeOf;o&&m&&v&&t(u,function(O){var $=new s[O];if(Symbol.toStringTag in $){var k=v($),B=m(k,Symbol.toStringTag);if(!B){var j=v(k);B=m(j,Symbol.toStringTag)}w[O]=B.get}});var E=function($){var k=!1;return t(w,function(B,j){if(!k)try{k=B.call($)===j}catch{}}),k};return isTypedArray=function($){if(!$||typeof $!="object")return!1;if(!o||!(Symbol.toStringTag in $)){var k=h(n($),8,-1);return c(u,k)>-1}return m?E($):!1},isTypedArray}var whichTypedArray,hasRequiredWhichTypedArray;function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var t=requireForEach(),e=requireAvailableTypedArrays(),r=requireCallBound(),n=r("Object.prototype.toString"),o=requireShams()(),s=typeof globalThis>"u"?commonjsGlobal:globalThis,u=e(),c=r("String.prototype.slice"),h={},w=requireGetOwnPropertyDescriptor(),m=Object.getPrototypeOf;o&&w&&m&&t(u,function(O){if(typeof s[O]=="function"){var $=new s[O];if(Symbol.toStringTag in $){var k=m($),B=w(k,Symbol.toStringTag);if(!B){var j=m(k);B=w(j,Symbol.toStringTag)}h[O]=B.get}}});var v=function($){var k=!1;return t(h,function(B,j){if(!k)try{var ie=B.call($);ie===j&&(k=ie)}catch{}}),k},E=requireIsTypedArray();return whichTypedArray=function($){return E($)?!o||!(Symbol.toStringTag in $)?c(n($),8,-1):v($):!1},whichTypedArray}var hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(t){var e=requireIsArguments(),r=requireIsGeneratorFunction(),n=requireWhichTypedArray(),o=requireIsTypedArray();function s(Z){return Z.call.bind(Z)}var u=typeof BigInt<"u",c=typeof Symbol<"u",h=s(Object.prototype.toString),w=s(Number.prototype.valueOf),m=s(String.prototype.valueOf),v=s(Boolean.prototype.valueOf);if(u)var E=s(BigInt.prototype.valueOf);if(c)var O=s(Symbol.prototype.valueOf);function $(Z,De){if(typeof Z!="object")return!1;try{return De(Z),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=o;function k(Z){return typeof Promise<"u"&&Z instanceof Promise||Z!==null&&typeof Z=="object"&&typeof Z.then=="function"&&typeof Z.catch=="function"}t.isPromise=k;function B(Z){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(Z):o(Z)||je(Z)}t.isArrayBufferView=B;function j(Z){return n(Z)==="Uint8Array"}t.isUint8Array=j;function ie(Z){return n(Z)==="Uint8ClampedArray"}t.isUint8ClampedArray=ie;function se(Z){return n(Z)==="Uint16Array"}t.isUint16Array=se;function N(Z){return n(Z)==="Uint32Array"}t.isUint32Array=N;function L(Z){return n(Z)==="Int8Array"}t.isInt8Array=L;function oe(Z){return n(Z)==="Int16Array"}t.isInt16Array=oe;function q(Z){return n(Z)==="Int32Array"}t.isInt32Array=q;function X(Z){return n(Z)==="Float32Array"}t.isFloat32Array=X;function de(Z){return n(Z)==="Float64Array"}t.isFloat64Array=de;function _e(Z){return n(Z)==="BigInt64Array"}t.isBigInt64Array=_e;function xe(Z){return n(Z)==="BigUint64Array"}t.isBigUint64Array=xe;function We(Z){return h(Z)==="[object Map]"}We.working=typeof Map<"u"&&We(new Map);function Ve(Z){return typeof Map>"u"?!1:We.working?We(Z):Z instanceof Map}t.isMap=Ve;function Ye(Z){return h(Z)==="[object Set]"}Ye.working=typeof Set<"u"&&Ye(new Set);function $t(Z){return typeof Set>"u"?!1:Ye.working?Ye(Z):Z instanceof Set}t.isSet=$t;function kt(Z){return h(Z)==="[object WeakMap]"}kt.working=typeof WeakMap<"u"&&kt(new WeakMap);function at(Z){return typeof WeakMap>"u"?!1:kt.working?kt(Z):Z instanceof WeakMap}t.isWeakMap=at;function Je(Z){return h(Z)==="[object WeakSet]"}Je.working=typeof WeakSet<"u"&&Je(new WeakSet);function Bt(Z){return Je(Z)}t.isWeakSet=Bt;function Ut(Z){return h(Z)==="[object ArrayBuffer]"}Ut.working=typeof ArrayBuffer<"u"&&Ut(new ArrayBuffer);function vt(Z){return typeof ArrayBuffer>"u"?!1:Ut.working?Ut(Z):Z instanceof ArrayBuffer}t.isArrayBuffer=vt;function be(Z){return h(Z)==="[object DataView]"}be.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&be(new DataView(new ArrayBuffer(1),0,1));function je(Z){return typeof DataView>"u"?!1:be.working?be(Z):Z instanceof DataView}t.isDataView=je;var he=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function st(Z){return h(Z)==="[object SharedArrayBuffer]"}function St(Z){return typeof he>"u"?!1:(typeof st.working>"u"&&(st.working=st(new he)),st.working?st(Z):Z instanceof he)}t.isSharedArrayBuffer=St;function It(Z){return h(Z)==="[object AsyncFunction]"}t.isAsyncFunction=It;function it(Z){return h(Z)==="[object Map Iterator]"}t.isMapIterator=it;function At(Z){return h(Z)==="[object Set Iterator]"}t.isSetIterator=At;function P(Z){return h(Z)==="[object Generator]"}t.isGeneratorObject=P;function W(Z){return h(Z)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=W;function ae(Z){return $(Z,w)}t.isNumberObject=ae;function Ae(Z){return $(Z,m)}t.isStringObject=Ae;function ge(Z){return $(Z,v)}t.isBooleanObject=ge;function Te(Z){return u&&$(Z,E)}t.isBigIntObject=Te;function Ie(Z){return c&&$(Z,O)}t.isSymbolObject=Ie;function we(Z){return ae(Z)||Ae(Z)||ge(Z)||Te(Z)||Ie(Z)}t.isBoxedPrimitive=we;function Ee(Z){return typeof Uint8Array<"u"&&(vt(Z)||St(Z))}t.isAnyArrayBuffer=Ee,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(Z){Object.defineProperty(t,Z,{enumerable:!1,value:function(){throw new Error(Z+" is not supported in userland")}})})}(types)),types}var isBufferBrowser,hasRequiredIsBufferBrowser;function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser||(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),isBufferBrowser}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}),inherits_browser.exports}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(t){var e=Object.getOwnPropertyDescriptors||function(je){for(var he=Object.keys(je),st={},St=0;St<he.length;St++)st[he[St]]=Object.getOwnPropertyDescriptor(je,he[St]);return st},r=/%[sdj%]/g;t.format=function(be){if(!L(be)){for(var je=[],he=0;he<arguments.length;he++)je.push(u(arguments[he]));return je.join(" ")}for(var he=1,st=arguments,St=st.length,It=String(be).replace(r,function(At){if(At==="%%")return"%";if(he>=St)return At;switch(At){case"%s":return String(st[he++]);case"%d":return Number(st[he++]);case"%j":try{return JSON.stringify(st[he++])}catch{return"[Circular]"}default:return At}}),it=st[he];he<St;it=st[++he])ie(it)||!de(it)?It+=" "+it:It+=" "+u(it);return It},t.deprecate=function(be,je){if(typeof process<"u"&&process.noDeprecation===!0)return be;if(typeof process>"u")return function(){return t.deprecate(be,je).apply(this,arguments)};var he=!1;function st(){if(!he){if(process.throwDeprecation)throw new Error(je);process.traceDeprecation?console.trace(je):console.error(je),he=!0}return be.apply(this,arguments)}return st};var n={},o=/^$/;if(process.env.NODE_DEBUG){var s=process.env.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+s+"$","i")}t.debuglog=function(be){if(be=be.toUpperCase(),!n[be])if(o.test(be)){var je=process.pid;n[be]=function(){var he=t.format.apply(t,arguments);console.error("%s %d: %s",be,je,he)}}else n[be]=function(){};return n[be]};function u(be,je){var he={seen:[],stylize:h};return arguments.length>=3&&(he.depth=arguments[2]),arguments.length>=4&&(he.colors=arguments[3]),j(je)?he.showHidden=je:je&&t._extend(he,je),q(he.showHidden)&&(he.showHidden=!1),q(he.depth)&&(he.depth=2),q(he.colors)&&(he.colors=!1),q(he.customInspect)&&(he.customInspect=!0),he.colors&&(he.stylize=c),m(he,be,he.depth)}t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function c(be,je){var he=u.styles[je];return he?"\x1B["+u.colors[he][0]+"m"+be+"\x1B["+u.colors[he][1]+"m":be}function h(be,je){return be}function w(be){var je={};return be.forEach(function(he,st){je[he]=!0}),je}function m(be,je,he){if(be.customInspect&&je&&We(je.inspect)&&je.inspect!==t.inspect&&!(je.constructor&&je.constructor.prototype===je)){var st=je.inspect(he,be);return L(st)||(st=m(be,st,he)),st}var St=v(be,je);if(St)return St;var It=Object.keys(je),it=w(It);if(be.showHidden&&(It=Object.getOwnPropertyNames(je)),xe(je)&&(It.indexOf("message")>=0||It.indexOf("description")>=0))return E(je);if(It.length===0){if(We(je)){var At=je.name?": "+je.name:"";return be.stylize("[Function"+At+"]","special")}if(X(je))return be.stylize(RegExp.prototype.toString.call(je),"regexp");if(_e(je))return be.stylize(Date.prototype.toString.call(je),"date");if(xe(je))return E(je)}var P="",W=!1,ae=["{","}"];if(B(je)&&(W=!0,ae=["[","]"]),We(je)){var Ae=je.name?": "+je.name:"";P=" [Function"+Ae+"]"}if(X(je)&&(P=" "+RegExp.prototype.toString.call(je)),_e(je)&&(P=" "+Date.prototype.toUTCString.call(je)),xe(je)&&(P=" "+E(je)),It.length===0&&(!W||je.length==0))return ae[0]+P+ae[1];if(he<0)return X(je)?be.stylize(RegExp.prototype.toString.call(je),"regexp"):be.stylize("[Object]","special");be.seen.push(je);var ge;return W?ge=O(be,je,he,it,It):ge=It.map(function(Te){return $(be,je,he,it,Te,W)}),be.seen.pop(),k(ge,P,ae)}function v(be,je){if(q(je))return be.stylize("undefined","undefined");if(L(je)){var he="'"+JSON.stringify(je).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return be.stylize(he,"string")}if(N(je))return be.stylize(""+je,"number");if(j(je))return be.stylize(""+je,"boolean");if(ie(je))return be.stylize("null","null")}function E(be){return"["+Error.prototype.toString.call(be)+"]"}function O(be,je,he,st,St){for(var It=[],it=0,At=je.length;it<At;++it)Je(je,String(it))?It.push($(be,je,he,st,String(it),!0)):It.push("");return St.forEach(function(P){P.match(/^\d+$/)||It.push($(be,je,he,st,P,!0))}),It}function $(be,je,he,st,St,It){var it,At,P;if(P=Object.getOwnPropertyDescriptor(je,St)||{value:je[St]},P.get?P.set?At=be.stylize("[Getter/Setter]","special"):At=be.stylize("[Getter]","special"):P.set&&(At=be.stylize("[Setter]","special")),Je(st,St)||(it="["+St+"]"),At||(be.seen.indexOf(P.value)<0?(ie(he)?At=m(be,P.value,null):At=m(be,P.value,he-1),At.indexOf(`
`)>-1&&(It?At=At.split(`
`).map(function(W){return"  "+W}).join(`
`).slice(2):At=`
`+At.split(`
`).map(function(W){return"   "+W}).join(`
`))):At=be.stylize("[Circular]","special")),q(it)){if(It&&St.match(/^\d+$/))return At;it=JSON.stringify(""+St),it.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(it=it.slice(1,-1),it=be.stylize(it,"name")):(it=it.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),it=be.stylize(it,"string"))}return it+": "+At}function k(be,je,he){var st=be.reduce(function(St,It){return It.indexOf(`
`)>=0,St+It.replace(/\u001b\[\d\d?m/g,"").length+1},0);return st>60?he[0]+(je===""?"":je+`
 `)+" "+be.join(`,
  `)+" "+he[1]:he[0]+je+" "+be.join(", ")+" "+he[1]}t.types=requireTypes();function B(be){return Array.isArray(be)}t.isArray=B;function j(be){return typeof be=="boolean"}t.isBoolean=j;function ie(be){return be===null}t.isNull=ie;function se(be){return be==null}t.isNullOrUndefined=se;function N(be){return typeof be=="number"}t.isNumber=N;function L(be){return typeof be=="string"}t.isString=L;function oe(be){return typeof be=="symbol"}t.isSymbol=oe;function q(be){return be===void 0}t.isUndefined=q;function X(be){return de(be)&&Ye(be)==="[object RegExp]"}t.isRegExp=X,t.types.isRegExp=X;function de(be){return typeof be=="object"&&be!==null}t.isObject=de;function _e(be){return de(be)&&Ye(be)==="[object Date]"}t.isDate=_e,t.types.isDate=_e;function xe(be){return de(be)&&(Ye(be)==="[object Error]"||be instanceof Error)}t.isError=xe,t.types.isNativeError=xe;function We(be){return typeof be=="function"}t.isFunction=We;function Ve(be){return be===null||typeof be=="boolean"||typeof be=="number"||typeof be=="string"||typeof be=="symbol"||typeof be>"u"}t.isPrimitive=Ve,t.isBuffer=requireIsBufferBrowser();function Ye(be){return Object.prototype.toString.call(be)}function $t(be){return be<10?"0"+be.toString(10):be.toString(10)}var kt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function at(){var be=new Date,je=[$t(be.getHours()),$t(be.getMinutes()),$t(be.getSeconds())].join(":");return[be.getDate(),kt[be.getMonth()],je].join(" ")}t.log=function(){console.log("%s - %s",at(),t.format.apply(t,arguments))},t.inherits=requireInherits_browser(),t._extend=function(be,je){if(!je||!de(je))return be;for(var he=Object.keys(je),st=he.length;st--;)be[he[st]]=je[he[st]];return be};function Je(be,je){return Object.prototype.hasOwnProperty.call(be,je)}var Bt=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(je){if(typeof je!="function")throw new TypeError('The "original" argument must be of type Function');if(Bt&&je[Bt]){var he=je[Bt];if(typeof he!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(he,Bt,{value:he,enumerable:!1,writable:!1,configurable:!0}),he}function he(){for(var st,St,It=new Promise(function(P,W){st=P,St=W}),it=[],At=0;At<arguments.length;At++)it.push(arguments[At]);it.push(function(P,W){P?St(P):st(W)});try{je.apply(this,it)}catch(P){St(P)}return It}return Object.setPrototypeOf(he,Object.getPrototypeOf(je)),Bt&&Object.defineProperty(he,Bt,{value:he,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(he,e(je))},t.promisify.custom=Bt;function Ut(be,je){if(!be){var he=new Error("Promise was rejected with a falsy value");he.reason=be,be=he}return je(be)}function vt(be){if(typeof be!="function")throw new TypeError('The "original" argument must be of type Function');function je(){for(var he=[],st=0;st<arguments.length;st++)he.push(arguments[st]);var St=he.pop();if(typeof St!="function")throw new TypeError("The last argument must be of type Function");var It=this,it=function(){return St.apply(It,arguments)};be.apply(this,he).then(function(At){process.nextTick(it.bind(null,null,At))},function(At){process.nextTick(Ut.bind(null,At,it))})}return Object.setPrototypeOf(je,Object.getPrototypeOf(be)),Object.defineProperties(je,e(be)),je}t.callbackify=vt}(util$5)),util$5}Object.defineProperty(utils,"__esModule",{value:!0});utils.b64UrlDecode=utils.b64UrlEncode=utils.bufferTob64Url=utils.bufferTob64=utils.b64UrlToBuffer=utils.stringToB64Url=utils.stringToBuffer=utils.bufferToString=utils.b64UrlToString=utils.concatBuffers=void 0;const B64js=base64Js;function concatBuffers(t){let e=0;for(let o=0;o<t.length;o++)e+=t[o].byteLength;let r=new Uint8Array(e),n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let o=1;o<t.length;o++)r.set(new Uint8Array(t[o]),n),n+=t[o].byteLength;return r}utils.concatBuffers=concatBuffers;function b64UrlToString(t){let e=b64UrlToBuffer(t);return bufferToString(e)}utils.b64UrlToString=b64UrlToString;function bufferToString(t){if(typeof TextDecoder>"u"){const e=requireUtil().TextDecoder;return new e("utf-8",{fatal:!0}).decode(t)}return new TextDecoder("utf-8",{fatal:!0}).decode(t)}utils.bufferToString=bufferToString;function stringToBuffer(t){if(typeof TextEncoder>"u"){const e=requireUtil().TextEncoder;return new e().encode(t)}return new TextEncoder().encode(t)}utils.stringToBuffer=stringToBuffer;function stringToB64Url(t){return bufferTob64Url(stringToBuffer(t))}utils.stringToB64Url=stringToB64Url;function b64UrlToBuffer(t){return new Uint8Array(B64js.toByteArray(b64UrlDecode(t)))}utils.b64UrlToBuffer=b64UrlToBuffer;function bufferTob64(t){return B64js.fromByteArray(new Uint8Array(t))}utils.bufferTob64=bufferTob64;function bufferTob64Url(t){return b64UrlEncode(bufferTob64(t))}utils.bufferTob64Url=bufferTob64Url;function b64UrlEncode(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}utils.b64UrlEncode=b64UrlEncode;function b64UrlDecode(t){t=t.replace(/\-/g,"+").replace(/\_/g,"/");let e;return t.length%4==0?e=0:e=4-t.length%4,t.concat("=".repeat(e))}utils.b64UrlDecode=b64UrlDecode;Object.defineProperty(webcryptoDriver,"__esModule",{value:!0});const ArweaveUtils$3=utils;class WebCryptoDriver{constructor(){if(this.keyLength=4096,this.publicExponent=65537,this.hashAlgorithm="sha256",!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let e=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),r=await this.driver.exportKey("jwk",e.privateKey);return{kty:r.kty,e:r.e,n:r.n,d:r.d,p:r.p,q:r.q,dp:r.dp,dq:r.dq,qi:r.qi}}async sign(e,r,{saltLength:n}={}){let o=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(e),r);return new Uint8Array(o)}async hash(e,r="SHA-256"){let n=await this.driver.digest(r,e);return new Uint8Array(n)}async verify(e,r,n){const o={kty:"RSA",e:"AQAB",n:e},s=await this.jwkToPublicCryptoKey(o),u=this.driver.verify({name:"RSA-PSS",saltLength:32},s,n,r),c=this.driver.verify({name:"RSA-PSS",saltLength:0},s,n,r);return u||c}async jwkToCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;const e=crypto==null?void 0:crypto.subtle;return e===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(n=>typeof e[n]=="function")}async encrypt(e,r,n){const o=await this.driver.importKey("raw",typeof r=="string"?ArweaveUtils$3.stringToBuffer(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:n?ArweaveUtils$3.stringToBuffer(n):ArweaveUtils$3.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},o,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),u=new Uint8Array(16);crypto.getRandomValues(u);const c=await this.driver.encrypt({name:"AES-CBC",iv:u},s,e);return ArweaveUtils$3.concatBuffers([u,c])}async decrypt(e,r,n){const o=await this.driver.importKey("raw",typeof r=="string"?ArweaveUtils$3.stringToBuffer(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:n?ArweaveUtils$3.stringToBuffer(n):ArweaveUtils$3.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},o,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),u=e.slice(0,16),c=await this.driver.decrypt({name:"AES-CBC",iv:u},s,e.slice(16));return ArweaveUtils$3.concatBuffers([c])}}webcryptoDriver.default=WebCryptoDriver;var network={};Object.defineProperty(network,"__esModule",{value:!0});class Network{constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}}network.default=Network;var transactions={},error={};Object.defineProperty(error,"__esModule",{value:!0});error.getError=void 0;class ArweaveError extends Error{constructor(e,r={}){r.message?super(r.message):super(),this.type=e,this.response=r.response}getType(){return this.type}}error.default=ArweaveError;function getError(t){let e=t.data;if(typeof t.data=="string")try{e=JSON.parse(t.data)}catch{}if(t.data instanceof ArrayBuffer||t.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:t.statusText||"unknown"}error.getError=getError;var transaction={},deepHash={},hasRequiredDeepHash;function requireDeepHash(){if(hasRequiredDeepHash)return deepHash;hasRequiredDeepHash=1,Object.defineProperty(deepHash,"__esModule",{value:!0});const t=requireCommon();async function e(n){if(Array.isArray(n)){const u=t.default.utils.concatBuffers([t.default.utils.stringToBuffer("list"),t.default.utils.stringToBuffer(n.length.toString())]);return await r(n,await t.default.crypto.hash(u,"SHA-384"))}const o=t.default.utils.concatBuffers([t.default.utils.stringToBuffer("blob"),t.default.utils.stringToBuffer(n.byteLength.toString())]),s=t.default.utils.concatBuffers([await t.default.crypto.hash(o,"SHA-384"),await t.default.crypto.hash(n,"SHA-384")]);return await t.default.crypto.hash(s,"SHA-384")}deepHash.default=e;async function r(n,o){if(n.length<1)return o;const s=t.default.utils.concatBuffers([o,await e(n[0])]),u=await t.default.crypto.hash(s,"SHA-384");return await r(n.slice(1),u)}return deepHash}var merkle={},hasRequiredMerkle;function requireMerkle(){return hasRequiredMerkle||(hasRequiredMerkle=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.debug=t.validatePath=t.arrayCompare=t.bufferToInt=t.intToBuffer=t.arrayFlatten=t.generateProofs=t.buildLayers=t.generateTransactionChunks=t.generateTree=t.computeRootHash=t.generateLeaves=t.chunkData=t.MIN_CHUNK_SIZE=t.MAX_CHUNK_SIZE=void 0;const e=requireCommon(),r=utils;t.MAX_CHUNK_SIZE=256*1024,t.MIN_CHUNK_SIZE=32*1024;const n=32,o=32;async function s(L){let oe=[],q=L,X=0;for(;q.byteLength>=t.MAX_CHUNK_SIZE;){let de=t.MAX_CHUNK_SIZE,_e=q.byteLength-t.MAX_CHUNK_SIZE;_e>0&&_e<t.MIN_CHUNK_SIZE&&(de=Math.ceil(q.byteLength/2));const xe=q.slice(0,de),We=await e.default.crypto.hash(xe);X+=xe.byteLength,oe.push({dataHash:We,minByteRange:X-xe.byteLength,maxByteRange:X}),q=q.slice(de)}return oe.push({dataHash:await e.default.crypto.hash(q),minByteRange:X,maxByteRange:X+q.byteLength}),oe}t.chunkData=s;async function u(L){return Promise.all(L.map(async({dataHash:oe,minByteRange:q,maxByteRange:X})=>({type:"leaf",id:await k(await Promise.all([k(oe),k(B(X))])),dataHash:oe,minByteRange:q,maxByteRange:X})))}t.generateLeaves=u;async function c(L){return(await h(L)).id}t.computeRootHash=c;async function h(L){return await m(await u(await s(L)))}t.generateTree=h;async function w(L){const oe=await s(L),q=await u(oe),X=await m(q),de=await v(X),_e=oe.slice(-1)[0];return _e.maxByteRange-_e.minByteRange===0&&(oe.splice(oe.length-1,1),de.splice(de.length-1,1)),{data_root:X.id,chunks:oe,proofs:de}}t.generateTransactionChunks=w;async function m(L,oe=0){if(L.length<2)return L[0];const q=[];for(let X=0;X<L.length;X+=2)q.push(await $(L[X],L[X+1]));return m(q,oe+1)}t.buildLayers=m;function v(L){const oe=E(L);return Array.isArray(oe)?O(oe):[oe]}t.generateProofs=v;function E(L,oe=new Uint8Array,q=0){if(L.type=="leaf")return{offset:L.maxByteRange-1,proof:(0,r.concatBuffers)([oe,L.dataHash,B(L.maxByteRange)])};if(L.type=="branch"){const X=(0,r.concatBuffers)([oe,L.leftChild.id,L.rightChild.id,B(L.byteRange)]);return[E(L.leftChild,X,q+1),E(L.rightChild,X,q+1)]}throw new Error("Unexpected node type")}function O(L){const oe=[];return L.forEach(q=>{Array.isArray(q)?oe.push(...O(q)):oe.push(q)}),oe}t.arrayFlatten=O;async function $(L,oe){return oe?{type:"branch",id:await k([await k(L.id),await k(oe.id),await k(B(L.maxByteRange))]),byteRange:L.maxByteRange,maxByteRange:oe.maxByteRange,leftChild:L,rightChild:oe}:L}async function k(L){return Array.isArray(L)&&(L=e.default.utils.concatBuffers(L)),new Uint8Array(await e.default.crypto.hash(L))}function B(L){const oe=new Uint8Array(n);for(var q=oe.length-1;q>=0;q--){var X=L%256;oe[q]=X,L=(L-X)/256}return oe}t.intToBuffer=B;function j(L){let oe=0;for(var q=0;q<L.length;q++)oe*=256,oe+=L[q];return oe}t.bufferToInt=j;const ie=(L,oe)=>L.every((q,X)=>oe[X]===q);t.arrayCompare=ie;async function se(L,oe,q,X,de){if(X<=0)return!1;if(oe>=X)return se(L,0,X-1,X,de);if(oe<0)return se(L,0,0,X,de);if(de.length==o+n){const kt=de.slice(0,o),at=de.slice(kt.length,kt.length+n),Je=await k([await k(kt),await k(at)]);return(0,t.arrayCompare)(L,Je)?{offset:X-1,leftBound:q,rightBound:X,chunkSize:X-q}:!1}const _e=de.slice(0,o),xe=de.slice(_e.length,_e.length+o),We=de.slice(_e.length+xe.length,_e.length+xe.length+n),Ve=j(We),Ye=de.slice(_e.length+xe.length+We.length),$t=await k([await k(_e),await k(xe),await k(We)]);return(0,t.arrayCompare)(L,$t)?oe<Ve?await se(_e,oe,q,Math.min(X,Ve),Ye):await se(xe,oe,Math.max(q,Ve),X,Ye):!1}t.validatePath=se;async function N(L,oe=""){if(L.byteLength<1)return oe;const q=L.slice(0,o),X=L.slice(q.length,q.length+o),de=L.slice(q.length+X.length,q.length+X.length+n),_e=j(de),xe=L.slice(q.length+X.length+de.length),We=await k([await k(q),await k(X),await k(de)]),Ve=`${oe}
${JSON.stringify(Buffer.from(q))},${JSON.stringify(Buffer.from(X))},${_e} => ${JSON.stringify(We)}`;return N(xe,Ve)}t.debug=N}(merkle)),merkle}var hasRequiredTransaction;function requireTransaction(){if(hasRequiredTransaction)return transaction;hasRequiredTransaction=1,Object.defineProperty(transaction,"__esModule",{value:!0}),transaction.Tag=void 0;const t=utils,e=requireDeepHash(),r=requireMerkle();class n{get(c,h){if(!Object.getOwnPropertyNames(this).includes(c))throw new Error(`Field "${c}" is not a property of the Arweave Transaction class.`);return this[c]instanceof Uint8Array?h&&h.decode&&h.string?t.bufferToString(this[c]):h&&h.decode&&!h.string?this[c]:t.bufferTob64Url(this[c]):h&&h.decode==!0?h&&h.string?t.b64UrlToString(this[c]):t.b64UrlToBuffer(this[c]):this[c]}}class o extends n{constructor(c,h,w=!1){super(),this.name=c,this.value=h}}transaction.Tag=o;class s extends n{constructor(c={}){super(),this.format=2,this.id="",this.last_tx="",this.owner="",this.tags=[],this.target="",this.quantity="0",this.data_size="0",this.data=new Uint8Array,this.data_root="",this.reward="0",this.signature="",Object.assign(this,c),typeof this.data=="string"&&(this.data=t.b64UrlToBuffer(this.data)),c.tags&&(this.tags=c.tags.map(h=>new o(h.name,h.value)))}addTag(c,h){this.tags.push(new o(t.stringToB64Url(c),t.stringToB64Url(h)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:t.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(c){this.owner=c}setSignature({id:c,owner:h,reward:w,tags:m,signature:v}){this.id=c,this.owner=h,w&&(this.reward=w),m&&(this.tags=m),this.signature=v}async prepareChunks(c){!this.chunks&&c.byteLength>0&&(this.chunks=await(0,r.generateTransactionChunks)(c),this.data_root=t.bufferTob64Url(this.chunks.data_root)),!this.chunks&&c.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(c,h){if(!this.chunks)throw new Error("Chunks have not been prepared");const w=this.chunks.proofs[c],m=this.chunks.chunks[c];return{data_root:this.data_root,data_size:this.data_size,data_path:t.bufferTob64Url(w.proof),offset:w.offset.toString(),chunk:t.bufferTob64Url(h.slice(m.minByteRange,m.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let c=this.tags.reduce((w,m)=>t.concatBuffers([w,m.get("name",{decode:!0,string:!1}),m.get("value",{decode:!0,string:!1})]),new Uint8Array);return t.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),t.stringToBuffer(this.quantity),t.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),c]);case 2:this.data_root||await this.prepareChunks(this.data);const h=this.tags.map(w=>[w.get("name",{decode:!0,string:!1}),w.get("value",{decode:!0,string:!1})]);return await(0,e.default)([t.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),t.stringToBuffer(this.quantity),t.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),h,t.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}}return transaction.default=s,transaction}var transactionUploader={},hasRequiredTransactionUploader;function requireTransactionUploader(){if(hasRequiredTransactionUploader)return transactionUploader;hasRequiredTransactionUploader=1,Object.defineProperty(transactionUploader,"__esModule",{value:!0}),transactionUploader.TransactionUploader=void 0;const t=requireTransaction(),e=utils,r=error,n=requireMerkle(),o=1,s=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],u=1e3*40;class c{constructor(w,m){if(this.api=w,this.chunkIndex=0,this.txPosted=!1,this.lastRequestTimeEnd=0,this.totalErrors=0,this.lastResponseStatus=0,this.lastResponseError="",!m.id)throw new Error("Transaction is not signed");if(!m.chunks)throw new Error("Transaction chunks not prepared");this.data=m.data,this.transaction=new t.default(Object.assign({},m,{data:new Uint8Array(0)}))}get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}async uploadChunk(w){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let m=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+u-Date.now(),u);if(m>0&&(m=m-m*Math.random()*.3,await new Promise($=>setTimeout($,m))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}w&&(this.chunkIndex=w);const v=this.transaction.getChunk(w||this.chunkIndex,this.data);if(!await(0,n.validatePath)(this.transaction.chunks.data_root,parseInt(v.offset),0,parseInt(v.data_size),e.b64UrlToBuffer(v.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const O=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch($=>(console.error($.message),{status:-1,data:{error:$.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=O.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=(0,r.getError)(O),s.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(w,m,v){if(!m||typeof m.chunkIndex!="number"||typeof m.transaction!="object")throw new Error("Serialized object does not match expected format.");var E=new t.default(m.transaction);E.chunks||await E.prepareChunks(v);const O=new c(w,E);if(O.chunkIndex=m.chunkIndex,O.lastRequestTimeEnd=m.lastRequestTimeEnd,O.lastResponseError=m.lastResponseError,O.lastResponseStatus=m.lastResponseStatus,O.txPosted=m.txPosted,O.data=v,O.transaction.data_root!==m.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return O}static async fromTransactionId(w,m){const v=await w.get(`tx/${m}`);if(v.status!==200)throw new Error(`Tx ${m} not found: ${v.status}`);const E=v.data;return E.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:E}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=o){this.transaction.data=this.data;const v=await this.api.post("tx",this.transaction).catch(E=>(console.error(E),{status:-1,data:{error:E.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=v.status,this.transaction.data=new Uint8Array(0),v.status>=200&&v.status<300){this.txPosted=!0,this.chunkIndex=o;return}throw this.lastResponseError=(0,r.getError)(v),new Error(`Unable to upload transaction: ${v.status}, ${this.lastResponseError}`)}const m=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=m.status,!(m.status>=200&&m.status<300))throw this.lastResponseError=(0,r.getError)(m),new Error(`Unable to upload transaction: ${m.status}, ${this.lastResponseError}`);this.txPosted=!0}}return transactionUploader.TransactionUploader=c,transactionUploader}var hasRequiredTransactions;function requireTransactions(){if(hasRequiredTransactions)return transactions;hasRequiredTransactions=1;var t=commonjsGlobal&&commonjsGlobal.__await||function(c){return this instanceof t?(this.v=c,this):new t(c)},e=commonjsGlobal&&commonjsGlobal.__asyncGenerator||function(c,h,w){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m=w.apply(c,h||[]),v,E=[];return v={},O("next"),O("throw"),O("return"),v[Symbol.asyncIterator]=function(){return this},v;function O(se){m[se]&&(v[se]=function(N){return new Promise(function(L,oe){E.push([se,N,L,oe])>1||$(se,N)})})}function $(se,N){try{k(m[se](N))}catch(L){ie(E[0][3],L)}}function k(se){se.value instanceof t?Promise.resolve(se.value.v).then(B,j):ie(E[0][2],se)}function B(se){$("next",se)}function j(se){$("throw",se)}function ie(se,N){se(N),E.shift(),E.length&&$(E[0][0],E[0][1])}};Object.defineProperty(transactions,"__esModule",{value:!0});const r=error,n=requireTransaction(),o=utils,s=requireTransactionUploader();class u{constructor(h,w,m){this.api=h,this.crypto=w,this.chunks=m}getTransactionAnchor(){return this.api.get("tx_anchor",{transformResponse:[]}).then(h=>h.data)}getPrice(h,w){let m=w?`price/${h}/${w}`:`price/${h}`;return this.api.get(m,{transformResponse:[function(v){return v}]}).then(v=>v.data)}async get(h){const w=await this.api.get(`tx/${h}`);if(w.status==200){const m=parseInt(w.data.data_size);if(w.data.format>=2&&m>0&&m<=1024*1024*12){const v=await this.getData(h);return new n.default(Object.assign(Object.assign({},w.data),{data:v}))}return new n.default(Object.assign(Object.assign({},w.data),{format:w.data.format||1}))}throw w.status==404?new r.default("TX_NOT_FOUND"):w.status==410?new r.default("TX_FAILED"):new r.default("TX_INVALID")}fromRaw(h){return new n.default(h)}async search(h,w){return this.api.post("arql",{op:"equals",expr1:h,expr2:w}).then(m=>m.data?m.data:[])}getStatus(h){return this.api.get(`tx/${h}/status`).then(w=>w.status==200?{status:200,confirmed:w.data}:{status:w.status,confirmed:null})}async getData(h,w){let m;try{m=await this.chunks.downloadChunkedData(h)}catch(v){console.error(`Error while trying to download chunked data for ${h}`),console.error(v)}if(!m){console.warn(`Falling back to gateway cache for ${h}`);try{m=(await this.api.get(`/${h}`)).data}catch(v){console.error(`Error while trying to download contiguous data from gateway cache for ${h}`),console.error(v)}}if(!m)throw new Error(`${h} was not found!`);return w&&w.decode&&!w.string?m:w&&w.decode&&w.string?o.bufferToString(m):o.bufferTob64Url(m)}async sign(h,w,m){if(!w&&(typeof window>"u"||!window.arweaveWallet))throw new Error("A new Arweave transaction must provide the jwk parameter.");if(!w||w==="use_wallet"){try{(await window.arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await window.arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}const v=await window.arweaveWallet.sign(h,m);h.setSignature({id:v.id,owner:v.owner,reward:v.reward,tags:v.tags,signature:v.signature})}else{h.setOwner(w.n);let v=await h.getSignatureData(),E=await this.crypto.sign(w,v,m),O=await this.crypto.hash(E);h.setSignature({id:o.bufferTob64Url(O),owner:w.n,signature:o.bufferTob64Url(E)})}}async verify(h){const w=await h.getSignatureData(),m=h.get("signature",{decode:!0,string:!1}),v=o.bufferTob64Url(await this.crypto.hash(m));if(h.id!==v)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(h.owner,w,m)}async post(h){if(typeof h=="string"?h=new n.default(JSON.parse(h)):typeof h.readInt32BE=="function"?h=new n.default(JSON.parse(h.toString())):typeof h=="object"&&!(h instanceof n.default)&&(h=new n.default(h)),!(h instanceof n.default))throw new Error("Must be Transaction object");h.chunks||await h.prepareChunks(h.data);const w=await this.getUploader(h,h.data);try{for(;!w.isComplete;)await w.uploadChunk()}catch(m){if(w.lastResponseStatus>0)return{status:w.lastResponseStatus,statusText:w.lastResponseError,data:{error:w.lastResponseError}};throw m}return{status:200,statusText:"OK",data:{}}}async getUploader(h,w){let m;if(w instanceof ArrayBuffer&&(w=new Uint8Array(w)),h instanceof n.default){if(w||(w=h.data),!(w instanceof Uint8Array))throw new Error("Data format is invalid");h.chunks||await h.prepareChunks(w),m=new s.TransactionUploader(this.api,h),(!m.data||m.data.length===0)&&(m.data=w)}else{if(typeof h=="string"&&(h=await s.TransactionUploader.fromTransactionId(this.api,h)),!w||!(w instanceof Uint8Array))throw new Error("Must provide data when resuming upload");m=await s.TransactionUploader.fromSerialized(this.api,h,w)}return m}upload(h,w){return e(this,arguments,function*(){const v=yield t(this.getUploader(h,w));for(;!v.isComplete;)yield t(v.uploadChunk()),yield yield t(v);return yield t(v)})}}return transactions.default=u,transactions}var wallets={};Object.defineProperty(wallets,"__esModule",{value:!0});const ArweaveUtils$2=utils;class Wallets{constructor(e,r){this.api=e,this.crypto=r}getBalance(e){return this.api.get(`wallet/${e}/balance`,{transformResponse:[function(r){return r}]}).then(r=>r.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(r=>r.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await window.arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return window.arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return ArweaveUtils$2.bufferTob64Url(await this.crypto.hash(ArweaveUtils$2.b64UrlToBuffer(e)))}}wallets.default=Wallets;var silo={};Object.defineProperty(silo,"__esModule",{value:!0});silo.SiloResource=void 0;const ArweaveUtils$1=utils;class Silo{constructor(e,r,n){this.api=e,this.crypto=r,this.transactions=n}async get(e){if(!e)throw new Error("No Silo URI specified");const r=await this.parseUri(e),n=await this.transactions.search("Silo-Name",r.getAccessKey());if(n.length==0)throw new Error(`No data could be found for the Silo URI: ${e}`);const o=await this.transactions.get(n[0]);if(!o)throw new Error(`No data could be found for the Silo URI: ${e}`);const s=o.get("data",{decode:!0,string:!1});return this.crypto.decrypt(s,r.getEncryptionKey())}async readTransactionData(e,r){if(!r)throw new Error("No Silo URI specified");const n=await this.parseUri(r),o=e.get("data",{decode:!0,string:!1});return this.crypto.decrypt(o,n.getEncryptionKey())}async parseUri(e){const r=e.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!r)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");const n=r[1],o=Math.pow(2,parseInt(r[2])),s=await this.hash(ArweaveUtils$1.stringToBuffer(n),o),u=ArweaveUtils$1.bufferTob64(s.slice(0,15)),c=await this.hash(s.slice(16,31),1);return new SiloResource(e,u,c)}async hash(e,r){let n=await this.crypto.hash(e);for(let o=0;o<r-1;o++)n=await this.crypto.hash(n);return n}}silo.default=Silo;class SiloResource{constructor(e,r,n){this.uri=e,this.accessKey=r,this.encryptionKey=n}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}}silo.SiloResource=SiloResource;var chunks={};Object.defineProperty(chunks,"__esModule",{value:!0});const error_1$1=error,ArweaveUtils=utils;class Chunks{constructor(e){this.api=e}async getTransactionOffset(e){const r=await this.api.get(`tx/${e}/offset`);if(r.status===200)return r.data;throw new Error(`Unable to get transaction offset: ${(0,error_1$1.getError)(r)}`)}async getChunk(e){const r=await this.api.get(`chunk/${e}`);if(r.status===200)return r.data;throw new Error(`Unable to get chunk: ${(0,error_1$1.getError)(r)}`)}async getChunkData(e){const r=await this.getChunk(e);return ArweaveUtils.b64UrlToBuffer(r.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e){const r=await this.getTransactionOffset(e),n=parseInt(r.size),s=parseInt(r.offset)-n+1,u=new Uint8Array(n);let c=0;for(;c<n;){this.api.config.logging&&console.log(`[chunk] ${c}/${n}`);let h;try{h=await this.getChunkData(s+c)}catch{console.error(`[chunk] Failed to fetch chunk at offset ${s+c}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(h)u.set(h,c),c+=h.length;else throw new Error(`Couldn't complete data download at ${c}/${n}`)}return u}}chunks.default=Chunks;var blocks={};Object.defineProperty(blocks,"__esModule",{value:!0});const error_1=error;class Blocks{constructor(e,r){this.api=e,this.network=r}async get(e){const r=await this.api.get(`${Blocks.ENDPOINT}${e}`);if(r.status===200)return r.data;throw r.status===404?new error_1.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getCurrent(){const{current:e}=await this.network.getInfo();return await this.get(e)}}blocks.default=Blocks;Blocks.ENDPOINT="block/hash/";var hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common$2;hasRequiredCommon=1,Object.defineProperty(common$2,"__esModule",{value:!0});const t=ar,e=api,r=webcryptoDriver,n=network,o=requireTransactions(),s=wallets,u=requireTransaction(),c=utils,h=silo,w=chunks,m=blocks;class v{constructor(O){this.api=new e.default(O),this.wallets=new s.default(this.api,v.crypto),this.chunks=new w.default(this.api),this.transactions=new o.default(this.api,v.crypto,this.chunks),this.silo=new h.default(this.api,this.crypto,this.transactions),this.network=new n.default(this.api),this.blocks=new m.default(this.api,this.network),this.ar=new t.default}get crypto(){return v.crypto}get utils(){return v.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(O,$){const k={};if(Object.assign(k,O),!O.data&&!(O.target&&O.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(O.owner==null&&$&&$!=="use_wallet"&&(k.owner=$.n),O.last_tx==null&&(k.last_tx=await this.transactions.getTransactionAnchor()),typeof O.data=="string"&&(O.data=c.stringToBuffer(O.data)),O.data instanceof ArrayBuffer&&(O.data=new Uint8Array(O.data)),O.data&&!(O.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(O.reward==null){const j=O.data?O.data.byteLength:0;k.reward=await this.transactions.getPrice(j,k.target)}k.data_root="",k.data_size=O.data?O.data.byteLength.toString():"0",k.data=O.data||new Uint8Array(0);const B=new u.default(k);return await B.getSignatureData(),B}async createSiloTransaction(O,$,k){const B={};if(Object.assign(B,O),!O.data)throw new Error("Silo transactions must have a 'data' value");if(!k)throw new Error("No Silo URI specified.");if(O.target||O.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(O.owner==null){if(!$||!$.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");B.owner=$.n}O.last_tx==null&&(B.last_tx=await this.transactions.getTransactionAnchor());const j=await this.silo.parseUri(k);if(typeof O.data=="string"){const se=await this.crypto.encrypt(c.stringToBuffer(O.data),j.getEncryptionKey());B.reward=await this.transactions.getPrice(se.byteLength),B.data=c.bufferTob64Url(se)}if(O.data instanceof Uint8Array){const se=await this.crypto.encrypt(O.data,j.getEncryptionKey());B.reward=await this.transactions.getPrice(se.byteLength),B.data=c.bufferTob64Url(se)}const ie=new u.default(B);return ie.addTag("Silo-Name",j.getAccessKey()),ie.addTag("Silo-Version","0.1.0"),ie}arql(O){return this.api.post("/arql",O).then($=>$.data||[])}}return common$2.default=v,v.crypto=new r.default,v.utils=c,common$2}(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,s,u,c){c===void 0&&(c=u);var h=Object.getOwnPropertyDescriptor(s,u);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,c,h)}:function(o,s,u,c){c===void 0&&(c=u),o[c]=s[u]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(o,s){for(var u in o)u!=="default"&&!Object.prototype.hasOwnProperty.call(s,u)&&e(s,o,u)};Object.defineProperty(t,"__esModule",{value:!0});const n=requireCommon();n.default.init=function(o={}){function s(){const m={host:"arweave.net",port:443,protocol:"https"};if(!window||!window.location||!window.location.protocol||!window.location.hostname)return m;const v=window.location.protocol.replace(":",""),E=window.location.hostname,O=window.location.port?parseInt(window.location.port):v=="https"?443:80;return["localhost","127.0.0.1"].includes(E)||v=="file"?m:{host:E,port:O,protocol:v}}const u=s(),c=o.protocol||u.protocol,h=o.host||u.host,w=o.port||u.port;return new n.default(Object.assign(Object.assign({},o),{host:h,protocol:c,port:w}))},window.Arweave=n.default,r(requireCommon(),t),t.default=n.default})(web);const Arweave=getDefaultExportFromCjs(web);function create_fragment$2(t){let e;return{c(){e=element("div")},l(r){e=claim_element(r,"DIV",{}),children(e).forEach(detach)},m(r,n){insert_hydration(r,e,n),t[3](e)},p:noop$3,i:noop$3,o:noop$3,d(r){r&&detach(e),t[3](null)}}}function instance$2(t,e,r){let{src:n}=e,{props:o={}}=e,s;const u=createEventDispatcher();onMount(async()=>{!n||c({text:n,target:s,props:o})});async function c({text:w,target:m,props:v}){u("target",m);const E=new Blob([w],{type:"text/javascript"}),O=URL.createObjectURL(E),$=(await __vitePreload(()=>import(O),[],import.meta.url)).default;u("ready",$),m.innerHTML="";const k=new $({target:m,props:v});return O&&URL.revokeObjectURL(O),u("mounted",k),k.$on("change",B=>{u("change",B.detail)}),k}function h(w){binding_callbacks[w?"unshift":"push"](()=>{s=w,r(0,s)})}return t.$$set=w=>{"src"in w&&r(1,n=w.src),"props"in w&&r(2,o=w.props)},[s,n,o,h]}class Mount extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$2,create_fragment$2,safe_not_equal,{src:1,props:2})}}var encode_1$4=encode$r,MSB$6=128,REST$6=127,MSBALL$4=~REST$6,INT$4=Math.pow(2,31);function encode$r(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw encode$r.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var n=r;t>=INT$4;)e[r++]=t&255|MSB$6,t/=128;for(;t&MSBALL$4;)e[r++]=t&255|MSB$6,t>>>=7;return e[r]=t|0,encode$r.bytes=r-n+1,e}var decode$t=read$4,MSB$5=128,REST$5=127;function read$4(t,n){var r=0,n=n||0,o=0,s=n,u,c=t.length;do{if(s>=c||o>49)throw read$4.bytes=0,new RangeError("Could not decode varint");u=t[s++],r+=o<28?(u&REST$5)<<o:(u&REST$5)*Math.pow(2,o),o+=7}while(u>=MSB$5);return read$4.bytes=s-n,r}var N1$4=Math.pow(2,7),N2$4=Math.pow(2,14),N3$4=Math.pow(2,21),N4$4=Math.pow(2,28),N5$4=Math.pow(2,35),N6$4=Math.pow(2,42),N7$4=Math.pow(2,49),N8$4=Math.pow(2,56),N9$4=Math.pow(2,63),length$5=function(t){return t<N1$4?1:t<N2$4?2:t<N3$4?3:t<N4$4?4:t<N5$4?5:t<N6$4?6:t<N7$4?7:t<N8$4?8:t<N9$4?9:10},varint$4={encode:encode_1$4,decode:decode$t,encodingLength:length$5};const typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is$1(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";const e=typeof t;if(typeofs.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(isBuffer$1(t))return"Buffer";const r=getObjectType(t);return r||"Object"}function isBuffer$1(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function getObjectType(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(objectTypeNames.includes(e))return e}class Type{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$3=new TextDecoder,textEncoder$5=new TextEncoder;function isBuffer(t){return useBuffer&&globalThis.Buffer.isBuffer(t)}function asU8A(t){return t instanceof Uint8Array?isBuffer(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const toString$8=useBuffer?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):utf8Slice(t,e,r):(t,e,r)=>r-e>64?textDecoder$3.decode(t.subarray(e,r)):utf8Slice(t,e,r),fromString$7=useBuffer?t=>t.length>64?globalThis.Buffer.from(t):utf8ToBytes(t):t=>t.length>64?textEncoder$5.encode(t):utf8ToBytes(t),fromArray=t=>Uint8Array.from(t),slice=useBuffer?(t,e,r)=>isBuffer(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),concat$2=useBuffer?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),asU8A(globalThis.Buffer.concat(t,e))):(t,e)=>{const r=new Uint8Array(e);let n=0;for(let o of t)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},alloc=useBuffer?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function compare$1(t,e){if(isBuffer(t)&&isBuffer(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function utf8ToBytes(t,e=1/0){let r;const n=t.length;let o=null;const s=[];for(let u=0;u<n;++u){if(r=t.charCodeAt(u),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(u+1===n){(e-=3)>-1&&s.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(e-=3)>-1&&s.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function utf8Slice(t,e,r){const n=[];for(;e<r;){const o=t[e];let s=null,u=o>239?4:o>223?3:o>191?2:1;if(e+u<=r){let c,h,w,m;switch(u){case 1:o<128&&(s=o);break;case 2:c=t[e+1],(c&192)===128&&(m=(o&31)<<6|c&63,m>127&&(s=m));break;case 3:c=t[e+1],h=t[e+2],(c&192)===128&&(h&192)===128&&(m=(o&15)<<12|(c&63)<<6|h&63,m>2047&&(m<55296||m>57343)&&(s=m));break;case 4:c=t[e+1],h=t[e+2],w=t[e+3],(c&192)===128&&(h&192)===128&&(w&192)===128&&(m=(o&15)<<18|(c&63)<<12|(h&63)<<6|w&63,m>65535&&m<1114112&&(s=m))}}s===null?(s=65533,u=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),e+=u}return decodeCodePointsArray(n)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(t){const e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}const defaultChunkSize=256;class Bl{constructor(e=defaultChunkSize){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const o=r.length-(this.maxCursor-this.cursor)-1;r.set(e,o)}else{if(r){const o=r.length-(this.maxCursor-this.cursor)-1;o<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,o),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=alloc(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){const n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=slice(n,0,this.cursor)}else r=concat$2(this.chunks,this.cursor);return e&&this.reset(),r}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(t,e,r){if(t.length-e<r)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(t,e,r){assertEnoughData(t,e,1);const n=t[e];if(r.strict===!0&&n<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint16(t,e,r){assertEnoughData(t,e,2);const n=t[e]<<8|t[e+1];if(r.strict===!0&&n<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint32(t,e,r){assertEnoughData(t,e,4);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint64(t,e,r){assertEnoughData(t,e,8);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],s=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===!0&&s<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(t,e,r,n){return new Token(Type.uint,readUint8(t,e+1,n),2)}function decodeUint16(t,e,r,n){return new Token(Type.uint,readUint16(t,e+1,n),3)}function decodeUint32(t,e,r,n){return new Token(Type.uint,readUint32(t,e+1,n),5)}function decodeUint64(t,e,r,n){return new Token(Type.uint,readUint64(t,e+1,n),9)}function encodeUint(t,e){return encodeUintValue(t,0,e.value)}function encodeUintValue(t,e,r){if(r<uintBoundaries[0]){const n=Number(r);t.push([e|n])}else if(r<uintBoundaries[1]){const n=Number(r);t.push([e|24,n])}else if(r<uintBoundaries[2]){const n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<uintBoundaries[3]){const n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(r);if(n<uintBoundaries[4]){const o=[e|27,0,0,0,0,0,0,0];let s=Number(n&BigInt(4294967295)),u=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=s&255,s=s>>8,o[7]=s&255,s=s>>8,o[6]=s&255,s=s>>8,o[5]=s&255,o[4]=u&255,u=u>>8,o[3]=u&255,u=u>>8,o[2]=u&255,u=u>>8,o[1]=u&255,t.push(o)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};encodeUintValue.encodedSize=function(e){return e<uintBoundaries[0]?1:e<uintBoundaries[1]?2:e<uintBoundaries[2]?3:e<uintBoundaries[3]?5:9};encodeUint.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function decodeNegint8(t,e,r,n){return new Token(Type.negint,-1-readUint8(t,e+1,n),2)}function decodeNegint16(t,e,r,n){return new Token(Type.negint,-1-readUint16(t,e+1,n),3)}function decodeNegint32(t,e,r,n){return new Token(Type.negint,-1-readUint32(t,e+1,n),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(t,e,r,n){const o=readUint64(t,e+1,n);if(typeof o!="bigint"){const s=-1-o;if(s>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,s,9)}if(n.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(o),9)}function encodeNegint(t,e){const r=e.value,n=typeof r=="bigint"?r*neg1b-pos1b:r*-1-1;encodeUintValue(t,e.type.majorEncoded,n)}encodeNegint.encodedSize=function(e){const r=e.value,n=typeof r=="bigint"?r*neg1b-pos1b:r*-1-1;return n<uintBoundaries[0]?1:n<uintBoundaries[1]?2:n<uintBoundaries[2]?3:n<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function toToken$3(t,e,r,n){assertEnoughData(t,e,r+n);const o=slice(t,e+r,e+r+n);return new Token(Type.bytes,o,r+n)}function decodeBytesCompact(t,e,r,n){return toToken$3(t,e,1,r)}function decodeBytes8(t,e,r,n){return toToken$3(t,e,2,readUint8(t,e+1,n))}function decodeBytes16(t,e,r,n){return toToken$3(t,e,3,readUint16(t,e+1,n))}function decodeBytes32(t,e,r,n){return toToken$3(t,e,5,readUint32(t,e+1,n))}function decodeBytes64(t,e,r,n){const o=readUint64(t,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(t,e,9,o)}function tokenBytes(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===Type.string?fromString$7(t.value):t.value),t.encodedBytes}function encodeBytes(t,e){const r=tokenBytes(e);encodeUintValue(t,e.type.majorEncoded,r.length),t.push(r)}encodeBytes.encodedSize=function(e){const r=tokenBytes(e);return encodeUintValue.encodedSize(r.length)+r.length};encodeBytes.compareTokens=function(e,r){return compareBytes(tokenBytes(e),tokenBytes(r))};function compareBytes(t,e){return t.length<e.length?-1:t.length>e.length?1:compare$1(t,e)}function toToken$2(t,e,r,n,o){const s=r+n;assertEnoughData(t,e,s);const u=new Token(Type.string,toString$8(t,e+r,e+s),s);return o.retainStringBytes===!0&&(u.byteValue=slice(t,e+r,e+s)),u}function decodeStringCompact(t,e,r,n){return toToken$2(t,e,1,r,n)}function decodeString8(t,e,r,n){return toToken$2(t,e,2,readUint8(t,e+1,n),n)}function decodeString16(t,e,r,n){return toToken$2(t,e,3,readUint16(t,e+1,n),n)}function decodeString32(t,e,r,n){return toToken$2(t,e,5,readUint32(t,e+1,n),n)}function decodeString64(t,e,r,n){const o=readUint64(t,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(t,e,9,o,n)}const encodeString=encodeBytes;function toToken$1(t,e,r,n){return new Token(Type.array,n,r)}function decodeArrayCompact(t,e,r,n){return toToken$1(t,e,1,r)}function decodeArray8(t,e,r,n){return toToken$1(t,e,2,readUint8(t,e+1,n))}function decodeArray16(t,e,r,n){return toToken$1(t,e,3,readUint16(t,e+1,n))}function decodeArray32(t,e,r,n){return toToken$1(t,e,5,readUint32(t,e+1,n))}function decodeArray64(t,e,r,n){const o=readUint64(t,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(t,e,9,o)}function decodeArrayIndefinite(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(t,e,1,1/0)}function encodeArray(t,e){encodeUintValue(t,Type.array.majorEncoded,e.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function toToken(t,e,r,n){return new Token(Type.map,n,r)}function decodeMapCompact(t,e,r,n){return toToken(t,e,1,r)}function decodeMap8(t,e,r,n){return toToken(t,e,2,readUint8(t,e+1,n))}function decodeMap16(t,e,r,n){return toToken(t,e,3,readUint16(t,e+1,n))}function decodeMap32(t,e,r,n){return toToken(t,e,5,readUint32(t,e+1,n))}function decodeMap64(t,e,r,n){const o=readUint64(t,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(t,e,9,o)}function decodeMapIndefinite(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(t,e,1,1/0)}function encodeMap(t,e){encodeUintValue(t,Type.map.majorEncoded,e.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function decodeTagCompact(t,e,r,n){return new Token(Type.tag,r,1)}function decodeTag8(t,e,r,n){return new Token(Type.tag,readUint8(t,e+1,n),2)}function decodeTag16(t,e,r,n){return new Token(Type.tag,readUint16(t,e+1,n),3)}function decodeTag32(t,e,r,n){return new Token(Type.tag,readUint32(t,e+1,n),5)}function decodeTag64(t,e,r,n){return new Token(Type.tag,readUint64(t,e+1,n),9)}function encodeTag(t,e){encodeUintValue(t,Type.tag.majorEncoded,e.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,t,e)}function decodeFloat16(t,e,r,n){return createToken(readFloat16(t,e+1),3,n)}function decodeFloat32(t,e,r,n){return createToken(readFloat32(t,e+1),5,n)}function decodeFloat64(t,e,r,n){return createToken(readFloat64(t,e+1),9,n)}function encodeFloat(t,e,r){const n=e.value;if(n===!1)t.push([Type.float.majorEncoded|MINOR_FALSE]);else if(n===!0)t.push([Type.float.majorEncoded|MINOR_TRUE]);else if(n===null)t.push([Type.float.majorEncoded|MINOR_NULL]);else if(n===void 0)t.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let o,s=!1;(!r||r.float64!==!0)&&(encodeFloat16(n),o=readFloat16(ui8a,1),n===o||Number.isNaN(n)?(ui8a[0]=249,t.push(ui8a.slice(0,3)),s=!0):(encodeFloat32(n),o=readFloat32(ui8a,1),n===o&&(ui8a[0]=250,t.push(ui8a.slice(0,5)),s=!0))),s||(encodeFloat64(n),o=readFloat64(ui8a,1),ui8a[0]=251,t.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function(e,r){const n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){encodeFloat16(n);let o=readFloat16(ui8a,1);if(n===o||Number.isNaN(n))return 3;if(encodeFloat32(n),o=readFloat32(ui8a,1),n===o)return 5}return 9};const buffer$1=new ArrayBuffer(9),dataView=new DataView(buffer$1,1),ui8a=new Uint8Array(buffer$1,0);function encodeFloat16(t){if(t===1/0)dataView.setUint16(0,31744,!1);else if(t===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(t))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,t);const e=dataView.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)dataView.setUint16(0,31744,!1);else if(r===0)dataView.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{const o=r-127;o<-24?dataView.setUint16(0,0):o<-14?dataView.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):dataView.setUint16(0,(e&2147483648)>>16|o+15<<10|n>>13,!1)}}}function readFloat16(t,e){if(t.length-e<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;const n=r>>10&31,o=r&1023;let s;return n===0?s=o*2**-24:n!==31?s=(o+1024)*2**(n-25):s=o===0?1/0:NaN,r&32768?-s:s}function encodeFloat32(t){dataView.setFloat32(0,t,!1)}function readFloat32(t,e){if(t.length-e<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function encodeFloat64(t){dataView.setFloat64(0,t,!1)}function readFloat64(t,e){if(t.length-e<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(t,e,r){throw new Error(`${decodeErrPrefix} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function errorer(t){return()=>{throw new Error(`${decodeErrPrefix} ${t}`)}}const jump=[];for(let t=0;t<=23;t++)jump[t]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let t=32;t<=55;t++)jump[t]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let t=64;t<=87;t++)jump[t]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)jump[t]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)jump[t]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let t=160;t<=183;t++)jump[t]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let t=192;t<=215;t++)jump[t]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let t=224;t<=243;t++)jump[t]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let t=0;t<24;t++)quick[t]=new Token(Type.uint,t,1);for(let t=-1;t>=-24;t--)quick[31-t]=new Token(Type.negint,t,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(t){switch(t.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return t.value.length?void 0:fromArray([64]);case Type.string:return t.value===""?fromArray([96]):void 0;case Type.array:return t.value===0?fromArray([128]):void 0;case Type.map:return t.value===0?fromArray([160]):void 0;case Type.uint:return t.value<24?fromArray([Number(t.value)]):void 0;case Type.negint:if(t.value>=-24)return fromArray([31-Number(t.value)])}}const defaultEncodeOptions$2={float64:!1,mapSorter:mapSorter$1,quickEncodeToken};function makeCborEncoders(){const t=[];return t[Type.uint.major]=encodeUint,t[Type.negint.major]=encodeNegint,t[Type.bytes.major]=encodeBytes,t[Type.string.major]=encodeString,t[Type.array.major]=encodeArray,t[Type.map.major]=encodeMap,t[Type.tag.major]=encodeTag,t[Type.float.major]=encodeFloat,t}const cborEncoders$1=makeCborEncoders(),buf=new Bl;class Ref{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(r,e)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new Token(Type.float,t):t>=0?new Token(Type.uint,t):new Token(Type.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new Token(Type.uint,t):new Token(Type.negint,t)},Uint8Array(t,e,r,n){return new Token(Type.bytes,t)},string(t,e,r,n){return new Token(Type.string,t)},boolean(t,e,r,n){return t?simpleTokens.true:simpleTokens.false},null(t,e,r,n){return simpleTokens.null},undefined(t,e,r,n){return simpleTokens.undefined},ArrayBuffer(t,e,r,n){return new Token(Type.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new Token(Type.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;n=Ref.createCheck(n,t);const o=[];let s=0;for(const u of t)o[s++]=objectToTokens(u,r,n);return r.addBreakTokens?[new Token(Type.array,t.length),o,new Token(Type.break)]:[new Token(Type.array,t.length),o]},Object(t,e,r,n){const o=e!=="Object",s=o?t.keys():Object.keys(t),u=o?t.size:s.length;if(!u)return r.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;n=Ref.createCheck(n,t);const c=[];let h=0;for(const w of s)c[h++]=[objectToTokens(w,r,n),objectToTokens(o?t.get(w):t[w],r,n)];return sortMapEntries(c,r),r.addBreakTokens?[new Token(Type.map,u),c,new Token(Type.break)]:[new Token(Type.map,u),c]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${t}Array`]=typeEncoders.DataView;function objectToTokens(t,e={},r){const n=is$1(t),o=e&&e.typeEncoders&&e.typeEncoders[n]||typeEncoders[n];if(typeof o=="function"){const u=o(t,n,e,r);if(u!=null)return u}const s=typeEncoders[n];if(!s)throw new Error(`${encodeErrPrefix} unsupported type: ${n}`);return s(t,n,e,r)}function sortMapEntries(t,e){e.mapSorter&&t.sort(e.mapSorter)}function mapSorter$1(t,e){const r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);const o=r.type.major,s=cborEncoders$1[o].compareTokens(r,n);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function tokensToEncoded(t,e,r,n){if(Array.isArray(e))for(const o of e)tokensToEncoded(t,o,r,n);else r[e.type.major](t,e,n)}function encodeCustom(t,e,r){const n=objectToTokens(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){const o=r.quickEncodeToken(n);if(o)return o;const s=e[n.type.major];if(s.encodedSize){const u=s.encodedSize(n,r),c=new Bl(u);if(s(c,n,r),c.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return asU8A(c.chunks[0])}}return buf.reset(),tokensToEncoded(buf,n,e,r),buf.toBytes(!0)}function encode$q(t,e){return e=Object.assign({},defaultEncodeOptions$2,e),encodeCustom(t,cborEncoders$1,e)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(e,r={}){this.pos=0,this.data=e,this.options=r}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let r=quick[e];if(r===void 0){const n=jump[e];if(!n)throw new Error(`${decodeErrPrefix} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const o=e&31;r=n(this.data,this.pos,o,this.options)}return this.pos+=r.encodedLength,r}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(t,e,r){const n=[];for(let o=0;o<t.value;o++){const s=tokensToObject(e,r);if(s===BREAK){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(s===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${o}, expected ${t.value})`);n[o]=s}return n}function tokenToMap(t,e,r){const n=r.useMaps===!0,o=n?void 0:{},s=n?new Map:void 0;for(let u=0;u<t.value;u++){const c=tokensToObject(e,r);if(c===BREAK){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(c===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${u} [no key], expected ${t.value})`);if(n!==!0&&typeof c!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof c})`);const h=tokensToObject(e,r);if(h===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${u} [no value], expected ${t.value})`);n?s.set(c,h):o[c]=h}return n?s:o}function tokensToObject(t,e){if(t.done())return DONE;const r=t.next();if(r.type===Type.break)return BREAK;if(r.type.terminal)return r.value;if(r.type===Type.array)return tokenToArray(r,t,e);if(r.type===Type.map)return tokenToMap(r,t,e);if(r.type===Type.tag){if(e.tags&&typeof e.tags[r.value]=="function"){const n=tokensToObject(t,e);return e.tags[r.value](n)}throw new Error(`${decodeErrPrefix} tag not supported (${r.value})`)}throw new Error("unsupported")}function decode$s(t,e){if(!(t instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);e=Object.assign({},defaultDecodeOptions,e);const r=e.tokenizer||new Tokeniser(t,e),n=tokensToObject(r,e);if(n===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(n===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);if(!r.done())throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return n}const cborEncoders=makeCborEncoders(),defaultEncodeOptions$1={float64:!1,quickEncodeToken};function tokensToLength(t,e=cborEncoders,r=defaultEncodeOptions$1){if(Array.isArray(t)){let n=0;for(const o of t)n+=tokensToLength(o,e,r);return n}else{const n=e[t.type.major];if(n.encodedSize===void 0||typeof n.encodedSize!="function")throw new Error(`Encoder for ${t.type.name} does not have an encodedSize()`);return n.encodedSize(t,r)}}var encode_1$3=encode$p,MSB$4=128,REST$4=127,MSBALL$3=~REST$4,INT$3=Math.pow(2,31);function encode$p(t,e,r){e=e||[],r=r||0;for(var n=r;t>=INT$3;)e[r++]=t&255|MSB$4,t/=128;for(;t&MSBALL$3;)e[r++]=t&255|MSB$4,t>>>=7;return e[r]=t|0,encode$p.bytes=r-n+1,e}var decode$r=read$3,MSB$1$3=128,REST$1$3=127;function read$3(t,n){var r=0,n=n||0,o=0,s=n,u,c=t.length;do{if(s>=c)throw read$3.bytes=0,new RangeError("Could not decode varint");u=t[s++],r+=o<28?(u&REST$1$3)<<o:(u&REST$1$3)*Math.pow(2,o),o+=7}while(u>=MSB$1$3);return read$3.bytes=s-n,r}var N1$3=Math.pow(2,7),N2$3=Math.pow(2,14),N3$3=Math.pow(2,21),N4$3=Math.pow(2,28),N5$3=Math.pow(2,35),N6$3=Math.pow(2,42),N7$3=Math.pow(2,49),N8$3=Math.pow(2,56),N9$3=Math.pow(2,63),length$4=function(t){return t<N1$3?1:t<N2$3?2:t<N3$3?3:t<N4$3?4:t<N5$3?5:t<N6$3?6:t<N7$3?7:t<N8$3?8:t<N9$3?9:10},varint$3={encode:encode_1$3,decode:decode$r,encodingLength:length$4},_brrp_varint$3=varint$3;const decode$q=(t,e=0)=>[_brrp_varint$3.decode(t,e),_brrp_varint$3.decode.bytes],encodeTo$3=(t,e,r=0)=>(_brrp_varint$3.encode(t,e,r),e),encodingLength$3=t=>_brrp_varint$3.encodingLength(t),empty=new Uint8Array(0),toHex=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),fromHex=t=>{const e=t.match(/../g);return e?new Uint8Array(e.map(r=>parseInt(r,16))):empty},equals$6=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},coerce$4=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},isBinary$1=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),fromString$6=t=>new TextEncoder().encode(t),toString$7=t=>new TextDecoder().decode(t),byteslib=Object.freeze(Object.defineProperty({__proto__:null,equals:equals$6,coerce:coerce$4,isBinary:isBinary$1,fromHex,toHex,fromString:fromString$6,toString:toString$7,empty},Symbol.toStringTag,{value:"Module"})),create$6=(t,e)=>{const r=e.byteLength,n=encodingLength$3(t),o=n+encodingLength$3(r),s=new Uint8Array(o+r);return encodeTo$3(t,s,0),encodeTo$3(r,s,n),s.set(e,o),new Digest$3(t,r,e,s)},decode$p=t=>{const e=coerce$4(t),[r,n]=decode$q(e),[o,s]=decode$q(e.subarray(n)),u=e.subarray(n+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new Digest$3(r,o,u,e)},equals$5=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&equals$6(t.bytes,e.bytes);class Digest$3{constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}}function base$4(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var s=t.charAt(o),u=s.charCodeAt(0);if(r[u]!==255)throw new TypeError(s+" is ambiguous");r[u]=o}var c=t.length,h=t.charAt(0),w=Math.log(c)/Math.log(256),m=Math.log(256)/Math.log(c);function v($){if($ instanceof Uint8Array||(ArrayBuffer.isView($)?$=new Uint8Array($.buffer,$.byteOffset,$.byteLength):Array.isArray($)&&($=Uint8Array.from($))),!($ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if($.length===0)return"";for(var k=0,B=0,j=0,ie=$.length;j!==ie&&$[j]===0;)j++,k++;for(var se=(ie-j)*m+1>>>0,N=new Uint8Array(se);j!==ie;){for(var L=$[j],oe=0,q=se-1;(L!==0||oe<B)&&q!==-1;q--,oe++)L+=256*N[q]>>>0,N[q]=L%c>>>0,L=L/c>>>0;if(L!==0)throw new Error("Non-zero carry");B=oe,j++}for(var X=se-B;X!==se&&N[X]===0;)X++;for(var de=h.repeat(k);X<se;++X)de+=t.charAt(N[X]);return de}function E($){if(typeof $!="string")throw new TypeError("Expected String");if($.length===0)return new Uint8Array;var k=0;if($[k]!==" "){for(var B=0,j=0;$[k]===h;)B++,k++;for(var ie=($.length-k)*w+1>>>0,se=new Uint8Array(ie);$[k];){var N=r[$.charCodeAt(k)];if(N===255)return;for(var L=0,oe=ie-1;(N!==0||L<j)&&oe!==-1;oe--,L++)N+=c*se[oe]>>>0,se[oe]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");j=L,k++}if($[k]!==" "){for(var q=ie-j;q!==ie&&se[q]===0;)q++;for(var X=new Uint8Array(B+(ie-q)),de=B;q!==ie;)X[de++]=se[q++];return X}}}function O($){var k=E($);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:v,decodeUnsafe:E,decode:O}}var src$4=base$4,_brrp__multiformats_scope_baseX$4=src$4;class Encoder$4{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder$4{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$4(this,e)}}class ComposedDecoder$4{constructor(e){this.decoders=e}or(e){return or$4(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or$4=(t,e)=>new ComposedDecoder$4({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Codec$4{constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder$4(e,r,n),this.decoder=new Decoder$4(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$8=({name:t,prefix:e,encode:r,decode:n})=>new Codec$4(t,e,r,n),baseX$4=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX$4(r,e);return from$8({prefix:t,name:e,encode:n,decode:s=>coerce$4(o(s))})},decode$o=(t,e,r,n)=>{const o={};for(let m=0;m<e.length;++m)o[e[m]]=m;let s=t.length;for(;t[s-1]==="=";)--s;const u=new Uint8Array(s*r/8|0);let c=0,h=0,w=0;for(let m=0;m<s;++m){const v=o[t[m]];if(v===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<r|v,c+=r,c>=8&&(c-=8,u[w++]=255&h>>c)}if(c>=r||255&h<<8-c)throw new SyntaxError("Unexpected end of data");return u},encode$o=(t,e,r)=>{const n=e[e.length-1]==="=",o=(1<<r)-1;let s="",u=0,c=0;for(let h=0;h<t.length;++h)for(c=c<<8|t[h],u+=8;u>r;)u-=r,s+=e[o&c>>u];if(u&&(s+=e[o&c<<r-u]),n)for(;s.length*r&7;)s+="=";return s},rfc4648$4=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>from$8({prefix:e,name:t,encode(o){return encode$o(o,n,r)},decode(o){return decode$o(o,n,r,t)}}),base58btc$4=baseX$4({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr$2=baseX$4({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58$2=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$4,base58flickr:base58flickr$2},Symbol.toStringTag,{value:"Module"})),base32$6=rfc4648$4({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper$2=rfc4648$4({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad$2=rfc4648$4({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper$2=rfc4648$4({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex$2=rfc4648$4({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper$2=rfc4648$4({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad$2=rfc4648$4({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper$2=rfc4648$4({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$2=rfc4648$4({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$7=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$6,base32upper:base32upper$2,base32pad:base32pad$2,base32padupper:base32padupper$2,base32hex:base32hex$2,base32hexupper:base32hexupper$2,base32hexpad:base32hexpad$2,base32hexpadupper:base32hexpadupper$2,base32z:base32z$2},Symbol.toStringTag,{value:"Module"}));class CID$2{constructor(e,r,n,o){this.code=r,this.version=e,this.multihash=n,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly$1,version:readonly$1,multihash:readonly$1,bytes:readonly$1,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:r}=this;if(e!==DAG_PB_CODE$2)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==SHA_256_CODE$2)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID$2.createV0(r)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=create$6(e,r);return CID$2.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&equals$5(this.multihash,e.multihash)}toString(e){const{bytes:r,version:n,_baseCache:o}=this;switch(n){case 0:return toStringV0$2(r,o,e||base58btc$4.encoder);default:return toStringV1$2(r,o,e||base32$6.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return deprecate(/^0\.0/,IS_CID_DEPRECATION),!!(e&&(e[cidSymbol$2]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof CID$2)return e;if(e!=null&&e.asCID===e){const{version:r,code:n,multihash:o,bytes:s}=e;return new CID$2(r,n,o,s||encodeCID$2(r,n,o.bytes))}else if(e!=null&&e[cidSymbol$2]===!0){const{version:r,multihash:n,code:o}=e,s=decode$p(n);return CID$2.create(r,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==DAG_PB_CODE$2)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$2}) block encoding`);return new CID$2(e,r,n,n.bytes)}case 1:{const o=encodeCID$2(e,r,n.bytes);return new CID$2(e,r,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID$2.create(0,DAG_PB_CODE$2,e)}static createV1(e,r){return CID$2.create(1,e,r)}static decode(e){const[r,n]=CID$2.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=CID$2.inspectBytes(e),n=r.size-r.multihashSize,o=coerce$4(e.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");const s=o.subarray(r.multihashSize-r.digestSize),u=new Digest$3(r.multihashCode,r.digestSize,s,o);return[r.version===0?CID$2.createV0(u):CID$2.createV1(r.codec,u),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[v,E]=decode$q(e.subarray(r));return r+=E,v};let o=n(),s=DAG_PB_CODE$2;if(o===18?(o=0,r=0):o===1&&(s=n()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const u=r,c=n(),h=n(),w=r+h,m=w-u;return{version:o,codec:s,multihashCode:c,digestSize:h,multihashSize:m,size:w}}static parse(e,r){const[n,o]=parseCIDtoBytes$2(e,r),s=CID$2.decode(o);return s._baseCache.set(n,e),s}}const parseCIDtoBytes$2=(t,e)=>{switch(t[0]){case"Q":{const r=e||base58btc$4;return[base58btc$4.prefix,r.decode(`${base58btc$4.prefix}${t}`)]}case base58btc$4.prefix:{const r=e||base58btc$4;return[base58btc$4.prefix,r.decode(t)]}case base32$6.prefix:{const r=e||base32$6;return[base32$6.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},toStringV0$2=(t,e,r)=>{const{prefix:n}=r;if(n!==base58btc$4.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const o=e.get(n);if(o==null){const s=r.encode(t).slice(1);return e.set(n,s),s}else return o},toStringV1$2=(t,e,r)=>{const{prefix:n}=r,o=e.get(n);if(o==null){const s=r.encode(t);return e.set(n,s),s}else return o},DAG_PB_CODE$2=112,SHA_256_CODE$2=18,encodeCID$2=(t,e,r)=>{const n=encodingLength$3(t),o=n+encodingLength$3(e),s=new Uint8Array(o+r.byteLength);return encodeTo$3(t,s,0),encodeTo$3(e,s,n),s.set(r,o),s},cidSymbol$2=Symbol.for("@ipld/js-cid/CID"),readonly$1={writable:!1,configurable:!1,enumerable:!0},hidden={writable:!1,enumerable:!1,configurable:!1},version$1="0.0.0-dev",deprecate=(t,e)=>{if(t.test(version$1))console.warn(e);else throw new Error(e)},IS_CID_DEPRECATION=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,CID_CBOR_TAG=42;function cidEncoder$1(t){if(t.asCID!==t)return null;const e=CID$2.asCID(t);if(!e)return null;const r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,r)]}function undefinedEncoder$1(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$1(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$1={float64:!0,typeEncoders:{Object:cidEncoder$1,undefined:undefinedEncoder$1,number:numberEncoder$1}};function cidDecoder(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$2.decode(t.subarray(1))}const decodeOptions$1={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions$1.tags[CID_CBOR_TAG]=cidDecoder;const name$7="dag-cbor",code$9=113,encode$n=t=>encode$q(t,encodeOptions$1),decode$n=t=>decode$s(t,decodeOptions$1),dagCBOR=Object.freeze(Object.defineProperty({__proto__:null,name:name$7,code:code$9,encode:encode$n,decode:decode$n},Symbol.toStringTag,{value:"Module"}));class CarBufferWriter{constructor(e,r){this.bytes=e,this.byteOffset=r,this.roots=[],this.headerSize=r}addRoot(e,r){return addRoot(this,e,r),this}write(e){return addBlock(this,e),this}close(e){return close(this,e)}}const addRoot=(t,e,r={})=>{const{resize:n=!1}=r,{bytes:o,headerSize:s,byteOffset:u,roots:c}=t;t.roots.push(e);const h=headerLength(t);if(h>s)if(h-s+u<o.byteLength)if(n)resizeHeader(t,h);else throw c.pop(),new RangeError(`Header of size ${s} has no capacity for new root ${e}.
  However there is a space in the buffer and you could call addRoot(root, { resize: root }) to resize header to make a space for this root.`);else throw c.pop(),new RangeError(`Buffer has no capacity for a new root ${e}`)},blockLength=({cid:t,bytes:e})=>{const r=t.bytes.byteLength+e.byteLength;return varint$4.encodingLength(r)+r},addBlock=(t,{cid:e,bytes:r})=>{const n=e.bytes.byteLength+r.byteLength,o=varint$4.encode(n);if(t.byteOffset+o.length+n>t.bytes.byteLength)throw new RangeError("Buffer has no capacity for this block");writeBytes$1(t,o),writeBytes$1(t,e.bytes),writeBytes$1(t,r)},close=(t,e={})=>{const{resize:r=!1}=e,{roots:n,bytes:o,byteOffset:s,headerSize:u}=t,c=encode$n({version:1,roots:n}),h=varint$4.encode(c.length),w=h.length+c.byteLength;if(u-w===0)return writeHeader(t,h,c),o.subarray(0,s);if(r)return resizeHeader(t,w),writeHeader(t,h,c),o.subarray(0,t.byteOffset);throw new RangeError(`Header size was overestimated.
You can use close({ resize: true }) to resize header`)},resizeHeader=(t,e)=>{const{bytes:r,headerSize:n}=t;r.set(r.subarray(n,t.byteOffset),e),t.byteOffset+=e-n,t.headerSize=e},writeBytes$1=(t,e)=>{t.bytes.set(e,t.byteOffset),t.byteOffset+=e.length},writeHeader=({bytes:t},e,r)=>{t.set(e),t.set(r,e.length)},headerPreludeTokens=[new Token(Type.map,2),new Token(Type.string,"version"),new Token(Type.uint,1),new Token(Type.string,"roots")],CID_TAG=new Token(Type.tag,42),calculateHeaderLength=t=>{const e=[...headerPreludeTokens];e.push(new Token(Type.array,t.length));for(const n of t)e.push(CID_TAG),e.push(new Token(Type.bytes,{length:n+1}));const r=tokensToLength(e);return varint$4.encodingLength(r)+r},headerLength=({roots:t})=>calculateHeaderLength(t.map(e=>e.bytes.byteLength)),createWriter=(t,e={})=>{const{roots:r=[],byteOffset:n=0,byteLength:o=t.byteLength,headerSize:s=headerLength({roots:r})}=e,u=new Uint8Array(t,n,o),c=new CarBufferWriter(u,s);for(const h of r)c.addRoot(h);return c},Kinds={Null:t=>t===null,Int:t=>Number.isInteger(t),Float:t=>typeof t=="number"&&Number.isFinite(t),String:t=>typeof t=="string",Bool:t=>typeof t=="boolean",Bytes:t=>t instanceof Uint8Array,Link:t=>!Kinds.Null(t)&&typeof t=="object"&&t.asCID===t,List:t=>Array.isArray(t),Map:t=>!Kinds.Null(t)&&typeof t=="object"&&t.asCID!==t&&!Kinds.List(t)&&!Kinds.Bytes(t)},Types={Int:Kinds.Int,"CarHeader > version":t=>Types.Int(t),"CarHeader > roots (anon) > valueType (anon)":Kinds.Link,"CarHeader > roots (anon)":t=>Kinds.List(t)&&Array.prototype.every.call(t,Types["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":t=>Types["CarHeader > roots (anon)"](t),CarHeader:t=>{const e=t&&Object.keys(t);return Kinds.Map(t)&&["version"].every(r=>e.includes(r))&&Object.entries(t).every(([r,n])=>Types["CarHeader > "+r]&&Types["CarHeader > "+r](n))}},CarHeader=Types.CarHeader,CIDV0_BYTES={SHA2_256:18,LENGTH:32,DAG_PB:112},V2_HEADER_LENGTH=16+8+8+8;async function readVarint(t){const e=await t.upTo(8);if(!e.length)throw new Error("Unexpected end of data");const r=varint$4.decode(e);return t.seek(varint$4.decode.bytes),r}async function readV2Header(t){const e=await t.exactly(V2_HEADER_LENGTH),r=new DataView(e.buffer,e.byteOffset,e.byteLength);let n=0;const o={version:2,characteristics:[r.getBigUint64(n,!0),r.getBigUint64(n+=8,!0)],dataOffset:Number(r.getBigUint64(n+=8,!0)),dataSize:Number(r.getBigUint64(n+=8,!0)),indexOffset:Number(r.getBigUint64(n+=8,!0))};return t.seek(V2_HEADER_LENGTH),o}async function readHeader$1(t,e){const r=await readVarint(t);if(r===0)throw new Error("Invalid CAR header (zero length)");const n=await t.exactly(r);t.seek(r);const o=decode$n(n);if(!CarHeader(o))throw new Error("Invalid CAR header format");if(o.version!==1&&o.version!==2||e!==void 0&&o.version!==e)throw new Error(`Invalid CAR version: ${o.version}${e!==void 0?` (expected ${e})`:""}`);const s=Array.isArray(o.roots);if(o.version===1&&!s||o.version===2&&s)throw new Error("Invalid CAR header format");if(o.version===1)return o;const u=await readV2Header(t);t.seek(u.dataOffset-t.pos);const c=await readHeader$1(t,1);return Object.assign(c,u)}async function readMultihash(t){const e=await t.upTo(8);varint$4.decode(e);const r=varint$4.decode.bytes,n=varint$4.decode(e.subarray(varint$4.decode.bytes)),o=varint$4.decode.bytes,s=r+o+n,u=await t.exactly(s);return t.seek(s),u}async function readCid(t){const e=await t.exactly(2);if(e[0]===CIDV0_BYTES.SHA2_256&&e[1]===CIDV0_BYTES.LENGTH){const u=await t.exactly(34);t.seek(34);const c=decode$p(u);return CID$2.create(0,CIDV0_BYTES.DAG_PB,c)}const r=await readVarint(t);if(r!==1)throw new Error(`Unexpected CID version (${r})`);const n=await readVarint(t),o=await readMultihash(t),s=decode$p(o);return CID$2.create(r,n,s)}async function readBlockHead(t){const e=t.pos;let r=await readVarint(t);if(r===0)throw new Error("Invalid CAR section (zero length)");r+=t.pos-e;const n=await readCid(t),o=r-Number(t.pos-e);return{cid:n,length:r,blockLength:o}}async function readBlock(t){const{cid:e,blockLength:r}=await readBlockHead(t),n=await t.exactly(r);return t.seek(r),{bytes:n,cid:e}}async function readBlockIndex(t){const e=t.pos,{cid:r,length:n,blockLength:o}=await readBlockHead(t),s={cid:r,length:n,blockLength:o,offset:e,blockOffset:t.pos};return t.seek(s.blockLength),s}function createDecoder(t){const e=(async()=>{const r=await readHeader$1(t);if(r.version===2){const n=t.pos-r.dataOffset;t=limitReader(t,r.dataSize-n)}return r})();return{header:()=>e,async*blocks(){for(await e;(await t.upTo(8)).length>0;)yield await readBlock(t)},async*blocksIndex(){for(await e;(await t.upTo(8)).length>0;)yield await readBlockIndex(t)}}}function bytesReader(t){let e=0;return{async upTo(r){return t.subarray(e,e+Math.min(r,t.length-e))},async exactly(r){if(r>t.length-e)throw new Error("Unexpected end of data");return t.subarray(e,e+r)},seek(r){e+=r},get pos(){return e}}}function chunkReader(t){let e=0,r=0,n=0,o=new Uint8Array(0);const s=async u=>{r=o.length-n;const c=[o.subarray(n)];for(;r<u;){const w=await t();if(w==null)break;r<0?w.length>r&&c.push(w.subarray(-r)):c.push(w),r+=w.length}o=new Uint8Array(c.reduce((w,m)=>w+m.length,0));let h=0;for(const w of c)o.set(w,h),h+=w.length;n=0};return{async upTo(u){return o.length-n<u&&await s(u),o.subarray(n,n+Math.min(o.length-n,u))},async exactly(u){if(o.length-n<u&&await s(u),o.length-n<u)throw new Error("Unexpected end of data");return o.subarray(n,n+u)},seek(u){e+=u,n+=u},get pos(){return e}}}function asyncIterableReader(t){const e=t[Symbol.asyncIterator]();async function r(){const n=await e.next();return n.done?null:n.value}return chunkReader(r)}function limitReader(t,e){let r=0;return{async upTo(n){let o=await t.upTo(n);return o.length+r>e&&(o=o.subarray(0,e-r)),o},async exactly(n){const o=await t.exactly(n);if(o.length+r>e)throw new Error("Unexpected end of data");return o},seek(n){r+=n,t.seek(n)},get pos(){return t.pos}}}class CarReader{constructor(e,r){this._header=e,this._blocks=r,this._keys=r.map(n=>n.cid.toString())}get version(){return this._header.version}async getRoots(){return this._header.roots}async has(e){return this._keys.indexOf(e.toString())>-1}async get(e){const r=this._keys.indexOf(e.toString());return r>-1?this._blocks[r]:void 0}async*blocks(){for(const e of this._blocks)yield e}async*cids(){for(const e of this._blocks)yield e.cid}static async fromBytes(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return decodeReaderComplete(bytesReader(e))}static async fromIterable(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return decodeReaderComplete(asyncIterableReader(e))}}async function decodeReaderComplete(t){const e=createDecoder(t),r=await e.header(),n=[];for await(const o of e.blocks())n.push(o);return new CarReader(r,n)}const from$7=({name:t,code:e,encode:r})=>new Hasher$2(t,e,r);class Hasher$2{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?create$6(this.code,r):r.then(n=>create$6(this.code,n))}else throw Error("Unknown type, must be binary type")}}const name$6="raw",code$8=85,encode$m=t=>coerce$4(t),decode$m=t=>coerce$4(t),raw=Object.freeze(Object.defineProperty({__proto__:null,name:name$6,code:code$8,encode:encode$m,decode:decode$m},Symbol.toStringTag,{value:"Module"})),sha$2=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sha256$3=from$7({name:"sha2-256",code:18,encode:sha$2("SHA-256")}),sha512$2=from$7({name:"sha2-512",code:19,encode:sha$2("SHA-512")}),sha2$2=Object.freeze(Object.defineProperty({__proto__:null,sha256:sha256$3,sha512:sha512$2},Symbol.toStringTag,{value:"Module"})),readonly=({enumerable:t=!0,configurable:e=!1}={})=>({enumerable:t,configurable:e,writable:!1}),links=function*(t,e){if(t!=null&&!(t instanceof Uint8Array))for(const[r,n]of Object.entries(t)){const o=[...e,r];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(const[s,u]of n.entries()){const c=[...o,s],h=CID$2.asCID(u);h?yield[c.join("/"),h]:typeof u=="object"&&(yield*links(u,c))}else{const s=CID$2.asCID(n);s?yield[o.join("/"),s]:yield*links(n,o)}}},tree=function*(t,e){if(t!=null)for(const[r,n]of Object.entries(t)){const o=[...e,r];if(yield o.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!CID$2.asCID(n))if(Array.isArray(n))for(const[s,u]of n.entries()){const c=[...o,s];yield c.join("/"),typeof u=="object"&&!CID$2.asCID(u)&&(yield*tree(u,c))}else yield*tree(n,o)}},get$2=(t,e)=>{let r=t;for(const[n,o]of e.entries()){if(r=r[o],r==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(u=>`[${JSON.stringify(u)}]`).join("")}`);const s=CID$2.asCID(r);if(s)return{value:s,remaining:e.slice(n+1).join("/")}}return{value:r}};class Block{constructor({cid:e,bytes:r,value:n}){if(!e||!r||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=r,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:readonly(),bytes:readonly(),value:readonly(),asBlock:readonly()})}links(){return links(this.value,[])}tree(){return tree(this.value,[])}get(e="/"){return get$2(this.value,e.split("/").filter(Boolean))}}const encode$l=async({value:t,codec:e,hasher:r})=>{if(typeof t>"u")throw new Error('Missing required argument "value"');if(!e||!r)throw new Error("Missing required argument: codec or hasher");const n=e.encode(t),o=await r.digest(n),s=CID$2.create(1,e.code,o);return new Block({value:t,bytes:n,cid:s})},createUnsafe=({bytes:t,cid:e,value:r,codec:n})=>{const o=r!==void 0?r:n&&n.decode(t);if(o===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new Block({cid:e,bytes:t,value:o})},create$5=async({bytes:t,cid:e,hasher:r,codec:n})=>{if(!t)throw new Error('Missing required argument "bytes"');if(!r)throw new Error('Missing required argument "hasher"');const o=n.decode(t),s=await r.digest(t);if(!equals$6(e.multihash.bytes,s.bytes))throw new Error("CID hash does not match bytes");return createUnsafe({bytes:t,cid:e,value:o,codec:n})};function mitt(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(o){o(r)}),(n=t.get("*"))&&n.slice().map(function(o){o(e,r)})}}}const{isBinary}=byteslib,encode$k=t=>isBinary(t)?encode$l({value:t,hasher:sha256$3,codec:raw}):encode$l({value:t,hasher:sha256$3,codec:dagCBOR}),decode$l=({bytes:t,cid:e})=>{let r,n;const{code:o}=e,s=e.multihash.code||decode$p(e.multihash).code;if(s===18)r=sha256$3;else throw new Error("Unsupported hash function: "+s);if(o===113)n=dagCBOR;else if(o===85)n=raw;else throw new Error("Unsupported codec: "+o);return create$5({bytes:t,cid:e,codec:n,hasher:r})};class Transaction{constructor(){Object.assign(this,mitt()),this.blocks=[]}static create(){return new this}static async load(e){const r=await CarReader.fromBytes(e),[n]=await r.getRoots();return{root:n,get:s=>r.get(s).then(u=>decode$l(u)).then(({value:u})=>u)}}async add(e){const r=await encode$k(e);return this.last=r,this.blocks.push(r),this.emit("size",this.size),r.cid}async get(e){const{cid:r,bytes:n,value:o}=await decode$l(e);return{cid:r,bytes:n,value:o}}undo(){return this.blocks.pop()}async commit(){const e=this.last.cid;let r=0,n=headerLength({roots:[e]});r+=n;for(const u of this.blocks)r+=blockLength(u);const o=new Uint8Array(r),s=await createWriter(o,{headerSize:n});s.addRoot(e);for(const u of this.blocks)s.write(u);return await s.close(),s.bytes}get size(){if(!(this!=null&&this.last))return 0;const e=this.last.cid;let r=0,n=headerLength({roots:[e]});r+=n;for(const o of this.blocks)r+=blockLength(o);return r}}var objectSafeGet=get$1;function get$1(t,e,r){if(!t)return r;var n,o;if(Array.isArray(e)&&(n=e.slice(0)),typeof e=="string"&&(n=e.split(".")),typeof e=="symbol"&&(n=[e]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");for(;n.length;)if(o=n.shift(),!t||(t=t[o],t===void 0))return r;return t}var browser$1={exports:{}},ms$1,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms$1;hasRequiredMs=1;var t=1e3,e=t*60,r=e*60,n=r*24,o=n*7,s=n*365.25;ms$1=function(m,v){v=v||{};var E=typeof m;if(E==="string"&&m.length>0)return u(m);if(E==="number"&&isFinite(m))return v.long?h(m):c(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))};function u(m){if(m=String(m),!(m.length>100)){var v=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(m);if(!!v){var E=parseFloat(v[1]),O=(v[2]||"ms").toLowerCase();switch(O){case"years":case"year":case"yrs":case"yr":case"y":return E*s;case"weeks":case"week":case"w":return E*o;case"days":case"day":case"d":return E*n;case"hours":case"hour":case"hrs":case"hr":case"h":return E*r;case"minutes":case"minute":case"mins":case"min":case"m":return E*e;case"seconds":case"second":case"secs":case"sec":case"s":return E*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return E;default:return}}}}function c(m){var v=Math.abs(m);return v>=n?Math.round(m/n)+"d":v>=r?Math.round(m/r)+"h":v>=e?Math.round(m/e)+"m":v>=t?Math.round(m/t)+"s":m+"ms"}function h(m){var v=Math.abs(m);return v>=n?w(m,v,n,"day"):v>=r?w(m,v,r,"hour"):v>=e?w(m,v,e,"minute"):v>=t?w(m,v,t,"second"):m+" ms"}function w(m,v,E,O){var $=v>=E*1.5;return Math.round(m/E)+" "+O+($?"s":"")}return ms$1}function setup(t){r.debug=r,r.default=r,r.coerce=h,r.disable=s,r.enable=o,r.enabled=u,r.humanize=requireMs(),r.destroy=w,Object.keys(t).forEach(m=>{r[m]=t[m]}),r.names=[],r.skips=[],r.formatters={};function e(m){let v=0;for(let E=0;E<m.length;E++)v=(v<<5)-v+m.charCodeAt(E),v|=0;return r.colors[Math.abs(v)%r.colors.length]}r.selectColor=e;function r(m){let v,E=null,O,$;function k(...B){if(!k.enabled)return;const j=k,ie=Number(new Date),se=ie-(v||ie);j.diff=se,j.prev=v,j.curr=ie,v=ie,B[0]=r.coerce(B[0]),typeof B[0]!="string"&&B.unshift("%O");let N=0;B[0]=B[0].replace(/%([a-zA-Z%])/g,(oe,q)=>{if(oe==="%%")return"%";N++;const X=r.formatters[q];if(typeof X=="function"){const de=B[N];oe=X.call(j,de),B.splice(N,1),N--}return oe}),r.formatArgs.call(j,B),(j.log||r.log).apply(j,B)}return k.namespace=m,k.useColors=r.useColors(),k.color=r.selectColor(m),k.extend=n,k.destroy=r.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:()=>E!==null?E:(O!==r.namespaces&&(O=r.namespaces,$=r.enabled(m)),$),set:B=>{E=B}}),typeof r.init=="function"&&r.init(k),k}function n(m,v){const E=r(this.namespace+(typeof v>"u"?":":v)+m);return E.log=this.log,E}function o(m){r.save(m),r.namespaces=m,r.names=[],r.skips=[];let v;const E=(typeof m=="string"?m:"").split(/[\s,]+/),O=E.length;for(v=0;v<O;v++)!E[v]||(m=E[v].replace(/\*/g,".*?"),m[0]==="-"?r.skips.push(new RegExp("^"+m.slice(1)+"$")):r.names.push(new RegExp("^"+m+"$")))}function s(){const m=[...r.names.map(c),...r.skips.map(c).map(v=>"-"+v)].join(",");return r.enable(""),m}function u(m){if(m[m.length-1]==="*")return!0;let v,E;for(v=0,E=r.skips.length;v<E;v++)if(r.skips[v].test(m))return!1;for(v=0,E=r.names.length;v<E;v++)if(r.names[v].test(m))return!0;return!1}function c(m){return m.toString().substring(2,m.toString().length-2).replace(/\.\*\?$/,"*")}function h(m){return m instanceof Error?m.stack||m.message:m}function w(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var common$1=setup;(function(t,e){e.formatArgs=n,e.save=o,e.load=s,e.useColors=r,e.storage=u(),e.destroy=(()=>{let h=!1;return()=>{h||(h=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(h){if(h[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+h[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const w="color: "+this.color;h.splice(1,0,w,"color: inherit");let m=0,v=0;h[0].replace(/%[a-zA-Z%]/g,E=>{E!=="%%"&&(m++,E==="%c"&&(v=m))}),h.splice(v,0,w)}e.log=console.debug||console.log||(()=>{});function o(h){try{h?e.storage.setItem("debug",h):e.storage.removeItem("debug")}catch{}}function s(){let h;try{h=e.storage.getItem("debug")}catch{}return!h&&typeof process<"u"&&"env"in process&&(h=process.env.DEBUG),h}function u(){try{return localStorage}catch{}}t.exports=common$1(e);const{formatters:c}=t.exports;c.j=function(h){try{return JSON.stringify(h)}catch(w){return"[UnexpectedJSONParseError]: "+w.message}}})(browser$1,browser$1.exports);const debug=browser$1.exports;function assign(t,e){for(const r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function createError(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return assign(t,r)}catch{r.message=t.message,r.stack=t.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(t)),assign(new o,r)}}var errCode=createError;let nanoid$1=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");function base$3(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var s=t.charAt(o),u=s.charCodeAt(0);if(r[u]!==255)throw new TypeError(s+" is ambiguous");r[u]=o}var c=t.length,h=t.charAt(0),w=Math.log(c)/Math.log(256),m=Math.log(256)/Math.log(c);function v($){if($ instanceof Uint8Array||(ArrayBuffer.isView($)?$=new Uint8Array($.buffer,$.byteOffset,$.byteLength):Array.isArray($)&&($=Uint8Array.from($))),!($ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if($.length===0)return"";for(var k=0,B=0,j=0,ie=$.length;j!==ie&&$[j]===0;)j++,k++;for(var se=(ie-j)*m+1>>>0,N=new Uint8Array(se);j!==ie;){for(var L=$[j],oe=0,q=se-1;(L!==0||oe<B)&&q!==-1;q--,oe++)L+=256*N[q]>>>0,N[q]=L%c>>>0,L=L/c>>>0;if(L!==0)throw new Error("Non-zero carry");B=oe,j++}for(var X=se-B;X!==se&&N[X]===0;)X++;for(var de=h.repeat(k);X<se;++X)de+=t.charAt(N[X]);return de}function E($){if(typeof $!="string")throw new TypeError("Expected String");if($.length===0)return new Uint8Array;var k=0;if($[k]!==" "){for(var B=0,j=0;$[k]===h;)B++,k++;for(var ie=($.length-k)*w+1>>>0,se=new Uint8Array(ie);$[k];){var N=r[$.charCodeAt(k)];if(N===255)return;for(var L=0,oe=ie-1;(N!==0||L<j)&&oe!==-1;oe--,L++)N+=c*se[oe]>>>0,se[oe]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");j=L,k++}if($[k]!==" "){for(var q=ie-j;q!==ie&&se[q]===0;)q++;for(var X=new Uint8Array(B+(ie-q)),de=B;q!==ie;)X[de++]=se[q++];return X}}}function O($){var k=E($);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:v,decodeUnsafe:E,decode:O}}var src$3=base$3,_brrp__multiformats_scope_baseX$3=src$3;const coerce$3=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fromString$5=t=>new TextEncoder().encode(t),toString$6=t=>new TextDecoder().decode(t);class Encoder$3{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder$3{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$3(this,e)}}class ComposedDecoder$3{constructor(e){this.decoders=e}or(e){return or$3(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or$3=(t,e)=>new ComposedDecoder$3({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Codec$3{constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder$3(e,r,n),this.decoder=new Decoder$3(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$6=({name:t,prefix:e,encode:r,decode:n})=>new Codec$3(t,e,r,n),baseX$3=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX$3(r,e);return from$6({prefix:t,name:e,encode:n,decode:s=>coerce$3(o(s))})},decode$k=(t,e,r,n)=>{const o={};for(let m=0;m<e.length;++m)o[e[m]]=m;let s=t.length;for(;t[s-1]==="=";)--s;const u=new Uint8Array(s*r/8|0);let c=0,h=0,w=0;for(let m=0;m<s;++m){const v=o[t[m]];if(v===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<r|v,c+=r,c>=8&&(c-=8,u[w++]=255&h>>c)}if(c>=r||255&h<<8-c)throw new SyntaxError("Unexpected end of data");return u},encode$j=(t,e,r)=>{const n=e[e.length-1]==="=",o=(1<<r)-1;let s="",u=0,c=0;for(let h=0;h<t.length;++h)for(c=c<<8|t[h],u+=8;u>r;)u-=r,s+=e[o&c>>u];if(u&&(s+=e[o&c<<r-u]),n)for(;s.length*r&7;)s+="=";return s},rfc4648$3=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>from$6({prefix:e,name:t,encode(o){return encode$j(o,n,r)},decode(o){return decode$k(o,n,r,t)}}),identity$9=from$6({prefix:"\0",name:"identity",encode:t=>toString$6(t),decode:t=>fromString$5(t)}),identityBase$2=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$9},Symbol.toStringTag,{value:"Module"})),base2$4=rfc4648$3({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$5=Object.freeze(Object.defineProperty({__proto__:null,base2:base2$4},Symbol.toStringTag,{value:"Module"})),base8$4=rfc4648$3({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$5=Object.freeze(Object.defineProperty({__proto__:null,base8:base8$4},Symbol.toStringTag,{value:"Module"})),base10$4=baseX$3({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$5=Object.freeze(Object.defineProperty({__proto__:null,base10:base10$4},Symbol.toStringTag,{value:"Module"})),base16$4=rfc4648$3({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper$2=rfc4648$3({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$5=Object.freeze(Object.defineProperty({__proto__:null,base16:base16$4,base16upper:base16upper$2},Symbol.toStringTag,{value:"Module"})),base32$4=rfc4648$3({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper$1=rfc4648$3({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad$1=rfc4648$3({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper$1=rfc4648$3({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex$1=rfc4648$3({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper$1=rfc4648$3({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad$1=rfc4648$3({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper$1=rfc4648$3({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$1=rfc4648$3({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$5=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$4,base32upper:base32upper$1,base32pad:base32pad$1,base32padupper:base32padupper$1,base32hex:base32hex$1,base32hexupper:base32hexupper$1,base32hexpad:base32hexpad$1,base32hexpadupper:base32hexpadupper$1,base32z:base32z$1},Symbol.toStringTag,{value:"Module"})),base36$4=baseX$3({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper$2=baseX$3({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$5=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$4,base36upper:base36upper$2},Symbol.toStringTag,{value:"Module"})),base58btc$3=baseX$3({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr$1=baseX$3({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58$1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$3,base58flickr:base58flickr$1},Symbol.toStringTag,{value:"Module"})),base64$7=rfc4648$3({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad$2=rfc4648$3({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url$2=rfc4648$3({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad$2=rfc4648$3({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$8=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$7,base64pad:base64pad$2,base64url:base64url$2,base64urlpad:base64urlpad$2},Symbol.toStringTag,{value:"Module"})),alphabet$2=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),alphabetBytesToChars$2=alphabet$2.reduce((t,e,r)=>(t[r]=e,t),[]),alphabetCharsToBytes$2=alphabet$2.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function encode$i(t){return t.reduce((e,r)=>(e+=alphabetBytesToChars$2[r],e),"")}function decode$j(t){const e=[];for(const r of t){const n=alphabetCharsToBytes$2[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const base256emoji$4=from$6({prefix:"\u{1F680}",name:"base256emoji",encode:encode$i,decode:decode$j}),base256emoji$5=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:base256emoji$4},Symbol.toStringTag,{value:"Module"}));var encode_1$2=encode$h,MSB$3=128,REST$3=127,MSBALL$2=~REST$3,INT$2=Math.pow(2,31);function encode$h(t,e,r){e=e||[],r=r||0;for(var n=r;t>=INT$2;)e[r++]=t&255|MSB$3,t/=128;for(;t&MSBALL$2;)e[r++]=t&255|MSB$3,t>>>=7;return e[r]=t|0,encode$h.bytes=r-n+1,e}var decode$i=read$2,MSB$1$2=128,REST$1$2=127;function read$2(t,n){var r=0,n=n||0,o=0,s=n,u,c=t.length;do{if(s>=c)throw read$2.bytes=0,new RangeError("Could not decode varint");u=t[s++],r+=o<28?(u&REST$1$2)<<o:(u&REST$1$2)*Math.pow(2,o),o+=7}while(u>=MSB$1$2);return read$2.bytes=s-n,r}var N1$2=Math.pow(2,7),N2$2=Math.pow(2,14),N3$2=Math.pow(2,21),N4$2=Math.pow(2,28),N5$2=Math.pow(2,35),N6$2=Math.pow(2,42),N7$2=Math.pow(2,49),N8$2=Math.pow(2,56),N9$2=Math.pow(2,63),length$3=function(t){return t<N1$2?1:t<N2$2?2:t<N3$2?3:t<N4$2?4:t<N5$2?5:t<N6$2?6:t<N7$2?7:t<N8$2?8:t<N9$2?9:10},varint$2={encode:encode_1$2,decode:decode$i,encodingLength:length$3},_brrp_varint$2=varint$2;const encodeTo$2=(t,e,r=0)=>(_brrp_varint$2.encode(t,e,r),e),encodingLength$2=t=>_brrp_varint$2.encodingLength(t),create$4=(t,e)=>{const r=e.byteLength,n=encodingLength$2(t),o=n+encodingLength$2(r),s=new Uint8Array(o+r);return encodeTo$2(t,s,0),encodeTo$2(r,s,n),s.set(e,o),new Digest$2(t,r,e,s)};class Digest$2{constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}}const from$5=({name:t,code:e,encode:r})=>new Hasher$1(t,e,r);class Hasher$1{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?create$4(this.code,r):r.then(n=>create$4(this.code,n))}else throw Error("Unknown type, must be binary type")}}const sha$1=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sha256$2=from$5({name:"sha2-256",code:18,encode:sha$1("SHA-256")}),sha512$1=from$5({name:"sha2-512",code:19,encode:sha$1("SHA-512")}),sha2$1=Object.freeze(Object.defineProperty({__proto__:null,sha256:sha256$2,sha512:sha512$1},Symbol.toStringTag,{value:"Module"})),code$7=0,name$5="identity",encode$g=coerce$3,digest$2=t=>create$4(code$7,encode$g(t)),identity$7={code:code$7,name:name$5,encode:encode$g,digest:digest$2},identity$8=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$7},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases$2={...identityBase$2,...base2$5,...base8$5,...base10$5,...base16$5,...base32$5,...base36$5,...base58$1,...base64$8,...base256emoji$5};({...sha2$1,...identity$8});function asUint8Array$2(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function allocUnsafe$2(t=0){var e;return((e=globalThis.Buffer)==null?void 0:e.allocUnsafe)!=null?asUint8Array$2(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function createCodec$2(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const string$2=createCodec$2("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii$2=createCodec$2("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=allocUnsafe$2(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),BASES$2={utf8:string$2,"utf-8":string$2,hex:bases$2.base16,latin1:ascii$2,ascii:ascii$2,binary:ascii$2,...bases$2};function toString$5(t,e="utf8"){const r=BASES$2[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function fromString$4(t,e="utf8"){const r=BASES$2[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array$2(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const pathSepS="/",pathSepB=new TextEncoder().encode(pathSepS),pathSep=pathSepB[0];class Key{constructor(e,r){if(typeof e=="string")this._buf=fromString$4(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(r==null&&(r=!0),r&&this.clean(),this._buf.byteLength===0||this._buf[0]!==pathSep)throw new Error("Invalid key")}toString(e="utf8"){return toString$5(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Key(e.join(pathSepS))}static random(){return new Key(nanoid$1().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Key(e):typeof e.uint8Array=="function"?new Key(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=pathSepB),this._buf[0]!==pathSep){const e=new Uint8Array(this._buf.byteLength+1);e.fill(pathSep,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===pathSep;)this._buf=this._buf.subarray(0,-1)}less(e){const r=this.list(),n=e.list();for(let o=0;o<r.length;o++){if(n.length<o+1)return!1;const s=r[o],u=n[o];if(s<u)return!0;if(s>u)return!1}return r.length<n.length}reverse(){return Key.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(pathSepS).slice(1)}type(){return namespaceType(this.baseNamespace())}name(){return namespaceValue(this.baseNamespace())}instance(e){return new Key(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(pathSepS)||(e+=pathSepS),e+=this.type(),new Key(e)}parent(){const e=this.list();return e.length===1?new Key(pathSepS):new Key(e.slice(0,-1).join(pathSepS))}child(e){return this.toString()===pathSepS?e:e.toString()===pathSepS?this:new Key(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Key.withNamespaces([...this.namespaces(),...flatten(e.map(r=>r.namespaces()))])}}function namespaceType(t){const e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function namespaceValue(t){const e=t.split(":");return e[e.length-1]}function flatten(t){return[].concat(...t)}const length$2=async t=>{let e=0;for await(const r of t)e++;return e};var itLength=length$2;const log$7=debug("ipfs:repo:migrator:migration-8");function unwrap$1(t){return t.child?unwrap$1(t.child):t}function keyToMultihash$1(t){try{const e=base32$6.decode(`b${t.toString().toLowerCase().slice(1)}`),r=CID$2.decode(e).multihash.bytes,n=base32$6.encode(r).slice(1).toUpperCase();return new Key(`/${n}`,!1)}catch{return t}}function keyToCid$1(t){try{const e=base32$6.decode(`b${t.toString().toLowerCase().slice(1)}`),r=decode$p(e),n=base32$6.encode(CID$2.createV1(code$8,r).bytes).slice(1);return new Key(`/${n.toUpperCase()}`,!1)}catch{return t}}async function process$3(t,e,r){const n=t.blocks;await n.open();const o=unwrap$1(n),s=await itLength(o.queryKeys({filters:[u=>r(u).toString()!==u.toString()]}));try{let u=0;for await(const c of o.query({})){const h=r(c.key);h.toString()!==c.key.toString()&&(u+=1,log$7(`Migrating Block from ${c.key} to ${h}`,await o.has(c.key)),await o.delete(c.key),await o.put(h,c.value),e(u/s*100,`Migrated Block from ${c.key} to ${h}`))}}finally{await n.close()}}const migration$4={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(t,e=()=>{})=>process$3(t,e,keyToMultihash$1),revert:(t,e=()=>{})=>process$3(t,e,keyToCid$1)},textDecoder$2=new TextDecoder;function decodeVarint(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const o=t[e++];if(r+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[r,e]}function decodeBytes(t,e){let r;[r,e]=decodeVarint(t,e);const n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function decodeKey(t,e){let r;return[r,e]=decodeVarint(t,e),[r&7,r>>3,e]}function decodeLink(t){const e={},r=t.length;let n=0;for(;n<r;){let o,s;if([o,s,n]=decodeKey(t,n),s===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=decodeBytes(t,n)}else if(s===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let u;[u,n]=decodeBytes(t,n),e.Name=textDecoder$2.decode(u)}else if(s===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[e.Tsize,n]=decodeVarint(t,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function decodeNode(t){const e=t.length;let r=0,n,o=!1,s;for(;r<e;){let c,h;if([c,h,r]=decodeKey(t,r),c!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${c}`);if(h===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,r]=decodeBytes(t,r),n&&(o=!0)}else if(h===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let w;[w,r]=decodeBytes(t,r),n.push(decodeLink(w))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${h}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");const u={};return s&&(u.Data=s),u.Links=n||[],u}const textEncoder$4=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=encodeVarint(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){const n=textEncoder$4.encode(t.Name);r-=n.length,e.set(n,r),r=encodeVarint(e,r,n.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=encodeVarint(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function encodeNode(t){const e=sizeNode(t),r=new Uint8Array(e);let n=e;if(t.Data&&(n-=t.Data.length,r.set(t.Data,n),n=encodeVarint(r,n,t.Data.length)-1,r[n]=10),t.Links)for(let o=t.Links.length-1;o>=0;o--){const s=encodeLink(t.Links[o],r.subarray(0,n));n-=s,n=encodeVarint(r,n,s)-1,r[n]=18}return r}function sizeLink(t){let e=0;if(t.Hash){const r=t.Hash.length;e+=1+r+sov(r)}if(typeof t.Name=="string"){const r=textEncoder$4.encode(t.Name).length;e+=1+r+sov(r)}return typeof t.Tsize=="number"&&(e+=1+sov(t.Tsize)),e}function sizeNode(t){let e=0;if(t.Data){const r=t.Data.length;e+=1+r+sov(r)}if(t.Links)for(const r of t.Links){const n=sizeLink(r);e+=1+n+sov(n)}return e}function encodeVarint(t,e,r){e-=sov(r);const n=e;for(;r>=maxUInt32;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,n}function sov(t){return t%2===0&&t++,Math.floor((len64(t)+6)/7)}function len64(t){let e=0;return t>=maxInt32&&(t=Math.floor(t/maxInt32),e=32),t>=1<<16&&(t>>>=16,e+=16),t>=1<<8&&(t>>>=8,e+=8),e+len8tab[t]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder$3=new TextEncoder;function linkComparator(t,e){if(t===e)return 0;const r=t.Name?textEncoder$3.encode(t.Name):[],n=e.Name?textEncoder$3.encode(e.Name):[];let o=r.length,s=n.length;for(let u=0,c=Math.min(o,s);u<c;++u)if(r[u]!==n[u]){o=r[u],s=n[u];break}return o<s?-1:s<o?1:0}function hasOnlyProperties(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function validate(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(t,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<t.Links.length;e++){const r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!hasOnlyProperties(r,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0&&(typeof r.Tsize!="number"||r.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&linkComparator(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}const code$6=112;function encode$f(t){validate(t);const e={};return t.Links&&(e.Links=t.Links.map(r=>{const n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),t.Data&&(e.Data=t.Data),encodeNode(e)}function decode$h(t){const e=decodeNode(t),r={};return e.Data&&(r.Data=e.Data),e.Links&&(r.Links=e.Links.map(n=>{const o={};try{o.Hash=CID$2.decode(n.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(o.Name=n.Name),n.Tsize!==void 0&&(o.Tsize=n.Tsize),o})),r}var minimal$1={exports:{}},indexMinimal={},minimal={},aspromise=asPromise;function asPromise(t,e){for(var r=new Array(arguments.length-1),n=0,o=2,s=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise(function(c,h){r[n]=function(m){if(s)if(s=!1,m)h(m);else{for(var v=new Array(arguments.length-1),E=0;E<v.length;)v[E++]=arguments[E];c.apply(null,v)}};try{t.apply(e||null,r)}catch(w){s&&(s=!1,h(w))}})}var base64$6={};(function(t){var e=t;e.length=function(c){var h=c.length;if(!h)return 0;for(var w=0;--h%4>1&&c.charAt(h)==="=";)++w;return Math.ceil(c.length*3)/4-w};for(var r=new Array(64),n=new Array(123),o=0;o<64;)n[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;e.encode=function(c,h,w){for(var m=null,v=[],E=0,O=0,$;h<w;){var k=c[h++];switch(O){case 0:v[E++]=r[k>>2],$=(k&3)<<4,O=1;break;case 1:v[E++]=r[$|k>>4],$=(k&15)<<2,O=2;break;case 2:v[E++]=r[$|k>>6],v[E++]=r[k&63],O=0;break}E>8191&&((m||(m=[])).push(String.fromCharCode.apply(String,v)),E=0)}return O&&(v[E++]=r[$],v[E++]=61,O===1&&(v[E++]=61)),m?(E&&m.push(String.fromCharCode.apply(String,v.slice(0,E))),m.join("")):String.fromCharCode.apply(String,v.slice(0,E))};var s="invalid encoding";e.decode=function(c,h,w){for(var m=w,v=0,E,O=0;O<c.length;){var $=c.charCodeAt(O++);if($===61&&v>1)break;if(($=n[$])===void 0)throw Error(s);switch(v){case 0:E=$,v=1;break;case 1:h[w++]=E<<2|($&48)>>4,E=$,v=2;break;case 2:h[w++]=(E&15)<<4|($&60)>>2,E=$,v=3;break;case 3:h[w++]=(E&3)<<6|$,v=0;break}}if(v===1)throw Error(s);return w-m},e.test=function(c){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(c)}})(base64$6);var eventemitter=EventEmitter$3;function EventEmitter$3(){this._listeners={}}EventEmitter$3.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};EventEmitter$3.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],o=0;o<n.length;)n[o].fn===r?n.splice(o,1):++o;return this};EventEmitter$3.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],o=1;o<arguments.length;)n.push(arguments[o++]);for(o=0;o<r.length;)r[o].fn.apply(r[o++].ctx,n)}return this};var float=factory(factory);function factory(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function o(h,w,m){e[0]=h,w[m]=r[0],w[m+1]=r[1],w[m+2]=r[2],w[m+3]=r[3]}function s(h,w,m){e[0]=h,w[m]=r[3],w[m+1]=r[2],w[m+2]=r[1],w[m+3]=r[0]}t.writeFloatLE=n?o:s,t.writeFloatBE=n?s:o;function u(h,w){return r[0]=h[w],r[1]=h[w+1],r[2]=h[w+2],r[3]=h[w+3],e[0]}function c(h,w){return r[3]=h[w],r[2]=h[w+1],r[1]=h[w+2],r[0]=h[w+3],e[0]}t.readFloatLE=n?u:c,t.readFloatBE=n?c:u}():function(){function e(n,o,s,u){var c=o<0?1:0;if(c&&(o=-o),o===0)n(1/o>0?0:2147483648,s,u);else if(isNaN(o))n(2143289344,s,u);else if(o>34028234663852886e22)n((c<<31|2139095040)>>>0,s,u);else if(o<11754943508222875e-54)n((c<<31|Math.round(o/1401298464324817e-60))>>>0,s,u);else{var h=Math.floor(Math.log(o)/Math.LN2),w=Math.round(o*Math.pow(2,-h)*8388608)&8388607;n((c<<31|h+127<<23|w)>>>0,s,u)}}t.writeFloatLE=e.bind(null,writeUintLE$1),t.writeFloatBE=e.bind(null,writeUintBE$1);function r(n,o,s){var u=n(o,s),c=(u>>31)*2+1,h=u>>>23&255,w=u&8388607;return h===255?w?NaN:c*(1/0):h===0?c*1401298464324817e-60*w:c*Math.pow(2,h-150)*(w+8388608)}t.readFloatLE=r.bind(null,readUintLE$1),t.readFloatBE=r.bind(null,readUintBE$1)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function o(h,w,m){e[0]=h,w[m]=r[0],w[m+1]=r[1],w[m+2]=r[2],w[m+3]=r[3],w[m+4]=r[4],w[m+5]=r[5],w[m+6]=r[6],w[m+7]=r[7]}function s(h,w,m){e[0]=h,w[m]=r[7],w[m+1]=r[6],w[m+2]=r[5],w[m+3]=r[4],w[m+4]=r[3],w[m+5]=r[2],w[m+6]=r[1],w[m+7]=r[0]}t.writeDoubleLE=n?o:s,t.writeDoubleBE=n?s:o;function u(h,w){return r[0]=h[w],r[1]=h[w+1],r[2]=h[w+2],r[3]=h[w+3],r[4]=h[w+4],r[5]=h[w+5],r[6]=h[w+6],r[7]=h[w+7],e[0]}function c(h,w){return r[7]=h[w],r[6]=h[w+1],r[5]=h[w+2],r[4]=h[w+3],r[3]=h[w+4],r[2]=h[w+5],r[1]=h[w+6],r[0]=h[w+7],e[0]}t.readDoubleLE=n?u:c,t.readDoubleBE=n?c:u}():function(){function e(n,o,s,u,c,h){var w=u<0?1:0;if(w&&(u=-u),u===0)n(0,c,h+o),n(1/u>0?0:2147483648,c,h+s);else if(isNaN(u))n(0,c,h+o),n(2146959360,c,h+s);else if(u>17976931348623157e292)n(0,c,h+o),n((w<<31|2146435072)>>>0,c,h+s);else{var m;if(u<22250738585072014e-324)m=u/5e-324,n(m>>>0,c,h+o),n((w<<31|m/4294967296)>>>0,c,h+s);else{var v=Math.floor(Math.log(u)/Math.LN2);v===1024&&(v=1023),m=u*Math.pow(2,-v),n(m*4503599627370496>>>0,c,h+o),n((w<<31|v+1023<<20|m*1048576&1048575)>>>0,c,h+s)}}}t.writeDoubleLE=e.bind(null,writeUintLE$1,0,4),t.writeDoubleBE=e.bind(null,writeUintBE$1,4,0);function r(n,o,s,u,c){var h=n(u,c+o),w=n(u,c+s),m=(w>>31)*2+1,v=w>>>20&2047,E=4294967296*(w&1048575)+h;return v===2047?E?NaN:m*(1/0):v===0?m*5e-324*E:m*Math.pow(2,v-1075)*(E+4503599627370496)}t.readDoubleLE=r.bind(null,readUintLE$1,0,4),t.readDoubleBE=r.bind(null,readUintBE$1,4,0)}(),t}function writeUintLE$1(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function writeUintBE$1(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function readUintLE$1(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function readUintBE$1(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}var utf8$2={};(function(t){var e=t;e.length=function(n){for(var o=0,s=0,u=0;u<n.length;++u)s=n.charCodeAt(u),s<128?o+=1:s<2048?o+=2:(s&64512)===55296&&(n.charCodeAt(u+1)&64512)===56320?(++u,o+=4):o+=3;return o},e.read=function(n,o,s){var u=s-o;if(u<1)return"";for(var c=null,h=[],w=0,m;o<s;)m=n[o++],m<128?h[w++]=m:m>191&&m<224?h[w++]=(m&31)<<6|n[o++]&63:m>239&&m<365?(m=((m&7)<<18|(n[o++]&63)<<12|(n[o++]&63)<<6|n[o++]&63)-65536,h[w++]=55296+(m>>10),h[w++]=56320+(m&1023)):h[w++]=(m&15)<<12|(n[o++]&63)<<6|n[o++]&63,w>8191&&((c||(c=[])).push(String.fromCharCode.apply(String,h)),w=0);return c?(w&&c.push(String.fromCharCode.apply(String,h.slice(0,w))),c.join("")):String.fromCharCode.apply(String,h.slice(0,w))},e.write=function(n,o,s){for(var u=s,c,h,w=0;w<n.length;++w)c=n.charCodeAt(w),c<128?o[s++]=c:c<2048?(o[s++]=c>>6|192,o[s++]=c&63|128):(c&64512)===55296&&((h=n.charCodeAt(w+1))&64512)===56320?(c=65536+((c&1023)<<10)+(h&1023),++w,o[s++]=c>>18|240,o[s++]=c>>12&63|128,o[s++]=c>>6&63|128,o[s++]=c&63|128):(o[s++]=c>>12|224,o[s++]=c>>6&63|128,o[s++]=c&63|128);return s-u}})(utf8$2);var pool_1=pool;function pool(t,e,r){var n=r||8192,o=n>>>1,s=null,u=n;return function(h){if(h<1||h>o)return t(h);u+h>n&&(s=t(n),u=0);var w=e.call(s,u,u+=h);return u&7&&(u=(u|7)+1),w}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var t=requireMinimal();function e(s,u){this.lo=s>>>0,this.hi=u>>>0}var r=e.zero=new e(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var n=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(u){if(u===0)return r;var c=u<0;c&&(u=-u);var h=u>>>0,w=(u-h)/4294967296>>>0;return c&&(w=~w>>>0,h=~h>>>0,++h>4294967295&&(h=0,++w>4294967295&&(w=0))),new e(h,w)},e.from=function(u){if(typeof u=="number")return e.fromNumber(u);if(t.isString(u))if(t.Long)u=t.Long.fromString(u);else return e.fromNumber(parseInt(u,10));return u.low||u.high?new e(u.low>>>0,u.high>>>0):r},e.prototype.toNumber=function(u){if(!u&&this.hi>>>31){var c=~this.lo+1>>>0,h=~this.hi>>>0;return c||(h=h+1>>>0),-(c+h*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(u){return t.Long?new t.Long(this.lo|0,this.hi|0,Boolean(u)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(u)}};var o=String.prototype.charCodeAt;return e.fromHash=function(u){return u===n?r:new e((o.call(u,0)|o.call(u,1)<<8|o.call(u,2)<<16|o.call(u,3)<<24)>>>0,(o.call(u,4)|o.call(u,5)<<8|o.call(u,6)<<16|o.call(u,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var u=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^u)>>>0,this.lo=(this.lo<<1^u)>>>0,this},e.prototype.zzDecode=function(){var u=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^u)>>>0,this.hi=(this.hi>>>1^u)>>>0,this},e.prototype.length=function(){var u=this.lo,c=(this.lo>>>28|this.hi<<4)>>>0,h=this.hi>>>24;return h===0?c===0?u<16384?u<128?1:2:u<2097152?3:4:c<16384?c<128?5:6:c<2097152?7:8:h<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(t){var e=t;e.asPromise=aspromise,e.base64=base64$6,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$2,e.pool=pool_1,e.LongBits=requireLongbits(),e.isNode=Boolean(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s},e.isString=function(s){return typeof s=="string"||s instanceof String},e.isObject=function(s){return s&&typeof s=="object"},e.isset=e.isSet=function(s,u){var c=s[u];return c!=null&&s.hasOwnProperty(u)?typeof c!="object"||(Array.isArray(c)?c.length:Object.keys(c).length)>0:!1},e.Buffer=function(){try{var o=e.inquire("buffer").Buffer;return o.prototype.utf8Write?o:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(s){return typeof s=="number"?e.Buffer?e._Buffer_allocUnsafe(s):new e.Array(s):e.Buffer?e._Buffer_from(s):typeof Uint8Array>"u"?s:new Uint8Array(s)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(s){return s?e.LongBits.from(s).toHash():e.LongBits.zeroHash},e.longFromHash=function(s,u){var c=e.LongBits.fromHash(s);return e.Long?e.Long.fromBits(c.lo,c.hi,u):c.toNumber(Boolean(u))};function r(o,s,u){for(var c=Object.keys(s),h=0;h<c.length;++h)(o[c[h]]===void 0||!u)&&(o[c[h]]=s[c[h]]);return o}e.merge=r,e.lcFirst=function(s){return s.charAt(0).toLowerCase()+s.substring(1)};function n(o){function s(u,c){if(!(this instanceof s))return new s(u,c);Object.defineProperty(this,"message",{get:function(){return u}}),Error.captureStackTrace?Error.captureStackTrace(this,s):Object.defineProperty(this,"stack",{value:new Error().stack||""}),c&&r(this,c)}return s.prototype=Object.create(Error.prototype,{constructor:{value:s,writable:!0,enumerable:!1,configurable:!0},name:{get(){return o},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),s}e.newError=n,e.ProtocolError=n("ProtocolError"),e.oneOfGetter=function(s){for(var u={},c=0;c<s.length;++c)u[s[c]]=1;return function(){for(var h=Object.keys(this),w=h.length-1;w>-1;--w)if(u[h[w]]===1&&this[h[w]]!==void 0&&this[h[w]]!==null)return h[w]}},e.oneOfSetter=function(s){return function(u){for(var c=0;c<s.length;++c)s[c]!==u&&delete this[s[c]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var o=e.Buffer;if(!o){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=o.from!==Uint8Array.from&&o.from||function(u,c){return new o(u,c)},e._Buffer_allocUnsafe=o.allocUnsafe||function(u){return new o(u)}}}(minimal)),minimal}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64$5=util$4.base64,utf8$1=util$4.utf8;function Op(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function noop$2(){}function State(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Writer$1(){this.len=0,this.head=new Op(noop$2,0,0),this.tail=this.head,this.states=null}var create$3=function t(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$3();Writer$1.alloc=function t(e){return new util$4.Array(e)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function t(e,r,n){return this.tail=this.tail.next=new Op(e,r,n),this.len+=r,this};function writeByte(t,e,r){e[r]=t&255}function writeVarint32(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function VarintOp(t,e){this.len=t,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function t(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function t(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function t(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}Writer$1.prototype.uint64=function t(e){var r=LongBits$1.from(e);return this._push(writeVarint64,r.length(),r)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function t(e){var r=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,r.length(),r)};Writer$1.prototype.bool=function t(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}Writer$1.prototype.fixed32=function t(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function t(e){var r=LongBits$1.from(e);return this._push(writeFixed32,4,r.lo)._push(writeFixed32,4,r.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function t(e){return this._push(util$4.float.writeFloatLE,4,e)};Writer$1.prototype.double=function t(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function t(e,r,n){r.set(e,n)}:function t(e,r,n){for(var o=0;o<e.length;++o)r[n+o]=e[o]};Writer$1.prototype.bytes=function t(e){var r=e.length>>>0;if(!r)return this._push(writeByte,1,0);if(util$4.isString(e)){var n=Writer$1.alloc(r=base64$5.length(e));base64$5.decode(e,n,0),e=n}return this.uint32(r)._push(writeBytes,r,e)};Writer$1.prototype.string=function t(e){var r=utf8$1.length(e);return r?this.uint32(r)._push(utf8$1.write,r,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function t(){return this.states=new State(this),this.head=this.tail=new Op(noop$2,0,0),this.len=0,this};Writer$1.prototype.reset=function t(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$2,0,0),this.len=0),this};Writer$1.prototype.ldelim=function t(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};Writer$1.prototype.finish=function t(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};Writer$1._configure=function(t){BufferWriter$1=t,Writer$1.create=create$3(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var o=0;o<e.length;)r[n++]=e[o++]}};BufferWriter.prototype.bytes=function t(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(BufferWriter.writeBytesBuffer,r,e),this};function writeStringBuffer(t,e,r){t.length<40?util$3.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}BufferWriter.prototype.string=function t(e){var r=util$3.Buffer.byteLength(e);return this.uint32(r),r&&this._push(writeStringBuffer,r,e),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Reader$1(t){this.buf=t,this.pos=0,this.len=t.length}var create_array=typeof Uint8Array<"u"?function t(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function t(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create$2=function t(){return util$2.Buffer?function(r){return(Reader$1.create=function(o){return util$2.Buffer.isBuffer(o)?new BufferReader$1(o):create_array(o)})(r)}:create_array};Reader$1.create=create$2();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function t(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function t(){return this.uint32()|0};Reader$1.prototype.sint32=function t(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var t=new LongBits(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function t(){return this.uint32()!==0};function readFixed32_end(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function t(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function t(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};Reader$1.prototype.string=function t(){var e=this.bytes();return utf8.read(e,0,e.length)};Reader$1.prototype.skip=function t(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Reader$1._configure=function(t){BufferReader$1=t,Reader$1.create=create$2(),BufferReader$1._configure();var e=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(t){Reader.call(this,t)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function t(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}Service.prototype.rpcCall=function t(e,r,n,o,s){if(!o)throw TypeError("request must be specified");var u=this;if(!s)return util.asPromise(t,u,e,r,n,o);if(!u.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return u.rpcImpl(e,r[u.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(h,w){if(h)return u.emit("error",h,e),s(h);if(w===null){u.end(!0);return}if(!(w instanceof n))try{w=n[u.responseDelimited?"decodeDelimited":"decode"](w)}catch(m){return u.emit("error",m,e),s(m)}return u.emit("data",w,e),s(null,w)})}catch(c){u.emit("error",c,e),setTimeout(function(){s(c)},0);return}};Service.prototype.end=function t(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(t){var e=t;e.Service=service})(rpc);var roots={};(function(t){var e=t;e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=requireMinimal(),e.rpc=rpc,e.roots=roots,e.configure=r;function r(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}r()})(indexMinimal);(function(t){t.exports=indexMinimal})(minimal$1);const $protobuf=getDefaultExportFromCjs(minimal$1.exports),$Reader$5=$protobuf.Reader,$Writer$5=$protobuf.Writer;$protobuf.util;const $root$5=$protobuf.roots.default||($protobuf.roots.default={}),ipfs=$root$5.ipfs=(()=>{const t={};return t.pin=function(){const e={};return e.Set=function(){function r(n){if(n)for(var o=Object.keys(n),s=0;s<o.length;++s)n[o[s]]!=null&&(this[o[s]]=n[o[s]])}return r.prototype.version=0,r.prototype.fanout=0,r.prototype.seed=0,r.encode=function(o,s){return s||(s=$Writer$5.create()),o.version!=null&&Object.hasOwnProperty.call(o,"version")&&s.uint32(8).uint32(o.version),o.fanout!=null&&Object.hasOwnProperty.call(o,"fanout")&&s.uint32(16).uint32(o.fanout),o.seed!=null&&Object.hasOwnProperty.call(o,"seed")&&s.uint32(29).fixed32(o.seed),s},r.decode=function(o,s){o instanceof $Reader$5||(o=$Reader$5.create(o));for(var u=s===void 0?o.len:o.pos+s,c=new $root$5.ipfs.pin.Set;o.pos<u;){var h=o.uint32();switch(h>>>3){case 1:c.version=o.uint32();break;case 2:c.fanout=o.uint32();break;case 3:c.seed=o.fixed32();break;default:o.skipType(h&7);break}}return c},r.fromObject=function(o){if(o instanceof $root$5.ipfs.pin.Set)return o;var s=new $root$5.ipfs.pin.Set;return o.version!=null&&(s.version=o.version>>>0),o.fanout!=null&&(s.fanout=o.fanout>>>0),o.seed!=null&&(s.seed=o.seed>>>0),s},r.toObject=function(o,s){s||(s={});var u={};return s.defaults&&(u.version=0,u.fanout=0,u.seed=0),o.version!=null&&o.hasOwnProperty("version")&&(u.version=o.version),o.fanout!=null&&o.hasOwnProperty("fanout")&&(u.fanout=o.fanout),o.seed!=null&&o.hasOwnProperty("seed")&&(u.seed=o.seed),u},r.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},r}(),e}(),t})();var fnv1a$1={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),r.BASE=2166136261;function r(n,o=r.BASE){const s=n.length;for(let u=0;u<s;u++)o^=n.charCodeAt(u),o+=(o<<1)+(o<<4)+(o<<7)+(o<<8)+(o<<24);return o>>>0}e.default=r,t.exports=r})(fnv1a$1,fnv1a$1.exports);const fnv1a=getDefaultExportFromCjs(fnv1a$1.exports),PIN_DS_KEY=new Key("/local/pins"),DEFAULT_FANOUT=256,MAX_ITEMS=8192,EMPTY_KEY=CID$2.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),PinTypes$1={direct:"direct",recursive:"recursive"};function cidToKey$2(t){return new Key(`/${base32$6.encode(t.multihash.bytes).toUpperCase().substring(1)}`)}function asUint8Array$1(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function allocUnsafe$1(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?asUint8Array$1(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function concat$1(t,e){e||(e=t.reduce((o,s)=>o+s.length,0));const r=allocUnsafe$1(e);let n=0;for(const o of t)r.set(o,n),n+=o.length;return asUint8Array$1(r)}function compare(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}const identity$6=from$8({prefix:"\0",name:"identity",encode:t=>toString$7(t),decode:t=>fromString$6(t)}),identityBase$1=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$6},Symbol.toStringTag,{value:"Module"})),base2$2=rfc4648$4({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$3=Object.freeze(Object.defineProperty({__proto__:null,base2:base2$2},Symbol.toStringTag,{value:"Module"})),base8$2=rfc4648$4({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$3=Object.freeze(Object.defineProperty({__proto__:null,base8:base8$2},Symbol.toStringTag,{value:"Module"})),base10$2=baseX$4({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$3=Object.freeze(Object.defineProperty({__proto__:null,base10:base10$2},Symbol.toStringTag,{value:"Module"})),base16$2=rfc4648$4({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper$1=rfc4648$4({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$3=Object.freeze(Object.defineProperty({__proto__:null,base16:base16$2,base16upper:base16upper$1},Symbol.toStringTag,{value:"Module"})),base36$2=baseX$4({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper$1=baseX$4({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$3=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$2,base36upper:base36upper$1},Symbol.toStringTag,{value:"Module"})),base64$3=rfc4648$4({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad$1=rfc4648$4({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url$1=rfc4648$4({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad$1=rfc4648$4({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$4=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$3,base64pad:base64pad$1,base64url:base64url$1,base64urlpad:base64urlpad$1},Symbol.toStringTag,{value:"Module"})),alphabet$1=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),alphabetBytesToChars$1=alphabet$1.reduce((t,e,r)=>(t[r]=e,t),[]),alphabetCharsToBytes$1=alphabet$1.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function encode$e(t){return t.reduce((e,r)=>(e+=alphabetBytesToChars$1[r],e),"")}function decode$g(t){const e=[];for(const r of t){const n=alphabetCharsToBytes$1[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const base256emoji$2=from$8({prefix:"\u{1F680}",name:"base256emoji",encode:encode$e,decode:decode$g}),base256emoji$3=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:base256emoji$2},Symbol.toStringTag,{value:"Module"})),code$5=0,name$4="identity",encode$d=coerce$4,digest$1=t=>create$6(code$5,encode$d(t)),identity$4={code:code$5,name:name$4,encode:encode$d,digest:digest$1},identity$5=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$4},Symbol.toStringTag,{value:"Module"})),textEncoder$2=new TextEncoder,textDecoder$1=new TextDecoder,name$3="json",code$4=512,encode$c=t=>textEncoder$2.encode(JSON.stringify(t)),decode$f=t=>JSON.parse(textDecoder$1.decode(t)),json=Object.freeze(Object.defineProperty({__proto__:null,name:name$3,code:code$4,encode:encode$c,decode:decode$f},Symbol.toStringTag,{value:"Module"})),bases$1={...identityBase$1,...base2$3,...base8$3,...base10$3,...base16$3,...base32$7,...base36$3,...base58$2,...base64$4,...base256emoji$3},hashes={...sha2$2,...identity$5},codecs={raw,json};function createCodec$1(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const string$1=createCodec$1("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii$1=createCodec$1("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=allocUnsafe$1(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),BASES$1={utf8:string$1,"utf-8":string$1,hex:bases$1.base16,latin1:ascii$1,ascii:ascii$1,binary:ascii$1,...bases$1};function toString$4(t,e="utf8"){const r=BASES$1[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function fromString$3(t,e="utf8"){const r=BASES$1[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array$1(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const PinSet=ipfs.pin.Set;function readHeader(t){const e=t.Data;if(!e)throw new Error("No data present");const r=varint$4.decode(e),n=varint$4.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+r>e.length)throw new Error("Impossibly large set header length");const o=e.slice(n,r+n),s=PinSet.toObject(PinSet.decode(o),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(s.version!==1)throw new Error(`Unsupported Set version: ${s.version}`);if(s.fanout>t.Links.length)throw new Error("Impossibly large fanout");return{header:s,data:e.slice(r+n)}}function hash(t,e){const r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,t,!0);const o=fromString$3(e.toString()),s=concat$1([r,o],r.byteLength+o.byteLength);return fnv1a(toString$4(s))}async function*walkItems(t,e){const r=readHeader(e);let n=0;for(const o of e.Links){if(n<r.header.fanout){const s=o.Hash;if(!EMPTY_KEY.equals(s)){const u=await t.get(s),c=decode$h(u);yield*walkItems(t,c)}}else yield o.Hash;n++}}async function*loadSet(t,e,r){const n=e.Links.find(u=>u.Name===r);if(!n)throw new Error("No link found with name "+r);const o=await t.get(n.Hash),s=decode$h(o);yield*walkItems(t,s)}function storeItems(t,e){return r(e,0);async function r(n,o){const s=PinSet.encode({version:1,fanout:DEFAULT_FANOUT,seed:o}).finish(),u=varint$4.encode(s.length),c=concat$1([u,s]),h=[];for(let m=0;m<DEFAULT_FANOUT;m++)h.push({Name:"",Tsize:1,Hash:EMPTY_KEY});if(n.length<=MAX_ITEMS){const m=n.map(O=>({link:{Name:"",Tsize:1,Hash:O.key},data:O.data||new Uint8Array})).sort((O,$)=>compare(O.link.Hash.bytes,$.link.Hash.bytes)),v=h.concat(m.map(O=>O.link));return{Data:concat$1([c,...m.map(O=>O.data)]),Links:v}}else{const m=n.reduce((E,O)=>{const $=hash(o,O.key)%DEFAULT_FANOUT;return E[$]=$ in E?E[$].concat([O]):[O],E},[]);let v=0;for(const E of m){const O=await r(E,o+1);await w(O,v),v++}return{Data:c,Links:h}}async function w(m,v){const E=encode$f(m),O=await sha256$3.digest(E),$=CID$2.createV0(O);await t.put($,E);const k=m.Links.reduce((B,j)=>B+(j.Tsize||0),0)+E.length;h[v]={Name:"",Tsize:k,Hash:$}}}}async function storeSet(t,e,r){const n=await storeItems(t,r.map(h=>({key:h}))),o=encode$f(n),s=await sha256$3.digest(o),u=CID$2.createV0(s);await t.put(u,o);const c=n.Links.reduce((h,w)=>h+w.Tsize,0)+o.length;return{Name:e,Tsize:c,Hash:u}}async function pinsToDatastore(t,e,r,n){if(!await e.has(PIN_DS_KEY))return;const o=await e.get(PIN_DS_KEY),s=CID$2.decode(o),u=await t.get(s),c=decode$h(u);let h=0;const w=await itLength(loadSet(t,c,PinTypes$1.recursive))+await itLength(loadSet(t,c,PinTypes$1.direct));for await(const m of loadSet(t,c,PinTypes$1.recursive)){h++;const v={depth:1/0};m.version!==0&&(v.version=m.version),m.code!==code$6&&(v.codec=m.code),await r.put(cidToKey$2(m),encode$q(v)),n(h/w*100,`Migrated recursive pin ${m}`)}for await(const m of loadSet(t,c,PinTypes$1.direct)){h++;const v={depth:0};m.version!==0&&(v.version=m.version),m.code!==code$6&&(v.codec=m.code),await r.put(cidToKey$2(m),encode$q(v)),n(h/w*100,`Migrated direct pin ${m}`)}await t.delete(s),await e.delete(PIN_DS_KEY)}async function pinsToDAG(t,e,r,n){const o=[],s=[];let u=0;const c=await itLength(r.queryKeys({}));for await(const{key:E,value:O}of r.query({})){u++;const $=decode$s(O),k=CID$2.create($.version||0,$.codec||code$6,decode$p(base32$6.decode("b"+E.toString().toLowerCase().split("/").pop())));$.depth===0?(n(u/c*100,`Reverted direct pin ${k}`),s.push(k)):(n(u/c*100,`Reverted recursive pin ${k}`),o.push(k))}n(100,"Updating pin root");const h={Links:[await storeSet(t,PinTypes$1.direct,s),await storeSet(t,PinTypes$1.recursive,o)]},w=encode$f(h),m=await sha256$3.digest(w),v=CID$2.createV0(m);await t.put(v,w),await e.put(PIN_DS_KEY,v.bytes)}async function process$2(t,e,r){const n=t.blocks,o=t.datastore,s=t.pins;await n.open(),await o.open(),await s.open();try{await r(n,o,s,e)}finally{await s.close(),await o.close(),await n.close()}}const migration$3={version:9,description:"Migrates pins to datastore",migrate:(t,e=()=>{})=>process$2(t,e,pinsToDatastore),revert:(t,e=()=>{})=>process$2(t,e,pinsToDAG)};function dbOpenFailedError(t){return t=t||new Error("Cannot open database"),errCode(t,"ERR_DB_OPEN_FAILED")}function dbDeleteFailedError(t){return t=t||new Error("Delete failed"),errCode(t,"ERR_DB_DELETE_FAILED")}function dbWriteFailedError(t){return t=t||new Error("Write failed"),errCode(t,"ERR_DB_WRITE_FAILED")}function notFoundError$1(t){return t=t||new Error("Not Found"),errCode(t,"ERR_NOT_FOUND")}const CONFIG_KEY=new Key("/config"),VERSION_KEY=new Key("/version");function findLevelJs$1(t){let e=t;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}async function hasWithFallback$1(t,e,r){const n=await e(t);if(n)return n;const o=findLevelJs$1(r);return o?new Promise((s,u)=>{const c=o.store("readonly").get(t.toString());c.transaction.onabort=()=>{u(c.transaction.error)},c.transaction.oncomplete=()=>{s(Boolean(c.result))}}):!1}async function getWithFallback$1(t,e,r,n){if(await r(t))return e(t);const o=findLevelJs$1(n);if(!o)throw notFoundError$1();return new Promise((s,u)=>{const c=o.store("readonly").get(t.toString());c.transaction.onabort=()=>{u(c.transaction.error)},c.transaction.oncomplete=()=>{if(c.result)return s(c.result);u(notFoundError$1())}})}function wrapStore(t){const e=t.get.bind(t),r=t.has.bind(t);return t.get=n=>getWithFallback$1(n,e,r,t),t.has=n=>hasWithFallback$1(n,r,t),t}function wrapBackends(t){return{...t,root:wrapStore(t.root),datastore:wrapStore(t.datastore),pins:wrapStore(t.pins),keys:wrapStore(t.keys)}}async function keysToBinary(t,e,r=()=>{}){const n=findLevelJs$1(e);if(!n){r(`${t} did not need an upgrade`);return}r(`Upgrading ${t}`),await withEach(n,(s,u)=>[{type:"del",key:s},{type:"put",key:fromString$3(s),value:u}])}async function keysToStrings(t,e,r=()=>{}){const n=findLevelJs$1(e);if(!n){r(`${t} did not need a downgrade`);return}r(`Downgrading ${t}`),await withEach(n,(s,u)=>[{type:"del",key:s},{type:"put",key:toString$4(s),value:u}])}function unwrap(t){return t.child?unwrap(t.child):t}async function process$1(t,e,r){const n=Object.entries(t).map(([u,c])=>({key:u,backend:unwrap(c)})).filter(({key:u,backend:c})=>c.constructor.name==="LevelDatastore").map(({key:u,backend:c})=>({name:u,store:c}));e(0,`Migrating ${n.length} dbs`);let o=0;const s=u=>{e(Math.round(o/n.length*100),u)};for(const{name:u,store:c}of n){await c.open();try{await r(u,c,s)}finally{o++,await c.close()}}e(100,`Migrated ${n.length} dbs`)}const migration$2={version:10,description:"Migrates datastore-level keys to binary",migrate:(t,e=()=>{})=>process$1(t,e,keysToBinary),revert:(t,e=()=>{})=>process$1(t,e,keysToStrings)};function withEach(t,e){function r(n,o){const s=t.store("readwrite"),u=s.transaction;let c=0,h;u.onabort=()=>o(h||u.error||new Error("aborted by user")),u.oncomplete=()=>o();function w(){const m=n[c++],v=m.key;let E;try{E=m.type==="del"?s.delete(v):s.put(m.value,v)}catch(O){h=O,u.abort();return}c<n.length&&(E.onsuccess=w)}w()}return new Promise((n,o)=>{const s=t.iterator(),u=h=>h;s._deserializeKey=s._deserializeValue=u,c();function c(){const h=(w,m,v)=>{if(w||m===void 0){const E=O=>{if(O){o(O);return}n()};s.end(E);return}r(e(m,v),c)};s.next(h)}})}const MFS_ROOT_KEY$1=new Key("/local/filesroot");async function storeMfsRootInDatastore(t,e=()=>{}){if(e(100,"Migrating MFS root to repo datastore"),await t.root.open(),await t.datastore.open(),await t.root.has(MFS_ROOT_KEY$1)){const r=await t.root.get(MFS_ROOT_KEY$1);await t.datastore.put(MFS_ROOT_KEY$1,r),await t.root.delete(MFS_ROOT_KEY$1)}await t.datastore.close(),await t.root.close(),e(100,"Stored MFS root in repo datastore")}async function storeMfsRootInRoot(t,e=()=>{}){if(e(100,"Migrating MFS root to repo root datastore"),await t.root.open(),await t.datastore.open(),await t.datastore.has(MFS_ROOT_KEY$1)){const r=await t.datastore.get(MFS_ROOT_KEY$1);await t.root.put(MFS_ROOT_KEY$1,r),await t.datastore.delete(MFS_ROOT_KEY$1)}await t.datastore.close(),await t.root.close(),e(100,"Stored MFS root in repo root datastore")}const migration$1={version:11,description:"Store mfs root in the datastore",migrate:storeMfsRootInDatastore,revert:storeMfsRootInRoot},$Reader$4=$protobuf.Reader,$Writer$4=$protobuf.Writer,$util$4=$protobuf.util,$root$4=$protobuf.roots.default||($protobuf.roots.default={}),Protocols=$root$4.Protocols=(()=>{function t(e){if(this.protocols=[],e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.protocols=$util$4.emptyArray,t.encode=function(r,n){if(n||(n=$Writer$4.create()),r.protocols!=null&&r.protocols.length)for(var o=0;o<r.protocols.length;++o)n.uint32(10).string(r.protocols[o]);return n},t.decode=function(r,n){r instanceof $Reader$4||(r=$Reader$4.create(r));for(var o=n===void 0?r.len:r.pos+n,s=new $root$4.Protocols;r.pos<o;){var u=r.uint32();switch(u>>>3){case 1:s.protocols&&s.protocols.length||(s.protocols=[]),s.protocols.push(r.string());break;default:r.skipType(u&7);break}}return s},t.fromObject=function(r){if(r instanceof $root$4.Protocols)return r;var n=new $root$4.Protocols;if(r.protocols){if(!Array.isArray(r.protocols))throw TypeError(".Protocols.protocols: array expected");n.protocols=[];for(var o=0;o<r.protocols.length;++o)n.protocols[o]=String(r.protocols[o])}return n},t.toObject=function(r,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.protocols=[]),r.protocols&&r.protocols.length){o.protocols=[];for(var s=0;s<r.protocols.length;++s)o.protocols[s]=r.protocols[s]}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t})(),$Reader$3=$protobuf.Reader,$Writer$3=$protobuf.Writer,$util$3=$protobuf.util,$root$3=$protobuf.roots.default||($protobuf.roots.default={}),Addresses=$root$3.Addresses=(()=>{function t(e){if(this.addrs=[],e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.addrs=$util$3.emptyArray,t.prototype.certifiedRecord=null,t.encode=function(r,n){if(n||(n=$Writer$3.create()),r.addrs!=null&&r.addrs.length)for(var o=0;o<r.addrs.length;++o)$root$3.Addresses.Address.encode(r.addrs[o],n.uint32(10).fork()).ldelim();return r.certifiedRecord!=null&&Object.hasOwnProperty.call(r,"certifiedRecord")&&$root$3.Addresses.CertifiedRecord.encode(r.certifiedRecord,n.uint32(18).fork()).ldelim(),n},t.decode=function(r,n){r instanceof $Reader$3||(r=$Reader$3.create(r));for(var o=n===void 0?r.len:r.pos+n,s=new $root$3.Addresses;r.pos<o;){var u=r.uint32();switch(u>>>3){case 1:s.addrs&&s.addrs.length||(s.addrs=[]),s.addrs.push($root$3.Addresses.Address.decode(r,r.uint32()));break;case 2:s.certifiedRecord=$root$3.Addresses.CertifiedRecord.decode(r,r.uint32());break;default:r.skipType(u&7);break}}return s},t.fromObject=function(r){if(r instanceof $root$3.Addresses)return r;var n=new $root$3.Addresses;if(r.addrs){if(!Array.isArray(r.addrs))throw TypeError(".Addresses.addrs: array expected");n.addrs=[];for(var o=0;o<r.addrs.length;++o){if(typeof r.addrs[o]!="object")throw TypeError(".Addresses.addrs: object expected");n.addrs[o]=$root$3.Addresses.Address.fromObject(r.addrs[o])}}if(r.certifiedRecord!=null){if(typeof r.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");n.certifiedRecord=$root$3.Addresses.CertifiedRecord.fromObject(r.certifiedRecord)}return n},t.toObject=function(r,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.addrs=[]),n.defaults&&(o.certifiedRecord=null),r.addrs&&r.addrs.length){o.addrs=[];for(var s=0;s<r.addrs.length;++s)o.addrs[s]=$root$3.Addresses.Address.toObject(r.addrs[s],n)}return r.certifiedRecord!=null&&r.hasOwnProperty("certifiedRecord")&&(o.certifiedRecord=$root$3.Addresses.CertifiedRecord.toObject(r.certifiedRecord,n)),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t.Address=function(){function e(n){if(n)for(var o=Object.keys(n),s=0;s<o.length;++s)n[o[s]]!=null&&(this[o[s]]=n[o[s]])}e.prototype.multiaddr=$util$3.newBuffer([]),e.prototype.isCertified=null;let r;return Object.defineProperty(e.prototype,"_isCertified",{get:$util$3.oneOfGetter(r=["isCertified"]),set:$util$3.oneOfSetter(r)}),e.encode=function(o,s){return s||(s=$Writer$3.create()),o.multiaddr!=null&&Object.hasOwnProperty.call(o,"multiaddr")&&s.uint32(10).bytes(o.multiaddr),o.isCertified!=null&&Object.hasOwnProperty.call(o,"isCertified")&&s.uint32(16).bool(o.isCertified),s},e.decode=function(o,s){o instanceof $Reader$3||(o=$Reader$3.create(o));for(var u=s===void 0?o.len:o.pos+s,c=new $root$3.Addresses.Address;o.pos<u;){var h=o.uint32();switch(h>>>3){case 1:c.multiaddr=o.bytes();break;case 2:c.isCertified=o.bool();break;default:o.skipType(h&7);break}}return c},e.fromObject=function(o){if(o instanceof $root$3.Addresses.Address)return o;var s=new $root$3.Addresses.Address;return o.multiaddr!=null&&(typeof o.multiaddr=="string"?$util$3.base64.decode(o.multiaddr,s.multiaddr=$util$3.newBuffer($util$3.base64.length(o.multiaddr)),0):o.multiaddr.length&&(s.multiaddr=o.multiaddr)),o.isCertified!=null&&(s.isCertified=Boolean(o.isCertified)),s},e.toObject=function(o,s){s||(s={});var u={};return s.defaults&&(s.bytes===String?u.multiaddr="":(u.multiaddr=[],s.bytes!==Array&&(u.multiaddr=$util$3.newBuffer(u.multiaddr)))),o.multiaddr!=null&&o.hasOwnProperty("multiaddr")&&(u.multiaddr=s.bytes===String?$util$3.base64.encode(o.multiaddr,0,o.multiaddr.length):s.bytes===Array?Array.prototype.slice.call(o.multiaddr):o.multiaddr),o.isCertified!=null&&o.hasOwnProperty("isCertified")&&(u.isCertified=o.isCertified,s.oneofs&&(u._isCertified="isCertified")),u},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),t.CertifiedRecord=function(){function e(r){if(r)for(var n=Object.keys(r),o=0;o<n.length;++o)r[n[o]]!=null&&(this[n[o]]=r[n[o]])}return e.prototype.seq=$util$3.Long?$util$3.Long.fromBits(0,0,!0):0,e.prototype.raw=$util$3.newBuffer([]),e.encode=function(n,o){return o||(o=$Writer$3.create()),n.seq!=null&&Object.hasOwnProperty.call(n,"seq")&&o.uint32(8).uint64(n.seq),n.raw!=null&&Object.hasOwnProperty.call(n,"raw")&&o.uint32(18).bytes(n.raw),o},e.decode=function(n,o){n instanceof $Reader$3||(n=$Reader$3.create(n));for(var s=o===void 0?n.len:n.pos+o,u=new $root$3.Addresses.CertifiedRecord;n.pos<s;){var c=n.uint32();switch(c>>>3){case 1:u.seq=n.uint64();break;case 2:u.raw=n.bytes();break;default:n.skipType(c&7);break}}return u},e.fromObject=function(n){if(n instanceof $root$3.Addresses.CertifiedRecord)return n;var o=new $root$3.Addresses.CertifiedRecord;return n.seq!=null&&($util$3.Long?(o.seq=$util$3.Long.fromValue(n.seq)).unsigned=!0:typeof n.seq=="string"?o.seq=parseInt(n.seq,10):typeof n.seq=="number"?o.seq=n.seq:typeof n.seq=="object"&&(o.seq=new $util$3.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0))),n.raw!=null&&(typeof n.raw=="string"?$util$3.base64.decode(n.raw,o.raw=$util$3.newBuffer($util$3.base64.length(n.raw)),0):n.raw.length&&(o.raw=n.raw)),o},e.toObject=function(n,o){o||(o={});var s={};if(o.defaults){if($util$3.Long){var u=new $util$3.Long(0,0,!0);s.seq=o.longs===String?u.toString():o.longs===Number?u.toNumber():u}else s.seq=o.longs===String?"0":0;o.bytes===String?s.raw="":(s.raw=[],o.bytes!==Array&&(s.raw=$util$3.newBuffer(s.raw)))}return n.seq!=null&&n.hasOwnProperty("seq")&&(typeof n.seq=="number"?s.seq=o.longs===String?String(n.seq):n.seq:s.seq=o.longs===String?$util$3.Long.prototype.toString.call(n.seq):o.longs===Number?new $util$3.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0):n.seq),n.raw!=null&&n.hasOwnProperty("raw")&&(s.raw=o.bytes===String?$util$3.base64.encode(n.raw,0,n.raw.length):o.bytes===Array?Array.prototype.slice.call(n.raw):n.raw),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),t})(),$Reader$2=$protobuf.Reader,$Writer$2=$protobuf.Writer,$util$2=$protobuf.util,$root$2=$protobuf.roots.default||($protobuf.roots.default={}),Peer=$root$2.Peer=(()=>{function t(r){if(this.addresses=[],this.protocols=[],this.metadata=[],r)for(var n=Object.keys(r),o=0;o<n.length;++o)r[n[o]]!=null&&(this[n[o]]=r[n[o]])}t.prototype.addresses=$util$2.emptyArray,t.prototype.protocols=$util$2.emptyArray,t.prototype.metadata=$util$2.emptyArray,t.prototype.pubKey=null,t.prototype.peerRecordEnvelope=null;let e;return Object.defineProperty(t.prototype,"_pubKey",{get:$util$2.oneOfGetter(e=["pubKey"]),set:$util$2.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_peerRecordEnvelope",{get:$util$2.oneOfGetter(e=["peerRecordEnvelope"]),set:$util$2.oneOfSetter(e)}),t.encode=function(n,o){if(o||(o=$Writer$2.create()),n.addresses!=null&&n.addresses.length)for(var s=0;s<n.addresses.length;++s)$root$2.Address.encode(n.addresses[s],o.uint32(10).fork()).ldelim();if(n.protocols!=null&&n.protocols.length)for(var s=0;s<n.protocols.length;++s)o.uint32(18).string(n.protocols[s]);if(n.metadata!=null&&n.metadata.length)for(var s=0;s<n.metadata.length;++s)$root$2.Metadata.encode(n.metadata[s],o.uint32(26).fork()).ldelim();return n.pubKey!=null&&Object.hasOwnProperty.call(n,"pubKey")&&o.uint32(34).bytes(n.pubKey),n.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(n,"peerRecordEnvelope")&&o.uint32(42).bytes(n.peerRecordEnvelope),o},t.decode=function(n,o){n instanceof $Reader$2||(n=$Reader$2.create(n));for(var s=o===void 0?n.len:n.pos+o,u=new $root$2.Peer;n.pos<s;){var c=n.uint32();switch(c>>>3){case 1:u.addresses&&u.addresses.length||(u.addresses=[]),u.addresses.push($root$2.Address.decode(n,n.uint32()));break;case 2:u.protocols&&u.protocols.length||(u.protocols=[]),u.protocols.push(n.string());break;case 3:u.metadata&&u.metadata.length||(u.metadata=[]),u.metadata.push($root$2.Metadata.decode(n,n.uint32()));break;case 4:u.pubKey=n.bytes();break;case 5:u.peerRecordEnvelope=n.bytes();break;default:n.skipType(c&7);break}}return u},t.fromObject=function(n){if(n instanceof $root$2.Peer)return n;var o=new $root$2.Peer;if(n.addresses){if(!Array.isArray(n.addresses))throw TypeError(".Peer.addresses: array expected");o.addresses=[];for(var s=0;s<n.addresses.length;++s){if(typeof n.addresses[s]!="object")throw TypeError(".Peer.addresses: object expected");o.addresses[s]=$root$2.Address.fromObject(n.addresses[s])}}if(n.protocols){if(!Array.isArray(n.protocols))throw TypeError(".Peer.protocols: array expected");o.protocols=[];for(var s=0;s<n.protocols.length;++s)o.protocols[s]=String(n.protocols[s])}if(n.metadata){if(!Array.isArray(n.metadata))throw TypeError(".Peer.metadata: array expected");o.metadata=[];for(var s=0;s<n.metadata.length;++s){if(typeof n.metadata[s]!="object")throw TypeError(".Peer.metadata: object expected");o.metadata[s]=$root$2.Metadata.fromObject(n.metadata[s])}}return n.pubKey!=null&&(typeof n.pubKey=="string"?$util$2.base64.decode(n.pubKey,o.pubKey=$util$2.newBuffer($util$2.base64.length(n.pubKey)),0):n.pubKey.length&&(o.pubKey=n.pubKey)),n.peerRecordEnvelope!=null&&(typeof n.peerRecordEnvelope=="string"?$util$2.base64.decode(n.peerRecordEnvelope,o.peerRecordEnvelope=$util$2.newBuffer($util$2.base64.length(n.peerRecordEnvelope)),0):n.peerRecordEnvelope.length&&(o.peerRecordEnvelope=n.peerRecordEnvelope)),o},t.toObject=function(n,o){o||(o={});var s={};if((o.arrays||o.defaults)&&(s.addresses=[],s.protocols=[],s.metadata=[]),n.addresses&&n.addresses.length){s.addresses=[];for(var u=0;u<n.addresses.length;++u)s.addresses[u]=$root$2.Address.toObject(n.addresses[u],o)}if(n.protocols&&n.protocols.length){s.protocols=[];for(var u=0;u<n.protocols.length;++u)s.protocols[u]=n.protocols[u]}if(n.metadata&&n.metadata.length){s.metadata=[];for(var u=0;u<n.metadata.length;++u)s.metadata[u]=$root$2.Metadata.toObject(n.metadata[u],o)}return n.pubKey!=null&&n.hasOwnProperty("pubKey")&&(s.pubKey=o.bytes===String?$util$2.base64.encode(n.pubKey,0,n.pubKey.length):o.bytes===Array?Array.prototype.slice.call(n.pubKey):n.pubKey,o.oneofs&&(s._pubKey="pubKey")),n.peerRecordEnvelope!=null&&n.hasOwnProperty("peerRecordEnvelope")&&(s.peerRecordEnvelope=o.bytes===String?$util$2.base64.encode(n.peerRecordEnvelope,0,n.peerRecordEnvelope.length):o.bytes===Array?Array.prototype.slice.call(n.peerRecordEnvelope):n.peerRecordEnvelope,o.oneofs&&(s._peerRecordEnvelope="peerRecordEnvelope")),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t})();$root$2.Address=(()=>{function t(r){if(r)for(var n=Object.keys(r),o=0;o<n.length;++o)r[n[o]]!=null&&(this[n[o]]=r[n[o]])}t.prototype.multiaddr=$util$2.newBuffer([]),t.prototype.isCertified=null;let e;return Object.defineProperty(t.prototype,"_isCertified",{get:$util$2.oneOfGetter(e=["isCertified"]),set:$util$2.oneOfSetter(e)}),t.encode=function(n,o){return o||(o=$Writer$2.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&o.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&o.uint32(16).bool(n.isCertified),o},t.decode=function(n,o){n instanceof $Reader$2||(n=$Reader$2.create(n));for(var s=o===void 0?n.len:n.pos+o,u=new $root$2.Address;n.pos<s;){var c=n.uint32();switch(c>>>3){case 1:u.multiaddr=n.bytes();break;case 2:u.isCertified=n.bool();break;default:n.skipType(c&7);break}}return u},t.fromObject=function(n){if(n instanceof $root$2.Address)return n;var o=new $root$2.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?$util$2.base64.decode(n.multiaddr,o.multiaddr=$util$2.newBuffer($util$2.base64.length(n.multiaddr)),0):n.multiaddr.length&&(o.multiaddr=n.multiaddr)),n.isCertified!=null&&(o.isCertified=Boolean(n.isCertified)),o},t.toObject=function(n,o){o||(o={});var s={};return o.defaults&&(o.bytes===String?s.multiaddr="":(s.multiaddr=[],o.bytes!==Array&&(s.multiaddr=$util$2.newBuffer(s.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(s.multiaddr=o.bytes===String?$util$2.base64.encode(n.multiaddr,0,n.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(s.isCertified=n.isCertified,o.oneofs&&(s._isCertified="isCertified")),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t})();$root$2.Metadata=(()=>{function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.key="",t.prototype.value=$util$2.newBuffer([]),t.encode=function(r,n){return n||(n=$Writer$2.create()),r.key!=null&&Object.hasOwnProperty.call(r,"key")&&n.uint32(10).string(r.key),r.value!=null&&Object.hasOwnProperty.call(r,"value")&&n.uint32(18).bytes(r.value),n},t.decode=function(r,n){r instanceof $Reader$2||(r=$Reader$2.create(r));for(var o=n===void 0?r.len:r.pos+n,s=new $root$2.Metadata;r.pos<o;){var u=r.uint32();switch(u>>>3){case 1:s.key=r.string();break;case 2:s.value=r.bytes();break;default:r.skipType(u&7);break}}return s},t.fromObject=function(r){if(r instanceof $root$2.Metadata)return r;var n=new $root$2.Metadata;return r.key!=null&&(n.key=String(r.key)),r.value!=null&&(typeof r.value=="string"?$util$2.base64.decode(r.value,n.value=$util$2.newBuffer($util$2.base64.length(r.value)),0):r.value.length&&(n.value=r.value)),n},t.toObject=function(r,n){n||(n={});var o={};return n.defaults&&(o.key="",n.bytes===String?o.value="":(o.value=[],n.bytes!==Array&&(o.value=$util$2.newBuffer(o.value)))),r.key!=null&&r.hasOwnProperty("key")&&(o.key=r.key),r.value!=null&&r.hasOwnProperty("value")&&(o.value=n.bytes===String?$util$2.base64.encode(r.value,0,r.value.length):n.bytes===Array?Array.prototype.slice.call(r.value):r.value),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t})();const $Reader$1=$protobuf.Reader,$Writer$1=$protobuf.Writer,$util$1=$protobuf.util,$root$1=$protobuf.roots.default||($protobuf.roots.default={}),Envelope=$root$1.Envelope=(()=>{function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.publicKey=$util$1.newBuffer([]),t.prototype.payloadType=$util$1.newBuffer([]),t.prototype.payload=$util$1.newBuffer([]),t.prototype.signature=$util$1.newBuffer([]),t.encode=function(r,n){return n||(n=$Writer$1.create()),r.publicKey!=null&&Object.hasOwnProperty.call(r,"publicKey")&&n.uint32(10).bytes(r.publicKey),r.payloadType!=null&&Object.hasOwnProperty.call(r,"payloadType")&&n.uint32(18).bytes(r.payloadType),r.payload!=null&&Object.hasOwnProperty.call(r,"payload")&&n.uint32(26).bytes(r.payload),r.signature!=null&&Object.hasOwnProperty.call(r,"signature")&&n.uint32(42).bytes(r.signature),n},t.decode=function(r,n){r instanceof $Reader$1||(r=$Reader$1.create(r));for(var o=n===void 0?r.len:r.pos+n,s=new $root$1.Envelope;r.pos<o;){var u=r.uint32();switch(u>>>3){case 1:s.publicKey=r.bytes();break;case 2:s.payloadType=r.bytes();break;case 3:s.payload=r.bytes();break;case 5:s.signature=r.bytes();break;default:r.skipType(u&7);break}}return s},t.fromObject=function(r){if(r instanceof $root$1.Envelope)return r;var n=new $root$1.Envelope;return r.publicKey!=null&&(typeof r.publicKey=="string"?$util$1.base64.decode(r.publicKey,n.publicKey=$util$1.newBuffer($util$1.base64.length(r.publicKey)),0):r.publicKey.length&&(n.publicKey=r.publicKey)),r.payloadType!=null&&(typeof r.payloadType=="string"?$util$1.base64.decode(r.payloadType,n.payloadType=$util$1.newBuffer($util$1.base64.length(r.payloadType)),0):r.payloadType.length&&(n.payloadType=r.payloadType)),r.payload!=null&&(typeof r.payload=="string"?$util$1.base64.decode(r.payload,n.payload=$util$1.newBuffer($util$1.base64.length(r.payload)),0):r.payload.length&&(n.payload=r.payload)),r.signature!=null&&(typeof r.signature=="string"?$util$1.base64.decode(r.signature,n.signature=$util$1.newBuffer($util$1.base64.length(r.signature)),0):r.signature.length&&(n.signature=r.signature)),n},t.toObject=function(r,n){n||(n={});var o={};return n.defaults&&(n.bytes===String?o.publicKey="":(o.publicKey=[],n.bytes!==Array&&(o.publicKey=$util$1.newBuffer(o.publicKey))),n.bytes===String?o.payloadType="":(o.payloadType=[],n.bytes!==Array&&(o.payloadType=$util$1.newBuffer(o.payloadType))),n.bytes===String?o.payload="":(o.payload=[],n.bytes!==Array&&(o.payload=$util$1.newBuffer(o.payload))),n.bytes===String?o.signature="":(o.signature=[],n.bytes!==Array&&(o.signature=$util$1.newBuffer(o.signature)))),r.publicKey!=null&&r.hasOwnProperty("publicKey")&&(o.publicKey=n.bytes===String?$util$1.base64.encode(r.publicKey,0,r.publicKey.length):n.bytes===Array?Array.prototype.slice.call(r.publicKey):r.publicKey),r.payloadType!=null&&r.hasOwnProperty("payloadType")&&(o.payloadType=n.bytes===String?$util$1.base64.encode(r.payloadType,0,r.payloadType.length):n.bytes===Array?Array.prototype.slice.call(r.payloadType):r.payloadType),r.payload!=null&&r.hasOwnProperty("payload")&&(o.payload=n.bytes===String?$util$1.base64.encode(r.payload,0,r.payload.length):n.bytes===Array?Array.prototype.slice.call(r.payload):r.payload),r.signature!=null&&r.hasOwnProperty("signature")&&(o.signature=n.bytes===String?$util$1.base64.encode(r.signature,0,r.signature.length):n.bytes===Array?Array.prototype.slice.call(r.signature):r.signature),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t})(),$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots.default||($protobuf.roots.default={}),PeerRecord=$root.PeerRecord=(()=>{function t(e){if(this.addresses=[],e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.peerId=$util.newBuffer([]),t.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,t.prototype.addresses=$util.emptyArray,t.encode=function(r,n){if(n||(n=$Writer.create()),r.peerId!=null&&Object.hasOwnProperty.call(r,"peerId")&&n.uint32(10).bytes(r.peerId),r.seq!=null&&Object.hasOwnProperty.call(r,"seq")&&n.uint32(16).uint64(r.seq),r.addresses!=null&&r.addresses.length)for(var o=0;o<r.addresses.length;++o)$root.PeerRecord.AddressInfo.encode(r.addresses[o],n.uint32(26).fork()).ldelim();return n},t.decode=function(r,n){r instanceof $Reader||(r=$Reader.create(r));for(var o=n===void 0?r.len:r.pos+n,s=new $root.PeerRecord;r.pos<o;){var u=r.uint32();switch(u>>>3){case 1:s.peerId=r.bytes();break;case 2:s.seq=r.uint64();break;case 3:s.addresses&&s.addresses.length||(s.addresses=[]),s.addresses.push($root.PeerRecord.AddressInfo.decode(r,r.uint32()));break;default:r.skipType(u&7);break}}return s},t.fromObject=function(r){if(r instanceof $root.PeerRecord)return r;var n=new $root.PeerRecord;if(r.peerId!=null&&(typeof r.peerId=="string"?$util.base64.decode(r.peerId,n.peerId=$util.newBuffer($util.base64.length(r.peerId)),0):r.peerId.length&&(n.peerId=r.peerId)),r.seq!=null&&($util.Long?(n.seq=$util.Long.fromValue(r.seq)).unsigned=!0:typeof r.seq=="string"?n.seq=parseInt(r.seq,10):typeof r.seq=="number"?n.seq=r.seq:typeof r.seq=="object"&&(n.seq=new $util.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0))),r.addresses){if(!Array.isArray(r.addresses))throw TypeError(".PeerRecord.addresses: array expected");n.addresses=[];for(var o=0;o<r.addresses.length;++o){if(typeof r.addresses[o]!="object")throw TypeError(".PeerRecord.addresses: object expected");n.addresses[o]=$root.PeerRecord.AddressInfo.fromObject(r.addresses[o])}}return n},t.toObject=function(r,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.addresses=[]),n.defaults)if(n.bytes===String?o.peerId="":(o.peerId=[],n.bytes!==Array&&(o.peerId=$util.newBuffer(o.peerId))),$util.Long){var s=new $util.Long(0,0,!0);o.seq=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.seq=n.longs===String?"0":0;if(r.peerId!=null&&r.hasOwnProperty("peerId")&&(o.peerId=n.bytes===String?$util.base64.encode(r.peerId,0,r.peerId.length):n.bytes===Array?Array.prototype.slice.call(r.peerId):r.peerId),r.seq!=null&&r.hasOwnProperty("seq")&&(typeof r.seq=="number"?o.seq=n.longs===String?String(r.seq):r.seq:o.seq=n.longs===String?$util.Long.prototype.toString.call(r.seq):n.longs===Number?new $util.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0):r.seq),r.addresses&&r.addresses.length){o.addresses=[];for(var u=0;u<r.addresses.length;++u)o.addresses[u]=$root.PeerRecord.AddressInfo.toObject(r.addresses[u],n)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t.AddressInfo=function(){function e(r){if(r)for(var n=Object.keys(r),o=0;o<n.length;++o)r[n[o]]!=null&&(this[n[o]]=r[n[o]])}return e.prototype.multiaddr=$util.newBuffer([]),e.encode=function(n,o){return o||(o=$Writer.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&o.uint32(10).bytes(n.multiaddr),o},e.decode=function(n,o){n instanceof $Reader||(n=$Reader.create(n));for(var s=o===void 0?n.len:n.pos+o,u=new $root.PeerRecord.AddressInfo;n.pos<s;){var c=n.uint32();switch(c>>>3){case 1:u.multiaddr=n.bytes();break;default:n.skipType(c&7);break}}return u},e.fromObject=function(n){if(n instanceof $root.PeerRecord.AddressInfo)return n;var o=new $root.PeerRecord.AddressInfo;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?$util.base64.decode(n.multiaddr,o.multiaddr=$util.newBuffer($util.base64.length(n.multiaddr)),0):n.multiaddr.length&&(o.multiaddr=n.multiaddr)),o},e.toObject=function(n,o){o||(o={});var s={};return o.defaults&&(o.bytes===String?s.multiaddr="":(s.multiaddr=[],o.bytes!==Array&&(s.multiaddr=$util.newBuffer(s.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(s.multiaddr=o.bytes===String?$util.base64.encode(n.multiaddr,0,n.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),t})(),word="[a-fA-F\\d:]",boundry=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${word})|(?<=${word})(?=\\s|$))`:"",v4="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",v6segment="[a-fA-F\\d]{1,4}",v6=`
(?:
(?:${v6segment}:){7}(?:${v6segment}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${v6segment}:){6}(?:${v4}|:${v6segment}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${v6segment}:){5}(?::${v4}|(?::${v6segment}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${v6segment}:){4}(?:(?::${v6segment}){0,1}:${v4}|(?::${v6segment}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${v6segment}:){3}(?:(?::${v6segment}){0,2}:${v4}|(?::${v6segment}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${v6segment}:){2}(?:(?::${v6segment}){0,3}:${v4}|(?::${v6segment}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${v6segment}:){1}(?:(?::${v6segment}){0,4}:${v4}|(?::${v6segment}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${v6segment}){0,5}:${v4}|(?::${v6segment}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),v46Exact=new RegExp(`(?:^${v4}$)|(?:^${v6}$)`),v4exact=new RegExp(`^${v4}$`),v6exact=new RegExp(`^${v6}$`),ipRegex=t=>t&&t.exact?v46Exact:new RegExp(`(?:${boundry(t)}${v4}${boundry(t)})|(?:${boundry(t)}${v6}${boundry(t)})`,"g");ipRegex.v4=t=>t&&t.exact?v4exact:new RegExp(`${boundry(t)}${v4}${boundry(t)}`,"g");ipRegex.v6=t=>t&&t.exact?v6exact:new RegExp(`${boundry(t)}${v6}${boundry(t)}`,"g");function functionTimeout(t){const e=(...r)=>t(...r);return Object.defineProperty(e,"name",{value:`functionTimeout(${t.name||"<anonymous>"})`,configurable:!0}),e}const{toString:toString$3}=Object.prototype;function isRegexp(t){return toString$3.call(t)==="[object RegExp]"}const flagMap={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function clonedRegexp(t,e={}){if(!isRegexp(t))throw new TypeError("Expected a RegExp instance");const r=Object.keys(flagMap).map(o=>(typeof e[o]=="boolean"?e[o]:t[o])?flagMap[o]:"").join(""),n=new RegExp(e.source||t.source,r);return n.lastIndex=typeof e.lastIndex=="number"?e.lastIndex:t.lastIndex,n}function isMatch(t,e,{timeout:r}={}){try{return functionTimeout(()=>clonedRegexp(t).test(e),{timeout:r})()}catch(n){throw n}}const maxIPv4Length=15,maxIPv6Length=45,options={timeout:400};function isIP(t){return isMatch(ipRegex({exact:!0}),t.slice(0,maxIPv6Length),options)}function isIPv6(t){return isMatch(ipRegex.v6({exact:!0}),t.slice(0,maxIPv6Length),options)}function isIPv4(t){return isMatch(ipRegex.v4({exact:!0}),t.slice(0,maxIPv4Length),options)}const isV4=isIPv4,isV6=isIPv6,toBytes=function(t){let e=0;if(t=t.toString().trim(),isV4(t)){const r=new Uint8Array(e+4);return t.split(/\./g).forEach(n=>{r[e++]=parseInt(n,10)&255}),r}if(isV6(t)){const r=t.split(":",8);let n;for(n=0;n<r.length;n++){const s=isV4(r[n]);let u;s&&(u=toBytes(r[n]),r[n]=toString$5(u.slice(0,2),"base16")),u!=null&&++n<8&&r.splice(n,0,toString$5(u.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);const s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}const o=new Uint8Array(e+16);for(n=0;n<r.length;n++){const s=parseInt(r[n],16);o[e++]=s>>8&255,o[e++]=s&255}return o}throw new Error("invalid ip address")},toString$2=function(t,e=0,r){e=~~e,r=r!=null?r:t.length-e;const n=new DataView(t.buffer);if(r===4){const o=[];for(let s=0;s<r;s++)o.push(t[e+s]);return o.join(".")}if(r===16){const o=[];for(let s=0;s<r;s+=2)o.push(n.getUint16(e+s).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},V=-1,names={},codes={},table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,V,"ip6zone"],[53,V,"dns",!0],[54,V,"dns4",!0],[55,V,"dns6",!0],[56,V,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,V,"unix",!1,!0],[421,V,"ipfs"],[421,V,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,V,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,V,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,V,"memory"]];table.forEach(t=>{const e=createProtocol(...t);codes[e.code]=e,names[e.name]=e});function createProtocol(t,e,r,n,o){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(o)}}function getProtocol(t){if(typeof t=="number"){if(codes[t]!=null)return codes[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(names[t]!=null)return names[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}var encode_1$1=encode$b,MSB$2=128,REST$2=127,MSBALL$1=~REST$2,INT$1=Math.pow(2,31);function encode$b(t,e,r){e=e||[],r=r||0;for(var n=r;t>=INT$1;)e[r++]=t&255|MSB$2,t/=128;for(;t&MSBALL$1;)e[r++]=t&255|MSB$2,t>>>=7;return e[r]=t|0,encode$b.bytes=r-n+1,e}var decode$e=read$1,MSB$1$1=128,REST$1$1=127;function read$1(t,n){var r=0,n=n||0,o=0,s=n,u,c=t.length;do{if(s>=c)throw read$1.bytes=0,new RangeError("Could not decode varint");u=t[s++],r+=o<28?(u&REST$1$1)<<o:(u&REST$1$1)*Math.pow(2,o),o+=7}while(u>=MSB$1$1);return read$1.bytes=s-n,r}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$1=function(t){return t<N1$1?1:t<N2$1?2:t<N3$1?3:t<N4$1?4:t<N5$1?5:t<N6$1?6:t<N7$1?7:t<N8$1?8:t<N9$1?9:10},varint$1={encode:encode_1$1,decode:decode$e,encodingLength:length$1},_brrp_varint$1=varint$1;const decode$d=(t,e=0)=>[_brrp_varint$1.decode(t,e),_brrp_varint$1.decode.bytes],encodeTo$1=(t,e,r=0)=>(_brrp_varint$1.encode(t,e,r),e),encodingLength$1=t=>_brrp_varint$1.encodingLength(t),equals$4=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},coerce$2=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fromString$2=t=>new TextEncoder().encode(t),toString$1=t=>new TextDecoder().decode(t),create$1=(t,e)=>{const r=e.byteLength,n=encodingLength$1(t),o=n+encodingLength$1(r),s=new Uint8Array(o+r);return encodeTo$1(t,s,0),encodeTo$1(r,s,n),s.set(e,o),new Digest$1(t,r,e,s)},decode$c=t=>{const e=coerce$2(t),[r,n]=decode$d(e),[o,s]=decode$d(e.subarray(n)),u=e.subarray(n+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new Digest$1(r,o,u,e)},equals$3=(t,e)=>{if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&equals$4(t.bytes,r.bytes)}};class Digest$1{constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}}function base$2(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var s=t.charAt(o),u=s.charCodeAt(0);if(r[u]!==255)throw new TypeError(s+" is ambiguous");r[u]=o}var c=t.length,h=t.charAt(0),w=Math.log(c)/Math.log(256),m=Math.log(256)/Math.log(c);function v($){if($ instanceof Uint8Array||(ArrayBuffer.isView($)?$=new Uint8Array($.buffer,$.byteOffset,$.byteLength):Array.isArray($)&&($=Uint8Array.from($))),!($ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if($.length===0)return"";for(var k=0,B=0,j=0,ie=$.length;j!==ie&&$[j]===0;)j++,k++;for(var se=(ie-j)*m+1>>>0,N=new Uint8Array(se);j!==ie;){for(var L=$[j],oe=0,q=se-1;(L!==0||oe<B)&&q!==-1;q--,oe++)L+=256*N[q]>>>0,N[q]=L%c>>>0,L=L/c>>>0;if(L!==0)throw new Error("Non-zero carry");B=oe,j++}for(var X=se-B;X!==se&&N[X]===0;)X++;for(var de=h.repeat(k);X<se;++X)de+=t.charAt(N[X]);return de}function E($){if(typeof $!="string")throw new TypeError("Expected String");if($.length===0)return new Uint8Array;var k=0;if($[k]!==" "){for(var B=0,j=0;$[k]===h;)B++,k++;for(var ie=($.length-k)*w+1>>>0,se=new Uint8Array(ie);$[k];){var N=r[$.charCodeAt(k)];if(N===255)return;for(var L=0,oe=ie-1;(N!==0||L<j)&&oe!==-1;oe--,L++)N+=c*se[oe]>>>0,se[oe]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");j=L,k++}if($[k]!==" "){for(var q=ie-j;q!==ie&&se[q]===0;)q++;for(var X=new Uint8Array(B+(ie-q)),de=B;q!==ie;)X[de++]=se[q++];return X}}}function O($){var k=E($);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:v,decodeUnsafe:E,decode:O}}var src$2=base$2,_brrp__multiformats_scope_baseX$2=src$2;class Encoder$2{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder$2{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$2(this,e)}}class ComposedDecoder$2{constructor(e){this.decoders=e}or(e){return or$2(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or$2=(t,e)=>new ComposedDecoder$2({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Codec$2{constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder$2(e,r,n),this.decoder=new Decoder$2(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$4=({name:t,prefix:e,encode:r,decode:n})=>new Codec$2(t,e,r,n),baseX$2=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX$2(r,e);return from$4({prefix:t,name:e,encode:n,decode:s=>coerce$2(o(s))})},decode$b=(t,e,r,n)=>{const o={};for(let m=0;m<e.length;++m)o[e[m]]=m;let s=t.length;for(;t[s-1]==="=";)--s;const u=new Uint8Array(s*r/8|0);let c=0,h=0,w=0;for(let m=0;m<s;++m){const v=o[t[m]];if(v===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<r|v,c+=r,c>=8&&(c-=8,u[w++]=255&h>>c)}if(c>=r||255&h<<8-c)throw new SyntaxError("Unexpected end of data");return u},encode$a=(t,e,r)=>{const n=e[e.length-1]==="=",o=(1<<r)-1;let s="",u=0,c=0;for(let h=0;h<t.length;++h)for(c=c<<8|t[h],u+=8;u>r;)u-=r,s+=e[o&c>>u];if(u&&(s+=e[o&c<<r-u]),n)for(;s.length*r&7;)s+="=";return s},rfc4648$2=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>from$4({prefix:e,name:t,encode(o){return encode$a(o,n,r)},decode(o){return decode$b(o,n,r,t)}}),base58btc$2=baseX$2({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX$2({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$2,base58flickr},Symbol.toStringTag,{value:"Module"})),base32$2=rfc4648$2({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648$2({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648$2({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648$2({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648$2({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648$2({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648$2({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648$2({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648$2({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$3=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$2,base32upper,base32pad,base32padupper,base32hex,base32hexupper,base32hexpad,base32hexpadupper,base32z},Symbol.toStringTag,{value:"Module"})),format$2=(t,e)=>{const{bytes:r,version:n}=t;switch(n){case 0:return toStringV0$1(r,baseCache$1(t),e||base58btc$2.encoder);default:return toStringV1$1(r,baseCache$1(t),e||base32$2.encoder)}},cache$1=new WeakMap,baseCache$1=t=>{const e=cache$1.get(t);if(e==null){const r=new Map;return cache$1.set(t,r),r}return e};class CID$1{constructor(e,r,n,o){this.code=r,this.version=e,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==DAG_PB_CODE$1)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==SHA_256_CODE$1)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID$1.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=create$1(e,r);return CID$1.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return CID$1.equals(this,e)}static equals(e,r){const n=r;return n&&e.code===n.code&&e.version===n.version&&equals$3(e.multihash,n.multihash)}toString(e){return format$2(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof CID$1)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:o,multihash:s,bytes:u}=r;return new CID$1(n,o,s,u||encodeCID$1(n,o,s.bytes))}else if(r[cidSymbol$1]===!0){const{version:n,multihash:o,code:s}=r,u=decode$c(o);return CID$1.create(n,s,u)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==DAG_PB_CODE$1)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$1}) block encoding`);return new CID$1(e,r,n,n.bytes)}case 1:{const o=encodeCID$1(e,r,n.bytes);return new CID$1(e,r,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID$1.create(0,DAG_PB_CODE$1,e)}static createV1(e,r){return CID$1.create(1,e,r)}static decode(e){const[r,n]=CID$1.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=CID$1.inspectBytes(e),n=r.size-r.multihashSize,o=coerce$2(e.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");const s=o.subarray(r.multihashSize-r.digestSize),u=new Digest$1(r.multihashCode,r.digestSize,s,o);return[r.version===0?CID$1.createV0(u):CID$1.createV1(r.codec,u),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[v,E]=decode$d(e.subarray(r));return r+=E,v};let o=n(),s=DAG_PB_CODE$1;if(o===18?(o=0,r=0):s=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const u=r,c=n(),h=n(),w=r+h,m=w-u;return{version:o,codec:s,multihashCode:c,digestSize:h,multihashSize:m,size:w}}static parse(e,r){const[n,o]=parseCIDtoBytes$1(e,r),s=CID$1.decode(o);return baseCache$1(s).set(n,e),s}}const parseCIDtoBytes$1=(t,e)=>{switch(t[0]){case"Q":{const r=e||base58btc$2;return[base58btc$2.prefix,r.decode(`${base58btc$2.prefix}${t}`)]}case base58btc$2.prefix:{const r=e||base58btc$2;return[base58btc$2.prefix,r.decode(t)]}case base32$2.prefix:{const r=e||base32$2;return[base32$2.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},toStringV0$1=(t,e,r)=>{const{prefix:n}=r;if(n!==base58btc$2.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const o=e.get(n);if(o==null){const s=r.encode(t).slice(1);return e.set(n,s),s}else return o},toStringV1$1=(t,e,r)=>{const{prefix:n}=r,o=e.get(n);if(o==null){const s=r.encode(t);return e.set(n,s),s}else return o},DAG_PB_CODE$1=112,SHA_256_CODE$1=18,encodeCID$1=(t,e,r)=>{const n=encodingLength$1(t),o=n+encodingLength$1(e),s=new Uint8Array(o+r.byteLength);return encodeTo$1(t,s,0),encodeTo$1(e,s,n),s.set(r,o),s},cidSymbol$1=Symbol.for("@ipld/js-cid/CID"),identity$3=from$4({prefix:"\0",name:"identity",encode:t=>toString$1(t),decode:t=>fromString$2(t)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$3},Symbol.toStringTag,{value:"Module"})),base2=rfc4648$2({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),base8=rfc4648$2({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),base10=baseX$2({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648$2({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648$2({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base36=baseX$2({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX$2({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),base64$1=rfc4648$2({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648$2({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648$2({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648$2({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$2=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$1,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),alphabetBytesToChars=alphabet.reduce((t,e,r)=>(t[r]=e,t),[]),alphabetCharsToBytes=alphabet.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function encode$9(t){return t.reduce((e,r)=>(e+=alphabetBytesToChars[r],e),"")}function decode$a(t){const e=[];for(const r of t){const n=alphabetCharsToBytes[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const base256emoji=from$4({prefix:"\u{1F680}",name:"base256emoji",encode:encode$9,decode:decode$a}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"})),from$3=({name:t,code:e,encode:r})=>new Hasher(t,e,r);class Hasher{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?create$1(this.code,r):r.then(n=>create$1(this.code,n))}else throw Error("Unknown type, must be binary type")}}const sha=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sha256$1=from$3({name:"sha2-256",code:18,encode:sha("SHA-256")}),sha512=from$3({name:"sha2-512",code:19,encode:sha("SHA-512")}),sha2=Object.freeze(Object.defineProperty({__proto__:null,sha256:sha256$1,sha512},Symbol.toStringTag,{value:"Module"})),code$3=0,name$2="identity",encode$8=coerce$2,digest=t=>create$1(code$3,encode$8(t)),identity$1={code:code$3,name:name$2,encode:encode$8,digest},identity$2=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$1},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$3,...base36$1,...base58,...base64$2,...base256emoji$1};({...sha2,...identity$2});function concat(t,e){e==null&&(e=t.reduce((o,s)=>o+s.length,0));const r=allocUnsafe$2(e);let n=0;for(const o of t)r.set(o,n),n+=o.length;return asUint8Array$2(r)}function convertToString(t,e){switch(getProtocol(t).code){case 4:case 41:return bytes2ip(e);case 6:case 273:case 33:case 132:return bytes2port(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return bytes2str(e);case 421:return bytes2mh(e);case 444:return bytes2onion(e);case 445:return bytes2onion(e);case 466:return bytes2mb(e);default:return toString$5(e,"base16")}}function convertToBytes(t,e){switch(getProtocol(t).code){case 4:return ip2bytes(e);case 41:return ip2bytes(e);case 6:case 273:case 33:case 132:return port2bytes(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return str2bytes(e);case 421:return mh2bytes(e);case 444:return onion2bytes(e);case 445:return onion32bytes(e);case 466:return mb2bytes(e);default:return fromString$4(e,"base16")}}const decoders=Object.values(bases).map(t=>t.decoder),anybaseDecoder=function(){let t=decoders[0].or(decoders[1]);return decoders.slice(2).forEach(e=>t=t.or(e)),t}();function ip2bytes(t){if(!isIP(t))throw new Error("invalid ip address");return toBytes(t)}function bytes2ip(t){const e=toString$2(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!isIP(e))throw new Error("invalid ip address");return e}function port2bytes(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function bytes2port(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function str2bytes(t){const e=fromString$4(t),r=Uint8Array.from(varint$4.encode(e.length));return concat([r,e],r.length+e.length)}function bytes2str(t){const e=varint$4.decode(t);if(t=t.slice(varint$4.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return toString$5(t)}function mh2bytes(t){let e;t[0]==="Q"||t[0]==="1"?e=decode$c(base58btc$2.decode(`z${t}`)).bytes:e=CID$1.parse(t).multihash.bytes;const r=Uint8Array.from(varint$4.encode(e.length));return concat([r,e],r.length+e.length)}function mb2bytes(t){const e=anybaseDecoder.decode(t),r=Uint8Array.from(varint$4.encode(e.length));return concat([r,e],r.length+e.length)}function bytes2mb(t){const e=varint$4.decode(t),r=t.slice(varint$4.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return"u"+toString$5(r,"base64url")}function bytes2mh(t){const e=varint$4.decode(t),r=t.slice(varint$4.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return toString$5(r,"base58btc")}function onion2bytes(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const r=base32$2.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=port2bytes(n);return concat([r,o],r.length+o.length)}function onion32bytes(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const r=base32$2.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=port2bytes(n);return concat([r,o],r.length+o.length)}function bytes2onion(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=toString$5(e,"base32"),o=bytes2port(r);return`${n}:${o}`}function stringToStringTuples(t){const e=[],r=t.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){const o=r[n],s=getProtocol(o);if(s.size===0){e.push([o]);continue}if(n++,n>=r.length)throw ParseError("invalid address: "+t);if(s.path===!0){e.push([o,cleanPath(r.slice(n).join("/"))]);break}e.push([o,r[n]])}return e}function stringTuplesToString(t){const e=[];return t.map(r=>{const n=protoFromTuple(r);return e.push(n.name),r.length>1&&r[1]!=null&&e.push(r[1]),null}),cleanPath(e.join("/"))}function stringTuplesToTuples(t){return t.map(e=>{Array.isArray(e)||(e=[e]);const r=protoFromTuple(e);return e.length>1?[r.code,convertToBytes(r.code,e[1])]:[r.code]})}function tuplesToStringTuples(t){return t.map(e=>{const r=protoFromTuple(e);return e[1]!=null?[r.code,convertToString(r.code,e[1])]:[r.code]})}function tuplesToBytes(t){return fromBytes(concat(t.map(e=>{const r=protoFromTuple(e);let n=Uint8Array.from(varint$4.encode(r.code));return e.length>1&&e[1]!=null&&(n=concat([n,e[1]])),n})))}function sizeForAddr(t,e){return t.size>0?t.size/8:t.size===0?0:varint$4.decode(e)+varint$4.decode.bytes}function bytesToTuples(t){const e=[];let r=0;for(;r<t.length;){const n=varint$4.decode(t,r),o=varint$4.decode.bytes,s=getProtocol(n),u=sizeForAddr(s,t.slice(r+o));if(u===0){e.push([n]),r+=o;continue}const c=t.slice(r+o,r+o+u);if(r+=u+o,r>t.length)throw ParseError("Invalid address Uint8Array: "+toString$5(t,"base16"));e.push([n,c])}return e}function bytesToString(t){const e=bytesToTuples(t),r=tuplesToStringTuples(e);return stringTuplesToString(r)}function stringToBytes(t){t=cleanPath(t);const e=stringToStringTuples(t),r=stringTuplesToTuples(e);return tuplesToBytes(r)}function fromString$1(t){return stringToBytes(t)}function fromBytes(t){const e=validateBytes(t);if(e!=null)throw e;return Uint8Array.from(t)}function validateBytes(t){try{bytesToTuples(t)}catch(e){return e}}function cleanPath(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function ParseError(t){return new Error("Error parsing address: "+t)}function protoFromTuple(t){return getProtocol(t[0])}function equals$2(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var __classPrivateFieldGet$2=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},__classPrivateFieldSet$1=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},_DefaultMultiaddr_string,_DefaultMultiaddr_tuples,_DefaultMultiaddr_stringTuples,_a$1;const inspect=Symbol.for("nodejs.util.inspect.custom"),DNS_CODES=[getProtocol("dns").code,getProtocol("dns4").code,getProtocol("dns6").code,getProtocol("dnsaddr").code],P2P_CODES=[getProtocol("p2p").code,getProtocol("ipfs").code],resolvers=new Map,symbol=Symbol.for("@multiformats/js-multiaddr/multiaddr");function isMultiaddr(t){return Boolean(t==null?void 0:t[symbol])}class DefaultMultiaddr{constructor(e){if(_DefaultMultiaddr_string.set(this,void 0),_DefaultMultiaddr_tuples.set(this,void 0),_DefaultMultiaddr_stringTuples.set(this,void 0),this[_a$1]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=fromString$1(e)}else if(isMultiaddr(e))this.bytes=fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return __classPrivateFieldGet$2(this,_DefaultMultiaddr_string,"f")==null&&__classPrivateFieldSet$1(this,_DefaultMultiaddr_string,bytesToString(this.bytes),"f"),__classPrivateFieldGet$2(this,_DefaultMultiaddr_string,"f")}toJSON(){return this.toString()}toOptions(){const e=this.protoCodes(),r=this.toString().split("/").slice(1);let n,o;if(r.length>2)DNS_CODES.includes(e[0])&&P2P_CODES.includes(e[1])?(n=getProtocol("tcp").name,o=443):(n=getProtocol(r[2]).name,o=parseInt(r[3]));else if(DNS_CODES.includes(e[0]))n=getProtocol("tcp").name,o=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:r[1],transport:n,port:o}}protos(){return this.protoCodes().map(e=>Object.assign({},getProtocol(e)))}protoCodes(){const e=[],r=this.bytes;let n=0;for(;n<r.length;){const o=varint$4.decode(r,n),s=varint$4.decode.bytes,u=getProtocol(o),c=sizeForAddr(u,r.slice(n+s));n+=c+s,e.push(o)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return __classPrivateFieldGet$2(this,_DefaultMultiaddr_tuples,"f")==null&&__classPrivateFieldSet$1(this,_DefaultMultiaddr_tuples,bytesToTuples(this.bytes),"f"),__classPrivateFieldGet$2(this,_DefaultMultiaddr_tuples,"f")}stringTuples(){return __classPrivateFieldGet$2(this,_DefaultMultiaddr_stringTuples,"f")==null&&__classPrivateFieldSet$1(this,_DefaultMultiaddr_stringTuples,tuplesToStringTuples(this.tuples()),"f"),__classPrivateFieldGet$2(this,_DefaultMultiaddr_stringTuples,"f")}encapsulate(e){return e=new DefaultMultiaddr(e),new DefaultMultiaddr(this.toString()+e.toString())}decapsulate(e){const r=e.toString(),n=this.toString(),o=n.lastIndexOf(r);if(o<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new DefaultMultiaddr(n.slice(0,o))}decapsulateCode(e){const r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new DefaultMultiaddr(tuplesToBytes(r.slice(0,n)));return this}getPeerId(){try{const r=this.stringTuples().filter(n=>n[0]===names.ipfs.code).pop();if((r==null?void 0:r[1])!=null){const n=r[1];return n[0]==="Q"||n[0]==="1"?toString$5(base58btc$2.decode(`z${n}`),"base58btc"):toString$5(CID$1.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(r=>getProtocol(r[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return equals$2(this.bytes,e.bytes)}async resolve(e){const r=this.protos().find(s=>s.resolvable);if(r==null)return[this];const n=resolvers.get(r.name);if(n==null)throw errCode(new Error(`no available resolver for ${r.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(s=>new DefaultMultiaddr(s))}nodeAddress(){const e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const r=(e!=null?e:this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[(_DefaultMultiaddr_string=new WeakMap,_DefaultMultiaddr_tuples=new WeakMap,_DefaultMultiaddr_stringTuples=new WeakMap,_a$1=symbol,inspect)](){return this.inspect()}inspect(){return"<Multiaddr "+toString$5(this.bytes,"base16")+" - "+bytesToString(this.bytes)+">"}}function multiaddr(t){return new DefaultMultiaddr(t)}$protobuf.util.Long=void 0;$protobuf.configure();async function storePeerUnderSingleDatastoreKey(t,e=()=>{}){e(0,"Storing each peerstore key under a single datastore key"),await t.datastore.open();const r={},n=[];for await(const{key:o,value:s}of t.datastore.query({prefix:"/peers"})){n.push(o);const u=o.toString(),[c,h,w,m,v]=u.split("/");if(h==="peers"&&!!["protos","addrs","metadata","keys"].includes(w)&&!!m)if(r[m]=r[m]||{addresses:[],protocols:[],metadata:[]},w==="protos"){const E=Protocols.decode(s);r[m].protocols=E.protocols.sort()}else if(w==="addrs"){const E=Addresses.decode(s);r[m].addresses=E.addrs.sort((O,$)=>multiaddr(O.multiaddr).toString().localeCompare(multiaddr($.multiaddr).toString())),E.certifiedRecord&&E.certifiedRecord.raw&&(r[m].peerRecordEnvelope=E.certifiedRecord.raw)}else w==="metadata"?r[m].metadata.push({key:v,value:s}):w==="keys"&&(r[m].pubKey=s)}e(33,"Read peer data from store");for(const o of n)await t.datastore.delete(o);e(66,"Removed existing peer data from store");for(const o of Object.keys(r)){const s=r[o];s.metadata=s.metadata.sort((c,h)=>c.key.localeCompare(h.key));const u=Peer.encode(s).finish();await t.datastore.put(new Key(`/peers/${o}`),u)}await t.datastore.close(),e(100,"Stored each peerstore key under a single datastore key")}async function storePeerUnderMultipleDatastoreKeys(t,e=()=>{}){e(0,"Storing each peerstore key under a multiple datastore keys"),await t.datastore.open();const r={},n=[];for await(const{key:o,value:s}of t.datastore.query({prefix:"/peers"})){n.push(o);const u=o.toString(),[c,h,w]=u.split("/");r[w]=Peer.decode(s)}e(33,"Read peer data from store");for(const o of n)await t.datastore.delete(o);e(66,"Removed existing peer data from store");for(const[o,s]of Object.entries(r)){if(s.protocols&&s.protocols.length>0&&await t.datastore.put(new Key(`/peers/protos/${o}`),Protocols.encode({protocols:s.protocols}).finish()),s.addresses&&s.addresses.length>0){const u=s.peerRecordEnvelope;let c;if(u){const h=Envelope.decode(u),w=PeerRecord.decode(h.payload);c={raw:u,seq:w.seq}}await t.datastore.put(new Key(`/peers/addrs/${o}`),Addresses.encode({addrs:s.addresses,certifiedRecord:c}).finish())}if(s.metadata&&s.metadata.length>0)for(const{key:u,value:c}of s.metadata)await t.datastore.put(new Key(`/peers/metadata/${o}/${u}`),c);s.pubKey&&await t.datastore.put(new Key(`/peers/keys/${o}`),s.pubKey)}await t.datastore.close(),e(100,"Stored each peerstore key under multiple datastore keys")}const migration={version:12,description:"Store each peerstore peer under a single datastore key",migrate:storePeerUnderSingleDatastoreKey,revert:storePeerUnderMultipleDatastoreKeys},emptyMigration={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},defaultMigrations=[Object.assign({version:1},emptyMigration),Object.assign({version:2},emptyMigration),Object.assign({version:3},emptyMigration),Object.assign({version:4},emptyMigration),Object.assign({version:5},emptyMigration),Object.assign({version:6},emptyMigration),Object.assign({version:7},emptyMigration),migration$4,migration$3,migration$2,migration$1,migration];class NonReversibleMigrationError extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=NonReversibleMigrationError.code,this.message=e}}NonReversibleMigrationError.code="ERR_NON_REVERSIBLE_MIGRATION";class NotInitializedRepoError extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=NotInitializedRepoError.code,this.message=e}}NotInitializedRepoError.code="ERR_NOT_INITIALIZED_REPO";class RequiredParameterError extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=RequiredParameterError.code,this.message=e}}RequiredParameterError.code="ERR_REQUIRED_PARAMETER";class InvalidValueError extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=InvalidValueError.code,this.message=e}}InvalidValueError.code="ERR_INVALID_VALUE";class MissingRepoOptionsError extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=MissingRepoOptionsError.code,this.message=e}}MissingRepoOptionsError.code="ERR_MISSING_REPO_OPTIONS";const Errors=Object.freeze(Object.defineProperty({__proto__:null,NonReversibleMigrationError,NotInitializedRepoError,RequiredParameterError,InvalidValueError,MissingRepoOptionsError},Symbol.toStringTag,{value:"Module"})),log$6=debug("ipfs:repo:migrator:repo:init");async function isRepoInitialized(t){if(!t)throw new MissingRepoOptionsError("Please pass repo options when trying to open a repo");const e=t.root;try{await e.open();const r=await e.has(VERSION_KEY),n=await e.has(CONFIG_KEY);return!r||!n?(log$6(`Version entry present: ${r}`),log$6(`Config entry present: ${n}`),!1):!0}catch(r){return log$6("While checking if repo is initialized error was thrown: "+r.message),!1}finally{if(e!==void 0)try{await e.close()}catch{}}}async function getVersion(t){if(!await isRepoInitialized(t))throw new NotInitializedRepoError("Repo is not initialized!");const e=t.root;await e.open();try{return parseInt(toString$4(await e.get(VERSION_KEY)))}finally{await e.close()}}async function setVersion(t,e){if(!e)throw new MissingRepoOptionsError("Please pass repo options when trying to open a repo");const r=e.root;await r.open(),await r.put(VERSION_KEY,fromString$3(String(t))),await r.close()}const log$5=debug("ipfs:repo:migrator");function getLatestMigrationVersion(t){return t=t||defaultMigrations,!Array.isArray(t)||t.length===0?0:t[t.length-1].version}async function migrate(t,e,r,n,o={}){var v,E,O;const s=(v=o.ignoreLock)!=null?v:!1,u=o.onProgress,c=(E=o.isDryRun)!=null?E:!1,h=(O=o.migrations)!=null?O:defaultMigrations;if(!t)throw new errors.RequiredParameterError("Path argument is required!");if(!r)throw new errors.RequiredParameterError("repoOptions argument is required!");if(!n)throw new errors.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(n)||n<=0)throw new errors.InvalidValueError("Version has to be positive integer!");e=wrapBackends(e);const w=await getVersion(e);if(w===n){log$5("Nothing to migrate.");return}if(w>n)throw new errors.InvalidValueError(`Current repo's version (${w}) is higher then toVersion (${n}), you probably wanted to revert it?`);verifyAvailableMigrations(h,w,n);let m;!c&&!s&&(m=await r.repoLock.lock(t));try{for(const $ of h){if(n!==void 0&&$.version>n)break;if(!($.version<=w)){log$5(`Migrating version ${$.version}`);try{if(!c){let k=()=>{};u&&(k=(B,j)=>u($.version,B.toFixed(2),j)),await $.migrate(e,k)}}catch(k){const B=$.version-1;throw log$5(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${B}`),await setVersion(B,e),new Error(`During migration to version ${$.version} exception was raised: ${k.stack||k.message||k}`)}log$5(`Migrating to version ${$.version} finished`)}}c||await setVersion(n||getLatestMigrationVersion(h),e),log$5("Repo successfully migrated",n!==void 0?`to version ${n}!`:"to latest version!")}finally{!c&&!s&&m&&await m.close()}}async function revert(t,e,r,n,o={}){var v,E,O;const s=(v=o.ignoreLock)!=null?v:!1,u=o.onProgress,c=(E=o.isDryRun)!=null?E:!1,h=(O=o.migrations)!=null?O:defaultMigrations;if(!t)throw new errors.RequiredParameterError("Path argument is required!");if(!r)throw new errors.RequiredParameterError("repoOptions argument is required!");if(!n)throw new errors.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(n)||n<=0)throw new errors.InvalidValueError("Version has to be positive integer!");e=wrapBackends(e);const w=await getVersion(e);if(w===n){log$5("Nothing to revert.");return}if(w<n)throw new errors.InvalidValueError(`Current repo's version (${w}) is lower then toVersion (${n}), you probably wanted to migrate it?`);verifyAvailableMigrations(h,n,w,!0);let m;!c&&!s&&(m=await r.repoLock.lock(t)),log$5(`Reverting from version ${w} to ${n}`);try{const $=h.slice().reverse();for(const k of $){if(k.version<=n)break;if(!(k.version>w)){log$5(`Reverting migration version ${k.version}`);try{if(!c){let B=()=>{};u&&(B=(j,ie)=>u(k.version,j.toFixed(2),ie)),await k.revert(e,B)}}catch(B){const j=k.version;throw log$5(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${j}`),await setVersion(j,e),B.message=`During reversion to version ${k.version} exception was raised: ${B.message}`,B}log$5(`Reverting to version ${k.version} finished`)}}c||await setVersion(n,e),log$5(`All migrations successfully reverted to version ${n}!`)}finally{!c&&!s&&m&&await m.close()}}function verifyAvailableMigrations(t,e,r,n=!1){let o=0;for(const s of t){if(s.version>r)break;if(s.version>e){if(n&&!s.revert)throw new errors.NonReversibleMigrationError(`It is not possible to revert to version ${e} because migration version ${s.version} is not reversible. Cancelling reversion.`);o++}}if(o!==r-e)throw new errors.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${e} to ${r}`)}const errors=Errors;var bytes$1={exports:{}};/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */bytes$1.exports=bytes;bytes$1.exports.format=format$1;bytes$1.exports.parse=parse;var formatThousandsRegExp=/\B(?=(\d{3})+(?!\d))/g,formatDecimalsRegExp=/(?:\.0*|(\.[^0]+)0+)$/,map$1={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},parseRegExp=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function bytes(t,e){return typeof t=="string"?parse(t):typeof t=="number"?format$1(t,e):null}function format$1(t,e){if(!Number.isFinite(t))return null;var r=Math.abs(t),n=e&&e.thousandsSeparator||"",o=e&&e.unitSeparator||"",s=e&&e.decimalPlaces!==void 0?e.decimalPlaces:2,u=Boolean(e&&e.fixedDecimals),c=e&&e.unit||"";(!c||!map$1[c.toLowerCase()])&&(r>=map$1.pb?c="PB":r>=map$1.tb?c="TB":r>=map$1.gb?c="GB":r>=map$1.mb?c="MB":r>=map$1.kb?c="KB":c="B");var h=t/map$1[c.toLowerCase()],w=h.toFixed(s);return u||(w=w.replace(formatDecimalsRegExp,"$1")),n&&(w=w.split(".").map(function(m,v){return v===0?m.replace(formatThousandsRegExp,n):m}).join(".")),w+o+c}function parse(t){if(typeof t=="number"&&!isNaN(t))return t;if(typeof t!="string")return null;var e=parseRegExp.exec(t),r,n="b";return e?(r=parseFloat(e[1]),n=e[4].toLowerCase()):(r=parseInt(t,10),n="b"),isNaN(r)?null:Math.floor(map$1[n]*r)}var isPlainObj=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype};const isOptionObject=isPlainObj,{hasOwnProperty:hasOwnProperty$1}=Object.prototype,{propertyIsEnumerable}=Object,defineProperty=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),globalThis$1=commonjsGlobal,defaultMergeOptions={concatArrays:!1,ignoreUndefined:!1},getEnumerableOwnPropertyKeys=t=>{const e=[];for(const r in t)hasOwnProperty$1.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(t);for(const n of r)propertyIsEnumerable.call(t,n)&&e.push(n)}return e};function clone(t){return Array.isArray(t)?cloneArray(t):isOptionObject(t)?cloneOptionObject(t):t}function cloneArray(t){const e=t.slice(0,0);return getEnumerableOwnPropertyKeys(t).forEach(r=>{defineProperty(e,r,clone(t[r]))}),e}function cloneOptionObject(t){const e=Object.getPrototypeOf(t)===null?Object.create(null):{};return getEnumerableOwnPropertyKeys(t).forEach(r=>{defineProperty(e,r,clone(t[r]))}),e}const mergeKeys=(t,e,r,n)=>(r.forEach(o=>{typeof e[o]>"u"&&n.ignoreUndefined||(o in t&&t[o]!==Object.getPrototypeOf(t)?defineProperty(t,o,merge$1(t[o],e[o],n)):defineProperty(t,o,clone(e[o])))}),t),concatArrays=(t,e,r)=>{let n=t.slice(0,0),o=0;return[t,e].forEach(s=>{const u=[];for(let c=0;c<s.length;c++)!hasOwnProperty$1.call(s,c)||(u.push(String(c)),s===t?defineProperty(n,o++,s[c]):defineProperty(n,o++,clone(s[c])));n=mergeKeys(n,s,getEnumerableOwnPropertyKeys(s).filter(c=>!u.includes(c)),r)}),n};function merge$1(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?concatArrays(t,e,r):!isOptionObject(e)||!isOptionObject(t)?clone(e):mergeKeys(t,e,getEnumerableOwnPropertyKeys(e),r)}var mergeOptions=function(...t){const e=merge$1(clone(defaultMergeOptions),this!==globalThis$1&&this||{},defaultMergeOptions);let r={_:{}};for(const n of t)if(n!==void 0){if(!isOptionObject(n))throw new TypeError("`"+n+"` is not an Option Object");r=merge$1(r,{_:n},e)}return r._};const repoVersion=12;function asUint8Array(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function allocUnsafe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?asUint8Array(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function createCodec(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const string=createCodec("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii=createCodec("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=allocUnsafe(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),BASES={utf8:string,"utf-8":string,hex:bases$1.base16,latin1:ascii,ascii,binary:ascii,...bases$1};function toString(t,e="utf8"){const r=BASES[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function fromString(t,e="utf8"){const r=BASES[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}class LockExistsError extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=LockExistsError.code}}LockExistsError.code="ERR_LOCK_EXISTS";class NotFoundError extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=NotFoundError.code}}NotFoundError.code="ERR_NOT_FOUND";class InvalidRepoVersionError extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=InvalidRepoVersionError.code}}InvalidRepoVersionError.code="ERR_INVALID_REPO_VERSION";const ERR_REPO_NOT_INITIALIZED="ERR_REPO_NOT_INITIALIZED",ERR_REPO_ALREADY_OPEN="ERR_REPO_ALREADY_OPEN",ERR_REPO_ALREADY_CLOSED="ERR_REPO_ALREADY_CLOSED";async function hasWithFallback(t,e,r){const n=await e(t);if(n)return n;const o=findLevelJs(r);return o?new Promise((s,u)=>{const c=o.store("readonly").get(t.toString());c.transaction.onabort=()=>{u(c.transaction.error)},c.transaction.oncomplete=()=>{s(Boolean(c.result))}}):!1}async function getWithFallback(t,e,r,n){if(await r(t))return e(t);const o=findLevelJs(n);if(!o)throw new NotFoundError;return new Promise((s,u)=>{const c=o.store("readonly").get(t.toString());c.transaction.onabort=()=>{u(c.transaction.error)},c.transaction.oncomplete=()=>{if(c.result)return s(c.result);u(new NotFoundError)}})}function findLevelJs(t){let e=t;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}const log$4=debug("ipfs:repo:version"),versionKey=new Key("version");function version(t){return{async exists(){return hasWithFallback(versionKey,t.has.bind(t),t)},async get(){const e=await getWithFallback(versionKey,t.get.bind(t),t.has.bind(t),t);return parseInt(toString(e),10)},set(e){return t.put(versionKey,fromString(String(e)))},async check(e){const r=await this.get();return log$4("comparing version: %s and %s",r,e),r===e||(r===6&&e===7||e===6&&r===7)}}}var eventemitter3={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function o(h,w,m){this.fn=h,this.context=w,this.once=m||!1}function s(h,w,m,v,E){if(typeof m!="function")throw new TypeError("The listener must be a function");var O=new o(m,v||h,E),$=r?r+w:w;return h._events[$]?h._events[$].fn?h._events[$]=[h._events[$],O]:h._events[$].push(O):(h._events[$]=O,h._eventsCount++),h}function u(h,w){--h._eventsCount===0?h._events=new n:delete h._events[w]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var w=[],m,v;if(this._eventsCount===0)return w;for(v in m=this._events)e.call(m,v)&&w.push(r?v.slice(1):v);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(m)):w},c.prototype.listeners=function(w){var m=r?r+w:w,v=this._events[m];if(!v)return[];if(v.fn)return[v.fn];for(var E=0,O=v.length,$=new Array(O);E<O;E++)$[E]=v[E].fn;return $},c.prototype.listenerCount=function(w){var m=r?r+w:w,v=this._events[m];return v?v.fn?1:v.length:0},c.prototype.emit=function(w,m,v,E,O,$){var k=r?r+w:w;if(!this._events[k])return!1;var B=this._events[k],j=arguments.length,ie,se;if(B.fn){switch(B.once&&this.removeListener(w,B.fn,void 0,!0),j){case 1:return B.fn.call(B.context),!0;case 2:return B.fn.call(B.context,m),!0;case 3:return B.fn.call(B.context,m,v),!0;case 4:return B.fn.call(B.context,m,v,E),!0;case 5:return B.fn.call(B.context,m,v,E,O),!0;case 6:return B.fn.call(B.context,m,v,E,O,$),!0}for(se=1,ie=new Array(j-1);se<j;se++)ie[se-1]=arguments[se];B.fn.apply(B.context,ie)}else{var N=B.length,L;for(se=0;se<N;se++)switch(B[se].once&&this.removeListener(w,B[se].fn,void 0,!0),j){case 1:B[se].fn.call(B[se].context);break;case 2:B[se].fn.call(B[se].context,m);break;case 3:B[se].fn.call(B[se].context,m,v);break;case 4:B[se].fn.call(B[se].context,m,v,E);break;default:if(!ie)for(L=1,ie=new Array(j-1);L<j;L++)ie[L-1]=arguments[L];B[se].fn.apply(B[se].context,ie)}}return!0},c.prototype.on=function(w,m,v){return s(this,w,m,v,!1)},c.prototype.once=function(w,m,v){return s(this,w,m,v,!0)},c.prototype.removeListener=function(w,m,v,E){var O=r?r+w:w;if(!this._events[O])return this;if(!m)return u(this,O),this;var $=this._events[O];if($.fn)$.fn===m&&(!E||$.once)&&(!v||$.context===v)&&u(this,O);else{for(var k=0,B=[],j=$.length;k<j;k++)($[k].fn!==m||E&&!$[k].once||v&&$[k].context!==v)&&B.push($[k]);B.length?this._events[O]=B.length===1?B[0]:B:u(this,O)}return this},c.prototype.removeAllListeners=function(w){var m;return w?(m=r?r+w:w,this._events[m]&&u(this,m)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(eventemitter3);const EventEmitter$2=eventemitter3.exports;class TimeoutError$1 extends Error{constructor(e){super(e),this.name="TimeoutError"}}class AbortError$2 extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const getDOMException$1=t=>globalThis.DOMException===void 0?new AbortError$2(t):new DOMException(t),getAbortedReason$1=t=>{const e=t.reason===void 0?getDOMException$1("This operation was aborted."):t.reason;return e instanceof Error?e:getDOMException$1(e)};function pTimeout$1(t,e,r,n){let o;const s=new Promise((u,c)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){u(t);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){const{signal:h}=n;h.aborted&&c(getAbortedReason$1(h)),h.addEventListener("abort",()=>{c(getAbortedReason$1(h))})}o=n.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{u(r())}catch(m){c(m)}return}const h=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,w=r instanceof Error?r:new TimeoutError$1(h);typeof t.cancel=="function"&&t.cancel(),c(w)},e),(async()=>{try{u(await t)}catch(h){c(h)}finally{n.customTimers.clearTimeout.call(void 0,o)}})()});return s.clear=()=>{clearTimeout(o),o=void 0},s}function lowerBound(t,e,r){let n=0,o=t.length;for(;o>0;){const s=Math.trunc(o/2);let u=n+s;r(t[u],e)<=0?(n=++u,o-=s+1):o=s}return n}var __classPrivateFieldGet$1=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},_PriorityQueue_queue;class PriorityQueue{constructor(){_PriorityQueue_queue.set(this,[])}enqueue(e,r){r={priority:0,...r};const n={priority:r.priority,run:e};if(this.size&&__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f")[this.size-1].priority>=r.priority){__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").push(n);return}const o=lowerBound(__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f"),n,(s,u)=>u.priority-s.priority);__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").splice(o,0,n)}dequeue(){const e=__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").shift();return e==null?void 0:e.run}filter(e){return __classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return __classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").length}}_PriorityQueue_queue=new WeakMap;var __classPrivateFieldSet=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},__classPrivateFieldGet=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},_PQueue_instances,_PQueue_carryoverConcurrencyCount,_PQueue_isIntervalIgnored,_PQueue_intervalCount,_PQueue_intervalCap,_PQueue_interval,_PQueue_intervalEnd,_PQueue_intervalId,_PQueue_timeoutId,_PQueue_queue,_PQueue_queueClass,_PQueue_pendingCount,_PQueue_concurrency,_PQueue_isPaused,_PQueue_throwOnTimeout,_PQueue_doesIntervalAllowAnother_get,_PQueue_doesConcurrentAllowAnother_get,_PQueue_next,_PQueue_emitEvents,_PQueue_onResumeInterval,_PQueue_isIntervalPaused_get,_PQueue_tryToStartAnother,_PQueue_initializeIntervalIfNeeded,_PQueue_onInterval,_PQueue_processQueue,_PQueue_onEvent;const timeoutError=new TimeoutError$1;class AbortError$1 extends Error{}class PQueue extends EventEmitter$2{constructor(e){var r,n,o,s;if(super(),_PQueue_instances.add(this),_PQueue_carryoverConcurrencyCount.set(this,void 0),_PQueue_isIntervalIgnored.set(this,void 0),_PQueue_intervalCount.set(this,0),_PQueue_intervalCap.set(this,void 0),_PQueue_interval.set(this,void 0),_PQueue_intervalEnd.set(this,0),_PQueue_intervalId.set(this,void 0),_PQueue_timeoutId.set(this,void 0),_PQueue_queue.set(this,void 0),_PQueue_queueClass.set(this,void 0),_PQueue_pendingCount.set(this,0),_PQueue_concurrency.set(this,void 0),_PQueue_isPaused.set(this,void 0),_PQueue_throwOnTimeout.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:PriorityQueue,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(o=e.interval)===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);__classPrivateFieldSet(this,_PQueue_carryoverConcurrencyCount,e.carryoverConcurrencyCount,"f"),__classPrivateFieldSet(this,_PQueue_isIntervalIgnored,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),__classPrivateFieldSet(this,_PQueue_intervalCap,e.intervalCap,"f"),__classPrivateFieldSet(this,_PQueue_interval,e.interval,"f"),__classPrivateFieldSet(this,_PQueue_queue,new e.queueClass,"f"),__classPrivateFieldSet(this,_PQueue_queueClass,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,__classPrivateFieldSet(this,_PQueue_throwOnTimeout,e.throwOnTimeout===!0,"f"),__classPrivateFieldSet(this,_PQueue_isPaused,e.autoStart===!1,"f")}get concurrency(){return __classPrivateFieldGet(this,_PQueue_concurrency,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);__classPrivateFieldSet(this,_PQueue_concurrency,e,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)}async add(e,r={}){return new Promise((n,o)=>{const s=async()=>{var u,c,h;__classPrivateFieldSet(this,_PQueue_pendingCount,(c=__classPrivateFieldGet(this,_PQueue_pendingCount,"f"),c++,c),"f"),__classPrivateFieldSet(this,_PQueue_intervalCount,(h=__classPrivateFieldGet(this,_PQueue_intervalCount,"f"),h++,h),"f");try{if(!((u=r.signal)===null||u===void 0)&&u.aborted){o(new AbortError$1("The task was aborted."));return}const m=await(this.timeout===void 0&&r.timeout===void 0?e({signal:r.signal}):pTimeout$1(Promise.resolve(e({signal:r.signal})),r.timeout===void 0?this.timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?__classPrivateFieldGet(this,_PQueue_throwOnTimeout,"f"):r.throwOnTimeout)&&o(timeoutError)}));n(m),this.emit("completed",m)}catch(w){o(w),this.emit("error",w)}__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_next).call(this)};__classPrivateFieldGet(this,_PQueue_queue,"f").enqueue(s,r),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return __classPrivateFieldGet(this,_PQueue_isPaused,"f")?(__classPrivateFieldSet(this,_PQueue_isPaused,!1,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this),this):this}pause(){__classPrivateFieldSet(this,_PQueue_isPaused,!0,"f")}clear(){__classPrivateFieldSet(this,_PQueue_queue,new(__classPrivateFieldGet(this,_PQueue_queueClass,"f")),"f")}async onEmpty(){__classPrivateFieldGet(this,_PQueue_queue,"f").size!==0&&await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"empty")}async onSizeLessThan(e){__classPrivateFieldGet(this,_PQueue_queue,"f").size<e||await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"next",()=>__classPrivateFieldGet(this,_PQueue_queue,"f").size<e)}async onIdle(){__classPrivateFieldGet(this,_PQueue_pendingCount,"f")===0&&__classPrivateFieldGet(this,_PQueue_queue,"f").size===0||await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"idle")}get size(){return __classPrivateFieldGet(this,_PQueue_queue,"f").size}sizeBy(e){return __classPrivateFieldGet(this,_PQueue_queue,"f").filter(e).length}get pending(){return __classPrivateFieldGet(this,_PQueue_pendingCount,"f")}get isPaused(){return __classPrivateFieldGet(this,_PQueue_isPaused,"f")}}_PQueue_carryoverConcurrencyCount=new WeakMap,_PQueue_isIntervalIgnored=new WeakMap,_PQueue_intervalCount=new WeakMap,_PQueue_intervalCap=new WeakMap,_PQueue_interval=new WeakMap,_PQueue_intervalEnd=new WeakMap,_PQueue_intervalId=new WeakMap,_PQueue_timeoutId=new WeakMap,_PQueue_queue=new WeakMap,_PQueue_queueClass=new WeakMap,_PQueue_pendingCount=new WeakMap,_PQueue_concurrency=new WeakMap,_PQueue_isPaused=new WeakMap,_PQueue_throwOnTimeout=new WeakMap,_PQueue_instances=new WeakSet,_PQueue_doesIntervalAllowAnother_get=function t(){return __classPrivateFieldGet(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet(this,_PQueue_intervalCount,"f")<__classPrivateFieldGet(this,_PQueue_intervalCap,"f")},_PQueue_doesConcurrentAllowAnother_get=function t(){return __classPrivateFieldGet(this,_PQueue_pendingCount,"f")<__classPrivateFieldGet(this,_PQueue_concurrency,"f")},_PQueue_next=function t(){var e;__classPrivateFieldSet(this,_PQueue_pendingCount,(e=__classPrivateFieldGet(this,_PQueue_pendingCount,"f"),e--,e),"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this),this.emit("next")},_PQueue_emitEvents=function t(){this.emit("empty"),__classPrivateFieldGet(this,_PQueue_pendingCount,"f")===0&&this.emit("idle")},_PQueue_onResumeInterval=function t(){__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onInterval).call(this),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),__classPrivateFieldSet(this,_PQueue_timeoutId,void 0,"f")},_PQueue_isIntervalPaused_get=function t(){const e=Date.now();if(__classPrivateFieldGet(this,_PQueue_intervalId,"f")===void 0){const r=__classPrivateFieldGet(this,_PQueue_intervalEnd,"f")-e;if(r<0)__classPrivateFieldSet(this,_PQueue_intervalCount,__classPrivateFieldGet(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet(this,_PQueue_pendingCount,"f"):0,"f");else return __classPrivateFieldGet(this,_PQueue_timeoutId,"f")===void 0&&__classPrivateFieldSet(this,_PQueue_timeoutId,setTimeout(()=>{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onResumeInterval).call(this)},r),"f"),!0}return!1},_PQueue_tryToStartAnother=function t(){if(__classPrivateFieldGet(this,_PQueue_queue,"f").size===0)return __classPrivateFieldGet(this,_PQueue_intervalId,"f")&&clearInterval(__classPrivateFieldGet(this,_PQueue_intervalId,"f")),__classPrivateFieldSet(this,_PQueue_intervalId,void 0,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_emitEvents).call(this),!1;if(!__classPrivateFieldGet(this,_PQueue_isPaused,"f")){const e=!__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_isIntervalPaused_get);if(__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_doesIntervalAllowAnother_get)&&__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_doesConcurrentAllowAnother_get)){const r=__classPrivateFieldGet(this,_PQueue_queue,"f").dequeue();return r?(this.emit("active"),r(),e&&__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),!0):!1}}return!1},_PQueue_initializeIntervalIfNeeded=function t(){__classPrivateFieldGet(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet(this,_PQueue_intervalId,"f")!==void 0||(__classPrivateFieldSet(this,_PQueue_intervalId,setInterval(()=>{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onInterval).call(this)},__classPrivateFieldGet(this,_PQueue_interval,"f")),"f"),__classPrivateFieldSet(this,_PQueue_intervalEnd,Date.now()+__classPrivateFieldGet(this,_PQueue_interval,"f"),"f"))},_PQueue_onInterval=function t(){__classPrivateFieldGet(this,_PQueue_intervalCount,"f")===0&&__classPrivateFieldGet(this,_PQueue_pendingCount,"f")===0&&__classPrivateFieldGet(this,_PQueue_intervalId,"f")&&(clearInterval(__classPrivateFieldGet(this,_PQueue_intervalId,"f")),__classPrivateFieldSet(this,_PQueue_intervalId,void 0,"f")),__classPrivateFieldSet(this,_PQueue_intervalCount,__classPrivateFieldGet(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet(this,_PQueue_pendingCount,"f"):0,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)},_PQueue_processQueue=function t(){for(;__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this););},_PQueue_onEvent=async function t(e,r){return new Promise(n=>{const o=()=>{r&&!r()||(this.off(e,o),n())};this.on(e,o)})};var objectSafeSet=set;function set(t,e,r){var n,o;if(Array.isArray(e)&&(n=e.slice(0)),typeof e=="string"&&(n=e.split(".")),typeof e=="symbol"&&(n=[e]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");if(o=n.pop(),!o)return!1;prototypeCheck(o);for(var s;s=n.shift();)if(prototypeCheck(s),typeof t[s]>"u"&&(t[s]={}),t=t[s],!t||typeof t!="object")return!1;return t[o]=r,!0}function prototypeCheck(t){if(t=="__proto__"||t=="constructor"||t=="prototype")throw new Error("setting of prototype values not supported")}const Queue=PQueue.default?PQueue.default:PQueue,configKey=new Key("config");function config(t){const e=new Queue({concurrency:1}),r={async getAll(s={}){const u=await getWithFallback(configKey,t.get.bind(t),t.has.bind(t),t);return JSON.parse(toString(u))},async get(s,u={}){if(s==null)throw new NotFoundError(`Key ${s} does not exist in config`);const c=await this.getAll(u),h=objectSafeGet(c,s);if(h===void 0)throw new NotFoundError(`Key ${s} does not exist in config`);return h},set(s,u,c={}){if(typeof s!="string"&&!(s instanceof String))throw errCode(new Error("Invalid key type: "+typeof s),"ERR_INVALID_KEY");if(u===void 0||u instanceof Uint8Array)throw errCode(new Error("Invalid value type: "+typeof u),"ERR_INVALID_VALUE");return e.add(()=>n({key:s,value:u},c.signal))},replace(s,u={}){if(!s||s instanceof Uint8Array)throw errCode(new Error("Invalid value type: "+typeof s),"ERR_INVALID_VALUE");return e.add(()=>n({key:void 0,value:s},u.signal))},async exists(){return hasWithFallback(configKey,t.has.bind(t),t)}};return r;async function n(s,u){if(u&&u.aborted)return;const c=s.key,h=s.value;if(c){const w=await r.getAll();return typeof w=="object"&&w!==null&&objectSafeSet(w,c,h),o(w)}return o(h)}function o(s){const u=fromString(JSON.stringify(s,null,2));return t.put(configKey,u)}}function isPlainObject(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function sortKeys(t,e={}){if(!isPlainObject(t)&&!Array.isArray(t))throw new TypeError("Expected a plain object or array");const{deep:r,compare:n}=e,o=[],s=[],u=h=>{const w=o.indexOf(h);if(w!==-1)return s[w];const m=[];return o.push(h),s.push(m),m.push(...h.map(v=>Array.isArray(v)?u(v):isPlainObject(v)?c(v):v)),m},c=h=>{const w=o.indexOf(h);if(w!==-1)return s[w];const m={},v=Object.keys(h).sort(n);o.push(h),s.push(m);for(const E of v){const O=h[E];let $;r&&Array.isArray(O)?$=u(O):$=r&&isPlainObject(O)?c(O):O,Object.defineProperty(m,E,{...Object.getOwnPropertyDescriptor(h,E),value:$})}return m};return Array.isArray(t)?r?u(t):t.slice():c(t)}const specKey=new Key("datastore_spec");function spec(t){return{exists(){return t.has(specKey)},async get(){const e=await t.get(specKey);return JSON.parse(toString(e))},async set(e){return t.put(specKey,fromString(JSON.stringify(sortKeys(e,{deep:!0}))))}}}const apiFile=new Key("api");function apiAddr(t){return{async get(){const e=await t.get(apiFile);return e&&e.toString()},set(e){return t.put(apiFile,fromString(e.toString()))},delete(){return t.delete(apiFile)}}}const filter=async function*(t,e){for await(const r of t)await e(r)&&(yield r)};var itFilter=filter;class FixedFIFO$1{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}}class FIFO$1{constructor(e={}){var r;this.hwm=(r=e.splitLimit)!=null?r:16,this.head=new FixedFIFO$1(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return(e==null?void 0:e.byteLength)!=null?e.byteLength:1}push(e){if((e==null?void 0:e.value)!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){const r=this.head;this.head=r.next=new FixedFIFO$1(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){const r=this.tail.next;this.tail.next=null,this.tail=r,e=this.tail.shift()}return(e==null?void 0:e.value)!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}}function pushable$1(t={}){return _pushable(r=>{const n=r.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},t)}function _pushable(t,e){e=e!=null?e:{};let r=e.onEnd,n=new FIFO$1,o,s,u;const c=async()=>n.isEmpty()?u?{done:!0}:await new Promise((k,B)=>{s=j=>{s=null,n.push(j);try{k(t(n))}catch(ie){B(ie)}return o}}):t(n),h=k=>s!=null?s(k):(n.push(k),o),w=k=>(n=new FIFO$1,s!=null?s({error:k}):(n.push({error:k}),o)),m=k=>{if(u)return o;if((e==null?void 0:e.objectMode)!==!0&&(k==null?void 0:k.byteLength)==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return h({done:!1,value:k})},v=k=>u?o:(u=!0,k!=null?w(k):h({done:!0})),E=()=>(n=new FIFO$1,v(),{done:!0}),O=k=>(v(k),{done:!0});if(o={[Symbol.asyncIterator](){return this},next:c,return:E,throw:O,push:m,end:v,get readableLength(){return n.size}},r==null)return o;const $=o;return o={[Symbol.asyncIterator](){return this},next(){return $.next()},throw(k){return $.throw(k),r!=null&&(r(k),r=void 0),{done:!0}},return(){return $.return(),r!=null&&(r(),r=void 0),{done:!0}},push:m,end(k){return $.end(k),r!=null&&(r(k),r=void 0),o},get readableLength(){return $.readableLength}},o}const drain=async t=>{for await(const e of t);};var itDrain=drain;function createIdStore(t){return{open(){return t.open()},close(){return t.close()},query(e,r){return t.query(e,r)},queryKeys(e,r){return t.queryKeys(e,r)},async get(e,r){const n=extractContents(e);return n.isIdentity?Promise.resolve(n.digest):t.get(e,r)},async*getMany(e,r){for await(const n of e)yield this.get(n,r)},async put(e,r,n){const{isIdentity:o}=extractContents(e);o||await t.put(e,r,n)},async*putMany(e,r){const n=pushable$1({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{await itDrain(t.putMany(async function*(){for await(const{key:s,value:u}of e)extractContents(s).isIdentity||(yield{key:s,value:u}),n.push({key:s,value:u})}())),n.end()}catch(s){n.end(s)}}),yield*n},has(e,r){const{isIdentity:n}=extractContents(e);return n?Promise.resolve(!0):t.has(e,r)},delete(e,r){const{isIdentity:n}=extractContents(e);return n?Promise.resolve():t.delete(e,r)},deleteMany(e,r){return t.deleteMany(itFilter(e,n=>!extractContents(n).isIdentity),r)},batch(){const e=t.batch();return{put(r,n){const{isIdentity:o}=extractContents(r);o||e.put(r,n)},delete(r){const{isIdentity:n}=extractContents(r);n||e.delete(r)},commit:r=>e.commit(r)}}}}function extractContents(t){const e=CID$2.asCID(t);if(e==null)throw errCode(new Error("Not a valid cid"),"ERR_INVALID_CID");return e.multihash.code!==identity$4.code?{isIdentity:!1}:{isIdentity:!0,digest:e.multihash.digest}}const log$3=debug("ipfs:repo:lock:memory"),lockFile="repo.lock",LOCKS={};async function lock(t){const e=t+"/"+lockFile;if(log$3("locking %s",e),LOCKS[e]===!0)throw new LockExistsError(`Lock already being held for file: ${e}`);return LOCKS[e]=!0,{async close(){LOCKS[e]&&delete LOCKS[e]}}}async function locked(t){const e=t+"/"+lockFile;return log$3(`checking lock: ${e}`),Boolean(LOCKS[e])}const MemoryLock={lock,locked},defaultOptions$2={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:MemoryLock},defaultDatastore={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}},first=async t=>{for await(const e of t)return e};var itFirst=first;function cidToKey$1(t){const e=CID$2.asCID(t);if(e==null)throw errCode(new Error("Not a valid cid"),"ERR_INVALID_CID");const r=base32$6.encode(e.multihash.bytes);return new Key("/"+r.slice(1).toUpperCase(),!1)}function keyToMultihash(t){return decode$p(base32$6.decode(`b${t.toString().toLowerCase().substring(1)}`))}const log$2=debug("ipfs:repo:utils:walk-dag");async function*walkDag(t,e,r,n){try{const o=await e.get(t,n),s=await r(t.code),u=createUnsafe({bytes:o,cid:t,codec:s});for(const[,c]of u.links())yield c,yield*walkDag(c,e,r,n)}catch(o){throw log$2("Could not walk DAG for CID",t.toString(),o),o}}const PinTypes={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};class QuickLRU extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(const[r,n]of e)this.onEviction(r,n.value)}_deleteIfExpired(e,r){return typeof r.expiry=="number"&&r.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,r.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,r){if(this._deleteIfExpired(e,r)===!1)return r.value}_getItemValue(e,r){return r.expiry?this._getOrDeleteIfExpired(e,r):r.value}_peek(e,r){const n=r.get(e);return this._getItemValue(e,n)}_set(e,r){this.cache.set(e,r),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,r){this.oldCache.delete(e),this._set(e,r)}*_entriesAscending(){for(const e of this.oldCache){const[r,n]=e;this.cache.has(r)||this._deleteIfExpired(r,n)===!1&&(yield e)}for(const e of this.cache){const[r,n]=e;this._deleteIfExpired(r,n)===!1&&(yield e)}}get(e){if(this.cache.has(e)){const r=this.cache.get(e);return this._getItemValue(e,r)}if(this.oldCache.has(e)){const r=this.oldCache.get(e);if(this._deleteIfExpired(e,r)===!1)return this._moveToRecent(e,r),r.value}}set(e,r,{maxAge:n=this.maxAge}={}){const o=typeof n=="number"&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;this.cache.has(e)?this.cache.set(e,{value:r,expiry:o}):this._set(e,{value:r,expiry:o})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){const r=this.cache.delete(e);return r&&this._size--,this.oldCache.delete(e)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const r=[...this._entriesAscending()],n=r.length-e;n<0?(this.cache=new Map(r),this.oldCache=new Map,this._size=r.length):(n>0&&this._emitEvictions(r.slice(0,n)),this.oldCache=new Map(r.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[r,n]=e;this._deleteIfExpired(r,n)===!1&&(yield[r,n.value])}for(const e of this.oldCache){const[r,n]=e;this.cache.has(r)||this._deleteIfExpired(r,n)===!1&&(yield[r,n.value])}}*entriesDescending(){let e=[...this.cache];for(let r=e.length-1;r>=0;--r){const n=e[r],[o,s]=n;this._deleteIfExpired(o,s)===!1&&(yield[o,s.value])}e=[...this.oldCache];for(let r=e.length-1;r>=0;--r){const n=e[r],[o,s]=n;this.cache.has(o)||this._deleteIfExpired(o,s)===!1&&(yield[o,s.value])}}*entriesAscending(){for(const[e,r]of this._entriesAscending())yield[e,r.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const r of this.oldCache.keys())this.cache.has(r)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,r=this){for(const[n,o]of this.entriesAscending())e.call(r,o,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}const CID_CACHE_MAX_SIZE=2048;function invalidPinTypeErr(t){const e=`Invalid type '${t}', must be one of {direct, indirect, recursive, all}`;return errCode(new Error(e),"ERR_INVALID_PIN_TYPE")}class PinManager{constructor({pinstore:e,blockstore:r,loadCodec:n}){this.pinstore=e,this.blockstore=r,this.loadCodec=n,this.log=debug("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e,r={}){await this.blockstore.get(e,r);const n={depth:0};return e.version!==0&&(n.version=e.version),e.code!==code$6&&(n.codec=e.code),r.metadata&&(n.metadata=r.metadata),this.pinstore.put(cidToKey$1(e),encode$q(n))}unpin(e,r){return this.pinstore.delete(cidToKey$1(e),r)}async pinRecursively(e,r={}){await this.fetchCompleteDag(e,r);const n={depth:1/0};e.version!==0&&(n.version=e.version),e.code!==code$6&&(n.codec=e.code),r.metadata&&(n.metadata=r.metadata),await this.pinstore.put(cidToKey$1(e),encode$q(n))}async*directKeys(e){for await(const r of this.pinstore.query({filters:[n=>decode$s(n.value).depth===0]})){const n=decode$s(r.value),o=n.version||0,s=n.codec!=null?n.codec:code$6,u=keyToMultihash(r.key);yield{cid:CID$2.create(o,s,u),metadata:n.metadata}}}async*recursiveKeys(e){for await(const r of this.pinstore.query({filters:[n=>decode$s(n.value).depth===1/0]})){const n=decode$s(r.value),o=n.version||0,s=n.codec!=null?n.codec:code$6,u=keyToMultihash(r.key);yield{cid:CID$2.create(o,s,u),metadata:n.metadata}}}async*indirectKeys(e){for await(const{cid:r}of this.recursiveKeys())for await(const n of walkDag(r,this.blockstore,this.loadCodec,e)){const o=[PinTypes.recursive];(await this.isPinnedWithType(n,o)).pinned||(yield n)}}async isPinnedWithType(e,r,n){Array.isArray(r)||(r=[r]);const o=r.includes(PinTypes.all),s=r.includes(PinTypes.direct),u=r.includes(PinTypes.recursive),c=r.includes(PinTypes.indirect);if(u||s||o){const m=await itFirst(this.pinstore.query({prefix:cidToKey$1(e).toString(),filters:[v=>{if(o)return!0;const E=decode$s(v.value);return r.includes(E.depth===0?PinTypes.direct:PinTypes.recursive)}],limit:1}));if(m){const v=decode$s(m.value);return{cid:e,pinned:!0,reason:v.depth===0?PinTypes.direct:PinTypes.recursive,metadata:v.metadata}}}const h=this;async function*w(m,v){for await(const{cid:E}of v)for await(const O of walkDag(E,h.blockstore,h.loadCodec))if(O.equals(m)){yield E;return}}if(o||c){const m=await itFirst(w(e,this.recursiveKeys()));if(m)return{cid:e,pinned:!0,reason:PinTypes.indirect,parent:m}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,r={}){var s;const n=new QuickLRU({maxSize:(s=r.cidCacheMaxSize)!=null?s:CID_CACHE_MAX_SIZE}),o=async(u,c)=>{if(n.has(u.toString()))return;n.set(u.toString(),!0);const h=await this.blockstore.get(u,c),w=await this.loadCodec(u.code),m=createUnsafe({bytes:h,cid:u,codec:w});await Promise.all([...m.links()].map(([,v])=>o(v,c)))};await o(e,r)}static checkPinType(e){if(typeof e!="string"||!Object.keys(PinTypes).includes(e))throw invalidPinTypeErr(e);return!0}}const map=async function*(t,e){for await(const r of t)yield e(r)};var itMap=map;function createPinnedBlockstore(t,e){return{open(){return e.open()},close(){return e.close()},query(r,n){return e.query(r,n)},queryKeys(r,n){return e.queryKeys(r,n)},async get(r,n){return e.get(r,n)},async*getMany(r,n){yield*e.getMany(r,n)},async put(r,n,o){await e.put(r,n,o)},async*putMany(r,n){yield*e.putMany(r,n)},has(r,n){return e.has(r,n)},async delete(r,n){return await ensureNotPinned(r,t),e.delete(r,n)},deleteMany(r,n){return e.deleteMany(itMap(r,async o=>(await ensureNotPinned(o,t),o)),n)},batch(){return e.batch()}}}async function ensureNotPinned(t,e){const{pinned:r,reason:n}=await e.isPinnedWithType(t,PinTypes.all);if(r)throw errCode(new Error(`pinned: ${n}`),"ERR_BLOCK_PINNED")}class TimeoutError extends Error{constructor(e){super(e),this.name="TimeoutError"}}class AbortError extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const getDOMException=t=>globalThis.DOMException===void 0?new AbortError(t):new DOMException(t),getAbortedReason=t=>{const e=t.reason===void 0?getDOMException("This operation was aborted."):t.reason;return e instanceof Error?e:getDOMException(e)};function pTimeout(t,e){const{milliseconds:r,fallback:n,message:o,customTimers:s={setTimeout,clearTimeout}}=e;let u;const c=new Promise((h,w)=>{if(typeof r!="number"||Math.sign(r)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(r===Number.POSITIVE_INFINITY){h(t);return}if(e.signal){const{signal:m}=e;m.aborted&&w(getAbortedReason(m)),m.addEventListener("abort",()=>{w(getAbortedReason(m))})}u=s.setTimeout.call(void 0,()=>{if(n){try{h(n())}catch(E){w(E)}return}const m=typeof o=="string"?o:`Promise timed out after ${r} milliseconds`,v=o instanceof Error?o:new TimeoutError(m);typeof t.cancel=="function"&&t.cancel(),w(v)},r),(async()=>{try{h(await t)}catch(m){w(m)}finally{s.clearTimeout.call(void 0,u)}})()});return c.clear=()=>{s.clearTimeout.call(void 0,u),u=void 0},c}let nanoid=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");const WORKER_REQUEST_READ_LOCK="lock:worker:request-read",WORKER_RELEASE_READ_LOCK="lock:worker:release-read",MASTER_GRANT_READ_LOCK="lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK="lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK="lock:worker:release-write",MASTER_GRANT_WRITE_LOCK="lock:master:grant-write",events$1={},observable=t=>{t.addEventListener("message",e=>{observable.dispatchEvent("message",t,e)}),t.port!=null&&t.port.addEventListener("message",e=>{observable.dispatchEvent("message",t,e)})};observable.addEventListener=(t,e)=>{events$1[t]==null&&(events$1[t]=[]),events$1[t].push(e)};observable.removeEventListener=(t,e)=>{events$1[t]!=null&&(events$1[t]=events$1[t].filter(r=>r===e))};observable.dispatchEvent=function(t,e,r){events$1[t]!=null&&events$1[t].forEach(n=>n(e,r))};const handleWorkerLockRequest=(t,e,r,n,o)=>(s,u)=>{if(u.data.type!==r)return;const c={type:u.data.type,name:u.data.name,identifier:u.data.identifier};t.dispatchEvent(new MessageEvent(e,{data:{name:c.name,handler:async()=>(s.postMessage({type:o,name:c.name,identifier:c.identifier}),await new Promise(h=>{const w=m=>{if(m==null||m.data==null)return;const v={type:m.data.type,name:m.data.name,identifier:m.data.identifier};v.type===n&&v.identifier===c.identifier&&(s.removeEventListener("message",w),h())};s.addEventListener("message",w)}))}}))},makeWorkerLockRequest=(t,e,r,n)=>async()=>{const o=nanoid();return globalThis.postMessage({type:e,identifier:o,name:t}),await new Promise(s=>{const u=c=>{if(c==null||c.data==null)return;const h={type:c.data.type,identifier:c.data.identifier};h.type===r&&h.identifier===o&&(globalThis.removeEventListener("message",u),s(()=>{globalThis.postMessage({type:n,identifier:o,name:t})}))};globalThis.addEventListener("message",u)})},defaultOptions$1={singleProcess:!1},impl=t=>{if(t=Object.assign({},defaultOptions$1,t),Boolean(globalThis.document)||t.singleProcess){const r=new EventTarget;return observable.addEventListener("message",handleWorkerLockRequest(r,"requestReadLock",WORKER_REQUEST_READ_LOCK,WORKER_RELEASE_READ_LOCK,MASTER_GRANT_READ_LOCK)),observable.addEventListener("message",handleWorkerLockRequest(r,"requestWriteLock",WORKER_REQUEST_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK)),r}return{isWorker:!0,readLock:r=>makeWorkerLockRequest(r,WORKER_REQUEST_READ_LOCK,MASTER_GRANT_READ_LOCK,WORKER_RELEASE_READ_LOCK),writeLock:r=>makeWorkerLockRequest(r,WORKER_REQUEST_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK)}},mutexes={};let implementation;async function createReleaseable(t,e){let r;const n=new Promise(o=>{r=o});return t.add(async()=>await pTimeout((async()=>await new Promise(o=>{r(()=>{o()})}))(),{milliseconds:e.timeout})),await n}const createMutex=(t,e)=>{if(implementation.isWorker===!0)return{readLock:implementation.readLock(t,e),writeLock:implementation.writeLock(t,e)};const r=new PQueue({concurrency:1});let n;return{async readLock(){if(n!=null)return await createReleaseable(n,e);n=new PQueue({concurrency:e.concurrency,autoStart:!1});const o=n,s=createReleaseable(n,e);return r.add(async()=>(o.start(),await o.onIdle().then(()=>{n===o&&(n=null)}))),await s},async writeLock(){return n=null,await createReleaseable(r,e)}}},defaultOptions={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function createMortice(t){const e=Object.assign({},defaultOptions,t);return implementation==null&&(implementation=impl(e),implementation.isWorker!==!0&&(implementation.addEventListener("requestReadLock",r=>{mutexes[r.data.name]!=null&&mutexes[r.data.name].readLock().then(async n=>await r.data.handler().finally(()=>n()))}),implementation.addEventListener("requestWriteLock",async r=>{mutexes[r.data.name]!=null&&mutexes[r.data.name].writeLock().then(async n=>await r.data.handler().finally(()=>n()))}))),mutexes[e.name]==null&&(mutexes[e.name]=createMutex(e.name,e)),mutexes[e.name]}async function*batch$1(t,e=1){let r=[];e<1&&(e=1);for await(const n of t)for(r.push(n);r.length>=e;)yield r.slice(0,e),r=r.slice(e);for(;r.length;)yield r.slice(0,e),r=r.slice(e)}var itBatch=batch$1;const batch=itBatch;async function*parallelBatch(t,e=1){for await(const r of batch(t,e)){const n=r.map(o=>o().then(s=>({ok:!0,value:s}),s=>({ok:!1,err:s})));for(let o=0;o<n.length;o++){const s=await n[o];if(s.ok)yield s.value;else throw s.err}}}var itParallelBatch=parallelBatch,fixedSize=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}};const FixedFIFO=fixedSize;var fastFifo=class{constructor(e){this.hwm=e||16,this.head=new FixedFIFO(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){const r=this.head;this.head=r.next=new FixedFIFO(2*this.head.buffer.length),this.head.push(e)}}shift(){const e=this.tail.shift();if(e===void 0&&this.tail.next){const r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}};const FIFO=fastFifo;var itPushable=t=>{t=t||{};let e;typeof t=="function"?(e=t,t={}):e=t.onEnd;let r=new FIFO,n,o,s;const u=()=>{if(!r.isEmpty()){if(t.writev){let k;const B=[];for(;!r.isEmpty();){if(k=r.shift(),k.error)throw k.error;B.push(k.value)}return{done:k.done,value:B}}const $=r.shift();if($.error)throw $.error;return $}return s?{done:!0}:new Promise(($,k)=>{o=B=>(o=null,B.error?k(B.error):t.writev&&!B.done?$({done:B.done,value:[B.value]}):$(B),n)})},c=$=>o?o($):(r.push($),n),h=$=>(r=new FIFO,o?o({error:$}):(r.push({error:$}),n)),w=$=>s?n:c({done:!1,value:$}),m=$=>s?n:(s=!0,$?h($):c({done:!0})),v=()=>(r=new FIFO,m(),{done:!0}),E=$=>(m($),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:u,return:v,throw:E,push:w,end:m},!e)return n;const O=n;return n={[Symbol.asyncIterator](){return this},next(){return O.next()},throw($){return O.throw($),e&&(e($),e=null),{done:!0}},return(){return O.return(),e&&(e(),e=null),{done:!0}},push:w,end($){return O.end($),e&&(e($),e=null),n}},n};const pushable=itPushable,merge=async function*(...t){const e=pushable();setTimeout(async()=>{try{await Promise.all(t.map(async r=>{for await(const n of r)e.push(n)})),e.end()}catch(r){e.end(r)}},0),yield*e};var itMerge=merge;const rawPipe=(...t)=>{let e;for(;t.length>0;)e=t.shift()(e);return e},isIterable=t=>t!=null&&(typeof t[Symbol.asyncIterator]=="function"||typeof t[Symbol.iterator]=="function"||typeof t.next=="function"),isDuplex=t=>t!=null&&typeof t.sink=="function"&&isIterable(t.source),duplexPipelineFn=t=>e=>{const r=t.sink(e);if(r.then!=null){const n=pushable$1({objectMode:!0});return r.then(()=>{n.end()},s=>{n.end(s)}),itMerge(n,async function*(){yield*t.source,n.end()}())}return t.source};function pipe(t,...e){if(isDuplex(t)){const n=t;t=()=>n.source}else if(isIterable(t)){const n=t;t=()=>n}const r=[t,...e];if(r.length>1&&isDuplex(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)isDuplex(r[n])&&(r[n]=duplexPipelineFn(r[n]));return rawPipe(...r)}const log$1=debug("ipfs:repo:gc"),ERR_NOT_FOUND=notFoundError$1().code,BLOCK_RM_CONCURRENCY=256,MFS_ROOT_KEY=new Key("/local/filesroot");function gc$1({gcLock:t,pins:e,blockstore:r,root:n,loadCodec:o}){async function*s(){const u=Date.now();log$1("Creating set of marked blocks");const c=await t.writeLock();try{const h=await createMarkedSet({pins:e,blockstore:r,root:n,loadCodec:o}),w=r.queryKeys({});yield*deleteUnmarkedBlocks({blockstore:r},h,w),log$1(`Complete (${Date.now()-u}ms)`)}finally{c()}}return s}async function createMarkedSet({pins:t,blockstore:e,loadCodec:r,root:n}){const o=async function*(){let c;try{c=await n.get(MFS_ROOT_KEY)}catch(w){if(w.code===ERR_NOT_FOUND){log$1("No blocks in MFS");return}throw w}const h=CID$2.decode(c);yield h,yield*walkDag(h,e,r)}(),s=itMerge(itMap(t.recursiveKeys(),({cid:c})=>c),t.indirectKeys(),itMap(t.directKeys(),({cid:c})=>c),o),u=new Set;for await(const c of itMerge(s,o))u.add(base32$6.encode(c.multihash.bytes));return u}async function*deleteUnmarkedBlocks({blockstore:t},e,r){let n=0,o=0;yield*pipe(itParallelBatch(itMap(r,async u=>async function(){n++;try{const h=base32$6.encode(u.multihash.bytes);if(e.has(h))return null;try{await t.delete(u),o++}catch(w){return{err:new Error(`Could not delete block with CID ${u}: ${w.message}`)}}return{cid:u}}catch(h){const w=`Could delete block with CID ${u}`;return log$1(w,h),{err:new Error(w+`: ${h.message}`)}}}),BLOCK_RM_CONCURRENCY),u=>itFilter(u,Boolean)),log$1(`Marked set has ${e.size} unique blocks. Blockstore has ${n} blocks. Deleted ${o} blocks.`)}const log=debug("ipfs:repo"),noLimit=Number.MAX_SAFE_INTEGER,AUTO_MIGRATE_CONFIG_KEY="repoAutoMigrate";class Repo{constructor(e,r,n,o){if(typeof e!="string")throw new Error("missing repo path");if(typeof r!="function")throw new Error("missing codec loader");this.options=mergeOptions(defaultOptions$2,o),this.closed=!0,this.path=e,this.root=n.root,this.datastore=n.datastore,this.keys=n.keys;const s=n.blocks,u=n.pins;this.pins=new PinManager({pinstore:u,blockstore:s,loadCodec:r});const c=createPinnedBlockstore(this.pins,s);this.blocks=createIdStore(c),this.version=version(this.root),this.config=config(this.root),this.spec=spec(this.root),this.apiAddr=apiAddr(this.root),this.gcLock=createMortice({name:e,singleProcess:this.options.repoOwner!==!1}),this.gc=gc$1({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:r})}async init(e){log("initializing at: %s",this.path),await this._openRoot(),await this.config.replace(buildConfig(e)),await this.spec.set(buildDatastoreSpec(e)),await this.version.set(repoVersion)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch{return!1}}async open(){if(!this.closed)throw errCode(new Error("repo is already open"),ERR_REPO_ALREADY_OPEN);log("opening at: %s",this.path);try{if(await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),log("acquired repo.lock"),!await this.version.check(repoVersion))if(await this._isAutoMigrationEnabled())await this._migrate(repoVersion,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});else throw new InvalidRepoVersionError("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");log("creating datastore"),await this.datastore.open(),log("creating blocks"),await this.blocks.open(),log("creating keystore"),await this.keys.open(),log("creating pins"),await this.pins.pinstore.open(),this.closed=!1,log("all opened")}catch(e){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(r){log("error removing lock",r)}throw e}}async _openRoot(){try{await this.root.open()}catch(e){if(e.message!=="Already open")throw e}}async _openLock(){const e=await this.options.repoLock.lock(this.path);if(typeof e.close!="function")throw errCode(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){log("init check");let e;try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(r){throw r.code==="ERR_NOT_FOUND"?errCode(new Error("repo is not initialized yet"),ERR_REPO_NOT_INITIALIZED,{path:this.path}):r}if(!e)throw errCode(new Error("repo is not initialized yet"),ERR_REPO_NOT_INITIALIZED,{path:this.path})}async close(){if(this.closed)throw errCode(new Error("repo is already closed"),ERR_REPO_ALREADY_CLOSED);log("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(e){if(e.code!==ERR_REPO_NOT_INITIALIZED&&!e.message.startsWith("ENOENT"))throw e}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map(e=>e&&e.close())),log("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){const[e,r,n,o,s]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),getSize(this.datastore),getSize(this.keys)]),u=r.size+o+s;return{repoPath:this.path,storageMax:e,version:n,numObjects:r.count,repoSize:u}}throw errCode(new Error("repo is not initialized yet"),ERR_REPO_NOT_INITIALIZED,{path:this.path})}async _isAutoMigrationEnabled(){if(this.options.autoMigrate!==void 0)return this.options.autoMigrate;let e;try{e=await this.config.get(AUTO_MIGRATE_CONFIG_KEY)}catch(r){if(r.code===NotFoundError.code)e=!0;else throw r}return e}async _migrate(e,r){return await this.version.get()>e?(log(`reverting to version ${e}`),revert(this.path,r,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(log(`migrating to version ${e}`),migrate(this.path,r,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{const e=await this.config.get("Datastore.StorageMax");return BigInt(bytes$1.exports(e))}catch{return BigInt(noLimit)}}async _blockStat(){let e=BigInt(0),r=BigInt(0);if(this.blocks)for await(const{key:n,value:o}of this.blocks.query({}))e+=BigInt(1),r+=BigInt(o.byteLength),r+=BigInt(n.bytes.byteLength);return{count:e,size:r}}}async function getSize(t){let e=BigInt(0);for await(const r of t.query({}))e+=BigInt(r.value.byteLength),e+=BigInt(r.key.uint8Array().byteLength);return e}function createRepo$1(t,e,r,n){return new Repo(t,e,r,n)}function buildConfig(t){return t.Datastore=Object.assign({},defaultDatastore,objectSafeGet(t,"datastore")),t}function buildDatastoreSpec(t){const e={...defaultDatastore.Spec,...objectSafeGet(t,"Datastore.Spec")};return{type:e.type,mounts:e.mounts.map(r=>({mountpoint:r.mountpoint,type:r.child.type,path:r.child.path,shardFunc:r.child.shardFunc}))}}const SHARDING_FN="SHARDING",README_FN="_README",all$1=async t=>{const e=[];for await(const r of t)e.push(r);return e};var itAll=all$1;const sortAll$1=(t,e)=>async function*(){yield*(await itAll(t)).sort(e)}(),take=async function*(t,e){let r=0;if(!(e<1)){for await(const n of t)if(yield n,r++,r===e)return}};var itTake=take;class BaseDatastore{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,r,n){return Promise.reject(new Error(".put is not implemented"))}get(e,r){return Promise.reject(new Error(".get is not implemented"))}has(e,r){return Promise.reject(new Error(".has is not implemented"))}delete(e,r){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,r={}){for await(const{key:n,value:o}of e)await this.put(n,o,r),yield{key:n,value:o}}async*getMany(e,r={}){for await(const n of e)yield this.get(n,r)}async*deleteMany(e,r={}){for await(const n of e)await this.delete(n,r),yield n}batch(){let e=[],r=[];return{put(n,o){e.push({key:n,value:o})},delete(n){r.push(n)},commit:async n=>{await itDrain(this.putMany(e,n)),e=[],await itDrain(this.deleteMany(r,n)),r=[]}}}async*_all(e,r){throw new Error("._all is not implemented")}async*_allKeys(e,r){throw new Error("._allKeys is not implemented")}query(e,r){let n=this._all(e,r);if(e.prefix!=null&&(n=itFilter(n,o=>o.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((o,s)=>itFilter(o,s),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((o,s)=>sortAll$1(o,s),n)),e.offset!=null){let o=0;n=itFilter(n,()=>o++>=e.offset)}return e.limit!=null&&(n=itTake(n,e.limit)),n}queryKeys(e,r){let n=this._allKeys(e,r);if(e.prefix!=null&&(n=itFilter(n,o=>o.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((o,s)=>itFilter(o,s),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((o,s)=>sortAll$1(o,s),n)),e.offset!=null){let o=0;n=itFilter(n,()=>o++>=e.offset)}return e.limit!=null&&(n=itTake(n,e.limit)),n}}class MemoryDatastore extends BaseDatastore{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,r){this.data[e.toString()]=r}async get(e){if(!await this.has(e))throw notFoundError$1();return this.data[e.toString()]}async has(e){return this.data[e.toString()]!==void 0}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map(([e,r])=>({key:new Key(e),value:r}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>new Key(e))}}new Key(SHARDING_FN);new Key(README_FN);function base$1(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var s=t.charAt(o),u=s.charCodeAt(0);if(r[u]!==255)throw new TypeError(s+" is ambiguous");r[u]=o}var c=t.length,h=t.charAt(0),w=Math.log(c)/Math.log(256),m=Math.log(256)/Math.log(c);function v($){if($ instanceof Uint8Array||(ArrayBuffer.isView($)?$=new Uint8Array($.buffer,$.byteOffset,$.byteLength):Array.isArray($)&&($=Uint8Array.from($))),!($ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if($.length===0)return"";for(var k=0,B=0,j=0,ie=$.length;j!==ie&&$[j]===0;)j++,k++;for(var se=(ie-j)*m+1>>>0,N=new Uint8Array(se);j!==ie;){for(var L=$[j],oe=0,q=se-1;(L!==0||oe<B)&&q!==-1;q--,oe++)L+=256*N[q]>>>0,N[q]=L%c>>>0,L=L/c>>>0;if(L!==0)throw new Error("Non-zero carry");B=oe,j++}for(var X=se-B;X!==se&&N[X]===0;)X++;for(var de=h.repeat(k);X<se;++X)de+=t.charAt(N[X]);return de}function E($){if(typeof $!="string")throw new TypeError("Expected String");if($.length===0)return new Uint8Array;var k=0;if($[k]!==" "){for(var B=0,j=0;$[k]===h;)B++,k++;for(var ie=($.length-k)*w+1>>>0,se=new Uint8Array(ie);$[k];){var N=r[$.charCodeAt(k)];if(N===255)return;for(var L=0,oe=ie-1;(N!==0||L<j)&&oe!==-1;oe--,L++)N+=c*se[oe]>>>0,se[oe]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");j=L,k++}if($[k]!==" "){for(var q=ie-j;q!==ie&&se[q]===0;)q++;for(var X=new Uint8Array(B+(ie-q)),de=B;q!==ie;)X[de++]=se[q++];return X}}}function O($){var k=E($);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:v,decodeUnsafe:E,decode:O}}var src$1=base$1,_brrp__multiformats_scope_baseX$1=src$1;const coerce$1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};class Encoder$1{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder$1{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$1(this,e)}}class ComposedDecoder$1{constructor(e){this.decoders=e}or(e){return or$1(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or$1=(t,e)=>new ComposedDecoder$1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Codec$1{constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder$1(e,r,n),this.decoder=new Decoder$1(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$2=({name:t,prefix:e,encode:r,decode:n})=>new Codec$1(t,e,r,n),baseX$1=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX$1(r,e);return from$2({prefix:t,name:e,encode:n,decode:s=>coerce$1(o(s))})},decode$9=(t,e,r,n)=>{const o={};for(let m=0;m<e.length;++m)o[e[m]]=m;let s=t.length;for(;t[s-1]==="=";)--s;const u=new Uint8Array(s*r/8|0);let c=0,h=0,w=0;for(let m=0;m<s;++m){const v=o[t[m]];if(v===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<r|v,c+=r,c>=8&&(c-=8,u[w++]=255&h>>c)}if(c>=r||255&h<<8-c)throw new SyntaxError("Unexpected end of data");return u},encode$7=(t,e,r)=>{const n=e[e.length-1]==="=",o=(1<<r)-1;let s="",u=0,c=0;for(let h=0;h<t.length;++h)for(c=c<<8|t[h],u+=8;u>r;)u-=r,s+=e[o&c>>u];if(u&&(s+=e[o&c<<r-u]),n)for(;s.length*r&7;)s+="=";return s},rfc4648$1=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>from$2({prefix:e,name:t,encode(o){return encode$7(o,n,r)},decode(o){return decode$9(o,n,r,t)}}),base58btc$1=baseX$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32$1=rfc4648$1({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$1({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$1({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$1({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$1({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$1({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$1({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$1({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648$1({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const base64=rfc4648$1({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});rfc4648$1({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});rfc4648$1({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});rfc4648$1({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});debug.formatters.b=t=>t==null?"undefined":base58btc$1.baseEncode(t);debug.formatters.t=t=>t==null?"undefined":base32$1.baseEncode(t);debug.formatters.m=t=>t==null?"undefined":base64.baseEncode(t);debug.formatters.p=t=>t==null?"undefined":t.toString();debug.formatters.c=t=>t==null?"undefined":t.toString();debug.formatters.k=t=>t==null?"undefined":t.toString();function logger(t){return Object.assign(debug(t),{error:debug(`${t}:error`),trace:debug(`${t}:trace`)})}logger("datastore:core:tiered");const all=itAll,sort=async function*(t,e){yield*(await all(t)).sort(e)};var itSort=sort,browser={},browserLevel={},abstractLevel$1={},abstractLevel={},levelSupports={};levelSupports.supports=function t(...e){const r=e.reduce((n,o)=>Object.assign(n,o),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})};var levelTranscoder={},moduleError=class extends Error{constructor(e,r){super(e||""),typeof r=="object"&&r!==null&&(r.code&&(this.code=String(r.code)),r.expected&&(this.expected=!0),r.transient&&(this.transient=!0),r.cause&&(this.cause=r.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},encodings$1={},buffer={},ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(t,e,r,n,o){var s,u,c=o*8-n-1,h=(1<<c)-1,w=h>>1,m=-7,v=r?o-1:0,E=r?-1:1,O=t[e+v];for(v+=E,s=O&(1<<-m)-1,O>>=-m,m+=c;m>0;s=s*256+t[e+v],v+=E,m-=8);for(u=s&(1<<-m)-1,s>>=-m,m+=n;m>0;u=u*256+t[e+v],v+=E,m-=8);if(s===0)s=1-w;else{if(s===h)return u?NaN:(O?-1:1)*(1/0);u=u+Math.pow(2,n),s=s-w}return(O?-1:1)*u*Math.pow(2,s-n)};ieee754.write=function(t,e,r,n,o,s){var u,c,h,w=s*8-o-1,m=(1<<w)-1,v=m>>1,E=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=n?0:s-1,$=n?1:-1,k=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,u=m):(u=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-u))<1&&(u--,h*=2),u+v>=1?e+=E/h:e+=E*Math.pow(2,1-v),e*h>=2&&(u++,h/=2),u+v>=m?(c=0,u=m):u+v>=1?(c=(e*h-1)*Math.pow(2,o),u=u+v):(c=e*Math.pow(2,v-1)*Math.pow(2,o),u=0));o>=8;t[r+O]=c&255,O+=$,c/=256,o-=8);for(u=u<<o|c,w+=o;w>0;t[r+O]=u&255,O+=$,u/=256,w-=8);t[r+O-$]|=k*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=base64Js,r=ieee754,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=ie,t.INSPECT_MAX_BYTES=50;const o=2147483647;t.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=s(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const y=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(y,f),y.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(!!c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(!!c.isBuffer(this))return this.byteOffset}});function u(y){if(y>o)throw new RangeError('The value "'+y+'" is invalid for option "size"');const f=new Uint8Array(y);return Object.setPrototypeOf(f,c.prototype),f}function c(y,f,g){if(typeof y=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(y)}return h(y,f,g)}c.poolSize=8192;function h(y,f,g){if(typeof y=="string")return E(y,f);if(ArrayBuffer.isView(y))return $(y);if(y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if(Ze(y,ArrayBuffer)||y&&Ze(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ze(y,SharedArrayBuffer)||y&&Ze(y.buffer,SharedArrayBuffer)))return k(y,f,g);if(typeof y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const A=y.valueOf&&y.valueOf();if(A!=null&&A!==y)return c.from(A,f,g);const I=B(y);if(I)return I;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return c.from(y[Symbol.toPrimitive]("string"),f,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}c.from=function(y,f,g){return h(y,f,g)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function w(y){if(typeof y!="number")throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function m(y,f,g){return w(y),y<=0?u(y):f!==void 0?typeof g=="string"?u(y).fill(f,g):u(y).fill(f):u(y)}c.alloc=function(y,f,g){return m(y,f,g)};function v(y){return w(y),u(y<0?0:j(y)|0)}c.allocUnsafe=function(y){return v(y)},c.allocUnsafeSlow=function(y){return v(y)};function E(y,f){if((typeof f!="string"||f==="")&&(f="utf8"),!c.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const g=se(y,f)|0;let A=u(g);const I=A.write(y,f);return I!==g&&(A=A.slice(0,I)),A}function O(y){const f=y.length<0?0:j(y.length)|0,g=u(f);for(let A=0;A<f;A+=1)g[A]=y[A]&255;return g}function $(y){if(Ze(y,Uint8Array)){const f=new Uint8Array(y);return k(f.buffer,f.byteOffset,f.byteLength)}return O(y)}function k(y,f,g){if(f<0||y.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<f+(g||0))throw new RangeError('"length" is outside of buffer bounds');let A;return f===void 0&&g===void 0?A=new Uint8Array(y):g===void 0?A=new Uint8Array(y,f):A=new Uint8Array(y,f,g),Object.setPrototypeOf(A,c.prototype),A}function B(y){if(c.isBuffer(y)){const f=j(y.length)|0,g=u(f);return g.length===0||y.copy(g,0,0,f),g}if(y.length!==void 0)return typeof y.length!="number"||ot(y.length)?u(0):O(y);if(y.type==="Buffer"&&Array.isArray(y.data))return O(y.data)}function j(y){if(y>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return y|0}function ie(y){return+y!=y&&(y=0),c.alloc(+y)}c.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==c.prototype},c.compare=function(f,g){if(Ze(f,Uint8Array)&&(f=c.from(f,f.offset,f.byteLength)),Ze(g,Uint8Array)&&(g=c.from(g,g.offset,g.byteLength)),!c.isBuffer(f)||!c.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===g)return 0;let A=f.length,I=g.length;for(let K=0,ue=Math.min(A,I);K<ue;++K)if(f[K]!==g[K]){A=f[K],I=g[K];break}return A<I?-1:I<A?1:0},c.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(f,g){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return c.alloc(0);let A;if(g===void 0)for(g=0,A=0;A<f.length;++A)g+=f[A].length;const I=c.allocUnsafe(g);let K=0;for(A=0;A<f.length;++A){let ue=f[A];if(Ze(ue,Uint8Array))K+ue.length>I.length?(c.isBuffer(ue)||(ue=c.from(ue)),ue.copy(I,K)):Uint8Array.prototype.set.call(I,ue,K);else if(c.isBuffer(ue))ue.copy(I,K);else throw new TypeError('"list" argument must be an Array of Buffers');K+=ue.length}return I};function se(y,f){if(c.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||Ze(y,ArrayBuffer))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);const g=y.length,A=arguments.length>2&&arguments[2]===!0;if(!A&&g===0)return 0;let I=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return we(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return De(y).length;default:if(I)return A?-1:we(y).length;f=(""+f).toLowerCase(),I=!0}}c.byteLength=se;function N(y,f,g){let A=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,f>>>=0,g<=f))return"";for(y||(y="utf8");;)switch(y){case"hex":return Bt(this,f,g);case"utf8":case"utf-8":return Ye(this,f,g);case"ascii":return at(this,f,g);case"latin1":case"binary":return Je(this,f,g);case"base64":return Ve(this,f,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ut(this,f,g);default:if(A)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),A=!0}}c.prototype._isBuffer=!0;function L(y,f,g){const A=y[f];y[f]=y[g],y[g]=A}c.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let g=0;g<f;g+=2)L(this,g,g+1);return this},c.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let g=0;g<f;g+=4)L(this,g,g+3),L(this,g+1,g+2);return this},c.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let g=0;g<f;g+=8)L(this,g,g+7),L(this,g+1,g+6),L(this,g+2,g+5),L(this,g+3,g+4);return this},c.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?Ye(this,0,f):N.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(f){if(!c.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:c.compare(this,f)===0},c.prototype.inspect=function(){let f="";const g=t.INSPECT_MAX_BYTES;return f=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(f+=" ... "),"<Buffer "+f+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(f,g,A,I,K){if(Ze(f,Uint8Array)&&(f=c.from(f,f.offset,f.byteLength)),!c.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(g===void 0&&(g=0),A===void 0&&(A=f?f.length:0),I===void 0&&(I=0),K===void 0&&(K=this.length),g<0||A>f.length||I<0||K>this.length)throw new RangeError("out of range index");if(I>=K&&g>=A)return 0;if(I>=K)return-1;if(g>=A)return 1;if(g>>>=0,A>>>=0,I>>>=0,K>>>=0,this===f)return 0;let ue=K-I,rt=A-g;const _t=Math.min(ue,rt),nt=this.slice(I,K),et=f.slice(g,A);for(let Ct=0;Ct<_t;++Ct)if(nt[Ct]!==et[Ct]){ue=nt[Ct],rt=et[Ct];break}return ue<rt?-1:rt<ue?1:0};function oe(y,f,g,A,I){if(y.length===0)return-1;if(typeof g=="string"?(A=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,ot(g)&&(g=I?0:y.length-1),g<0&&(g=y.length+g),g>=y.length){if(I)return-1;g=y.length-1}else if(g<0)if(I)g=0;else return-1;if(typeof f=="string"&&(f=c.from(f,A)),c.isBuffer(f))return f.length===0?-1:q(y,f,g,A,I);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?I?Uint8Array.prototype.indexOf.call(y,f,g):Uint8Array.prototype.lastIndexOf.call(y,f,g):q(y,[f],g,A,I);throw new TypeError("val must be string, number or Buffer")}function q(y,f,g,A,I){let K=1,ue=y.length,rt=f.length;if(A!==void 0&&(A=String(A).toLowerCase(),A==="ucs2"||A==="ucs-2"||A==="utf16le"||A==="utf-16le")){if(y.length<2||f.length<2)return-1;K=2,ue/=2,rt/=2,g/=2}function _t(et,Ct){return K===1?et[Ct]:et.readUInt16BE(Ct*K)}let nt;if(I){let et=-1;for(nt=g;nt<ue;nt++)if(_t(y,nt)===_t(f,et===-1?0:nt-et)){if(et===-1&&(et=nt),nt-et+1===rt)return et*K}else et!==-1&&(nt-=nt-et),et=-1}else for(g+rt>ue&&(g=ue-rt),nt=g;nt>=0;nt--){let et=!0;for(let Ct=0;Ct<rt;Ct++)if(_t(y,nt+Ct)!==_t(f,Ct)){et=!1;break}if(et)return nt}return-1}c.prototype.includes=function(f,g,A){return this.indexOf(f,g,A)!==-1},c.prototype.indexOf=function(f,g,A){return oe(this,f,g,A,!0)},c.prototype.lastIndexOf=function(f,g,A){return oe(this,f,g,A,!1)};function X(y,f,g,A){g=Number(g)||0;const I=y.length-g;A?(A=Number(A),A>I&&(A=I)):A=I;const K=f.length;A>K/2&&(A=K/2);let ue;for(ue=0;ue<A;++ue){const rt=parseInt(f.substr(ue*2,2),16);if(ot(rt))return ue;y[g+ue]=rt}return ue}function de(y,f,g,A){return Ge(we(f,y.length-g),y,g,A)}function _e(y,f,g,A){return Ge(Ee(f),y,g,A)}function xe(y,f,g,A){return Ge(De(f),y,g,A)}function We(y,f,g,A){return Ge(Z(f,y.length-g),y,g,A)}c.prototype.write=function(f,g,A,I){if(g===void 0)I="utf8",A=this.length,g=0;else if(A===void 0&&typeof g=="string")I=g,A=this.length,g=0;else if(isFinite(g))g=g>>>0,isFinite(A)?(A=A>>>0,I===void 0&&(I="utf8")):(I=A,A=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const K=this.length-g;if((A===void 0||A>K)&&(A=K),f.length>0&&(A<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");I||(I="utf8");let ue=!1;for(;;)switch(I){case"hex":return X(this,f,g,A);case"utf8":case"utf-8":return de(this,f,g,A);case"ascii":case"latin1":case"binary":return _e(this,f,g,A);case"base64":return xe(this,f,g,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return We(this,f,g,A);default:if(ue)throw new TypeError("Unknown encoding: "+I);I=(""+I).toLowerCase(),ue=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ve(y,f,g){return f===0&&g===y.length?e.fromByteArray(y):e.fromByteArray(y.slice(f,g))}function Ye(y,f,g){g=Math.min(y.length,g);const A=[];let I=f;for(;I<g;){const K=y[I];let ue=null,rt=K>239?4:K>223?3:K>191?2:1;if(I+rt<=g){let _t,nt,et,Ct;switch(rt){case 1:K<128&&(ue=K);break;case 2:_t=y[I+1],(_t&192)===128&&(Ct=(K&31)<<6|_t&63,Ct>127&&(ue=Ct));break;case 3:_t=y[I+1],nt=y[I+2],(_t&192)===128&&(nt&192)===128&&(Ct=(K&15)<<12|(_t&63)<<6|nt&63,Ct>2047&&(Ct<55296||Ct>57343)&&(ue=Ct));break;case 4:_t=y[I+1],nt=y[I+2],et=y[I+3],(_t&192)===128&&(nt&192)===128&&(et&192)===128&&(Ct=(K&15)<<18|(_t&63)<<12|(nt&63)<<6|et&63,Ct>65535&&Ct<1114112&&(ue=Ct))}}ue===null?(ue=65533,rt=1):ue>65535&&(ue-=65536,A.push(ue>>>10&1023|55296),ue=56320|ue&1023),A.push(ue),I+=rt}return kt(A)}const $t=4096;function kt(y){const f=y.length;if(f<=$t)return String.fromCharCode.apply(String,y);let g="",A=0;for(;A<f;)g+=String.fromCharCode.apply(String,y.slice(A,A+=$t));return g}function at(y,f,g){let A="";g=Math.min(y.length,g);for(let I=f;I<g;++I)A+=String.fromCharCode(y[I]&127);return A}function Je(y,f,g){let A="";g=Math.min(y.length,g);for(let I=f;I<g;++I)A+=String.fromCharCode(y[I]);return A}function Bt(y,f,g){const A=y.length;(!f||f<0)&&(f=0),(!g||g<0||g>A)&&(g=A);let I="";for(let K=f;K<g;++K)I+=Ft[y[K]];return I}function Ut(y,f,g){const A=y.slice(f,g);let I="";for(let K=0;K<A.length-1;K+=2)I+=String.fromCharCode(A[K]+A[K+1]*256);return I}c.prototype.slice=function(f,g){const A=this.length;f=~~f,g=g===void 0?A:~~g,f<0?(f+=A,f<0&&(f=0)):f>A&&(f=A),g<0?(g+=A,g<0&&(g=0)):g>A&&(g=A),g<f&&(g=f);const I=this.subarray(f,g);return Object.setPrototypeOf(I,c.prototype),I};function vt(y,f,g){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+f>g)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(f,g,A){f=f>>>0,g=g>>>0,A||vt(f,g,this.length);let I=this[f],K=1,ue=0;for(;++ue<g&&(K*=256);)I+=this[f+ue]*K;return I},c.prototype.readUintBE=c.prototype.readUIntBE=function(f,g,A){f=f>>>0,g=g>>>0,A||vt(f,g,this.length);let I=this[f+--g],K=1;for(;g>0&&(K*=256);)I+=this[f+--g]*K;return I},c.prototype.readUint8=c.prototype.readUInt8=function(f,g){return f=f>>>0,g||vt(f,1,this.length),this[f]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(f,g){return f=f>>>0,g||vt(f,2,this.length),this[f]|this[f+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(f,g){return f=f>>>0,g||vt(f,2,this.length),this[f]<<8|this[f+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(f,g){return f=f>>>0,g||vt(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(f,g){return f=f>>>0,g||vt(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},c.prototype.readBigUInt64LE=xt(function(f){f=f>>>0,Ae(f,"offset");const g=this[f],A=this[f+7];(g===void 0||A===void 0)&&ge(f,this.length-8);const I=g+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,K=this[++f]+this[++f]*2**8+this[++f]*2**16+A*2**24;return BigInt(I)+(BigInt(K)<<BigInt(32))}),c.prototype.readBigUInt64BE=xt(function(f){f=f>>>0,Ae(f,"offset");const g=this[f],A=this[f+7];(g===void 0||A===void 0)&&ge(f,this.length-8);const I=g*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],K=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+A;return(BigInt(I)<<BigInt(32))+BigInt(K)}),c.prototype.readIntLE=function(f,g,A){f=f>>>0,g=g>>>0,A||vt(f,g,this.length);let I=this[f],K=1,ue=0;for(;++ue<g&&(K*=256);)I+=this[f+ue]*K;return K*=128,I>=K&&(I-=Math.pow(2,8*g)),I},c.prototype.readIntBE=function(f,g,A){f=f>>>0,g=g>>>0,A||vt(f,g,this.length);let I=g,K=1,ue=this[f+--I];for(;I>0&&(K*=256);)ue+=this[f+--I]*K;return K*=128,ue>=K&&(ue-=Math.pow(2,8*g)),ue},c.prototype.readInt8=function(f,g){return f=f>>>0,g||vt(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},c.prototype.readInt16LE=function(f,g){f=f>>>0,g||vt(f,2,this.length);const A=this[f]|this[f+1]<<8;return A&32768?A|4294901760:A},c.prototype.readInt16BE=function(f,g){f=f>>>0,g||vt(f,2,this.length);const A=this[f+1]|this[f]<<8;return A&32768?A|4294901760:A},c.prototype.readInt32LE=function(f,g){return f=f>>>0,g||vt(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},c.prototype.readInt32BE=function(f,g){return f=f>>>0,g||vt(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},c.prototype.readBigInt64LE=xt(function(f){f=f>>>0,Ae(f,"offset");const g=this[f],A=this[f+7];(g===void 0||A===void 0)&&ge(f,this.length-8);const I=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(A<<24);return(BigInt(I)<<BigInt(32))+BigInt(g+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),c.prototype.readBigInt64BE=xt(function(f){f=f>>>0,Ae(f,"offset");const g=this[f],A=this[f+7];(g===void 0||A===void 0)&&ge(f,this.length-8);const I=(g<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(I)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+A)}),c.prototype.readFloatLE=function(f,g){return f=f>>>0,g||vt(f,4,this.length),r.read(this,f,!0,23,4)},c.prototype.readFloatBE=function(f,g){return f=f>>>0,g||vt(f,4,this.length),r.read(this,f,!1,23,4)},c.prototype.readDoubleLE=function(f,g){return f=f>>>0,g||vt(f,8,this.length),r.read(this,f,!0,52,8)},c.prototype.readDoubleBE=function(f,g){return f=f>>>0,g||vt(f,8,this.length),r.read(this,f,!1,52,8)};function be(y,f,g,A,I,K){if(!c.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>I||f<K)throw new RangeError('"value" argument is out of bounds');if(g+A>y.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(f,g,A,I){if(f=+f,g=g>>>0,A=A>>>0,!I){const rt=Math.pow(2,8*A)-1;be(this,f,g,A,rt,0)}let K=1,ue=0;for(this[g]=f&255;++ue<A&&(K*=256);)this[g+ue]=f/K&255;return g+A},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(f,g,A,I){if(f=+f,g=g>>>0,A=A>>>0,!I){const rt=Math.pow(2,8*A)-1;be(this,f,g,A,rt,0)}let K=A-1,ue=1;for(this[g+K]=f&255;--K>=0&&(ue*=256);)this[g+K]=f/ue&255;return g+A},c.prototype.writeUint8=c.prototype.writeUInt8=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,1,255,0),this[g]=f&255,g+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,2,65535,0),this[g]=f&255,this[g+1]=f>>>8,g+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,2,65535,0),this[g]=f>>>8,this[g+1]=f&255,g+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,4,4294967295,0),this[g+3]=f>>>24,this[g+2]=f>>>16,this[g+1]=f>>>8,this[g]=f&255,g+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,4,4294967295,0),this[g]=f>>>24,this[g+1]=f>>>16,this[g+2]=f>>>8,this[g+3]=f&255,g+4};function je(y,f,g,A,I){ae(f,A,I,y,g,7);let K=Number(f&BigInt(4294967295));y[g++]=K,K=K>>8,y[g++]=K,K=K>>8,y[g++]=K,K=K>>8,y[g++]=K;let ue=Number(f>>BigInt(32)&BigInt(4294967295));return y[g++]=ue,ue=ue>>8,y[g++]=ue,ue=ue>>8,y[g++]=ue,ue=ue>>8,y[g++]=ue,g}function he(y,f,g,A,I){ae(f,A,I,y,g,7);let K=Number(f&BigInt(4294967295));y[g+7]=K,K=K>>8,y[g+6]=K,K=K>>8,y[g+5]=K,K=K>>8,y[g+4]=K;let ue=Number(f>>BigInt(32)&BigInt(4294967295));return y[g+3]=ue,ue=ue>>8,y[g+2]=ue,ue=ue>>8,y[g+1]=ue,ue=ue>>8,y[g]=ue,g+8}c.prototype.writeBigUInt64LE=xt(function(f,g=0){return je(this,f,g,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=xt(function(f,g=0){return he(this,f,g,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(f,g,A,I){if(f=+f,g=g>>>0,!I){const _t=Math.pow(2,8*A-1);be(this,f,g,A,_t-1,-_t)}let K=0,ue=1,rt=0;for(this[g]=f&255;++K<A&&(ue*=256);)f<0&&rt===0&&this[g+K-1]!==0&&(rt=1),this[g+K]=(f/ue>>0)-rt&255;return g+A},c.prototype.writeIntBE=function(f,g,A,I){if(f=+f,g=g>>>0,!I){const _t=Math.pow(2,8*A-1);be(this,f,g,A,_t-1,-_t)}let K=A-1,ue=1,rt=0;for(this[g+K]=f&255;--K>=0&&(ue*=256);)f<0&&rt===0&&this[g+K+1]!==0&&(rt=1),this[g+K]=(f/ue>>0)-rt&255;return g+A},c.prototype.writeInt8=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,1,127,-128),f<0&&(f=255+f+1),this[g]=f&255,g+1},c.prototype.writeInt16LE=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,2,32767,-32768),this[g]=f&255,this[g+1]=f>>>8,g+2},c.prototype.writeInt16BE=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,2,32767,-32768),this[g]=f>>>8,this[g+1]=f&255,g+2},c.prototype.writeInt32LE=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,4,2147483647,-2147483648),this[g]=f&255,this[g+1]=f>>>8,this[g+2]=f>>>16,this[g+3]=f>>>24,g+4},c.prototype.writeInt32BE=function(f,g,A){return f=+f,g=g>>>0,A||be(this,f,g,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[g]=f>>>24,this[g+1]=f>>>16,this[g+2]=f>>>8,this[g+3]=f&255,g+4},c.prototype.writeBigInt64LE=xt(function(f,g=0){return je(this,f,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=xt(function(f,g=0){return he(this,f,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function st(y,f,g,A,I,K){if(g+A>y.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function St(y,f,g,A,I){return f=+f,g=g>>>0,I||st(y,f,g,4),r.write(y,f,g,A,23,4),g+4}c.prototype.writeFloatLE=function(f,g,A){return St(this,f,g,!0,A)},c.prototype.writeFloatBE=function(f,g,A){return St(this,f,g,!1,A)};function It(y,f,g,A,I){return f=+f,g=g>>>0,I||st(y,f,g,8),r.write(y,f,g,A,52,8),g+8}c.prototype.writeDoubleLE=function(f,g,A){return It(this,f,g,!0,A)},c.prototype.writeDoubleBE=function(f,g,A){return It(this,f,g,!1,A)},c.prototype.copy=function(f,g,A,I){if(!c.isBuffer(f))throw new TypeError("argument should be a Buffer");if(A||(A=0),!I&&I!==0&&(I=this.length),g>=f.length&&(g=f.length),g||(g=0),I>0&&I<A&&(I=A),I===A||f.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("sourceEnd out of bounds");I>this.length&&(I=this.length),f.length-g<I-A&&(I=f.length-g+A);const K=I-A;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,A,I):Uint8Array.prototype.set.call(f,this.subarray(A,I),g),K},c.prototype.fill=function(f,g,A,I){if(typeof f=="string"){if(typeof g=="string"?(I=g,g=0,A=this.length):typeof A=="string"&&(I=A,A=this.length),I!==void 0&&typeof I!="string")throw new TypeError("encoding must be a string");if(typeof I=="string"&&!c.isEncoding(I))throw new TypeError("Unknown encoding: "+I);if(f.length===1){const ue=f.charCodeAt(0);(I==="utf8"&&ue<128||I==="latin1")&&(f=ue)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(g<0||this.length<g||this.length<A)throw new RangeError("Out of range index");if(A<=g)return this;g=g>>>0,A=A===void 0?this.length:A>>>0,f||(f=0);let K;if(typeof f=="number")for(K=g;K<A;++K)this[K]=f;else{const ue=c.isBuffer(f)?f:c.from(f,I),rt=ue.length;if(rt===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(K=0;K<A-g;++K)this[K+g]=ue[K%rt]}return this};const it={};function At(y,f,g){it[y]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${y}]`,this.stack,delete this.name}get code(){return y}set code(I){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:I,writable:!0})}toString(){return`${this.name} [${y}]: ${this.message}`}}}At("ERR_BUFFER_OUT_OF_BOUNDS",function(y){return y?`${y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),At("ERR_INVALID_ARG_TYPE",function(y,f){return`The "${y}" argument must be of type number. Received type ${typeof f}`},TypeError),At("ERR_OUT_OF_RANGE",function(y,f,g){let A=`The value of "${y}" is out of range.`,I=g;return Number.isInteger(g)&&Math.abs(g)>2**32?I=P(String(g)):typeof g=="bigint"&&(I=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(I=P(I)),I+="n"),A+=` It must be ${f}. Received ${I}`,A},RangeError);function P(y){let f="",g=y.length;const A=y[0]==="-"?1:0;for(;g>=A+4;g-=3)f=`_${y.slice(g-3,g)}${f}`;return`${y.slice(0,g)}${f}`}function W(y,f,g){Ae(f,"offset"),(y[f]===void 0||y[f+g]===void 0)&&ge(f,y.length-(g+1))}function ae(y,f,g,A,I,K){if(y>g||y<f){const ue=typeof f=="bigint"?"n":"";let rt;throw K>3?f===0||f===BigInt(0)?rt=`>= 0${ue} and < 2${ue} ** ${(K+1)*8}${ue}`:rt=`>= -(2${ue} ** ${(K+1)*8-1}${ue}) and < 2 ** ${(K+1)*8-1}${ue}`:rt=`>= ${f}${ue} and <= ${g}${ue}`,new it.ERR_OUT_OF_RANGE("value",rt,y)}W(A,I,K)}function Ae(y,f){if(typeof y!="number")throw new it.ERR_INVALID_ARG_TYPE(f,"number",y)}function ge(y,f,g){throw Math.floor(y)!==y?(Ae(y,g),new it.ERR_OUT_OF_RANGE(g||"offset","an integer",y)):f<0?new it.ERR_BUFFER_OUT_OF_BOUNDS:new it.ERR_OUT_OF_RANGE(g||"offset",`>= ${g?1:0} and <= ${f}`,y)}const Te=/[^+/0-9A-Za-z-_]/g;function Ie(y){if(y=y.split("=")[0],y=y.trim().replace(Te,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function we(y,f){f=f||1/0;let g;const A=y.length;let I=null;const K=[];for(let ue=0;ue<A;++ue){if(g=y.charCodeAt(ue),g>55295&&g<57344){if(!I){if(g>56319){(f-=3)>-1&&K.push(239,191,189);continue}else if(ue+1===A){(f-=3)>-1&&K.push(239,191,189);continue}I=g;continue}if(g<56320){(f-=3)>-1&&K.push(239,191,189),I=g;continue}g=(I-55296<<10|g-56320)+65536}else I&&(f-=3)>-1&&K.push(239,191,189);if(I=null,g<128){if((f-=1)<0)break;K.push(g)}else if(g<2048){if((f-=2)<0)break;K.push(g>>6|192,g&63|128)}else if(g<65536){if((f-=3)<0)break;K.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((f-=4)<0)break;K.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return K}function Ee(y){const f=[];for(let g=0;g<y.length;++g)f.push(y.charCodeAt(g)&255);return f}function Z(y,f){let g,A,I;const K=[];for(let ue=0;ue<y.length&&!((f-=2)<0);++ue)g=y.charCodeAt(ue),A=g>>8,I=g%256,K.push(I),K.push(A);return K}function De(y){return e.toByteArray(Ie(y))}function Ge(y,f,g,A){let I;for(I=0;I<A&&!(I+g>=f.length||I>=y.length);++I)f[I+g]=y[I];return I}function Ze(y,f){return y instanceof f||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===f.name}function ot(y){return y!==y}const Ft=function(){const y="0123456789abcdef",f=new Array(256);for(let g=0;g<16;++g){const A=g*16;for(let I=0;I<16;++I)f[A+I]=y[g]+y[I]}return f}();function xt(y){return typeof BigInt>"u"?Nt:y}function Nt(){throw new Error("BigInt not supported")}})(buffer);let lazy=null;var textEndec$1=function(){return lazy===null&&(lazy={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),lazy},formats$2={},encoding={};const ModuleError$8=moduleError,formats$1=new Set(["buffer","view","utf8"]);class Encoding$2{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!formats$1.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}encoding.Encoding=Encoding$2;const{Buffer:Buffer$2}=buffer||{},{Encoding:Encoding$1}=encoding,textEndec=textEndec$1;class BufferFormat$2 extends Encoding$1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new ViewFormat$2({encode:this.encode,decode:e=>this.decode(Buffer$2.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}}class ViewFormat$2 extends Encoding$1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>{const r=this.encode(e);return Buffer$2.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}}class UTF8Format$2 extends Encoding$1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>Buffer$2.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:e,textDecoder:r}=textEndec();return new ViewFormat$2({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(r.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}}formats$2.BufferFormat=BufferFormat$2;formats$2.ViewFormat=ViewFormat$2;formats$2.UTF8Format=UTF8Format$2;const{Buffer:Buffer$1}=buffer||{Buffer:{isBuffer:()=>!1}},{textEncoder:textEncoder$1,textDecoder}=textEndec$1(),{BufferFormat:BufferFormat$1,ViewFormat:ViewFormat$1,UTF8Format:UTF8Format$1}=formats$2,identity=t=>t;encodings$1.utf8=new UTF8Format$1({encode:function(t){return Buffer$1.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?textDecoder.decode(t):String(t)},decode:identity,name:"utf8",createViewTranscoder(){return new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:textEncoder$1.encode(t)},decode:function(t){return textDecoder.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new BufferFormat$1({encode:function(t){return Buffer$1.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer$1.from(t.buffer,t.byteOffset,t.byteLength):Buffer$1.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});encodings$1.json=new UTF8Format$1({encode:JSON.stringify,decode:JSON.parse,name:"json"});encodings$1.buffer=new BufferFormat$1({encode:function(t){return Buffer$1.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer$1.from(t.buffer,t.byteOffset,t.byteLength):Buffer$1.from(String(t),"utf8")},decode:identity,name:"buffer",createViewTranscoder(){return new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:Buffer$1.from(String(t),"utf8")},decode:function(t){return Buffer$1.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});encodings$1.view=new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:textEncoder$1.encode(t)},decode:identity,name:"view",createBufferTranscoder(){return new BufferFormat$1({encode:function(t){return Buffer$1.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer$1.from(t.buffer,t.byteOffset,t.byteLength):Buffer$1.from(String(t),"utf8")},decode:identity,name:`${this.name}+buffer`})}});encodings$1.hex=new BufferFormat$1({encode:function(t){return Buffer$1.isBuffer(t)?t:Buffer$1.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});encodings$1.base64=new BufferFormat$1({encode:function(t){return Buffer$1.isBuffer(t)?t:Buffer$1.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"});const ModuleError$7=moduleError,encodings=encodings$1,{Encoding}=encoding,{BufferFormat,ViewFormat,UTF8Format}=formats$2,kFormats=Symbol("formats"),kEncodings=Symbol("encodings"),validFormats=new Set(["buffer","view","utf8"]);class Transcoder$1{constructor(e){if(Array.isArray(e)){if(!e.every(r=>validFormats.has(r)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[kEncodings]=new Map,this[kFormats]=new Set(e);for(const r in encodings)try{this.encoding(r)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[kEncodings].values()))}encoding(e){let r=this[kEncodings].get(e);if(r===void 0){if(typeof e=="string"&&e!==""){if(r=lookup[e],!r)throw new ModuleError$7(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");r=from$1(e)}const{name:n,format:o}=r;if(!this[kFormats].has(o))if(this[kFormats].has("view"))r=r.createViewTranscoder();else if(this[kFormats].has("buffer"))r=r.createBufferTranscoder();else if(this[kFormats].has("utf8"))r=r.createUTF8Transcoder();else throw new ModuleError$7(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const s of[e,n,r.name,r.commonName])this[kEncodings].set(s,r)}return r}}levelTranscoder.Transcoder=Transcoder$1;function from$1(t){if(t instanceof Encoding)return t;const e="type"in t&&typeof t.type=="string"?t.type:void 0,r=t.name||e||`anonymous-${anonymousCount++}`;switch(detectFormat(t)){case"view":return new ViewFormat({...t,name:r});case"utf8":return new UTF8Format({...t,name:r});case"buffer":return new BufferFormat({...t,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function detectFormat(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}const aliases={binary:encodings.buffer,"utf-8":encodings.utf8},lookup={...encodings,...aliases};let anonymousCount=0;var events={exports:{}},R$1=typeof Reflect=="object"?Reflect:null,ReflectApply=R$1&&typeof R$1.apply=="function"?R$1.apply:function t(e,r,n){return Function.prototype.apply.call(e,r,n)},ReflectOwnKeys;R$1&&typeof R$1.ownKeys=="function"?ReflectOwnKeys=R$1.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(t){console&&console.warn&&console.warn(t)}var NumberIsNaN=Number.isNaN||function t(e){return e!==e};function EventEmitter$1(){EventEmitter$1.init.call(this)}events.exports=EventEmitter$1;events.exports.once=once;EventEmitter$1.EventEmitter=EventEmitter$1;EventEmitter$1.prototype._events=void 0;EventEmitter$1.prototype._eventsCount=0;EventEmitter$1.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(EventEmitter$1,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(t){if(typeof t!="number"||t<0||NumberIsNaN(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");defaultMaxListeners=t}});EventEmitter$1.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$1.prototype.setMaxListeners=function t(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(t){return t._maxListeners===void 0?EventEmitter$1.defaultMaxListeners:t._maxListeners}EventEmitter$1.prototype.getMaxListeners=function t(){return _getMaxListeners(this)};EventEmitter$1.prototype.emit=function t(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var o=e==="error",s=this._events;if(s!==void 0)o=o&&s.error===void 0;else if(!o)return!1;if(o){var u;if(r.length>0&&(u=r[0]),u instanceof Error)throw u;var c=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw c.context=u,c}var h=s[e];if(h===void 0)return!1;if(typeof h=="function")ReflectApply(h,this,r);else for(var w=h.length,m=arrayClone(h,w),n=0;n<w;++n)ReflectApply(m[n],this,r);return!0};function _addListener(t,e,r,n){var o,s,u;if(checkListener(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),u=s[e]),u===void 0)u=s[e]=r,++t._eventsCount;else if(typeof u=="function"?u=s[e]=n?[r,u]:[u,r]:n?u.unshift(r):u.push(r),o=_getMaxListeners(t),o>0&&u.length>o&&!u.warned){u.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=u.length,ProcessEmitWarning(c)}return t}EventEmitter$1.prototype.addListener=function t(e,r){return _addListener(this,e,r,!1)};EventEmitter$1.prototype.on=EventEmitter$1.prototype.addListener;EventEmitter$1.prototype.prependListener=function t(e,r){return _addListener(this,e,r,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},o=onceWrapper.bind(n);return o.listener=r,n.wrapFn=o,o}EventEmitter$1.prototype.once=function t(e,r){return checkListener(r),this.on(e,_onceWrap(this,e,r)),this};EventEmitter$1.prototype.prependOnceListener=function t(e,r){return checkListener(r),this.prependListener(e,_onceWrap(this,e,r)),this};EventEmitter$1.prototype.removeListener=function t(e,r){var n,o,s,u,c;if(checkListener(r),o=this._events,o===void 0)return this;if(n=o[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,u=n.length-1;u>=0;u--)if(n[u]===r||n[u].listener===r){c=n[u].listener,s=u;break}if(s<0)return this;s===0?n.shift():spliceOne(n,s),n.length===1&&(o[e]=n[0]),o.removeListener!==void 0&&this.emit("removeListener",e,c||r)}return this};EventEmitter$1.prototype.off=EventEmitter$1.prototype.removeListener;EventEmitter$1.prototype.removeAllListeners=function t(e){var r,n,o;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),u;for(o=0;o<s.length;++o)u=s[o],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(o=r.length-1;o>=0;o--)this.removeListener(e,r[o]);return this};function _listeners(t,e,r){var n=t._events;if(n===void 0)return[];var o=n[e];return o===void 0?[]:typeof o=="function"?r?[o.listener||o]:[o]:r?unwrapListeners(o):arrayClone(o,o.length)}EventEmitter$1.prototype.listeners=function t(e){return _listeners(this,e,!0)};EventEmitter$1.prototype.rawListeners=function t(e){return _listeners(this,e,!1)};EventEmitter$1.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):listenerCount.call(t,e)};EventEmitter$1.prototype.listenerCount=listenerCount;function listenerCount(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}EventEmitter$1.prototype.eventNames=function t(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function spliceOne(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function unwrapListeners(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function once(t,e){return new Promise(function(r,n){function o(u){t.removeListener(e,s),n(u)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",o),r([].slice.call(arguments))}eventTargetAgnosticAddListener(t,e,s,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(t,o,{once:!0})})}function addErrorHandlerIfEventEmitter(t,e,r){typeof t.on=="function"&&eventTargetAgnosticAddListener(t,"error",e,r)}function eventTargetAgnosticAddListener(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function o(s){n.once&&t.removeEventListener(e,o),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var catering={},nextTickBrowser$1=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t),nextTick=nextTickBrowser$1;catering.fromCallback=function(t,e){if(t===void 0){var r=new Promise(function(n,o){t=function(s,u){s?o(s):n(u)}});t[e!==void 0?e:"promise"]=r}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};catering.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){nextTick(()=>e(null,r))}).catch(function(r){nextTick(()=>e(r))})};var abstractIterator={},common={};common.getCallback=function(t,e){return typeof t=="function"?t:e};common.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}};const{fromCallback:fromCallback$3}=catering,ModuleError$6=moduleError,{getOptions:getOptions$2,getCallback:getCallback$2}=common,kPromise$3=Symbol("promise"),kCallback$1=Symbol("callback"),kWorking=Symbol("working"),kHandleOne$1=Symbol("handleOne"),kHandleMany$1=Symbol("handleMany"),kAutoClose=Symbol("autoClose"),kFinishWork=Symbol("finishWork"),kReturnMany=Symbol("returnMany"),kClosing=Symbol("closing"),kHandleClose=Symbol("handleClose"),kClosed=Symbol("closed"),kCloseCallbacks$1=Symbol("closeCallbacks"),kKeyEncoding$1=Symbol("keyEncoding"),kValueEncoding$1=Symbol("valueEncoding"),kAbortOnClose=Symbol("abortOnClose"),kLegacy=Symbol("legacy"),kKeys=Symbol("keys"),kValues=Symbol("values"),kLimit=Symbol("limit"),kCount=Symbol("count"),emptyOptions$1=Object.freeze({}),noop$1=()=>{};let warnedEnd=!1;class CommonIterator{constructor(e,r,n){if(typeof e!="object"||e===null){const o=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${o}`)}if(typeof r!="object"||r===null)throw new TypeError("The second argument must be an options object");this[kClosed]=!1,this[kCloseCallbacks$1]=[],this[kWorking]=!1,this[kClosing]=!1,this[kAutoClose]=!1,this[kCallback$1]=null,this[kHandleOne$1]=this[kHandleOne$1].bind(this),this[kHandleMany$1]=this[kHandleMany$1].bind(this),this[kHandleClose]=this[kHandleClose].bind(this),this[kKeyEncoding$1]=r[kKeyEncoding$1],this[kValueEncoding$1]=r[kValueEncoding$1],this[kLegacy]=n,this[kLimit]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[kCount]=0,this[kAbortOnClose]=!!r.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[kCount]}get limit(){return this[kLimit]}next(e){let r;if(e===void 0)r=new Promise((n,o)=>{e=(s,u,c)=>{s?o(s):this[kLegacy]?u===void 0&&c===void 0?n():n([u,c]):n(u)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[kClosing]?this.nextTick(e,new ModuleError$6("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(e,new ModuleError$6("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=e,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleOne$1],null):this._next(this[kHandleOne$1])),r}_next(e){this.nextTick(e)}nextv(e,r,n){return n=getCallback$2(r,n),n=fromCallback$3(n,kPromise$3),r=getOptions$2(r,emptyOptions$1),Number.isInteger(e)?(this[kClosing]?this.nextTick(n,new ModuleError$6("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(n,new ModuleError$6("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[kLimit]<1/0&&(e=Math.min(e,this[kLimit]-this[kCount])),this[kWorking]=!0,this[kCallback$1]=n,e<=0?this.nextTick(this[kHandleMany$1],null,[]):this._nextv(e,r,this[kHandleMany$1])),n[kPromise$3]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[kPromise$3])}_nextv(e,r,n){const o=[],s=(u,c,h)=>{if(u)return n(u);if(this[kLegacy]?c===void 0&&h===void 0:c===void 0)return n(null,o);o.push(this[kLegacy]?[c,h]:c),o.length===e?n(null,o):this._next(s)};this._next(s)}all(e,r){return r=getCallback$2(e,r),r=fromCallback$3(r,kPromise$3),e=getOptions$2(e,emptyOptions$1),this[kClosing]?this.nextTick(r,new ModuleError$6("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(r,new ModuleError$6("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=r,this[kAutoClose]=!0,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleMany$1],null,[]):this._all(e,this[kHandleMany$1])),r[kPromise$3]}_all(e,r){let n=this[kCount];const o=[],s=()=>{const c=this[kLimit]<1/0?Math.min(1e3,this[kLimit]-n):1e3;c<=0?this.nextTick(r,null,o):this._nextv(c,emptyOptions$1,u)},u=(c,h)=>{c?r(c):h.length===0?r(null,o):(o.push.apply(o,h),n+=h.length,s())};s()}[kFinishWork](){const e=this[kCallback$1];return this[kAbortOnClose]&&e===null?noop$1:(this[kWorking]=!1,this[kCallback$1]=null,this[kClosing]&&this._close(this[kHandleClose]),e)}[kReturnMany](e,r,n){this[kAutoClose]?this.close(e.bind(null,r,n)):e(r,n)}seek(e,r){if(r=getOptions$2(r,emptyOptions$1),!this[kClosing]){if(this[kWorking])throw new ModuleError$6("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const n=this.db.keyEncoding(r.keyEncoding||this[kKeyEncoding$1]),o=n.format;r.keyEncoding!==o&&(r={...r,keyEncoding:o});const s=this.db.prefixKey(n.encode(e),o);this._seek(s,r)}}}_seek(e,r){throw new ModuleError$6("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=fromCallback$3(e,kPromise$3),this[kClosed]?this.nextTick(e):this[kClosing]?this[kCloseCallbacks$1].push(e):(this[kClosing]=!0,this[kCloseCallbacks$1].push(e),this[kWorking]?this[kAbortOnClose]&&this[kFinishWork]()(new ModuleError$6("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[kHandleClose])),e[kPromise$3]}_close(e){this.nextTick(e)}[kHandleClose](){this[kClosed]=!0,this.db.detachResource(this);const e=this[kCloseCallbacks$1];this[kCloseCallbacks$1]=[];for(const r of e)r()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[kClosed]||await this.close()}}}class AbstractIterator$3 extends CommonIterator{constructor(e,r){super(e,r,!0),this[kKeys]=r.keys!==!1,this[kValues]=r.values!==!1}[kHandleOne$1](e,r,n){const o=this[kFinishWork]();if(e)return o(e);try{r=this[kKeys]&&r!==void 0?this[kKeyEncoding$1].decode(r):void 0,n=this[kValues]&&n!==void 0?this[kValueEncoding$1].decode(n):void 0}catch(s){return o(new IteratorDecodeError("entry",s))}r===void 0&&n===void 0||this[kCount]++,o(null,r,n)}[kHandleMany$1](e,r){const n=this[kFinishWork]();if(e)return this[kReturnMany](n,e);try{for(const o of r){const s=o[0],u=o[1];o[0]=this[kKeys]&&s!==void 0?this[kKeyEncoding$1].decode(s):void 0,o[1]=this[kValues]&&u!==void 0?this[kValueEncoding$1].decode(u):void 0}}catch(o){return this[kReturnMany](n,new IteratorDecodeError("entries",o))}this[kCount]+=r.length,this[kReturnMany](n,null,r)}end(e){return!warnedEnd&&typeof console<"u"&&(warnedEnd=!0,console.warn(new ModuleError$6("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}}class AbstractKeyIterator$2 extends CommonIterator{constructor(e,r){super(e,r,!1)}[kHandleOne$1](e,r){const n=this[kFinishWork]();if(e)return n(e);try{r=r!==void 0?this[kKeyEncoding$1].decode(r):void 0}catch(o){return n(new IteratorDecodeError("key",o))}r!==void 0&&this[kCount]++,n(null,r)}[kHandleMany$1](e,r){const n=this[kFinishWork]();if(e)return this[kReturnMany](n,e);try{for(let o=0;o<r.length;o++){const s=r[o];r[o]=s!==void 0?this[kKeyEncoding$1].decode(s):void 0}}catch(o){return this[kReturnMany](n,new IteratorDecodeError("keys",o))}this[kCount]+=r.length,this[kReturnMany](n,null,r)}}class AbstractValueIterator$2 extends CommonIterator{constructor(e,r){super(e,r,!1)}[kHandleOne$1](e,r){const n=this[kFinishWork]();if(e)return n(e);try{r=r!==void 0?this[kValueEncoding$1].decode(r):void 0}catch(o){return n(new IteratorDecodeError("value",o))}r!==void 0&&this[kCount]++,n(null,r)}[kHandleMany$1](e,r){const n=this[kFinishWork]();if(e)return this[kReturnMany](n,e);try{for(let o=0;o<r.length;o++){const s=r[o];r[o]=s!==void 0?this[kValueEncoding$1].decode(s):void 0}}catch(o){return this[kReturnMany](n,new IteratorDecodeError("values",o))}this[kCount]+=r.length,this[kReturnMany](n,null,r)}}class IteratorDecodeError extends ModuleError$6{constructor(e,r){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:r})}}for(const t of["_ended property","_nexting property","_end method"])Object.defineProperty(AbstractIterator$3.prototype,t.split(" ")[0],{get(){throw new ModuleError$6(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ModuleError$6(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});AbstractIterator$3.keyEncoding=kKeyEncoding$1;AbstractIterator$3.valueEncoding=kValueEncoding$1;abstractIterator.AbstractIterator=AbstractIterator$3;abstractIterator.AbstractKeyIterator=AbstractKeyIterator$2;abstractIterator.AbstractValueIterator=AbstractValueIterator$2;var defaultKvIterator={};const{AbstractKeyIterator:AbstractKeyIterator$1,AbstractValueIterator:AbstractValueIterator$1}=abstractIterator,kIterator=Symbol("iterator"),kCallback=Symbol("callback"),kHandleOne=Symbol("handleOne"),kHandleMany=Symbol("handleMany");class DefaultKeyIterator$1 extends AbstractKeyIterator$1{constructor(e,r){super(e,r),this[kIterator]=e.iterator({...r,keys:!0,values:!1}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}}class DefaultValueIterator$1 extends AbstractValueIterator$1{constructor(e,r){super(e,r),this[kIterator]=e.iterator({...r,keys:!1,values:!0}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}}for(const t of[DefaultKeyIterator$1,DefaultValueIterator$1]){const e=t===DefaultKeyIterator$1,r=e?n=>n[0]:n=>n[1];t.prototype._next=function(n){this[kCallback]=n,this[kIterator].next(this[kHandleOne])},t.prototype[kHandleOne]=function(n,o,s){const u=this[kCallback];n?u(n):u(null,e?o:s)},t.prototype._nextv=function(n,o,s){this[kCallback]=s,this[kIterator].nextv(n,o,this[kHandleMany])},t.prototype._all=function(n,o){this[kCallback]=o,this[kIterator].all(n,this[kHandleMany])},t.prototype[kHandleMany]=function(n,o){const s=this[kCallback];n?s(n):s(null,o.map(r))},t.prototype._seek=function(n,o){this[kIterator].seek(n,o)},t.prototype._close=function(n){this[kIterator].close(n)}}defaultKvIterator.DefaultKeyIterator=DefaultKeyIterator$1;defaultKvIterator.DefaultValueIterator=DefaultValueIterator$1;var deferredIterator={};const{AbstractIterator:AbstractIterator$2,AbstractKeyIterator,AbstractValueIterator}=abstractIterator,ModuleError$5=moduleError,kNut=Symbol("nut"),kUndefer$1=Symbol("undefer"),kFactory=Symbol("factory");class DeferredIterator$1 extends AbstractIterator$2{constructor(e,r){super(e,r),this[kNut]=null,this[kFactory]=()=>e.iterator(r),this.db.defer(()=>this[kUndefer$1]())}}class DeferredKeyIterator$1 extends AbstractKeyIterator{constructor(e,r){super(e,r),this[kNut]=null,this[kFactory]=()=>e.keys(r),this.db.defer(()=>this[kUndefer$1]())}}class DeferredValueIterator$1 extends AbstractValueIterator{constructor(e,r){super(e,r),this[kNut]=null,this[kFactory]=()=>e.values(r),this.db.defer(()=>this[kUndefer$1]())}}for(const t of[DeferredIterator$1,DeferredKeyIterator$1,DeferredValueIterator$1])t.prototype[kUndefer$1]=function(){this.db.status==="open"&&(this[kNut]=this[kFactory]())},t.prototype._next=function(e){this[kNut]!==null?this[kNut].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new ModuleError$5("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,r,n){this[kNut]!==null?this[kNut].nextv(e,r,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,r,n)):this.nextTick(n,new ModuleError$5("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,r){this[kNut]!==null?this[kNut].all(r):this.db.status==="opening"?this.db.defer(()=>this._all(e,r)):this.nextTick(r,new ModuleError$5("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,r){this[kNut]!==null?this[kNut]._seek(e,r):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,r))},t.prototype._close=function(e){this[kNut]!==null?this[kNut].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};deferredIterator.DeferredIterator=DeferredIterator$1;deferredIterator.DeferredKeyIterator=DeferredKeyIterator$1;deferredIterator.DeferredValueIterator=DeferredValueIterator$1;var defaultChainedBatch={},abstractChainedBatch={};const{fromCallback:fromCallback$2}=catering,ModuleError$4=moduleError,{getCallback:getCallback$1,getOptions:getOptions$1}=common,kPromise$2=Symbol("promise"),kStatus$1=Symbol("status"),kOperations$1=Symbol("operations"),kFinishClose=Symbol("finishClose"),kCloseCallbacks=Symbol("closeCallbacks");class AbstractChainedBatch$1{constructor(e){if(typeof e!="object"||e===null){const r=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${r}`)}this[kOperations$1]=[],this[kCloseCallbacks]=[],this[kStatus$1]="open",this[kFinishClose]=this[kFinishClose].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[kOperations$1].length}put(e,r,n){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const o=this.db._checkKey(e)||this.db._checkValue(r);if(o)throw o;const s=n&&n.sublevel!=null?n.sublevel:this.db,u=n,c=s.keyEncoding(n&&n.keyEncoding),h=s.valueEncoding(n&&n.valueEncoding),w=c.format;n={...n,keyEncoding:w,valueEncoding:h.format},s!==this.db&&(n.sublevel=null);const m=s.prefixKey(c.encode(e),w),v=h.encode(r);return this._put(m,v,n),this[kOperations$1].push({...u,type:"put",key:e,value:r}),this}_put(e,r,n){}del(e,r){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const n=this.db._checkKey(e);if(n)throw n;const o=r&&r.sublevel!=null?r.sublevel:this.db,s=r,u=o.keyEncoding(r&&r.keyEncoding),c=u.format;return r={...r,keyEncoding:c},o!==this.db&&(r.sublevel=null),this._del(o.prefixKey(u.encode(e),c),r),this[kOperations$1].push({...s,type:"del",key:e}),this}_del(e,r){}clear(){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[kOperations$1]=[],this}_clear(){}write(e,r){return r=getCallback$1(e,r),r=fromCallback$2(r,kPromise$2),e=getOptions$1(e),this[kStatus$1]!=="open"?this.nextTick(r,new ModuleError$4("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(r):(this[kStatus$1]="writing",this._write(e,n=>{this[kStatus$1]="closing",this[kCloseCallbacks].push(()=>r(n)),n||this.db.emit("batch",this[kOperations$1]),this._close(this[kFinishClose])})),r[kPromise$2]}_write(e,r){}close(e){return e=fromCallback$2(e,kPromise$2),this[kStatus$1]==="closing"?this[kCloseCallbacks].push(e):this[kStatus$1]==="closed"?this.nextTick(e):(this[kCloseCallbacks].push(e),this[kStatus$1]!=="writing"&&(this[kStatus$1]="closing",this._close(this[kFinishClose]))),e[kPromise$2]}_close(e){this.nextTick(e)}[kFinishClose](){this[kStatus$1]="closed",this.db.detachResource(this);const e=this[kCloseCallbacks];this[kCloseCallbacks]=[];for(const r of e)r()}}abstractChainedBatch.AbstractChainedBatch=AbstractChainedBatch$1;const{AbstractChainedBatch}=abstractChainedBatch,ModuleError$3=moduleError,kEncoded=Symbol("encoded");class DefaultChainedBatch$1 extends AbstractChainedBatch{constructor(e){super(e),this[kEncoded]=[]}_put(e,r,n){this[kEncoded].push({...n,type:"put",key:e,value:r})}_del(e,r){this[kEncoded].push({...r,type:"del",key:e})}_clear(){this[kEncoded]=[]}_write(e,r){this.db.status==="opening"?this.db.defer(()=>this._write(e,r)):this.db.status==="open"?this[kEncoded].length===0?this.nextTick(r):this.db._batch(this[kEncoded],e,r):this.nextTick(r,new ModuleError$3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}defaultChainedBatch.DefaultChainedBatch=DefaultChainedBatch$1;const ModuleError$2=moduleError,hasOwnProperty=Object.prototype.hasOwnProperty,rangeOptions$1=new Set(["lt","lte","gt","gte"]);var rangeOptions_1=function(t,e){const r={};for(const n in t)if(!!hasOwnProperty.call(t,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new ModuleError$2(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new ModuleError$2("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});rangeOptions$1.has(n)?r[n]=e.encode(t[n]):r[n]=t[n]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let promise;var queueMicrotask_1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:commonjsGlobal):t=>(promise||(promise=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0)),nextTickBrowser,hasRequiredNextTickBrowser;function requireNextTickBrowser(){if(hasRequiredNextTickBrowser)return nextTickBrowser;hasRequiredNextTickBrowser=1;const t=queueMicrotask_1;return nextTickBrowser=function(e,...r){r.length===0?t(e):t(()=>e(...r))},nextTickBrowser}var abstractSublevelIterator={},hasRequiredAbstractSublevelIterator;function requireAbstractSublevelIterator(){if(hasRequiredAbstractSublevelIterator)return abstractSublevelIterator;hasRequiredAbstractSublevelIterator=1;const{AbstractIterator:t,AbstractKeyIterator:e,AbstractValueIterator:r}=abstractIterator,n=Symbol("unfix"),o=Symbol("iterator"),s=Symbol("handleOne"),u=Symbol("handleMany"),c=Symbol("callback");class h extends t{constructor(E,O,$,k){super(E,O),this[o]=$,this[n]=k,this[s]=this[s].bind(this),this[u]=this[u].bind(this),this[c]=null}[s](E,O,$){const k=this[c];if(E)return k(E);O!==void 0&&(O=this[n](O)),k(E,O,$)}[u](E,O){const $=this[c];if(E)return $(E);for(const k of O){const B=k[0];B!==void 0&&(k[0]=this[n](B))}$(E,O)}}class w extends e{constructor(E,O,$,k){super(E,O),this[o]=$,this[n]=k,this[s]=this[s].bind(this),this[u]=this[u].bind(this),this[c]=null}[s](E,O){const $=this[c];if(E)return $(E);O!==void 0&&(O=this[n](O)),$(E,O)}[u](E,O){const $=this[c];if(E)return $(E);for(let k=0;k<O.length;k++){const B=O[k];B!==void 0&&(O[k]=this[n](B))}$(E,O)}}class m extends r{constructor(E,O,$){super(E,O),this[o]=$}}for(const v of[h,w])v.prototype._next=function(E){this[c]=E,this[o].next(this[s])},v.prototype._nextv=function(E,O,$){this[c]=$,this[o].nextv(E,O,this[u])},v.prototype._all=function(E,O){this[c]=O,this[o].all(E,this[u])};for(const v of[m])v.prototype._next=function(E){this[o].next(E)},v.prototype._nextv=function(E,O,$){this[o].nextv(E,O,$)},v.prototype._all=function(E,O){this[o].all(E,O)};for(const v of[h,w,m])v.prototype._seek=function(E,O){this[o].seek(E,O)},v.prototype._close=function(E){this[o].close(E)};return abstractSublevelIterator.AbstractSublevelIterator=h,abstractSublevelIterator.AbstractSublevelKeyIterator=w,abstractSublevelIterator.AbstractSublevelValueIterator=m,abstractSublevelIterator}var abstractSublevel,hasRequiredAbstractSublevel;function requireAbstractSublevel(){if(hasRequiredAbstractSublevel)return abstractSublevel;hasRequiredAbstractSublevel=1;const t=moduleError,{Buffer:e}=buffer||{},{AbstractSublevelIterator:r,AbstractSublevelKeyIterator:n,AbstractSublevelValueIterator:o}=requireAbstractSublevelIterator(),s=Symbol("prefix"),u=Symbol("upperBound"),c=Symbol("prefixRange"),h=Symbol("parent"),w=Symbol("unfix"),m=new TextEncoder,v={separator:"!"};abstractSublevel=function({AbstractLevel:j}){class ie extends j{static defaults(N){if(typeof N=="string")throw new t("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(N&&N.open)throw new t("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return N==null?v:N.separator?N:{...N,separator:"!"}}constructor(N,L,oe){const{separator:q,manifest:X,...de}=ie.defaults(oe);L=B(L,q);const _e=q.charCodeAt(0)+1,xe=N[h]||N;if(!m.encode(L).every(Ye=>Ye>_e&&Ye<127))throw new t(`Prefix must use bytes > ${_e} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(E(xe,X),de);const We=(N.prefix||"")+q+L+q,Ve=We.slice(0,-1)+String.fromCharCode(_e);this[h]=xe,this[s]=new $(We),this[u]=new $(Ve),this[w]=new k,this.nextTick=xe.nextTick}prefixKey(N,L){if(L==="utf8")return this[s].utf8+N;if(N.byteLength===0)return this[s][L];if(L==="view"){const oe=this[s].view,q=new Uint8Array(oe.byteLength+N.byteLength);return q.set(oe,0),q.set(N,oe.byteLength),q}else{const oe=this[s].buffer;return e.concat([oe,N],oe.byteLength+N.byteLength)}}[c](N,L){N.gte!==void 0?N.gte=this.prefixKey(N.gte,L):N.gt!==void 0?N.gt=this.prefixKey(N.gt,L):N.gte=this[s][L],N.lte!==void 0?N.lte=this.prefixKey(N.lte,L):N.lt!==void 0?N.lt=this.prefixKey(N.lt,L):N.lte=this[u][L]}get prefix(){return this[s].utf8}get db(){return this[h]}_open(N,L){this[h].open({passive:!0},L)}_put(N,L,oe,q){this[h].put(N,L,oe,q)}_get(N,L,oe){this[h].get(N,L,oe)}_getMany(N,L,oe){this[h].getMany(N,L,oe)}_del(N,L,oe){this[h].del(N,L,oe)}_batch(N,L,oe){this[h].batch(N,L,oe)}_clear(N,L){this[c](N,N.keyEncoding),this[h].clear(N,L)}_iterator(N){this[c](N,N.keyEncoding);const L=this[h].iterator(N),oe=this[w].get(this[s].utf8.length,N.keyEncoding);return new r(this,N,L,oe)}_keys(N){this[c](N,N.keyEncoding);const L=this[h].keys(N),oe=this[w].get(this[s].utf8.length,N.keyEncoding);return new n(this,N,L,oe)}_values(N){this[c](N,N.keyEncoding);const L=this[h].values(N);return new o(this,N,L)}}return{AbstractSublevel:ie}};const E=function(j,ie){return{...j.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...ie,encodings:{utf8:O(j,"utf8"),buffer:O(j,"buffer"),view:O(j,"view")}}},O=function(j,ie){return j.supports.encodings[ie]?j.keyEncoding(ie).name===ie:!1};class ${constructor(ie){this.utf8=ie,this.view=m.encode(ie),this.buffer=e?e.from(this.view.buffer,0,this.view.byteLength):{}}}class k{constructor(){this.cache=new Map}get(ie,se){let N=this.cache.get(se);return N===void 0&&(se==="view"?N=function(L,oe){return oe.subarray(L)}.bind(null,ie):N=function(L,oe){return oe.slice(L)}.bind(null,ie),this.cache.set(se,N)),N}}const B=function(j,ie){let se=0,N=j.length;for(;se<N&&j[se]===ie;)se++;for(;N>se&&j[N-1]===ie;)N--;return j.slice(se,N)};return abstractSublevel}const{supports}=levelSupports,{Transcoder}=levelTranscoder,{EventEmitter}=events.exports,{fromCallback:fromCallback$1}=catering,ModuleError$1=moduleError,{AbstractIterator:AbstractIterator$1}=abstractIterator,{DefaultKeyIterator,DefaultValueIterator}=defaultKvIterator,{DeferredIterator,DeferredKeyIterator,DeferredValueIterator}=deferredIterator,{DefaultChainedBatch}=defaultChainedBatch,{getCallback,getOptions}=common,rangeOptions=rangeOptions_1,kPromise$1=Symbol("promise"),kLanded=Symbol("landed"),kResources=Symbol("resources"),kCloseResources=Symbol("closeResources"),kOperations=Symbol("operations"),kUndefer=Symbol("undefer"),kDeferOpen=Symbol("deferOpen"),kOptions$1=Symbol("options"),kStatus=Symbol("status"),kDefaultOptions=Symbol("defaultOptions"),kTranscoder=Symbol("transcoder"),kKeyEncoding=Symbol("keyEncoding"),kValueEncoding=Symbol("valueEncoding"),noop=()=>{};class AbstractLevel$1 extends EventEmitter{constructor(e,r){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");r=getOptions(r);const{keyEncoding:n,valueEncoding:o,passive:s,...u}=r;this[kResources]=new Set,this[kOperations]=[],this[kDeferOpen]=!0,this[kOptions$1]=u,this[kStatus]="opening",this.supports=supports(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[kTranscoder]=new Transcoder(formats(this)),this[kKeyEncoding]=this[kTranscoder].encoding(n||"utf8"),this[kValueEncoding]=this[kTranscoder].encoding(o||"utf8");for(const c of this[kTranscoder].encodings())this.supports.encodings[c.commonName]||(this.supports.encodings[c.commonName]=!0);this[kDefaultOptions]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[kKeyEncoding].commonName,valueEncoding:this[kValueEncoding].commonName}),key:Object.freeze({keyEncoding:this[kKeyEncoding].commonName})},this.nextTick(()=>{this[kDeferOpen]&&this.open({passive:!1},noop)})}get status(){return this[kStatus]}keyEncoding(e){return this[kTranscoder].encoding(e!=null?e:this[kKeyEncoding])}valueEncoding(e){return this[kTranscoder].encoding(e!=null?e:this[kValueEncoding])}open(e,r){r=getCallback(e,r),r=fromCallback$1(r,kPromise$1),e={...this[kOptions$1],...getOptions(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;const n=o=>{this[kStatus]==="closing"||this[kStatus]==="opening"?this.once(kLanded,o?()=>n(o):n):this[kStatus]!=="open"?r(new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:o})):r()};return e.passive?this[kStatus]==="opening"?this.once(kLanded,n):this.nextTick(n):this[kStatus]==="closed"||this[kDeferOpen]?(this[kDeferOpen]=!1,this[kStatus]="opening",this.emit("opening"),this._open(e,o=>{if(o){this[kStatus]="closed",this[kCloseResources](()=>{this.emit(kLanded),n(o)}),this[kUndefer]();return}this[kStatus]="open",this[kUndefer](),this.emit(kLanded),this[kStatus]==="open"&&this.emit("open"),this[kStatus]==="open"&&this.emit("ready"),n()})):this[kStatus]==="open"?this.nextTick(n):this.once(kLanded,()=>this.open(e,r)),r[kPromise$1]}_open(e,r){this.nextTick(r)}close(e){e=fromCallback$1(e,kPromise$1);const r=n=>{this[kStatus]==="opening"||this[kStatus]==="closing"?this.once(kLanded,n?r(n):r):this[kStatus]!=="closed"?e(new ModuleError$1("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[kStatus]==="open"){this[kStatus]="closing",this.emit("closing");const n=o=>{this[kStatus]="open",this[kUndefer](),this.emit(kLanded),r(o)};this[kCloseResources](()=>{this._close(o=>{if(o)return n(o);this[kStatus]="closed",this[kUndefer](),this.emit(kLanded),this[kStatus]==="closed"&&this.emit("closed"),r()})})}else this[kStatus]==="closed"?this.nextTick(r):this.once(kLanded,()=>this.close(e));return e[kPromise$1]}[kCloseResources](e){if(this[kResources].size===0)return this.nextTick(e);let r=this[kResources].size,n=!0;const o=()=>{--r===0&&(n?this.nextTick(e):e())};for(const s of this[kResources])s.close(o);n=!1,this[kResources].clear()}_close(e){this.nextTick(e)}get(e,r,n){if(n=getCallback(r,n),n=fromCallback$1(n,kPromise$1),r=getOptions(r,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.get(e,r,n)),n[kPromise$1];if(maybeError(this,n))return n[kPromise$1];const o=this._checkKey(e);if(o)return this.nextTick(n,o),n[kPromise$1];const s=this.keyEncoding(r.keyEncoding),u=this.valueEncoding(r.valueEncoding),c=s.format,h=u.format;return(r.keyEncoding!==c||r.valueEncoding!==h)&&(r=Object.assign({},r,{keyEncoding:c,valueEncoding:h})),this._get(this.prefixKey(s.encode(e),c),r,(w,m)=>{if(w)return(w.code==="LEVEL_NOT_FOUND"||w.notFound||/NotFound/i.test(w))&&(w.code||(w.code="LEVEL_NOT_FOUND"),w.notFound||(w.notFound=!0),w.status||(w.status=404)),n(w);try{m=u.decode(m)}catch(v){return n(new ModuleError$1("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:v}))}n(null,m)}),n[kPromise$1]}_get(e,r,n){this.nextTick(n,new Error("NotFound"))}getMany(e,r,n){if(n=getCallback(r,n),n=fromCallback$1(n,kPromise$1),r=getOptions(r,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.getMany(e,r,n)),n[kPromise$1];if(maybeError(this,n))return n[kPromise$1];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[kPromise$1];if(e.length===0)return this.nextTick(n,null,[]),n[kPromise$1];const o=this.keyEncoding(r.keyEncoding),s=this.valueEncoding(r.valueEncoding),u=o.format,c=s.format;(r.keyEncoding!==u||r.valueEncoding!==c)&&(r=Object.assign({},r,{keyEncoding:u,valueEncoding:c}));const h=new Array(e.length);for(let w=0;w<e.length;w++){const m=e[w],v=this._checkKey(m);if(v)return this.nextTick(n,v),n[kPromise$1];h[w]=this.prefixKey(o.encode(m),u)}return this._getMany(h,r,(w,m)=>{if(w)return n(w);try{for(let v=0;v<m.length;v++)m[v]!==void 0&&(m[v]=s.decode(m[v]))}catch(v){return n(new ModuleError$1(`Could not decode one or more of ${m.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:v}))}n(null,m)}),n[kPromise$1]}_getMany(e,r,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,r,n,o){if(o=getCallback(n,o),o=fromCallback$1(o,kPromise$1),n=getOptions(n,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.put(e,r,n,o)),o[kPromise$1];if(maybeError(this,o))return o[kPromise$1];const s=this._checkKey(e)||this._checkValue(r);if(s)return this.nextTick(o,s),o[kPromise$1];const u=this.keyEncoding(n.keyEncoding),c=this.valueEncoding(n.valueEncoding),h=u.format,w=c.format;(n.keyEncoding!==h||n.valueEncoding!==w)&&(n=Object.assign({},n,{keyEncoding:h,valueEncoding:w}));const m=this.prefixKey(u.encode(e),h),v=c.encode(r);return this._put(m,v,n,E=>{if(E)return o(E);this.emit("put",e,r),o()}),o[kPromise$1]}_put(e,r,n,o){this.nextTick(o)}del(e,r,n){if(n=getCallback(r,n),n=fromCallback$1(n,kPromise$1),r=getOptions(r,this[kDefaultOptions].key),this[kStatus]==="opening")return this.defer(()=>this.del(e,r,n)),n[kPromise$1];if(maybeError(this,n))return n[kPromise$1];const o=this._checkKey(e);if(o)return this.nextTick(n,o),n[kPromise$1];const s=this.keyEncoding(r.keyEncoding),u=s.format;return r.keyEncoding!==u&&(r=Object.assign({},r,{keyEncoding:u})),this._del(this.prefixKey(s.encode(e),u),r,c=>{if(c)return n(c);this.emit("del",e),n()}),n[kPromise$1]}_del(e,r,n){this.nextTick(n)}batch(e,r,n){if(!arguments.length){if(this[kStatus]==="opening")return new DefaultChainedBatch(this);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=getCallback(r,n),n=fromCallback$1(n,kPromise$1),r=getOptions(r,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.batch(e,r,n)),n[kPromise$1];if(maybeError(this,n))return n[kPromise$1];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[kPromise$1];if(e.length===0)return this.nextTick(n),n[kPromise$1];const o=new Array(e.length),{keyEncoding:s,valueEncoding:u,...c}=r;for(let h=0;h<e.length;h++){if(typeof e[h]!="object"||e[h]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[kPromise$1];const w=Object.assign({},e[h]);if(w.type!=="put"&&w.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[kPromise$1];const m=this._checkKey(w.key);if(m)return this.nextTick(n,m),n[kPromise$1];const v=w.sublevel!=null?w.sublevel:this,E=v.keyEncoding(w.keyEncoding||s),O=E.format;if(w.key=v.prefixKey(E.encode(w.key),O),w.keyEncoding=O,w.type==="put"){const $=this._checkValue(w.value);if($)return this.nextTick(n,$),n[kPromise$1];const k=v.valueEncoding(w.valueEncoding||u);w.value=k.encode(w.value),w.valueEncoding=k.format}v!==this&&(w.sublevel=null),o[h]=w}return this._batch(o,c,h=>{if(h)return n(h);this.emit("batch",e),n()}),n[kPromise$1]}_batch(e,r,n){this.nextTick(n)}sublevel(e,r){return this._sublevel(e,AbstractSublevel.defaults(r))}_sublevel(e,r){return new AbstractSublevel(this,e,r)}prefixKey(e,r){return e}clear(e,r){if(r=getCallback(e,r),r=fromCallback$1(r,kPromise$1),e=getOptions(e,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.clear(e,r)),r[kPromise$1];if(maybeError(this,r))return r[kPromise$1];const n=e,o=this.keyEncoding(e.keyEncoding);return e=rangeOptions(e,o),e.keyEncoding=o.format,e.limit===0?this.nextTick(r):this._clear(e,s=>{if(s)return r(s);this.emit("clear",n),r()}),r[kPromise$1]}_clear(e,r){this.nextTick(r)}iterator(e){const r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,r),e.keys=e.keys!==!1,e.values=e.values!==!1,e[AbstractIterator$1.keyEncoding]=r,e[AbstractIterator$1.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[kStatus]==="opening")return new DeferredIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new AbstractIterator$1(this,e)}keys(e){const r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,r),e[AbstractIterator$1.keyEncoding]=r,e[AbstractIterator$1.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[kStatus]==="opening")return new DeferredKeyIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new DefaultKeyIterator(this,e)}values(e){const r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,r),e[AbstractIterator$1.keyEncoding]=r,e[AbstractIterator$1.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[kStatus]==="opening")return new DeferredValueIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new DefaultValueIterator(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[kOperations].push(e)}[kUndefer](){if(this[kOperations].length===0)return;const e=this[kOperations];this[kOperations]=[];for(const r of e)r()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[kResources].add(e)}detachResource(e){this[kResources].delete(e)}_chainedBatch(){return new DefaultChainedBatch(this)}_checkKey(e){if(e==null)return new ModuleError$1("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new ModuleError$1("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}AbstractLevel$1.prototype.nextTick=requireNextTickBrowser();const{AbstractSublevel}=requireAbstractSublevel()({AbstractLevel:AbstractLevel$1});abstractLevel.AbstractLevel=AbstractLevel$1;abstractLevel.AbstractSublevel=AbstractSublevel;const maybeError=function(t,e){return t[kStatus]!=="open"?(t.nextTick(e,new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},formats=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])};abstractLevel$1.AbstractLevel=abstractLevel.AbstractLevel;abstractLevel$1.AbstractSublevel=abstractLevel.AbstractSublevel;abstractLevel$1.AbstractIterator=abstractIterator.AbstractIterator;abstractLevel$1.AbstractKeyIterator=abstractIterator.AbstractKeyIterator;abstractLevel$1.AbstractValueIterator=abstractIterator.AbstractValueIterator;abstractLevel$1.AbstractChainedBatch=abstractChainedBatch.AbstractChainedBatch;/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var runParallelLimit_1=runParallelLimit;const queueMicrotask$1=queueMicrotask_1;function runParallelLimit(t,e,r){if(typeof e!="number")throw new Error("second argument must be a Number");let n,o,s,u,c,h=!0,w;Array.isArray(t)?(n=[],s=o=t.length):(u=Object.keys(t),n={},s=o=u.length);function m(E){function O(){r&&r(E,n),r=null}h?queueMicrotask$1(O):O()}function v(E,O,$){if(n[E]=$,O&&(c=!0),--s===0||O)m(O);else if(!c&&w<o){let k;u?(k=u[w],w+=1,t[k](function(B,j){v(k,B,j)})):(k=w,w+=1,t[k](function(B,j){v(k,B,j)}))}}w=e,s?u?u.some(function(E,O){return t[E](function($,k){v(E,$,k)}),O===e-1}):t.some(function(E,O){return E(function($,k){v(O,$,k)}),O===e-1}):m(null),h=!1}var iterator={},keyRange=function t(e){const r=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,o=e.gte===void 0,s=e.lte===void 0;return r!==void 0&&n!==void 0?IDBKeyRange.bound(r,n,o,s):r!==void 0?IDBKeyRange.lowerBound(r,o):n!==void 0?IDBKeyRange.upperBound(n,s):null};const textEncoder=new TextEncoder;var deserialize$2=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):textEncoder.encode(t)};const{AbstractIterator}=abstractLevel$1,createKeyRange$1=keyRange,deserialize$1=deserialize$2,kCache=Symbol("cache"),kFinished=Symbol("finished"),kOptions=Symbol("options"),kCurrentOptions=Symbol("currentOptions"),kPosition=Symbol("position"),kLocation$1=Symbol("location"),kFirst=Symbol("first"),emptyOptions={};class Iterator$1 extends AbstractIterator{constructor(e,r,n){super(e,n),this[kCache]=[],this[kFinished]=this.limit===0,this[kOptions]=n,this[kCurrentOptions]={...n},this[kPosition]=void 0,this[kLocation$1]=r,this[kFirst]=!0}_nextv(e,r,n){if(this[kFirst]=!1,this[kFinished])return this.nextTick(n,null,[]);if(this[kCache].length>0)return e=Math.min(e,this[kCache].length),this.nextTick(n,null,this[kCache].splice(0,e));this[kPosition]!==void 0&&(this[kOptions].reverse?(this[kCurrentOptions].lt=this[kPosition],this[kCurrentOptions].lte=void 0):(this[kCurrentOptions].gt=this[kPosition],this[kCurrentOptions].gte=void 0));let o;try{o=createKeyRange$1(this[kCurrentOptions])}catch{return this[kFinished]=!0,this.nextTick(n,null,[])}const s=this.db.db.transaction([this[kLocation$1]],"readonly"),u=s.objectStore(this[kLocation$1]),c=[];if(this[kOptions].reverse){const h=!this[kOptions].values&&u.openKeyCursor?"openKeyCursor":"openCursor";u[h](o,"prev").onsuccess=w=>{const m=w.target.result;if(m){const{key:v,value:E}=m;this[kPosition]=v,c.push([this[kOptions].keys&&v!==void 0?deserialize$1(v):void 0,this[kOptions].values&&E!==void 0?deserialize$1(E):void 0]),c.length<e?m.continue():maybeCommit(s)}else this[kFinished]=!0}}else{let h,w;const m=()=>{if(h===void 0||w===void 0)return;const v=Math.max(h.length,w.length);v===0||e===1/0?this[kFinished]=!0:this[kPosition]=h[v-1],c.length=v;for(let E=0;E<v;E++){const O=h[E],$=w[E];c[E]=[this[kOptions].keys&&O!==void 0?deserialize$1(O):void 0,this[kOptions].values&&$!==void 0?deserialize$1($):void 0]}maybeCommit(s)};this[kOptions].keys||e<1/0?u.getAllKeys(o,e<1/0?e:void 0).onsuccess=v=>{h=v.target.result,m()}:(h=[],this.nextTick(m)),this[kOptions].values?u.getAll(o,e<1/0?e:void 0).onsuccess=v=>{w=v.target.result,m()}:(w=[],this.nextTick(m))}s.onabort=()=>{n(s.error||new Error("aborted by user")),n=null},s.oncomplete=()=>{n(null,c),n=null}}_next(e){if(this[kCache].length>0){const[r,n]=this[kCache].shift();this.nextTick(e,null,r,n)}else if(this[kFinished])this.nextTick(e);else{let r=Math.min(100,this.limit-this.count);this[kFirst]&&(this[kFirst]=!1,r=1),this._nextv(r,emptyOptions,(n,o)=>{if(n)return e(n);this[kCache]=o,this._next(e)})}}_all(e,r){this[kFirst]=!1;const n=this[kCache].splice(0,this[kCache].length),o=this.limit-this.count-n.length;if(o<=0)return this.nextTick(r,null,n);this._nextv(o,emptyOptions,(s,u)=>{if(s)return r(s);n.length>0&&(u=n.concat(u)),r(null,u)})}_seek(e,r){this[kFirst]=!0,this[kCache]=[],this[kFinished]=!1,this[kPosition]=void 0,this[kCurrentOptions]={...this[kOptions]};let n;try{n=createKeyRange$1(this[kOptions])}catch{this[kFinished]=!0;return}n!==null&&!n.includes(e)?this[kFinished]=!0:this[kOptions].reverse?this[kCurrentOptions].lte=e:this[kCurrentOptions].gte=e}}iterator.Iterator=Iterator$1;function maybeCommit(t){typeof t.commit=="function"&&t.commit()}var clear$1=function t(e,r,n,o,s){if(o.limit===0)return e.nextTick(s);const u=e.db.transaction([r],"readwrite"),c=u.objectStore(r);let h=0;u.oncomplete=function(){s()},u.onabort=function(){s(u.error||new Error("aborted by user"))};const w=c.openKeyCursor?"openKeyCursor":"openCursor",m=o.reverse?"prev":"next";c[w](n,m).onsuccess=function(v){const E=v.target.result;E&&(c.delete(E.key).onsuccess=function(){(o.limit<=0||++h<o.limit)&&E.continue()})}};const{AbstractLevel}=abstractLevel$1,ModuleError=moduleError,parallel=runParallelLimit_1,{fromCallback}=catering,{Iterator}=iterator,deserialize=deserialize$2,clear=clear$1,createKeyRange=keyRange,DEFAULT_PREFIX="level-js-",kIDB=Symbol("idb"),kNamePrefix=Symbol("namePrefix"),kLocation=Symbol("location"),kVersion=Symbol("version"),kStore=Symbol("store"),kOnComplete=Symbol("onComplete"),kPromise=Symbol("promise");class BrowserLevel extends AbstractLevel{constructor(e,r,n){if(typeof r=="function"||typeof n=="function")throw new ModuleError("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:o,version:s,...u}=r||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},u),typeof e!="string")throw new Error("constructor requires a location string argument");this[kLocation]=e,this[kNamePrefix]=o==null?DEFAULT_PREFIX:o,this[kVersion]=parseInt(s||1,10),this[kIDB]=null}get location(){return this[kLocation]}get namePrefix(){return this[kNamePrefix]}get version(){return this[kVersion]}get db(){return this[kIDB]}get type(){return"browser-level"}_open(e,r){const n=indexedDB.open(this[kNamePrefix]+this[kLocation],this[kVersion]);n.onerror=function(){r(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[kIDB]=n.result,r()},n.onupgradeneeded=o=>{const s=o.target.result;s.objectStoreNames.contains(this[kLocation])||s.createObjectStore(this[kLocation])}}[kStore](e){return this[kIDB].transaction([this[kLocation]],e).objectStore(this[kLocation])}[kOnComplete](e,r){const n=e.transaction;n.onabort=function(){r(n.error||new Error("aborted by user"))},n.oncomplete=function(){r(null,e.result)}}_get(e,r,n){const o=this[kStore]("readonly");let s;try{s=o.get(e)}catch(u){return this.nextTick(n,u)}this[kOnComplete](s,function(u,c){if(u)return n(u);if(c===void 0)return n(new ModuleError("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,deserialize(c))})}_getMany(e,r,n){const o=this[kStore]("readonly"),s=e.map(u=>c=>{let h;try{h=o.get(u)}catch(w){return c(w)}h.onsuccess=()=>{const w=h.result;c(null,w===void 0?w:deserialize(w))},h.onerror=w=>{w.stopPropagation(),c(h.error)}});parallel(s,16,n)}_del(e,r,n){const o=this[kStore]("readwrite");let s;try{s=o.delete(e)}catch(u){return this.nextTick(n,u)}this[kOnComplete](s,n)}_put(e,r,n,o){const s=this[kStore]("readwrite");let u;try{u=s.put(r,e)}catch(c){return this.nextTick(o,c)}this[kOnComplete](u,o)}_iterator(e){return new Iterator(this,this[kLocation],e)}_batch(e,r,n){const o=this[kStore]("readwrite"),s=o.transaction;let u=0,c;s.onabort=function(){n(c||s.error||new Error("aborted by user"))},s.oncomplete=function(){n()};function h(){const w=e[u++],m=w.key;let v;try{v=w.type==="del"?o.delete(m):o.put(w.value,m)}catch(E){c=E,s.abort();return}u<e.length?v.onsuccess=h:typeof s.commit=="function"&&s.commit()}h()}_clear(e,r){let n,o;try{n=createKeyRange(e)}catch{return this.nextTick(r)}if(e.limit>=0)return clear(this,this[kLocation],n,e,r);try{const s=this[kStore]("readwrite");o=n?s.delete(n):s.clear()}catch(s){return this.nextTick(r,s)}this[kOnComplete](o,r)}_close(e){this[kIDB].close(),this.nextTick(e)}}BrowserLevel.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=DEFAULT_PREFIX),r=fromCallback(r,kPromise);const n=indexedDB.deleteDatabase(e+t);return n.onsuccess=function(){r()},n.onerror=function(o){r(o)},r[kPromise]};browserLevel.BrowserLevel=BrowserLevel;var Level=browser.Level=browserLevel.BrowserLevel;class LevelDatastore extends BaseDatastore{constructor(e,r={}){super(),this.db=typeof e=="string"?new Level(e,{...r,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...r}}async open(){try{await this.db.open(this.opts)}catch(e){throw dbOpenFailedError(e)}}async put(e,r){try{await this.db.put(e.toString(),r)}catch(n){throw dbWriteFailedError(n)}}async get(e){let r;try{r=await this.db.get(e.toString())}catch(n){throw n.notFound?notFoundError$1(n):dbWriteFailedError(n)}return r}async has(e){try{await this.db.get(e.toString())}catch(r){if(r.notFound)return!1;throw r}return!0}async delete(e){try{await this.db.del(e.toString())}catch(r){throw dbDeleteFailedError(r)}}close(){return this.db&&this.db.close()}batch(){const e=[];return{put:(r,n)=>{e.push({type:"put",key:r.toString(),value:n})},delete:r=>{e.push({type:"del",key:r.toString()})},commit:()=>this.db.batch(e)}}query(e){let r=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(r=e.filters.reduce((s,u)=>itFilter(s,u),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((s,u)=>itSort(s,u),r));const{offset:n,limit:o}=e;if(n){let s=0;r=itFilter(r,()=>s++>=n)}return o&&(r=itTake(r,o)),r}queryKeys(e){let r=itMap(this._query({values:!1,prefix:e.prefix}),({key:s})=>s);Array.isArray(e.filters)&&(r=e.filters.reduce((s,u)=>itFilter(s,u),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((s,u)=>itSort(s,u),r));const{offset:n,limit:o}=e;if(n){let s=0;r=itFilter(r,()=>s++>=n)}return o&&(r=itTake(r,o)),r}_query(e){const r={keys:!0,keyEncoding:"buffer",values:e.values};if(e.prefix!=null){const o=e.prefix.toString();r.gte=o,r.lt=o+"\xFF"}const n=this.db.iterator(r);if(n[Symbol.asyncIterator])return levelIteratorToIterator(n);if(n.next!=null&&n.end!=null)return oldLevelIteratorToIterator(n);throw new Error("Level returned incompatible iterator")}}async function*levelIteratorToIterator(t){for await(const[e,r]of t)yield{key:new Key(e,!1),value:r};await t.close()}function oldLevelIteratorToIterator(t){return{[Symbol.asyncIterator](){return{next:()=>new Promise((e,r)=>{t.next((n,o,s)=>{if(n)return r(n);if(o==null)return t.end(u=>{if(u)return r(u);e({done:!0,value:void 0})});e({done:!1,value:{key:new Key(o,!1),value:s}})})}),return:()=>new Promise((e,r)=>{t.end(n=>{if(n)return r(n);e({done:!0,value:void 0})})})}}}}const sortAll=(t,e)=>async function*(){yield*(await itAll(t)).sort(e)}();class BaseBlockstore{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,r,n){return Promise.reject(new Error(".put is not implemented"))}get(e,r){return Promise.reject(new Error(".get is not implemented"))}has(e,r){return Promise.reject(new Error(".has is not implemented"))}delete(e,r){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,r={}){for await(const{key:n,value:o}of e)await this.put(n,o,r),yield{key:n,value:o}}async*getMany(e,r={}){for await(const n of e)yield this.get(n,r)}async*deleteMany(e,r={}){for await(const n of e)await this.delete(n,r),yield n}batch(){let e=[],r=[];return{put(n,o){e.push({key:n,value:o})},delete(n){r.push(n)},commit:async n=>{await itDrain(this.putMany(e,n)),e=[],await itDrain(this.deleteMany(r,n)),r=[]}}}async*_all(e,r){throw new Error("._all is not implemented")}async*_allKeys(e,r){throw new Error("._allKeys is not implemented")}query(e,r){let n=this._all(e,r);if(e.prefix!=null&&(n=itFilter(n,o=>o.key.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((o,s)=>itFilter(o,s),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((o,s)=>sortAll(o,s),n)),e.offset!=null){let o=0;n=itFilter(n,()=>o++>=(e.offset||0))}return e.limit!=null&&(n=itTake(n,e.limit)),n}queryKeys(e,r){let n=this._allKeys(e,r);if(e.prefix!=null&&(n=itFilter(n,o=>o.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((o,s)=>itFilter(o,s),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((o,s)=>sortAll(o,s),n)),e.offset!=null){let o=0;n=itFilter(n,()=>o++>=e.offset)}return e.limit!=null&&(n=itTake(n,e.limit)),n}}function cidToKey(t){const e=CID$2.asCID(t);if(!e)throw errCode(new Error("Not a valid cid"),"ERR_INVALID_CID");return new Key("/"+base32$6.encode(e.multihash.bytes).slice(1).toUpperCase(),!1)}function keyToCid(t){return CID$2.createV1(code$8,decode$p(base32$6.decode("b"+t.toString().slice(1).toLowerCase())))}function convertPrefix(t){const e=t.substring(0,1);if(e==="/")return convertPrefix(t.substring(1));let r;e.toLowerCase()==="b"?r=s=>base32$6.decode(s.toLowerCase()).subarray(2):e.toLowerCase()==="c"?r=s=>base32pad$2.decode(s.toLowerCase()).subarray(2):e==="z"?r=s=>base58btc$4.decode(s).subarray(2):e==="Q"?r=s=>base58btc$4.decode("z"+s):r=s=>base32$6.decode("b"+s.toLowerCase()).subarray(2);let n;for(let s=1;s<t.length;s++)try{n=r(t.substring(0,s))}catch(u){if(u.message!=="Unexpected end of data")throw u}let o="/C";return n&&(o=`/${base32$6.encode(n).slice(1,-1).toUpperCase()||"C"}`),o}function convertQuery(t){return{...t,prefix:t.prefix?convertPrefix(t.prefix):void 0,filters:t.filters?t.filters.map(e=>r=>e({key:keyToCid(r.key),value:r.value})):void 0,orders:t.orders?t.orders.map(e=>(r,n)=>e({key:keyToCid(r.key),value:r.value},{key:keyToCid(n.key),value:n.value})):void 0}}function convertKeyQuery(t){return{...t,prefix:t.prefix?convertPrefix(t.prefix):void 0,filters:t.filters?t.filters.map(e=>r=>e(keyToCid(r))):void 0,orders:t.orders?t.orders.map(e=>(r,n)=>e(keyToCid(r),keyToCid(n))):void 0}}class BlockstoreDatastoreAdapter extends BaseBlockstore{constructor(e){super(),this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,r){for await(const{key:n,value:o}of this.child.query(convertQuery(e),r))yield{key:keyToCid(n),value:o}}async*queryKeys(e,r){for await(const n of this.child.queryKeys(convertKeyQuery(e),r))yield keyToCid(n)}async get(e,r){return this.child.get(cidToKey(e),r)}async*getMany(e,r){for await(const n of e)yield this.get(n,r)}async put(e,r,n){await this.child.put(cidToKey(e),r,n)}async*putMany(e,r){const n=pushable$1({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{const s=this.child;await itDrain(this.child.putMany(async function*(){for await(const u of e){const c=cidToKey(u.key);await s.has(c,r)||(yield{key:c,value:u.value}),n.push(u)}}())),n.end()}catch(s){n.end(s)}}),yield*n}has(e,r){return this.child.has(cidToKey(e),r)}delete(e,r){return this.child.delete(cidToKey(e),r)}deleteMany(e,r){const n=pushable$1({objectMode:!0});return itDrain(this.child.deleteMany(async function*(){for await(const o of e)yield cidToKey(o),n.push(o);n.end()}(),r)).catch(o=>{n.end(o)}),n}}function createRepo(t,e,r){const n=r.path||"ipfs";return createRepo$1(n,o=>e.getCodec(o),{root:new LevelDatastore(n,{prefix:"",version:2}),blocks:new BlockstoreDatastoreAdapter(new LevelDatastore(`${n}/blocks`,{prefix:"",version:2})),datastore:new LevelDatastore(`${n}/datastore`,{prefix:"",version:2}),keys:new LevelDatastore(`${n}/keys`,{prefix:"",version:2}),pins:new LevelDatastore(`${n}/pins`,{prefix:"",version:2})},{autoMigrate:r.autoMigrate,onMigrationProgress:r.onMigrationProgress||t,repoLock:MemoryLock})}var Tc=Object.create,nr=Object.defineProperty,Ic=Object.getOwnPropertyDescriptor,Sc=Object.getOwnPropertyNames,Uc=Object.getPrototypeOf,Fc=Object.prototype.hasOwnProperty,F=(t,e)=>()=>(t&&(e=t(t=0)),e),S=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),M=(t,e)=>{for(var r in e)nr(t,r,{get:e[r],enumerable:!0})},No=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Sc(e))!Fc.call(t,o)&&o!==r&&nr(t,o,{get:()=>e[o],enumerable:!(n=Ic(e,o))||n.enumerable});return t},J=(t,e,r)=>(r=t!=null?Tc(Uc(t)):{},No(e||!t||!t.__esModule?nr(r,"default",{value:t,enumerable:!0}):r,t)),R=t=>No(nr({},"__esModule",{value:!0}),t),Po=S(t=>{a(),t.byteLength=h,t.toByteArray=m,t.fromByteArray=O;var e=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0,u=o.length;s<u;++s)e[s]=o[s],r[o.charCodeAt(s)]=s;var s,u;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function c($){var k=$.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var B=$.indexOf("=");B===-1&&(B=k);var j=B===k?0:4-B%4;return[B,j]}function h($){var k=c($),B=k[0],j=k[1];return(B+j)*3/4-j}function w($,k,B){return(k+B)*3/4-B}function m($){var k,B=c($),j=B[0],ie=B[1],se=new n(w($,j,ie)),N=0,L=ie>0?j-4:j,oe;for(oe=0;oe<L;oe+=4)k=r[$.charCodeAt(oe)]<<18|r[$.charCodeAt(oe+1)]<<12|r[$.charCodeAt(oe+2)]<<6|r[$.charCodeAt(oe+3)],se[N++]=k>>16&255,se[N++]=k>>8&255,se[N++]=k&255;return ie===2&&(k=r[$.charCodeAt(oe)]<<2|r[$.charCodeAt(oe+1)]>>4,se[N++]=k&255),ie===1&&(k=r[$.charCodeAt(oe)]<<10|r[$.charCodeAt(oe+1)]<<4|r[$.charCodeAt(oe+2)]>>2,se[N++]=k>>8&255,se[N++]=k&255),se}function v($){return e[$>>18&63]+e[$>>12&63]+e[$>>6&63]+e[$&63]}function E($,k,B){for(var j,ie=[],se=k;se<B;se+=3)j=($[se]<<16&16711680)+($[se+1]<<8&65280)+($[se+2]&255),ie.push(v(j));return ie.join("")}function O($){for(var k,B=$.length,j=B%3,ie=[],se=16383,N=0,L=B-j;N<L;N+=se)ie.push(E($,N,N+se>L?L:N+se));return j===1?(k=$[B-1],ie.push(e[k>>2]+e[k<<4&63]+"==")):j===2&&(k=($[B-2]<<8)+$[B-1],ie.push(e[k>>10]+e[k>>4&63]+e[k<<2&63]+"=")),ie.join("")}}),Ro=S(t=>{a(),t.read=function(e,r,n,o,s){var u,c,h=s*8-o-1,w=(1<<h)-1,m=w>>1,v=-7,E=n?s-1:0,O=n?-1:1,$=e[r+E];for(E+=O,u=$&(1<<-v)-1,$>>=-v,v+=h;v>0;u=u*256+e[r+E],E+=O,v-=8);for(c=u&(1<<-v)-1,u>>=-v,v+=o;v>0;c=c*256+e[r+E],E+=O,v-=8);if(u===0)u=1-m;else{if(u===w)return c?NaN:($?-1:1)*(1/0);c=c+Math.pow(2,o),u=u-m}return($?-1:1)*c*Math.pow(2,u-o)},t.write=function(e,r,n,o,s,u){var c,h,w,m=u*8-s-1,v=(1<<m)-1,E=v>>1,O=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,$=o?0:u-1,k=o?1:-1,B=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(h=isNaN(r)?1:0,c=v):(c=Math.floor(Math.log(r)/Math.LN2),r*(w=Math.pow(2,-c))<1&&(c--,w*=2),c+E>=1?r+=O/w:r+=O*Math.pow(2,1-E),r*w>=2&&(c++,w/=2),c+E>=v?(h=0,c=v):c+E>=1?(h=(r*w-1)*Math.pow(2,s),c=c+E):(h=r*Math.pow(2,E-1)*Math.pow(2,s),c=0));s>=8;e[n+$]=h&255,$+=k,h/=256,s-=8);for(c=c<<s|h,m+=s;m>0;e[n+$]=c&255,$+=k,c/=256,m-=8);e[n+$-k]|=B*128}}),ti=S(t=>{a();var e=Po(),r=Ro(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=ie,t.INSPECT_MAX_BYTES=50;var o=2147483647;t.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=s(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{let y=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(y,f),y.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function u(y){if(y>o)throw new RangeError('The value "'+y+'" is invalid for option "size"');let f=new Uint8Array(y);return Object.setPrototypeOf(f,c.prototype),f}function c(y,f,g){if(typeof y=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(y)}return h(y,f,g)}c.poolSize=8192;function h(y,f,g){if(typeof y=="string")return E(y,f);if(ArrayBuffer.isView(y))return $(y);if(y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if(Ze(y,ArrayBuffer)||y&&Ze(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ze(y,SharedArrayBuffer)||y&&Ze(y.buffer,SharedArrayBuffer)))return k(y,f,g);if(typeof y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let A=y.valueOf&&y.valueOf();if(A!=null&&A!==y)return c.from(A,f,g);let I=B(y);if(I)return I;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return c.from(y[Symbol.toPrimitive]("string"),f,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}c.from=function(y,f,g){return h(y,f,g)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function w(y){if(typeof y!="number")throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function m(y,f,g){return w(y),y<=0?u(y):f!==void 0?typeof g=="string"?u(y).fill(f,g):u(y).fill(f):u(y)}c.alloc=function(y,f,g){return m(y,f,g)};function v(y){return w(y),u(y<0?0:j(y)|0)}c.allocUnsafe=function(y){return v(y)},c.allocUnsafeSlow=function(y){return v(y)};function E(y,f){if((typeof f!="string"||f==="")&&(f="utf8"),!c.isEncoding(f))throw new TypeError("Unknown encoding: "+f);let g=se(y,f)|0,A=u(g),I=A.write(y,f);return I!==g&&(A=A.slice(0,I)),A}function O(y){let f=y.length<0?0:j(y.length)|0,g=u(f);for(let A=0;A<f;A+=1)g[A]=y[A]&255;return g}function $(y){if(Ze(y,Uint8Array)){let f=new Uint8Array(y);return k(f.buffer,f.byteOffset,f.byteLength)}return O(y)}function k(y,f,g){if(f<0||y.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<f+(g||0))throw new RangeError('"length" is outside of buffer bounds');let A;return f===void 0&&g===void 0?A=new Uint8Array(y):g===void 0?A=new Uint8Array(y,f):A=new Uint8Array(y,f,g),Object.setPrototypeOf(A,c.prototype),A}function B(y){if(c.isBuffer(y)){let f=j(y.length)|0,g=u(f);return g.length===0||y.copy(g,0,0,f),g}if(y.length!==void 0)return typeof y.length!="number"||ot(y.length)?u(0):O(y);if(y.type==="Buffer"&&Array.isArray(y.data))return O(y.data)}function j(y){if(y>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return y|0}function ie(y){return+y!=y&&(y=0),c.alloc(+y)}c.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==c.prototype},c.compare=function(y,f){if(Ze(y,Uint8Array)&&(y=c.from(y,y.offset,y.byteLength)),Ze(f,Uint8Array)&&(f=c.from(f,f.offset,f.byteLength)),!c.isBuffer(y)||!c.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===f)return 0;let g=y.length,A=f.length;for(let I=0,K=Math.min(g,A);I<K;++I)if(y[I]!==f[I]){g=y[I],A=f[I];break}return g<A?-1:A<g?1:0},c.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(y,f){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return c.alloc(0);let g;if(f===void 0)for(f=0,g=0;g<y.length;++g)f+=y[g].length;let A=c.allocUnsafe(f),I=0;for(g=0;g<y.length;++g){let K=y[g];if(Ze(K,Uint8Array))I+K.length>A.length?(c.isBuffer(K)||(K=c.from(K)),K.copy(A,I)):Uint8Array.prototype.set.call(A,K,I);else if(c.isBuffer(K))K.copy(A,I);else throw new TypeError('"list" argument must be an Array of Buffers');I+=K.length}return A};function se(y,f){if(c.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||Ze(y,ArrayBuffer))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);let g=y.length,A=arguments.length>2&&arguments[2]===!0;if(!A&&g===0)return 0;let I=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return we(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return De(y).length;default:if(I)return A?-1:we(y).length;f=(""+f).toLowerCase(),I=!0}}c.byteLength=se;function N(y,f,g){let A=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,f>>>=0,g<=f))return"";for(y||(y="utf8");;)switch(y){case"hex":return Bt(this,f,g);case"utf8":case"utf-8":return Ye(this,f,g);case"ascii":return at(this,f,g);case"latin1":case"binary":return Je(this,f,g);case"base64":return Ve(this,f,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ut(this,f,g);default:if(A)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),A=!0}}c.prototype._isBuffer=!0;function L(y,f,g){let A=y[f];y[f]=y[g],y[g]=A}c.prototype.swap16=function(){let y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<y;f+=2)L(this,f,f+1);return this},c.prototype.swap32=function(){let y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<y;f+=4)L(this,f,f+3),L(this,f+1,f+2);return this},c.prototype.swap64=function(){let y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<y;f+=8)L(this,f,f+7),L(this,f+1,f+6),L(this,f+2,f+5),L(this,f+3,f+4);return this},c.prototype.toString=function(){let y=this.length;return y===0?"":arguments.length===0?Ye(this,0,y):N.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(y){if(!c.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:c.compare(this,y)===0},c.prototype.inspect=function(){let y="",f=t.INSPECT_MAX_BYTES;return y=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(y+=" ... "),"<Buffer "+y+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(y,f,g,A,I){if(Ze(y,Uint8Array)&&(y=c.from(y,y.offset,y.byteLength)),!c.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(f===void 0&&(f=0),g===void 0&&(g=y?y.length:0),A===void 0&&(A=0),I===void 0&&(I=this.length),f<0||g>y.length||A<0||I>this.length)throw new RangeError("out of range index");if(A>=I&&f>=g)return 0;if(A>=I)return-1;if(f>=g)return 1;if(f>>>=0,g>>>=0,A>>>=0,I>>>=0,this===y)return 0;let K=I-A,ue=g-f,rt=Math.min(K,ue),_t=this.slice(A,I),nt=y.slice(f,g);for(let et=0;et<rt;++et)if(_t[et]!==nt[et]){K=_t[et],ue=nt[et];break}return K<ue?-1:ue<K?1:0};function oe(y,f,g,A,I){if(y.length===0)return-1;if(typeof g=="string"?(A=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,ot(g)&&(g=I?0:y.length-1),g<0&&(g=y.length+g),g>=y.length){if(I)return-1;g=y.length-1}else if(g<0)if(I)g=0;else return-1;if(typeof f=="string"&&(f=c.from(f,A)),c.isBuffer(f))return f.length===0?-1:q(y,f,g,A,I);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?I?Uint8Array.prototype.indexOf.call(y,f,g):Uint8Array.prototype.lastIndexOf.call(y,f,g):q(y,[f],g,A,I);throw new TypeError("val must be string, number or Buffer")}function q(y,f,g,A,I){let K=1,ue=y.length,rt=f.length;if(A!==void 0&&(A=String(A).toLowerCase(),A==="ucs2"||A==="ucs-2"||A==="utf16le"||A==="utf-16le")){if(y.length<2||f.length<2)return-1;K=2,ue/=2,rt/=2,g/=2}function _t(et,Ct){return K===1?et[Ct]:et.readUInt16BE(Ct*K)}let nt;if(I){let et=-1;for(nt=g;nt<ue;nt++)if(_t(y,nt)===_t(f,et===-1?0:nt-et)){if(et===-1&&(et=nt),nt-et+1===rt)return et*K}else et!==-1&&(nt-=nt-et),et=-1}else for(g+rt>ue&&(g=ue-rt),nt=g;nt>=0;nt--){let et=!0;for(let Ct=0;Ct<rt;Ct++)if(_t(y,nt+Ct)!==_t(f,Ct)){et=!1;break}if(et)return nt}return-1}c.prototype.includes=function(y,f,g){return this.indexOf(y,f,g)!==-1},c.prototype.indexOf=function(y,f,g){return oe(this,y,f,g,!0)},c.prototype.lastIndexOf=function(y,f,g){return oe(this,y,f,g,!1)};function X(y,f,g,A){g=Number(g)||0;let I=y.length-g;A?(A=Number(A),A>I&&(A=I)):A=I;let K=f.length;A>K/2&&(A=K/2);let ue;for(ue=0;ue<A;++ue){let rt=parseInt(f.substr(ue*2,2),16);if(ot(rt))return ue;y[g+ue]=rt}return ue}function de(y,f,g,A){return Ge(we(f,y.length-g),y,g,A)}function _e(y,f,g,A){return Ge(Ee(f),y,g,A)}function xe(y,f,g,A){return Ge(De(f),y,g,A)}function We(y,f,g,A){return Ge(Z(f,y.length-g),y,g,A)}c.prototype.write=function(y,f,g,A){if(f===void 0)A="utf8",g=this.length,f=0;else if(g===void 0&&typeof f=="string")A=f,g=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(g)?(g=g>>>0,A===void 0&&(A="utf8")):(A=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let I=this.length-f;if((g===void 0||g>I)&&(g=I),y.length>0&&(g<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");A||(A="utf8");let K=!1;for(;;)switch(A){case"hex":return X(this,y,f,g);case"utf8":case"utf-8":return de(this,y,f,g);case"ascii":case"latin1":case"binary":return _e(this,y,f,g);case"base64":return xe(this,y,f,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return We(this,y,f,g);default:if(K)throw new TypeError("Unknown encoding: "+A);A=(""+A).toLowerCase(),K=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ve(y,f,g){return f===0&&g===y.length?e.fromByteArray(y):e.fromByteArray(y.slice(f,g))}function Ye(y,f,g){g=Math.min(y.length,g);let A=[],I=f;for(;I<g;){let K=y[I],ue=null,rt=K>239?4:K>223?3:K>191?2:1;if(I+rt<=g){let _t,nt,et,Ct;switch(rt){case 1:K<128&&(ue=K);break;case 2:_t=y[I+1],(_t&192)===128&&(Ct=(K&31)<<6|_t&63,Ct>127&&(ue=Ct));break;case 3:_t=y[I+1],nt=y[I+2],(_t&192)===128&&(nt&192)===128&&(Ct=(K&15)<<12|(_t&63)<<6|nt&63,Ct>2047&&(Ct<55296||Ct>57343)&&(ue=Ct));break;case 4:_t=y[I+1],nt=y[I+2],et=y[I+3],(_t&192)===128&&(nt&192)===128&&(et&192)===128&&(Ct=(K&15)<<18|(_t&63)<<12|(nt&63)<<6|et&63,Ct>65535&&Ct<1114112&&(ue=Ct))}}ue===null?(ue=65533,rt=1):ue>65535&&(ue-=65536,A.push(ue>>>10&1023|55296),ue=56320|ue&1023),A.push(ue),I+=rt}return kt(A)}var $t=4096;function kt(y){let f=y.length;if(f<=$t)return String.fromCharCode.apply(String,y);let g="",A=0;for(;A<f;)g+=String.fromCharCode.apply(String,y.slice(A,A+=$t));return g}function at(y,f,g){let A="";g=Math.min(y.length,g);for(let I=f;I<g;++I)A+=String.fromCharCode(y[I]&127);return A}function Je(y,f,g){let A="";g=Math.min(y.length,g);for(let I=f;I<g;++I)A+=String.fromCharCode(y[I]);return A}function Bt(y,f,g){let A=y.length;(!f||f<0)&&(f=0),(!g||g<0||g>A)&&(g=A);let I="";for(let K=f;K<g;++K)I+=Ft[y[K]];return I}function Ut(y,f,g){let A=y.slice(f,g),I="";for(let K=0;K<A.length-1;K+=2)I+=String.fromCharCode(A[K]+A[K+1]*256);return I}c.prototype.slice=function(y,f){let g=this.length;y=~~y,f=f===void 0?g:~~f,y<0?(y+=g,y<0&&(y=0)):y>g&&(y=g),f<0?(f+=g,f<0&&(f=0)):f>g&&(f=g),f<y&&(f=y);let A=this.subarray(y,f);return Object.setPrototypeOf(A,c.prototype),A};function vt(y,f,g){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+f>g)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(y,f,g){y=y>>>0,f=f>>>0,g||vt(y,f,this.length);let A=this[y],I=1,K=0;for(;++K<f&&(I*=256);)A+=this[y+K]*I;return A},c.prototype.readUintBE=c.prototype.readUIntBE=function(y,f,g){y=y>>>0,f=f>>>0,g||vt(y,f,this.length);let A=this[y+--f],I=1;for(;f>0&&(I*=256);)A+=this[y+--f]*I;return A},c.prototype.readUint8=c.prototype.readUInt8=function(y,f){return y=y>>>0,f||vt(y,1,this.length),this[y]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(y,f){return y=y>>>0,f||vt(y,2,this.length),this[y]|this[y+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(y,f){return y=y>>>0,f||vt(y,2,this.length),this[y]<<8|this[y+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(y,f){return y=y>>>0,f||vt(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(y,f){return y=y>>>0,f||vt(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},c.prototype.readBigUInt64LE=xt(function(y){y=y>>>0,Ae(y,"offset");let f=this[y],g=this[y+7];(f===void 0||g===void 0)&&ge(y,this.length-8);let A=f+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,I=this[++y]+this[++y]*2**8+this[++y]*2**16+g*2**24;return BigInt(A)+(BigInt(I)<<BigInt(32))}),c.prototype.readBigUInt64BE=xt(function(y){y=y>>>0,Ae(y,"offset");let f=this[y],g=this[y+7];(f===void 0||g===void 0)&&ge(y,this.length-8);let A=f*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],I=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+g;return(BigInt(A)<<BigInt(32))+BigInt(I)}),c.prototype.readIntLE=function(y,f,g){y=y>>>0,f=f>>>0,g||vt(y,f,this.length);let A=this[y],I=1,K=0;for(;++K<f&&(I*=256);)A+=this[y+K]*I;return I*=128,A>=I&&(A-=Math.pow(2,8*f)),A},c.prototype.readIntBE=function(y,f,g){y=y>>>0,f=f>>>0,g||vt(y,f,this.length);let A=f,I=1,K=this[y+--A];for(;A>0&&(I*=256);)K+=this[y+--A]*I;return I*=128,K>=I&&(K-=Math.pow(2,8*f)),K},c.prototype.readInt8=function(y,f){return y=y>>>0,f||vt(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},c.prototype.readInt16LE=function(y,f){y=y>>>0,f||vt(y,2,this.length);let g=this[y]|this[y+1]<<8;return g&32768?g|4294901760:g},c.prototype.readInt16BE=function(y,f){y=y>>>0,f||vt(y,2,this.length);let g=this[y+1]|this[y]<<8;return g&32768?g|4294901760:g},c.prototype.readInt32LE=function(y,f){return y=y>>>0,f||vt(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},c.prototype.readInt32BE=function(y,f){return y=y>>>0,f||vt(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},c.prototype.readBigInt64LE=xt(function(y){y=y>>>0,Ae(y,"offset");let f=this[y],g=this[y+7];(f===void 0||g===void 0)&&ge(y,this.length-8);let A=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(g<<24);return(BigInt(A)<<BigInt(32))+BigInt(f+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),c.prototype.readBigInt64BE=xt(function(y){y=y>>>0,Ae(y,"offset");let f=this[y],g=this[y+7];(f===void 0||g===void 0)&&ge(y,this.length-8);let A=(f<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(A)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+g)}),c.prototype.readFloatLE=function(y,f){return y=y>>>0,f||vt(y,4,this.length),r.read(this,y,!0,23,4)},c.prototype.readFloatBE=function(y,f){return y=y>>>0,f||vt(y,4,this.length),r.read(this,y,!1,23,4)},c.prototype.readDoubleLE=function(y,f){return y=y>>>0,f||vt(y,8,this.length),r.read(this,y,!0,52,8)},c.prototype.readDoubleBE=function(y,f){return y=y>>>0,f||vt(y,8,this.length),r.read(this,y,!1,52,8)};function be(y,f,g,A,I,K){if(!c.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>I||f<K)throw new RangeError('"value" argument is out of bounds');if(g+A>y.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(y,f,g,A){if(y=+y,f=f>>>0,g=g>>>0,!A){let ue=Math.pow(2,8*g)-1;be(this,y,f,g,ue,0)}let I=1,K=0;for(this[f]=y&255;++K<g&&(I*=256);)this[f+K]=y/I&255;return f+g},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(y,f,g,A){if(y=+y,f=f>>>0,g=g>>>0,!A){let ue=Math.pow(2,8*g)-1;be(this,y,f,g,ue,0)}let I=g-1,K=1;for(this[f+I]=y&255;--I>=0&&(K*=256);)this[f+I]=y/K&255;return f+g},c.prototype.writeUint8=c.prototype.writeUInt8=function(y,f,g){return y=+y,f=f>>>0,g||be(this,y,f,1,255,0),this[f]=y&255,f+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(y,f,g){return y=+y,f=f>>>0,g||be(this,y,f,2,65535,0),this[f]=y&255,this[f+1]=y>>>8,f+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(y,f,g){return y=+y,f=f>>>0,g||be(this,y,f,2,65535,0),this[f]=y>>>8,this[f+1]=y&255,f+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(y,f,g){return y=+y,f=f>>>0,g||be(this,y,f,4,4294967295,0),this[f+3]=y>>>24,this[f+2]=y>>>16,this[f+1]=y>>>8,this[f]=y&255,f+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(y,f,g){return y=+y,f=f>>>0,g||be(this,y,f,4,4294967295,0),this[f]=y>>>24,this[f+1]=y>>>16,this[f+2]=y>>>8,this[f+3]=y&255,f+4};function je(y,f,g,A,I){ae(f,A,I,y,g,7);let K=Number(f&BigInt(4294967295));y[g++]=K,K=K>>8,y[g++]=K,K=K>>8,y[g++]=K,K=K>>8,y[g++]=K;let ue=Number(f>>BigInt(32)&BigInt(4294967295));return y[g++]=ue,ue=ue>>8,y[g++]=ue,ue=ue>>8,y[g++]=ue,ue=ue>>8,y[g++]=ue,g}function he(y,f,g,A,I){ae(f,A,I,y,g,7);let K=Number(f&BigInt(4294967295));y[g+7]=K,K=K>>8,y[g+6]=K,K=K>>8,y[g+5]=K,K=K>>8,y[g+4]=K;let ue=Number(f>>BigInt(32)&BigInt(4294967295));return y[g+3]=ue,ue=ue>>8,y[g+2]=ue,ue=ue>>8,y[g+1]=ue,ue=ue>>8,y[g]=ue,g+8}c.prototype.writeBigUInt64LE=xt(function(y,f=0){return je(this,y,f,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=xt(function(y,f=0){return he(this,y,f,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(y,f,g,A){if(y=+y,f=f>>>0,!A){let rt=Math.pow(2,8*g-1);be(this,y,f,g,rt-1,-rt)}let I=0,K=1,ue=0;for(this[f]=y&255;++I<g&&(K*=256);)y<0&&ue===0&&this[f+I-1]!==0&&(ue=1),this[f+I]=(y/K>>0)-ue&255;return f+g},c.prototype.writeIntBE=function(y,f,g,A){if(y=+y,f=f>>>0,!A){let rt=Math.pow(2,8*g-1);be(this,y,f,g,rt-1,-rt)}let I=g-1,K=1,ue=0;for(this[f+I]=y&255;--I>=0&&(K*=256);)y<0&&ue===0&&this[f+I+1]!==0&&(ue=1),this[f+I]=(y/K>>0)-ue&255;return f+g},c.prototype.writeInt8=function(y,f,g){return y=+y,f=f>>>0,g||be(this,y,f,1,127,-128),y<0&&(y=255+y+1),this[f]=y&255,f+1},c.prototype.writeInt16LE=function(y,f,g){return y=+y,f=f>>>0,g||be(this,y,f,2,32767,-32768),this[f]=y&255,this[f+1]=y>>>8,f+2},c.prototype.writeInt16BE=function(y,f,g){return y=+y,f=f>>>0,g||be(this,y,f,2,32767,-32768),this[f]=y>>>8,this[f+1]=y&255,f+2},c.prototype.writeInt32LE=function(y,f,g){return y=+y,f=f>>>0,g||be(this,y,f,4,2147483647,-2147483648),this[f]=y&255,this[f+1]=y>>>8,this[f+2]=y>>>16,this[f+3]=y>>>24,f+4},c.prototype.writeInt32BE=function(y,f,g){return y=+y,f=f>>>0,g||be(this,y,f,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[f]=y>>>24,this[f+1]=y>>>16,this[f+2]=y>>>8,this[f+3]=y&255,f+4},c.prototype.writeBigInt64LE=xt(function(y,f=0){return je(this,y,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=xt(function(y,f=0){return he(this,y,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function st(y,f,g,A,I,K){if(g+A>y.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function St(y,f,g,A,I){return f=+f,g=g>>>0,I||st(y,f,g,4),r.write(y,f,g,A,23,4),g+4}c.prototype.writeFloatLE=function(y,f,g){return St(this,y,f,!0,g)},c.prototype.writeFloatBE=function(y,f,g){return St(this,y,f,!1,g)};function It(y,f,g,A,I){return f=+f,g=g>>>0,I||st(y,f,g,8),r.write(y,f,g,A,52,8),g+8}c.prototype.writeDoubleLE=function(y,f,g){return It(this,y,f,!0,g)},c.prototype.writeDoubleBE=function(y,f,g){return It(this,y,f,!1,g)},c.prototype.copy=function(y,f,g,A){if(!c.isBuffer(y))throw new TypeError("argument should be a Buffer");if(g||(g=0),!A&&A!==0&&(A=this.length),f>=y.length&&(f=y.length),f||(f=0),A>0&&A<g&&(A=g),A===g||y.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("sourceEnd out of bounds");A>this.length&&(A=this.length),y.length-f<A-g&&(A=y.length-f+g);let I=A-g;return this===y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,g,A):Uint8Array.prototype.set.call(y,this.subarray(g,A),f),I},c.prototype.fill=function(y,f,g,A){if(typeof y=="string"){if(typeof f=="string"?(A=f,f=0,g=this.length):typeof g=="string"&&(A=g,g=this.length),A!==void 0&&typeof A!="string")throw new TypeError("encoding must be a string");if(typeof A=="string"&&!c.isEncoding(A))throw new TypeError("Unknown encoding: "+A);if(y.length===1){let K=y.charCodeAt(0);(A==="utf8"&&K<128||A==="latin1")&&(y=K)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(f<0||this.length<f||this.length<g)throw new RangeError("Out of range index");if(g<=f)return this;f=f>>>0,g=g===void 0?this.length:g>>>0,y||(y=0);let I;if(typeof y=="number")for(I=f;I<g;++I)this[I]=y;else{let K=c.isBuffer(y)?y:c.from(y,A),ue=K.length;if(ue===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(I=0;I<g-f;++I)this[I+f]=K[I%ue]}return this};var it={};function At(y,f,g){it[y]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${y}]`,this.stack,delete this.name}get code(){return y}set code(A){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:A,writable:!0})}toString(){return`${this.name} [${y}]: ${this.message}`}}}At("ERR_BUFFER_OUT_OF_BOUNDS",function(y){return y?`${y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),At("ERR_INVALID_ARG_TYPE",function(y,f){return`The "${y}" argument must be of type number. Received type ${typeof f}`},TypeError),At("ERR_OUT_OF_RANGE",function(y,f,g){let A=`The value of "${y}" is out of range.`,I=g;return Number.isInteger(g)&&Math.abs(g)>2**32?I=P(String(g)):typeof g=="bigint"&&(I=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(I=P(I)),I+="n"),A+=` It must be ${f}. Received ${I}`,A},RangeError);function P(y){let f="",g=y.length,A=y[0]==="-"?1:0;for(;g>=A+4;g-=3)f=`_${y.slice(g-3,g)}${f}`;return`${y.slice(0,g)}${f}`}function W(y,f,g){Ae(f,"offset"),(y[f]===void 0||y[f+g]===void 0)&&ge(f,y.length-(g+1))}function ae(y,f,g,A,I,K){if(y>g||y<f){let ue=typeof f=="bigint"?"n":"",rt;throw K>3?f===0||f===BigInt(0)?rt=`>= 0${ue} and < 2${ue} ** ${(K+1)*8}${ue}`:rt=`>= -(2${ue} ** ${(K+1)*8-1}${ue}) and < 2 ** ${(K+1)*8-1}${ue}`:rt=`>= ${f}${ue} and <= ${g}${ue}`,new it.ERR_OUT_OF_RANGE("value",rt,y)}W(A,I,K)}function Ae(y,f){if(typeof y!="number")throw new it.ERR_INVALID_ARG_TYPE(f,"number",y)}function ge(y,f,g){throw Math.floor(y)!==y?(Ae(y,g),new it.ERR_OUT_OF_RANGE(g||"offset","an integer",y)):f<0?new it.ERR_BUFFER_OUT_OF_BOUNDS:new it.ERR_OUT_OF_RANGE(g||"offset",`>= ${g?1:0} and <= ${f}`,y)}var Te=/[^+/0-9A-Za-z-_]/g;function Ie(y){if(y=y.split("=")[0],y=y.trim().replace(Te,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function we(y,f){f=f||1/0;let g,A=y.length,I=null,K=[];for(let ue=0;ue<A;++ue){if(g=y.charCodeAt(ue),g>55295&&g<57344){if(!I){if(g>56319){(f-=3)>-1&&K.push(239,191,189);continue}else if(ue+1===A){(f-=3)>-1&&K.push(239,191,189);continue}I=g;continue}if(g<56320){(f-=3)>-1&&K.push(239,191,189),I=g;continue}g=(I-55296<<10|g-56320)+65536}else I&&(f-=3)>-1&&K.push(239,191,189);if(I=null,g<128){if((f-=1)<0)break;K.push(g)}else if(g<2048){if((f-=2)<0)break;K.push(g>>6|192,g&63|128)}else if(g<65536){if((f-=3)<0)break;K.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((f-=4)<0)break;K.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return K}function Ee(y){let f=[];for(let g=0;g<y.length;++g)f.push(y.charCodeAt(g)&255);return f}function Z(y,f){let g,A,I,K=[];for(let ue=0;ue<y.length&&!((f-=2)<0);++ue)g=y.charCodeAt(ue),A=g>>8,I=g%256,K.push(I),K.push(A);return K}function De(y){return e.toByteArray(Ie(y))}function Ge(y,f,g,A){let I;for(I=0;I<A&&!(I+g>=f.length||I>=y.length);++I)f[I+g]=y[I];return I}function Ze(y,f){return y instanceof f||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===f.name}function ot(y){return y!==y}var Ft=function(){let y="0123456789abcdef",f=new Array(256);for(let g=0;g<16;++g){let A=g*16;for(let I=0;I<16;++I)f[A+I]=y[g]+y[I]}return f}();function xt(y){return typeof BigInt>"u"?Nt:y}function Nt(){throw new Error("BigInt not supported")}}),si=S((t,e)=>{a();var r=e.exports={},n,o;function s(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=s}catch{n=s}try{typeof clearTimeout=="function"?o=clearTimeout:o=u}catch{o=u}})();function c(j){if(n===setTimeout)return setTimeout(j,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(j,0);try{return n(j,0)}catch{try{return n.call(null,j,0)}catch{return n.call(this,j,0)}}}function h(j){if(o===clearTimeout)return clearTimeout(j);if((o===u||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(j);try{return o(j)}catch{try{return o.call(null,j)}catch{return o.call(this,j)}}}var w=[],m=!1,v,E=-1;function O(){!m||!v||(m=!1,v.length?w=v.concat(w):E=-1,w.length&&$())}function $(){if(!m){var j=c(O);m=!0;for(var ie=w.length;ie;){for(v=w,w=[];++E<ie;)v&&v[E].run();E=-1,ie=w.length}v=null,m=!1,h(j)}}r.nextTick=function(j){var ie=new Array(arguments.length-1);if(arguments.length>1)for(var se=1;se<arguments.length;se++)ie[se-1]=arguments[se];w.push(new k(j,ie)),w.length===1&&!m&&c($)};function k(j,ie){this.fun=j,this.array=ie}k.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function B(){}r.on=B,r.addListener=B,r.once=B,r.off=B,r.removeListener=B,r.removeAllListeners=B,r.emit=B,r.prependListener=B,r.prependOnceListener=B,r.listeners=function(j){return[]},r.binding=function(j){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(j){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}),p,d,a=F(()=>{ti().Buffer,p=si(),d=globalThis,globalThis&&globalThis.process&&globalThis.process.env&&(globalThis.process.env.LIBP2P_FORCE_PNET=!1)});function ci(t,e,r){e=e||[],r=r||0;for(var n=r;t>=mf;)e[r++]=t&255|ai,t/=128;for(;t&pf;)e[r++]=t&255|ai,t>>>=7;return e[r]=t|0,ci.bytes=r-n+1,e}function un(t,n){var r=0,n=n||0,o=0,s=n,u,c=t.length;do{if(s>=c)throw un.bytes=0,new RangeError("Could not decode varint");u=t[s++],r+=o<28?(u&ui)<<o:(u&ui)*Math.pow(2,o),o+=7}while(u>=wf);return un.bytes=s-n,r}var df,ai,hf,pf,mf,yf,wf,ui,gf,Df,bf,Ef,xf,Cf,Bf,Af,Tf,If,Sf,Uf,Lt,fi=F(()=>{a(),df=ci,ai=128,hf=127,pf=~hf,mf=Math.pow(2,31),yf=un,wf=128,ui=127,gf=Math.pow(2,7),Df=Math.pow(2,14),bf=Math.pow(2,21),Ef=Math.pow(2,28),xf=Math.pow(2,35),Cf=Math.pow(2,42),Bf=Math.pow(2,49),Af=Math.pow(2,56),Tf=Math.pow(2,63),If=function(t){return t<gf?1:t<Df?2:t<bf?3:t<Ef?4:t<xf?5:t<Cf?6:t<Bf?7:t<Af?8:t<Tf?9:10},Sf={encode:df,decode:yf,encodingLength:If},Uf=Sf,Lt=Uf}),Pt,ut,ct,cr=F(()=>{a(),fi(),Pt=t=>[Lt.decode(t),Lt.decode.bytes],ut=(t,e,r=0)=>(Lt.encode(t,e,r),e),ct=t=>Lt.encodingLength(t)}),li,Se,di,hi,Ne=F(()=>{a(),li=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Se=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},di=t=>new TextEncoder().encode(t),hi=t=>new TextDecoder().decode(t)}),Ue={};M(Ue,{Digest:()=>Xe,create:()=>$e,decode:()=>ft,equals:()=>fn});var $e,ft,fn,Xe,Le=F(()=>{a(),Ne(),cr(),$e=(t,e)=>{let r=e.byteLength,n=ct(t),o=n+ct(r),s=new Uint8Array(o+r);return ut(t,s,0),ut(r,s,n),s.set(e,o),new Xe(t,r,e,s)},ft=t=>{let e=Se(t),[r,n]=Pt(e),[o,s]=Pt(e.subarray(n)),u=e.subarray(n+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new Xe(r,o,u,e)},fn=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&li(t.bytes,e.bytes),Xe=class{constructor(t,e,r,n){this.code=t,this.size=e,this.digest=r,this.bytes=n}}});function Ff(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var s=t.charAt(o),u=s.charCodeAt(0);if(r[u]!==255)throw new TypeError(s+" is ambiguous");r[u]=o}var c=t.length,h=t.charAt(0),w=Math.log(c)/Math.log(256),m=Math.log(256)/Math.log(c);function v($){if($ instanceof Uint8Array||(ArrayBuffer.isView($)?$=new Uint8Array($.buffer,$.byteOffset,$.byteLength):Array.isArray($)&&($=Uint8Array.from($))),!($ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if($.length===0)return"";for(var k=0,B=0,j=0,ie=$.length;j!==ie&&$[j]===0;)j++,k++;for(var se=(ie-j)*m+1>>>0,N=new Uint8Array(se);j!==ie;){for(var L=$[j],oe=0,q=se-1;(L!==0||oe<B)&&q!==-1;q--,oe++)L+=256*N[q]>>>0,N[q]=L%c>>>0,L=L/c>>>0;if(L!==0)throw new Error("Non-zero carry");B=oe,j++}for(var X=se-B;X!==se&&N[X]===0;)X++;for(var de=h.repeat(k);X<se;++X)de+=t.charAt(N[X]);return de}function E($){if(typeof $!="string")throw new TypeError("Expected String");if($.length===0)return new Uint8Array;var k=0;if($[k]!==" "){for(var B=0,j=0;$[k]===h;)B++,k++;for(var ie=($.length-k)*w+1>>>0,se=new Uint8Array(ie);$[k];){var N=r[$.charCodeAt(k)];if(N===255)return;for(var L=0,oe=ie-1;(N!==0||L<j)&&oe!==-1;oe--,L++)N+=c*se[oe]>>>0,se[oe]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");j=L,k++}if($[k]!==" "){for(var q=ie-j;q!==ie&&se[q]===0;)q++;for(var X=new Uint8Array(B+(ie-q)),de=B;q!==ie;)X[de++]=se[q++];return X}}}function O($){var k=E($);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:v,decodeUnsafe:E,decode:O}}var vf,kf,pi,mi=F(()=>{a(),vf=Ff,kf=vf,pi=kf}),ln,dn,hn,yi,pn,lt,Pe,_f,Nf,_,pe=F(()=>{a(),mi(),Ne(),ln=class{constructor(t,e,r){this.name=t,this.prefix=e,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},dn=class{constructor(t,e,r){if(this.name=t,this.prefix=e,e.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return yi(this,t)}},hn=class{constructor(t){this.decoders=t}or(t){return yi(this,t)}decode(t){let e=t[0],r=this.decoders[e];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},yi=(t,e)=>new hn({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),pn=class{constructor(t,e,r,n){this.name=t,this.prefix=e,this.baseEncode=r,this.baseDecode=n,this.encoder=new ln(t,e,r),this.decoder=new dn(t,e,n)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},lt=({name:t,prefix:e,encode:r,decode:n})=>new pn(t,e,r,n),Pe=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:o}=pi(r,e);return lt({prefix:t,name:e,encode:n,decode:s=>Se(o(s))})},_f=(t,e,r,n)=>{let o={};for(let m=0;m<e.length;++m)o[e[m]]=m;let s=t.length;for(;t[s-1]==="=";)--s;let u=new Uint8Array(s*r/8|0),c=0,h=0,w=0;for(let m=0;m<s;++m){let v=o[t[m]];if(v===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<r|v,c+=r,c>=8&&(c-=8,u[w++]=255&h>>c)}if(c>=r||255&h<<8-c)throw new SyntaxError("Unexpected end of data");return u},Nf=(t,e,r)=>{let n=e[e.length-1]==="=",o=(1<<r)-1,s="",u=0,c=0;for(let h=0;h<t.length;++h)for(c=c<<8|t[h],u+=8;u>r;)u-=r,s+=e[o&c>>u];if(u&&(s+=e[o&c<<r-u]),n)for(;s.length*r&7;)s+="=";return s},_=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>lt({prefix:e,name:t,encode(o){return Nf(o,n,r)},decode(o){return _f(o,n,r,t)}})}),dt={};M(dt,{base58btc:()=>Y,base58flickr:()=>$f});var Y,$f,Re=F(()=>{a(),pe(),Y=Pe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),$f=Pe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})}),Rt={};M(Rt,{base32:()=>Me,base32hex:()=>Mf,base32hexpad:()=>zf,base32hexpadupper:()=>qf,base32hexupper:()=>Of,base32pad:()=>Pf,base32padupper:()=>Rf,base32upper:()=>Lf,base32z:()=>Hf});var Me,Lf,Pf,Rf,Mf,Of,zf,qf,Hf,ht=F(()=>{a(),pe(),Me=_({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Lf=_({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Pf=_({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Rf=_({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Mf=_({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Of=_({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),zf=_({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),qf=_({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Hf=_({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),dr={};M(dr,{CID:()=>x});var x,jf,Vf,Gf,Mt,Wf,wi,gi,fr,lr,Jf,Xf,Yf,Q=F(()=>{a(),cr(),Le(),Re(),ht(),Ne(),x=class{constructor(t,e,r,n){this.code=e,this.version=t,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:lr,byteLength:lr,code:fr,version:fr,multihash:fr,bytes:fr,_baseCache:lr,asCID:lr})}toV0(){switch(this.version){case 0:return this;default:{let{code:t,multihash:e}=this;if(t!==Mt)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==Wf)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return x.createV0(e)}}}toV1(){switch(this.version){case 0:{let{code:t,digest:e}=this.multihash,r=$e(t,e);return x.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&fn(this.multihash,t.multihash)}toString(t){let{bytes:e,version:r,_baseCache:n}=this;switch(r){case 0:return Vf(e,n,t||Y.encoder);default:return Gf(e,n,t||Me.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return Xf(/^0\.0/,Yf),!!(t&&(t[gi]||t.asCID===t))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof x)return t;if(t!=null&&t.asCID===t){let{version:e,code:r,multihash:n,bytes:o}=t;return new x(e,r,n,o||wi(e,r,n.bytes))}else if(t!=null&&t[gi]===!0){let{version:e,multihash:r,code:n}=t,o=ft(r);return x.create(e,n,o)}else return null}static create(t,e,r){if(typeof e!="number")throw new Error("String codecs are no longer supported");switch(t){case 0:{if(e!==Mt)throw new Error(`Version 0 CID must use dag-pb (code: ${Mt}) block encoding`);return new x(t,e,r,r.bytes)}case 1:{let n=wi(t,e,r.bytes);return new x(t,e,r,n)}default:throw new Error("Invalid version")}}static createV0(t){return x.create(0,Mt,t)}static createV1(t,e){return x.create(1,t,e)}static decode(t){let[e,r]=x.decodeFirst(t);if(r.length)throw new Error("Incorrect length");return e}static decodeFirst(t){let e=x.inspectBytes(t),r=e.size-e.multihashSize,n=Se(t.subarray(r,r+e.multihashSize));if(n.byteLength!==e.multihashSize)throw new Error("Incorrect length");let o=n.subarray(e.multihashSize-e.digestSize),s=new Xe(e.multihashCode,e.digestSize,o,n);return[e.version===0?x.createV0(s):x.createV1(e.codec,s),t.subarray(e.size)]}static inspectBytes(t){let e=0,r=()=>{let[m,v]=Pt(t.subarray(e));return e+=v,m},n=r(),o=Mt;if(n===18?(n=0,e=0):n===1&&(o=r()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);let s=e,u=r(),c=r(),h=e+c,w=h-s;return{version:n,codec:o,multihashCode:u,digestSize:c,multihashSize:w,size:h}}static parse(t,e){let[r,n]=jf(t,e),o=x.decode(n);return o._baseCache.set(r,t),o}},jf=(t,e)=>{switch(t[0]){case"Q":{let r=e||Y;return[Y.prefix,r.decode(`${Y.prefix}${t}`)]}case Y.prefix:{let r=e||Y;return[Y.prefix,r.decode(t)]}case Me.prefix:{let r=e||Me;return[Me.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Vf=(t,e,r)=>{let{prefix:n}=r;if(n!==Y.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=e.get(n);if(o==null){let s=r.encode(t).slice(1);return e.set(n,s),s}else return o},Gf=(t,e,r)=>{let{prefix:n}=r,o=e.get(n);if(o==null){let s=r.encode(t);return e.set(n,s),s}else return o},Mt=112,Wf=18,wi=(t,e,r)=>{let n=ct(t),o=n+ct(e),s=new Uint8Array(o+r.byteLength);return ut(t,s,0),ut(e,s,n),s.set(r,o),s},gi=Symbol.for("@ipld/js-cid/CID"),fr={writable:!1,configurable:!1,enumerable:!0},lr={writable:!1,enumerable:!1,configurable:!1},Jf="0.0.0-dev",Xf=(t,e)=>{if(t.test(Jf))console.warn(e);else throw new Error(e)},Yf=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`}),yn,mn,wn=F(()=>{a(),Le(),yn=({name:t,code:e,encode:r})=>new mn(t,e,r),mn=class{constructor(t,e,r){this.name=t,this.code=e,this.encode=r}digest(t){if(t instanceof Uint8Array){let e=this.encode(t);return e instanceof Uint8Array?$e(this.code,e):e.then(r=>$e(this.code,r))}else throw Error("Unknown type, must be binary type")}}}),gn=F(()=>{a(),Q(),cr(),Ne(),wn(),Le()}),Ci=S((t,e)=>{a(),e.exports=u;var r=128,n=127,o=~n,s=Math.pow(2,31);function u(c,h,w){if(Number.MAX_SAFE_INTEGER&&c>Number.MAX_SAFE_INTEGER)throw u.bytes=0,new RangeError("Could not encode varint");h=h||[],w=w||0;for(var m=w;c>=s;)h[w++]=c&255|r,c/=128;for(;c&o;)h[w++]=c&255|r,c>>>=7;return h[w]=c|0,u.bytes=w-m+1,h}}),Ti=S((t,e)=>{a(),e.exports=o;var r=128,n=127;function o(s,h){var c=0,h=h||0,w=0,m=h,v,E=s.length;do{if(m>=E||w>49)throw o.bytes=0,new RangeError("Could not decode varint");v=s[m++],c+=w<28?(v&n)<<w:(v&n)*Math.pow(2,w),w+=7}while(v>=r);return o.bytes=m-h,c}}),Si=S((t,e)=>{a();var r=Math.pow(2,7),n=Math.pow(2,14),o=Math.pow(2,21),s=Math.pow(2,28),u=Math.pow(2,35),c=Math.pow(2,42),h=Math.pow(2,49),w=Math.pow(2,56),m=Math.pow(2,63);e.exports=function(v){return v<r?1:v<n?2:v<o?3:v<s?4:v<u?5:v<c?6:v<h?7:v<w?8:v<m?9:10}}),pt=S((t,e)=>{a(),e.exports={encode:Ci(),decode:Ti(),encodingLength:Si()}}),Ws=S((t,e)=>{a(),e.exports=function(){return Date.now()}}),Xs=S((t,e)=>{a();var r=Ws(),n=class{constructor(s,u,c){let h=this;this._started=r(),this._rescheduled=0,this._scheduled=u,this._args=c,this._triggered=!1,this._timerWrapper=()=>{h._rescheduled>0?(h._scheduled=h._rescheduled-(r()-h._started),h._schedule(h._scheduled)):(h._triggered=!0,s.apply(null,h._args))},this._timer=setTimeout(this._timerWrapper,u)}reschedule(s){s||(s=this._scheduled);let u=r();u+s-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(s)):this._triggered?this._schedule(s):(this._started=u,this._rescheduled=s)}_schedule(s){this._triggered=!1,this._started=r(),this._rescheduled=0,this._scheduled=s,this._timer=setTimeout(this._timerWrapper,s)}clear(){clearTimeout(this._timer)}};function o(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let s;if(arguments.length>0){s=new Array(arguments.length-2);for(var u=0;u<s.length;u++)s[u]=arguments[u+2]}return new n(arguments[0],arguments[1],s)}e.exports=o}),Zs=S((t,e)=>{a();var{AbortController:r}=globalThis,n=Xs(),o=class extends r{constructor(s){super(),this._ms=s,this._timer=n(()=>this.abort(),s),Object.setPrototypeOf(this,o.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=n(()=>this.abort(),this._ms)}};e.exports={TimeoutController:o}}),ea=S((t,e)=>{a();function r(n){let o=new globalThis.AbortController;function s(){o.abort();for(let u of n)!u||!u.removeEventListener||u.removeEventListener("abort",s)}for(let u of n)if(!(!u||!u.addEventListener)){if(u.aborted){s();break}u.addEventListener("abort",s)}return o.signal}e.exports=r,e.exports.anySignal=r}),sa=S((t,e)=>{a();var r=1e3,n=r*60,o=n*60,s=o*24,u=s*7,c=s*365.25;e.exports=function(E,O){O=O||{};var $=typeof E;if($==="string"&&E.length>0)return h(E);if($==="number"&&isFinite(E))return O.long?m(E):w(E);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(E))};function h(E){if(E=String(E),!(E.length>100)){var O=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(E);if(O){var $=parseFloat(O[1]),k=(O[2]||"ms").toLowerCase();switch(k){case"years":case"year":case"yrs":case"yr":case"y":return $*c;case"weeks":case"week":case"w":return $*u;case"days":case"day":case"d":return $*s;case"hours":case"hour":case"hrs":case"hr":case"h":return $*o;case"minutes":case"minute":case"mins":case"min":case"m":return $*n;case"seconds":case"second":case"secs":case"sec":case"s":return $*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return $;default:return}}}}function w(E){var O=Math.abs(E);return O>=s?Math.round(E/s)+"d":O>=o?Math.round(E/o)+"h":O>=n?Math.round(E/n)+"m":O>=r?Math.round(E/r)+"s":E+"ms"}function m(E){var O=Math.abs(E);return O>=s?v(E,O,s,"day"):O>=o?v(E,O,o,"hour"):O>=n?v(E,O,n,"minute"):O>=r?v(E,O,r,"second"):E+" ms"}function v(E,O,$,k){var B=O>=$*1.5;return Math.round(E/$)+" "+k+(B?"s":"")}}),ua=S((t,e)=>{a();function r(n){s.debug=s,s.default=s,s.coerce=v,s.disable=h,s.enable=c,s.enabled=w,s.humanize=sa(),s.destroy=E,Object.keys(n).forEach(O=>{s[O]=n[O]}),s.names=[],s.skips=[],s.formatters={};function o(O){let $=0;for(let k=0;k<O.length;k++)$=($<<5)-$+O.charCodeAt(k),$|=0;return s.colors[Math.abs($)%s.colors.length]}s.selectColor=o;function s(O){let $,k=null,B,j;function ie(...se){if(!ie.enabled)return;let N=ie,L=Number(new Date),oe=L-($||L);N.diff=oe,N.prev=$,N.curr=L,$=L,se[0]=s.coerce(se[0]),typeof se[0]!="string"&&se.unshift("%O");let q=0;se[0]=se[0].replace(/%([a-zA-Z%])/g,(X,de)=>{if(X==="%%")return"%";q++;let _e=s.formatters[de];if(typeof _e=="function"){let xe=se[q];X=_e.call(N,xe),se.splice(q,1),q--}return X}),s.formatArgs.call(N,se),(N.log||s.log).apply(N,se)}return ie.namespace=O,ie.useColors=s.useColors(),ie.color=s.selectColor(O),ie.extend=u,ie.destroy=s.destroy,Object.defineProperty(ie,"enabled",{enumerable:!0,configurable:!1,get:()=>k!==null?k:(B!==s.namespaces&&(B=s.namespaces,j=s.enabled(O)),j),set:se=>{k=se}}),typeof s.init=="function"&&s.init(ie),ie}function u(O,$){let k=s(this.namespace+(typeof $>"u"?":":$)+O);return k.log=this.log,k}function c(O){s.save(O),s.namespaces=O,s.names=[],s.skips=[];let $,k=(typeof O=="string"?O:"").split(/[\s,]+/),B=k.length;for($=0;$<B;$++)!k[$]||(O=k[$].replace(/\*/g,".*?"),O[0]==="-"?s.skips.push(new RegExp("^"+O.slice(1)+"$")):s.names.push(new RegExp("^"+O+"$")))}function h(){let O=[...s.names.map(m),...s.skips.map(m).map($=>"-"+$)].join(",");return s.enable(""),O}function w(O){if(O[O.length-1]==="*")return!0;let $,k;for($=0,k=s.skips.length;$<k;$++)if(s.skips[$].test(O))return!1;for($=0,k=s.names.length;$<k;$++)if(s.names[$].test(O))return!0;return!1}function m(O){return O.toString().substring(2,O.toString().length-2).replace(/\.\*\?$/,"*")}function v(O){return O instanceof Error?O.stack||O.message:O}function E(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}e.exports=r}),ca=S((t,e)=>{a(),t.formatArgs=n,t.save=o,t.load=s,t.useColors=r,t.storage=u(),t.destroy=(()=>{let h=!1;return()=>{h||(h=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(h){if(h[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+h[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let w="color: "+this.color;h.splice(1,0,w,"color: inherit");let m=0,v=0;h[0].replace(/%[a-zA-Z%]/g,E=>{E!=="%%"&&(m++,E==="%c"&&(v=m))}),h.splice(v,0,w)}t.log=console.debug||console.log||(()=>{});function o(h){try{h?t.storage.setItem("debug",h):t.storage.removeItem("debug")}catch{}}function s(){let h;try{h=t.storage.getItem("debug")}catch{}return!h&&typeof p<"u"&&"env"in p&&(h=p.env.DEBUG),h}function u(){try{return localStorage}catch{}}e.exports=ua()(t);var{formatters:c}=e.exports;c.j=function(h){try{return JSON.stringify(h)}catch(w){return"[UnexpectedJSONParseError]: "+w.message}}}),On={};M(On,{base64:()=>Mn,base64pad:()=>md,base64url:()=>yd,base64urlpad:()=>wd});var Mn,md,yd,wd,zn=F(()=>{a(),pe(),Mn=_({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),md=_({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),yd=_({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),wd=_({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})}),fa,qn=F(()=>{a(),Ne(),fa=85}),da,Hn=F(()=>{a(),new TextEncoder,new TextDecoder,da=512}),wa=S((t,e)=>{a();var r=async n=>{for await(let o of n)return o};e.exports=r}),Da=S((t,e)=>{a();var r=async n=>{let o;for await(let s of n)o=s;return o};e.exports=r}),xa=S((t,e)=>{a();var r="[a-fA-F\\d:]",n=v=>v&&v.includeBoundaries?`(?:(?<=\\s|^)(?=${r})|(?<=${r})(?=\\s|$))`:"",o="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",s="[a-fA-F\\d]{1,4}",u=`
(?:
(?:${s}:){7}(?:${s}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${s}:){6}(?:${o}|:${s}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${s}:){5}(?::${o}|(?::${s}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${s}:){4}(?:(?::${s}){0,1}:${o}|(?::${s}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${s}:){3}(?:(?::${s}){0,2}:${o}|(?::${s}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${s}:){2}(?:(?::${s}){0,3}:${o}|(?::${s}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${s}:){1}(?:(?::${s}){0,4}:${o}|(?::${s}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${s}){0,5}:${o}|(?::${s}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),c=new RegExp(`(?:^${o}$)|(?:^${u}$)`),h=new RegExp(`^${o}$`),w=new RegExp(`^${u}$`),m=v=>v&&v.exact?c:new RegExp(`(?:${n(v)}${o}${n(v)})|(?:${n(v)}${u}${n(v)})`,"g");m.v4=v=>v&&v.exact?h:new RegExp(`${n(v)}${o}${n(v)}`,"g"),m.v6=v=>v&&v.exact?w:new RegExp(`${n(v)}${u}${n(v)}`,"g"),e.exports=m}),Ba=S((t,e)=>{a();var r=xa(),n=o=>r({exact:!0}).test(o);n.v4=o=>r.v4({exact:!0}).test(o),n.v6=o=>r.v6({exact:!0}).test(o),n.version=o=>n(o)?n.v4(o)?4:6:void 0,e.exports=n}),Wn={};M(Wn,{identity:()=>Ad});var Ad,Aa=F(()=>{a(),pe(),Ne(),Ad=lt({prefix:"\0",name:"identity",encode:t=>hi(t),decode:t=>di(t)})}),Jn={};M(Jn,{base2:()=>Td});var Td,Ta=F(()=>{a(),pe(),Td=_({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),Xn={};M(Xn,{base8:()=>Id});var Id,Ia=F(()=>{a(),pe(),Id=_({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),Yn={};M(Yn,{base10:()=>Sd});var Sd,Sa=F(()=>{a(),pe(),Sd=Pe({prefix:"9",name:"base10",alphabet:"0123456789"})}),Qn={};M(Qn,{base16:()=>Ud,base16upper:()=>Fd});var Ud,Fd,Ua=F(()=>{a(),pe(),Ud=_({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Fd=_({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})}),Zn={};M(Zn,{base36:()=>vd,base36upper:()=>kd});var vd,kd,Fa=F(()=>{a(),pe(),vd=Pe({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),kd=Pe({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),Kn={};M(Kn,{base256emoji:()=>Pd});function $d(t){return t.reduce((e,r)=>(e+=_d[r],e),"")}function Ld(t){let e=[];for(let r of t){let n=Nd[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var va,_d,Nd,Pd,ka=F(()=>{a(),pe(),va=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),_d=va.reduce((t,e,r)=>(t[r]=e,t),[]),Nd=va.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]),Pd=lt({prefix:"\u{1F680}",name:"base256emoji",encode:$d,decode:Ld})}),eo={};M(eo,{sha256:()=>Rd,sha512:()=>Md});var _a,Rd,Md,Na=F(()=>{a(),wn(),_a=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Rd=yn({name:"sha2-256",code:18,encode:_a("SHA-256")}),Md=yn({name:"sha2-512",code:19,encode:_a("SHA-512")})}),to={};M(to,{identity:()=>qd});var $a,Od,La,zd,qd,Pa=F(()=>{a(),Ne(),Le(),$a=0,Od="identity",La=Se,zd=t=>$e($a,La(t)),qd={code:$a,name:Od,encode:La,digest:zd}}),ro,Ra=F(()=>{a(),Aa(),Ta(),Ia(),Sa(),Ua(),ht(),Fa(),Re(),zn(),ka(),Na(),Pa(),qn(),Hn(),gn(),ro={...Wn,...Jn,...Xn,...Yn,...Qn,...Rt,...Zn,...dt,...On,...Kn},{...eo,...to}});function Nr(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}var no=F(()=>{a()});function Oa(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var Ma,oo,Hd,$r,io=F(()=>{a(),Ra(),no(),Ma=Oa("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),oo=Oa("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=Nr(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Hd={utf8:Ma,"utf-8":Ma,hex:ro.base16,latin1:oo,ascii:oo,binary:oo,...ro},$r=Hd}),Tt={};M(Tt,{toString:()=>so});function so(t,e="utf8"){let r=$r[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var Ke=F(()=>{a(),io()}),Va=S((t,e)=>{a();var r=Ba(),{toString:n}=(Ke(),R(Tt)),o=r,s=r.v4,u=r.v6,c=function(w,m,v){v=~~v;let E;if(s(w))E=m||new Uint8Array(v+4),w.split(/\./g).map(function(O){E[v++]=parseInt(O,10)&255});else if(u(w)){let O=w.split(":",8),$;for($=0;$<O.length;$++){let k=s(O[$]),B;k&&(B=c(O[$]),O[$]=n(B.slice(0,2),"base16")),B&&++$<8&&O.splice($,0,n(B.slice(2,4),"base16"))}if(O[0]==="")for(;O.length<8;)O.unshift("0");else if(O[O.length-1]==="")for(;O.length<8;)O.push("0");else if(O.length<8){for($=0;$<O.length&&O[$]!=="";$++);let k=[$,"1"];for($=9-O.length;$>0;$--)k.push("0");O.splice.apply(O,k)}for(E=m||new Uint8Array(v+16),$=0;$<O.length;$++){let k=parseInt(O[$],16);E[v++]=k>>8&255,E[v++]=k&255}}if(!E)throw Error("Invalid ip address: "+w);return E},h=function(w,m,v){m=~~m,v=v||w.length-m;let E=[],O,$=new DataView(w.buffer);if(v===4){for(let k=0;k<v;k++)E.push(w[m+k]);O=E.join(".")}else if(v===16){for(let k=0;k<v;k+=2)E.push($.getUint16(m+k).toString(16));O=E.join(":"),O=O.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),O=O.replace(/:{3,4}/,"::")}return O};e.exports={isIP:o,isV4:s,isV6:u,toBytes:c,toString:h}}),Lr=S((t,e)=>{a();function r(s){if(typeof s=="number"){if(r.codes[s])return r.codes[s];throw new Error("no protocol with code: "+s)}else if(typeof s=="string"){if(r.names[s])return r.names[s];throw new Error("no protocol with name: "+s)}throw new Error("invalid protocol id type: "+s)}var n=-1;r.lengthPrefixedVarSize=n,r.V=n,r.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,n,"ip6zone"],[53,n,"dns","resolvable"],[54,n,"dns4","resolvable"],[55,n,"dns6","resolvable"],[56,n,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,n,"unix",!1,"path"],[421,n,"ipfs"],[421,n,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,n,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,n,"memory"]],r.names={},r.codes={},r.table.map(s=>{let u=o.apply(null,s);return r.codes[u.code]=u,r.names[u.name]=u,null}),r.object=o;function o(s,u,c,h,w){return{code:s,size:u,name:c,resolvable:Boolean(h),path:Boolean(w)}}e.exports=r}),Ja={};M(Ja,{fromString:()=>co});function co(t,e="utf8"){let r=$r[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var fo=F(()=>{a(),io()}),lo={};M(lo,{concat:()=>Gd});function Gd(t,e){e||(e=t.reduce((o,s)=>o+s.length,0));let r=Nr(e),n=0;for(let o of t)r.set(o,n),n+=o.length;return r}var ho=F(()=>{a(),no()}),ru=S((t,e)=>{a();var r=Va(),n=Lr(),{CID:o}=(Q(),R(dr)),{base32:s}=(ht(),R(Rt)),{base58btc:u}=(Re(),R(dt)),c=(Le(),R(Ue)),h=pt(),{toString:w}=(Ke(),R(Tt)),{fromString:m}=(fo(),R(Ja)),{concat:v}=(ho(),R(lo));e.exports=E;function E(X,de){return de instanceof Uint8Array?E.toString(X,de):E.toBytes(X,de)}E.toString=function(X,de){switch(n(X).code){case 4:case 41:return $(de);case 6:case 273:case 33:case 132:return B(de).toString();case 53:case 54:case 55:case 56:case 400:case 777:return ie(de);case 421:return N(de);case 444:return q(de);case 445:return q(de);default:return w(de,"base16")}},E.toBytes=function(X,de){switch(n(X).code){case 4:return O(de);case 41:return O(de);case 6:case 273:case 33:case 132:return k(parseInt(de,10));case 53:case 54:case 55:case 56:case 400:case 777:return j(de);case 421:return se(de);case 444:return L(de);case 445:return oe(de);default:return m(de,"base16")}};function O(X){if(!r.isIP(X))throw new Error("invalid ip address");return r.toBytes(X)}function $(X){let de=r.toString(X);if(!de||!r.isIP(de))throw new Error("invalid ip address");return de}function k(X){let de=new ArrayBuffer(2);return new DataView(de).setUint16(0,X),new Uint8Array(de)}function B(X){return new DataView(X.buffer).getUint16(X.byteOffset)}function j(X){let de=m(X),_e=Uint8Array.from(h.encode(de.length));return v([_e,de],_e.length+de.length)}function ie(X){let de=h.decode(X);if(X=X.slice(h.decode.bytes),X.length!==de)throw new Error("inconsistent lengths");return w(X)}function se(X){let de;X[0]==="Q"||X[0]==="1"?de=c.decode(u.decode(`z${X}`)).bytes:de=o.parse(X).multihash.bytes;let _e=Uint8Array.from(h.encode(de.length));return v([_e,de],_e.length+de.length)}function N(X){let de=h.decode(X),_e=X.slice(h.decode.bytes);if(_e.length!==de)throw new Error("inconsistent lengths");return w(_e,"base58btc")}function L(X){let de=X.split(":");if(de.length!==2)throw new Error("failed to parse onion addr: "+de+" does not contain a port number");if(de[0].length!==16)throw new Error("failed to parse onion addr: "+de[0]+" not a Tor onion address.");let _e=s.decode("b"+de[0]),xe=parseInt(de[1],10);if(xe<1||xe>65536)throw new Error("Port number is not in range(1, 65536)");let We=k(xe);return v([_e,We],_e.length+We.length)}function oe(X){let de=X.split(":");if(de.length!==2)throw new Error("failed to parse onion addr: "+de+" does not contain a port number");if(de[0].length!==56)throw new Error("failed to parse onion addr: "+de[0]+" not a Tor onion3 address.");let _e=s.decode("b"+de[0]),xe=parseInt(de[1],10);if(xe<1||xe>65536)throw new Error("Port number is not in range(1, 65536)");let We=k(xe);return v([_e,We],_e.length+We.length)}function q(X){let de=X.slice(0,X.length-2),_e=X.slice(X.length-2),xe=w(de,"base32"),We=B(_e);return xe+":"+We}}),pu=S((t,e)=>{a();var r=ru(),n=Lr(),o=pt(),{concat:s}=(ho(),R(lo)),{toString:u}=(Ke(),R(Tt));e.exports={stringToStringTuples:c,stringTuplesToString:h,tuplesToStringTuples:m,stringTuplesToTuples:w,bytesToTuples:O,tuplesToBytes:v,bytesToString:$,stringToBytes:k,fromString:B,fromBytes:j,validateBytes:ie,isValidBytes:se,cleanPath:N,ParseError:L,protoFromTuple:oe,sizeForAddr:E};function c(q){let X=[],de=q.split("/").slice(1);if(de.length===1&&de[0]==="")return[];for(let _e=0;_e<de.length;_e++){let xe=de[_e],We=n(xe);if(We.size===0){X.push([xe]);continue}if(_e++,_e>=de.length)throw L("invalid address: "+q);if(We.path){X.push([xe,N(de.slice(_e).join("/"))]);break}X.push([xe,de[_e]])}return X}function h(q){let X=[];return q.map(de=>{let _e=oe(de);return X.push(_e.name),de.length>1&&X.push(de[1]),null}),N(X.join("/"))}function w(q){return q.map(X=>{Array.isArray(X)||(X=[X]);let de=oe(X);return X.length>1?[de.code,r.toBytes(de.code,X[1])]:[de.code]})}function m(q){return q.map(X=>{let de=oe(X);return X[1]?[de.code,r.toString(de.code,X[1])]:[de.code]})}function v(q){return j(s(q.map(X=>{let de=oe(X),_e=Uint8Array.from(o.encode(de.code));return X.length>1&&(_e=s([_e,X[1]])),_e})))}function E(q,X){return q.size>0?q.size/8:q.size===0?0:o.decode(X)+o.decode.bytes}function O(q){let X=[],de=0;for(;de<q.length;){let _e=o.decode(q,de),xe=o.decode.bytes,We=n(_e),Ve=E(We,q.slice(de+xe));if(Ve===0){X.push([_e]),de+=xe;continue}let Ye=q.slice(de+xe,de+xe+Ve);if(de+=Ve+xe,de>q.length)throw L("Invalid address Uint8Array: "+u(q,"base16"));X.push([_e,Ye])}return X}function $(q){let X=O(q),de=m(X);return h(de)}function k(q){q=N(q);let X=c(q),de=w(X);return v(de)}function B(q){return k(q)}function j(q){let X=ie(q);if(X)throw X;return Uint8Array.from(q)}function ie(q){try{O(q)}catch(X){return X}}function se(q){return ie(q)===void 0}function N(q){return"/"+q.trim().split("/").filter(X=>X).join("/")}function L(q){return new Error("Error parsing address: "+q)}function oe(q){return n(q[0])}}),Yt=S((t,e)=>{a();function r(o,s){for(let u in s)Object.defineProperty(o,u,{value:s[u],enumerable:!0,configurable:!0});return o}function n(o,s,u){if(!o||typeof o=="string")throw new TypeError("Please pass an Error to err-code");u||(u={}),typeof s=="object"&&(u=s,s=""),s&&(u.code=s);try{return r(o,u)}catch{u.message=o.message,u.stack=o.stack;let c=function(){};return c.prototype=Object.create(Object.getPrototypeOf(o)),r(new c,u)}}e.exports=n}),wu={};M(wu,{equals:()=>uh});function uh(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var gu=F(()=>{a()}),bo=S((t,e)=>{a();var r=pu(),n=Lr(),o=pt(),{CID:s}=(Q(),R(dr)),{base58btc:u}=(Re(),R(dt)),c=Yt(),h=Symbol.for("nodejs.util.inspect.custom"),{toString:w}=(Ke(),R(Tt)),{equals:m}=(gu(),R(wu)),v=new Map,E=Symbol.for("@multiformats/js-multiaddr/multiaddr"),O=class{constructor(k){if(k==null&&(k=""),Object.defineProperty(this,E,{value:!0}),k instanceof Uint8Array)this.bytes=r.fromBytes(k);else if(typeof k=="string"){if(k.length>0&&k.charAt(0)!=="/")throw new Error(`multiaddr "${k}" must start with a "/"`);this.bytes=r.fromString(k)}else if(O.isMultiaddr(k))this.bytes=r.fromBytes(k.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return r.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let k={},B=this.toString().split("/");return k.family=B[1]==="ip4"?4:6,k.host=B[2],k.transport=B[3],k.port=parseInt(B[4]),k}protos(){return this.protoCodes().map(k=>Object.assign({},n(k)))}protoCodes(){let k=[],B=this.bytes,j=0;for(;j<B.length;){let ie=o.decode(B,j),se=o.decode.bytes,N=n(ie);j+=r.sizeForAddr(N,B.slice(j+se))+se,k.push(ie)}return k}protoNames(){return this.protos().map(k=>k.name)}tuples(){return r.bytesToTuples(this.bytes)}stringTuples(){let k=r.bytesToTuples(this.bytes);return r.tuplesToStringTuples(k)}encapsulate(k){return k=new O(k),new O(this.toString()+k.toString())}decapsulate(k){let B=k.toString(),j=this.toString(),ie=j.lastIndexOf(B);if(ie<0)throw new Error("Address "+this+" does not contain subaddress: "+k);return new O(j.slice(0,ie))}decapsulateCode(k){let B=this.tuples();for(let j=B.length-1;j>=0;j--)if(B[j][0]===k)return new O(r.tuplesToBytes(B.slice(0,j)));return this}getPeerId(){try{let k=this.stringTuples().filter(B=>B[0]===n.names.ipfs.code).pop();if(k&&k[1]){let B=k[1];return B[0]==="Q"||B[0]==="1"?w(u.decode(`z${B}`),"base58btc"):w(s.parse(B).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let k=null;try{k=this.stringTuples().filter(B=>!!n(B[0]).path)[0][1],k||(k=null)}catch{k=null}return k}equals(k){return m(this.bytes,k.bytes)}async resolve(){let k=this.protos().find(j=>j.resolvable);if(!k)return[this];let B=v.get(k.name);if(!B)throw c(new Error(`no available resolver for ${k.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await B(this)).map(j=>new O(j))}nodeAddress(){let k=this.protoCodes(),B=this.protoNames(),j=this.toString().split("/").slice(1);if(j.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(k[0]!==4&&k[0]!==41&&k[0]!==54&&k[0]!==55)throw new Error(`no protocol with name: "'${B[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(j[2]!=="tcp"&&j[2]!=="udp")throw new Error(`no protocol with name: "'${B[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:k[0]===41||k[0]===55?6:4,address:j[1],port:parseInt(j[3])}}isThinWaistAddress(k){let B=(k||this).protos();return!(B.length!==2||B[0].code!==4&&B[0].code!==41||B[1].code!==6&&B[1].code!==273)}static fromNodeAddress(k,B){if(!k)throw new Error("requires node address object");if(!B)throw new Error("requires transport protocol");let j;switch(k.family){case 4:j="ip4";break;case 6:j="ip6";break;default:throw Error(`Invalid addr family. Got '${k.family}' instead of 4 or 6`)}return new O("/"+[j,k.address,B,k.port].join("/"))}static isName(k){return O.isMultiaddr(k)?k.protos().some(B=>B.resolvable):!1}static isMultiaddr(k){return k instanceof O||Boolean(k&&k[E])}[h](){return"<Multiaddr "+w(this.bytes,"base16")+" - "+r.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+w(this.bytes,"base16")+" - "+r.bytesToString(this.bytes)+">"}};O.protocols=n,O.resolvers=v;function $(k){return new O(k)}e.exports={Multiaddr:O,multiaddr:$,protocols:n,resolvers:v}}),ku=S((t,e)=>{a();var{Multiaddr:r}=bo(),n=Ve("dns4"),o=Ve("dns6"),s=Ve("dnsaddr"),u=We(Ve("dns"),s,n,o),c=We(Ve("ip4"),Ve("ip6")),h=We(xe(c,Ve("tcp")),xe(u,Ve("tcp"))),w=xe(c,Ve("udp")),m=xe(w,Ve("utp")),v=xe(w,Ve("quic")),E=We(xe(h,Ve("ws")),xe(u,Ve("ws"))),O=We(xe(h,Ve("wss")),xe(u,Ve("wss"))),$=We(xe(h,Ve("http")),xe(c,Ve("http")),xe(u,Ve("http"))),k=We(xe(h,Ve("https")),xe(c,Ve("https")),xe(u,Ve("https"))),B=We(xe(E,Ve("p2p-webrtc-star"),Ve("p2p")),xe(O,Ve("p2p-webrtc-star"),Ve("p2p")),xe(E,Ve("p2p-webrtc-star")),xe(O,Ve("p2p-webrtc-star"))),j=We(xe(E,Ve("p2p-websocket-star"),Ve("p2p")),xe(O,Ve("p2p-websocket-star"),Ve("p2p")),xe(E,Ve("p2p-websocket-star")),xe(O,Ve("p2p-websocket-star"))),ie=We(xe($,Ve("p2p-webrtc-direct"),Ve("p2p")),xe(k,Ve("p2p-webrtc-direct"),Ve("p2p")),xe($,Ve("p2p-webrtc-direct")),xe(k,Ve("p2p-webrtc-direct"))),se=We(E,O,$,k,B,ie,h,m,v,u),N=We(xe(se,Ve("p2p-stardust"),Ve("p2p")),xe(se,Ve("p2p-stardust"))),L=We(xe(se,Ve("p2p")),B,ie,Ve("p2p")),oe=We(xe(L,Ve("p2p-circuit"),L),xe(L,Ve("p2p-circuit")),xe(Ve("p2p-circuit"),L),xe(se,Ve("p2p-circuit")),xe(Ve("p2p-circuit"),se),Ve("p2p-circuit")),q=()=>We(xe(oe,q),oe),X=q(),de=We(xe(X,L,X),xe(L,X),xe(X,L),X,L);e.exports={DNS:u,DNS4:n,DNS6:o,DNSADDR:s,IP:c,TCP:h,UDP:w,QUIC:v,UTP:m,HTTP:$,HTTPS:k,WebSockets:E,WebSocketsSecure:O,WebSocketStar:j,WebRTCStar:B,WebRTCDirect:ie,Reliable:se,Stardust:N,Circuit:X,P2P:de,IPFS:de};function _e(Ye){function $t(kt){if(!r.isMultiaddr(kt))try{kt=new r(kt)}catch{return!1}let at=Ye(kt.protoNames());return at===null?!1:at===!0||at===!1?at:at.length===0}return $t}function xe(...Ye){function $t(kt){if(kt.length<Ye.length)return null;let at=kt;return Ye.some(Je=>(at=typeof Je=="function"?Je().partialMatch(kt):Je.partialMatch(kt),Array.isArray(at)&&(kt=at),at===null)),at}return{toString:function(){return"{ "+Ye.join(" ")+" }"},input:Ye,matches:_e($t),partialMatch:$t}}function We(...Ye){function $t(kt){let at=null;return Ye.some(Je=>{let Bt=typeof Je=="function"?Je().partialMatch(kt):Je.partialMatch(kt);return Bt?(at=Bt,!0):!1}),at}return{toString:function(){return"{ "+Ye.join(" ")+" }"},input:Ye,matches:_e($t),partialMatch:$t}}function Ve(Ye){let $t=Ye;function kt(Je){let Bt;if(typeof Je=="string"||Je instanceof Uint8Array)try{Bt=new r(Je)}catch{return!1}else Bt=Je;let Ut=Bt.protoNames();return Ut.length===1&&Ut[0]===$t}function at(Je){return Je.length===0?null:Je[0]===$t?Je.slice(1):null}return{toString:function(){return $t},matches:kt,partialMatch:at}}}),To=S((t,e)=>{a();var r=typeof navigator<"u"&&navigator.product==="ReactNative";function n(){return r?"http://localhost":d.location?d.location.protocol+"//"+d.location.host:""}var o=d.URL,s=n(),u=class{constructor(h="",w=s){this.super=new o(h,w),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(h){this.super.hash=h}set host(h){this.super.host=h}set hostname(h){this.super.hostname=h}set href(h){this.super.href=h}set password(h){this.super.password=h}set pathname(h){this.super.pathname=h}set port(h){this.super.port=h}set protocol(h){this.super.protocol=h}set search(h){this.super.search=h}set username(h){this.super.username=h}static createObjectURL(h){return o.createObjectURL(h)}static revokeObjectURL(h){o.revokeObjectURL(h)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function c(h){if(typeof h=="string")return new o(h).toString();if(!(h instanceof o)){let w=h.username&&h.password?`${h.username}:${h.password}@`:"",m=h.auth?h.auth+"@":"",v=h.port?":"+h.port:"",E=h.protocol?h.protocol+"//":"",O=h.host||"",$=h.hostname||"",k=h.search||(h.query?"?"+h.query:""),B=h.hash||"",j=h.pathname||"",ie=h.path||j+k;return`${E}${w||m}${O||$+v}${ie}${B}`}}e.exports={URLWithLegacySupport:u,URLSearchParams:d.URLSearchParams,defaultBase:s,format:c}}),Pu=S((t,e)=>{a();var{URLWithLegacySupport:r,format:n}=To();e.exports=(o,s={},u={},c)=>{let h=s.protocol?s.protocol.replace(":",""):"http";h=(u[h]||c||h)+":";let w;try{w=new r(o)}catch{w={}}let m=Object.assign({},s,{protocol:h||w.protocol,host:s.host||w.host});return new r(o,n(m)).toString()}}),Mu=S((t,e)=>{a();var{URLWithLegacySupport:r,format:n,URLSearchParams:o,defaultBase:s}=To(),u=Pu();e.exports={URL:r,URLSearchParams:o,format:n,relative:u,defaultBase:s}}),Ku=S((t,e)=>{a();var{base58btc:r}=(Re(),R(dt)),{base32:n}=(ht(),R(Rt)),o=(Le(),R(Ue)),{Multiaddr:s}=bo(),u=ku(),{CID:c}=(Q(),R(dr)),{URL:h}=Mu(),{toString:w}=(Ke(),R(Tt)),m=/^https?:\/\/[^/]+\/(ip[fn]s)\/([^/?#]+)/,v=/^\/(ip[fn]s)\/([^/?#]+)/,E=1,O=2,$=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,k=1,B=2,j=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function ie(Je){let Bt=_e(Je);try{o.decode(r.decode("z"+Bt))}catch{return!1}return!0}function se(Je){try{n.decode(Je)}catch{return!1}return!0}function N(Je){try{return typeof Je=="string"?Boolean(c.parse(Je)):Je instanceof Uint8Array?Boolean(c.decode(Je)):Boolean(c.asCID(Je))}catch{return!1}}function L(Je){if(!Je)return!1;if(s.isMultiaddr(Je))return!0;try{return new s(Je),!0}catch{return!1}}function oe(Je){return L(Je)&&u.P2P.matches(Je)}function q(Je,Bt,Ut=E,vt=O){let be=_e(Je);if(!be)return!1;let je=be.match(Bt);if(!je||je[Ut]!=="ipfs")return!1;let he=je[vt];return he&&Bt===$&&(he=he.toLowerCase()),N(he)}function X(Je,Bt,Ut=E,vt=O){let be=_e(Je);if(!be)return!1;let je=be.match(Bt);if(!je||je[Ut]!=="ipns")return!1;let he=je[vt];if(he&&Bt===$){if(he=he.toLowerCase(),N(he))return!0;try{!he.includes(".")&&he.includes("-")&&(he=he.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));let{hostname:st}=new h(`http://${he}`);return j.test(st)}catch{return!1}}return!0}function de(Je){return typeof Je=="string"}function _e(Je){return Je instanceof Uint8Array?w(Je,"base58btc"):de(Je)?Je:!1}var xe=Je=>q(Je,$,B,k),We=Je=>X(Je,$,B,k),Ve=Je=>xe(Je)||We(Je),Ye=Je=>q(Je,m)||xe(Je),$t=Je=>X(Je,m)||We(Je),kt=Je=>Ye(Je)||$t(Je)||Ve(Je),at=Je=>q(Je,v)||X(Je,v);e.exports={multihash:ie,multiaddr:L,peerMultiaddr:oe,cid:N,base32cid:Je=>se(Je)&&N(Je),ipfsSubdomain:xe,ipnsSubdomain:We,subdomain:Ve,subdomainGatewayPattern:$,ipfsUrl:Ye,ipnsUrl:$t,url:kt,pathGatewayPattern:m,ipfsPath:Je=>q(Je,v),ipnsPath:Je=>X(Je,v),path:at,pathPattern:v,urlOrPath:Je=>kt(Je)||at(Je),cidPath:Je=>de(Je)&&!N(Je)&&q(`/ipfs/${Je}`,v)}}),hc=S((t,e)=>{a();function r(n){let[o,s]=n[Symbol.asyncIterator]?[n[Symbol.asyncIterator](),Symbol.asyncIterator]:[n[Symbol.iterator](),Symbol.iterator],u=[];return{peek:()=>o.next(),push:c=>{u.push(c)},next:()=>u.length?{done:!1,value:u.shift()}:o.next(),[s](){return this}}}e.exports=r}),mc=S((t,e)=>{a();var r=async n=>{for await(let o of n);};e.exports=r}),wc=S((t,e)=>{a();var r=async function*(n,o){for await(let s of n)yield o(s)};e.exports=r});a();a();Q();a();gn();var hr=({enumerable:t=!0,configurable:e=!1}={})=>({enumerable:t,configurable:e,writable:!1}),Dn=function*(t,e){if(t!=null&&!(t instanceof Uint8Array))for(let[r,n]of Object.entries(t)){let o=[...e,r];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(let[s,u]of n.entries()){let c=[...o,s],h=x.asCID(u);h?yield[c.join("/"),h]:typeof u=="object"&&(yield*Dn(u,c))}else{let s=x.asCID(n);s?yield[o.join("/"),s]:yield*Dn(n,o)}}},bn=function*(t,e){if(t!=null)for(let[r,n]of Object.entries(t)){let o=[...e,r];if(yield o.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!x.asCID(n))if(Array.isArray(n))for(let[s,u]of n.entries()){let c=[...o,s];yield c.join("/"),typeof u=="object"&&!x.asCID(u)&&(yield*bn(u,c))}else yield*bn(n,o)}},Qf=(t,e)=>{let r=t;for(let[n,o]of e.entries()){if(r=r[o],r==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(u=>`[${JSON.stringify(u)}]`).join("")}`);let s=x.asCID(r);if(s)return{value:s,remaining:e.slice(n+1).join("/")}}return{value:r}},En=class{constructor({cid:t,bytes:e,value:r}){if(!t||!e||typeof r>"u")throw new Error("Missing required argument");this.cid=t,this.bytes=e,this.value=r,this.asBlock=this,Object.defineProperties(this,{cid:hr(),bytes:hr(),value:hr(),asBlock:hr()})}links(){return Dn(this.value,[])}tree(){return bn(this.value,[])}get(t="/"){return Qf(this.value,t.split("/").filter(Boolean))}},bi=({bytes:t,cid:e,value:r,codec:n})=>{let o=r!==void 0?r:n&&n.decode(t);if(o===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new En({cid:e,bytes:t,value:o})};a();Q();a();var Nn=J(pt(),1);a();a();a();a();var ll=["string","number","bigint","symbol"],dl=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Fi(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;return ll.includes(e)?e:e==="function"?"Function":Array.isArray(t)?"Array":hl(t)?"Buffer":pl(t)||"Object"}function hl(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function pl(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(dl.includes(e))return e}a();var l=class{constructor(t,e,r){this.major=t,this.majorEncoded=t<<5,this.name=e,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}};l.uint=new l(0,"uint",!0);l.negint=new l(1,"negint",!0);l.bytes=new l(2,"bytes",!0);l.string=new l(3,"string",!0);l.array=new l(4,"array",!1);l.map=new l(5,"map",!1);l.tag=new l(6,"tag",!1);l.float=new l(7,"float",!0);l.false=new l(7,"false",!0);l.true=new l(7,"true",!0);l.null=new l(7,"null",!0);l.undefined=new l(7,"undefined",!0);l.break=new l(7,"break",!0);var b=class{constructor(t,e,r){this.type=t,this.value=e,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};a();a();var mt=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",ml=new TextDecoder,yl=new TextEncoder;function pr(t){return mt&&globalThis.Buffer.isBuffer(t)}function Bn(t){return t instanceof Uint8Array?pr(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}var Ni=mt?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):ki(t,e,r):(t,e,r)=>r-e>64?ml.decode(t.subarray(e,r)):ki(t,e,r),$i=mt?t=>t.length>64?globalThis.Buffer.from(t):vi(t):t=>t.length>64?yl.encode(t):vi(t),Ce=t=>Uint8Array.from(t),yt=mt?(t,e,r)=>pr(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),Li=mt?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),Bn(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),n=0;for(let o of t)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},Pi=mt?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function Ri(t,e){if(pr(t)&&pr(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function vi(t,e=1/0){let r,n=t.length,o=null,s=[];for(let u=0;u<n;++u){if(r=t.charCodeAt(u),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(u+1===n){(e-=3)>-1&&s.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(e-=3)>-1&&s.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function ki(t,e,r){let n=[];for(;e<r;){let o=t[e],s=null,u=o>239?4:o>223?3:o>191?2:1;if(e+u<=r){let c,h,w,m;switch(u){case 1:o<128&&(s=o);break;case 2:c=t[e+1],(c&192)===128&&(m=(o&31)<<6|c&63,m>127&&(s=m));break;case 3:c=t[e+1],h=t[e+2],(c&192)===128&&(h&192)===128&&(m=(o&15)<<12|(c&63)<<6|h&63,m>2047&&(m<55296||m>57343)&&(s=m));break;case 4:c=t[e+1],h=t[e+2],w=t[e+3],(c&192)===128&&(h&192)===128&&(w&192)===128&&(m=(o&15)<<18|(c&63)<<12|(h&63)<<6|w&63,m>65535&&m<1114112&&(s=m))}}s===null?(s=65533,u=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),e+=u}return wl(n)}var _i=4096;function wl(t){let e=t.length;if(e<=_i)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=_i));return r}var gl=256,Ot=class{constructor(t=gl){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let e=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){let r=e.length-(this.maxCursor-this.cursor)-1;e.set(t,r)}else{if(e){let r=e.length-(this.maxCursor-this.cursor)-1;r<e.length&&(this.chunks[this.chunks.length-1]=e.subarray(0,r),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(e=Pi(this.chunkSize),this.chunks.push(e),this.maxCursor+=e.length,this._initReuseChunk===null&&(this._initReuseChunk=e),e.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let e;if(this.chunks.length===1){let r=this.chunks[0];t&&this.cursor>r.length/2?(e=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=yt(r,0,this.cursor)}else e=Li(this.chunks,this.cursor);return t&&this.reset(),e}};a();var C="CBOR decode error:",An="CBOR encode error:";function Fe(t,e,r){if(t.length-e<r)throw new Error(`${C} not enough data for type`)}a();a();var z=[24,256,65536,4294967296,BigInt("18446744073709551616")];function ee(t,e,r){Fe(t,e,1);let n=t[e];if(r.strict===!0&&n<z[0])throw new Error(`${C} integer encoded in more bytes than necessary (strict decode)`);return n}function te(t,e,r){Fe(t,e,2);let n=t[e]<<8|t[e+1];if(r.strict===!0&&n<z[1])throw new Error(`${C} integer encoded in more bytes than necessary (strict decode)`);return n}function re(t,e,r){Fe(t,e,4);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<z[2])throw new Error(`${C} integer encoded in more bytes than necessary (strict decode)`);return n}function ne(t,e,r){Fe(t,e,8);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],s=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===!0&&s<z[3])throw new Error(`${C} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${C} integers outside of the safe integer range are not supported`)}function Mi(t,e,r,n){return new b(l.uint,ee(t,e+1,n),2)}function Oi(t,e,r,n){return new b(l.uint,te(t,e+1,n),3)}function zi(t,e,r,n){return new b(l.uint,re(t,e+1,n),5)}function qi(t,e,r,n){return new b(l.uint,ne(t,e+1,n),9)}function ce(t,e){return H(t,0,e.value)}function H(t,e,r){if(r<z[0]){let n=Number(r);t.push([e|n])}else if(r<z[1]){let n=Number(r);t.push([e|24,n])}else if(r<z[2]){let n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<z[3]){let n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<z[4]){let o=[e|27,0,0,0,0,0,0,0],s=Number(n&BigInt(4294967295)),u=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=s&255,s=s>>8,o[7]=s&255,s=s>>8,o[6]=s&255,s=s>>8,o[5]=s&255,o[4]=u&255,u=u>>8,o[3]=u&255,u=u>>8,o[2]=u&255,u=u>>8,o[1]=u&255,t.push(o)}else throw new Error(`${C} encountered BigInt larger than allowable range`)}}ce.encodedSize=function(t){return H.encodedSize(t.value)};H.encodedSize=function(t){return t<z[0]?1:t<z[1]?2:t<z[2]?3:t<z[3]?5:9};ce.compareTokens=function(t,e){return t.value<e.value?-1:t.value>e.value?1:0};a();function Hi(t,e,r,n){return new b(l.negint,-1-ee(t,e+1,n),2)}function ji(t,e,r,n){return new b(l.negint,-1-te(t,e+1,n),3)}function Vi(t,e,r,n){return new b(l.negint,-1-re(t,e+1,n),5)}var Tn=BigInt(-1),Gi=BigInt(1);function Wi(t,e,r,n){let o=ne(t,e+1,n);if(typeof o!="bigint"){let s=-1-o;if(s>=Number.MIN_SAFE_INTEGER)return new b(l.negint,s,9)}if(n.allowBigInt!==!0)throw new Error(`${C} integers outside of the safe integer range are not supported`);return new b(l.negint,Tn-BigInt(o),9)}function mr(t,e){let r=e.value,n=typeof r=="bigint"?r*Tn-Gi:r*-1-1;H(t,e.type.majorEncoded,n)}mr.encodedSize=function(t){let e=t.value,r=typeof e=="bigint"?e*Tn-Gi:e*-1-1;return r<z[0]?1:r<z[1]?2:r<z[2]?3:r<z[3]?5:9};mr.compareTokens=function(t,e){return t.value<e.value?1:t.value>e.value?-1:0};a();function qt(t,e,r,n){Fe(t,e,r+n);let o=yt(t,e+r,e+r+n);return new b(l.bytes,o,r+n)}function Ji(t,e,r,n){return qt(t,e,1,r)}function Xi(t,e,r,n){return qt(t,e,2,ee(t,e+1,n))}function Yi(t,e,r,n){return qt(t,e,3,te(t,e+1,n))}function Qi(t,e,r,n){return qt(t,e,5,re(t,e+1,n))}function Zi(t,e,r,n){let o=ne(t,e+1,n);if(typeof o=="bigint")throw new Error(`${C} 64-bit integer bytes lengths not supported`);return qt(t,e,9,o)}function yr(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===l.string?$i(t.value):t.value),t.encodedBytes}function wt(t,e){let r=yr(e);H(t,e.type.majorEncoded,r.length),t.push(r)}wt.encodedSize=function(t){let e=yr(t);return H.encodedSize(e.length)+e.length};wt.compareTokens=function(t,e){return bl(yr(t),yr(e))};function bl(t,e){return t.length<e.length?-1:t.length>e.length?1:Ri(t,e)}a();function Ht(t,e,r,n,o){let s=r+n;Fe(t,e,s);let u=new b(l.string,Ni(t,e+r,e+s),s);return o.retainStringBytes===!0&&(u.byteValue=yt(t,e+r,e+s)),u}function Ki(t,e,r,n){return Ht(t,e,1,r,n)}function es(t,e,r,n){return Ht(t,e,2,ee(t,e+1,n),n)}function ts(t,e,r,n){return Ht(t,e,3,te(t,e+1,n),n)}function rs(t,e,r,n){return Ht(t,e,5,re(t,e+1,n),n)}function ns(t,e,r,n){let o=ne(t,e+1,n);if(typeof o=="bigint")throw new Error(`${C} 64-bit integer string lengths not supported`);return Ht(t,e,9,o,n)}var os=wt;a();function gt(t,e,r,n){return new b(l.array,n,r)}function is(t,e,r,n){return gt(t,e,1,r)}function ss(t,e,r,n){return gt(t,e,2,ee(t,e+1,n))}function as(t,e,r,n){return gt(t,e,3,te(t,e+1,n))}function us(t,e,r,n){return gt(t,e,5,re(t,e+1,n))}function cs(t,e,r,n){let o=ne(t,e+1,n);if(typeof o=="bigint")throw new Error(`${C} 64-bit integer array lengths not supported`);return gt(t,e,9,o)}function fs(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${C} indefinite length items not allowed`);return gt(t,e,1,1/0)}function wr(t,e){H(t,l.array.majorEncoded,e.value)}wr.compareTokens=ce.compareTokens;wr.encodedSize=function(t){return H.encodedSize(t.value)};a();function Dt(t,e,r,n){return new b(l.map,n,r)}function ls(t,e,r,n){return Dt(t,e,1,r)}function ds(t,e,r,n){return Dt(t,e,2,ee(t,e+1,n))}function hs(t,e,r,n){return Dt(t,e,3,te(t,e+1,n))}function ps(t,e,r,n){return Dt(t,e,5,re(t,e+1,n))}function ms(t,e,r,n){let o=ne(t,e+1,n);if(typeof o=="bigint")throw new Error(`${C} 64-bit integer map lengths not supported`);return Dt(t,e,9,o)}function ys(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${C} indefinite length items not allowed`);return Dt(t,e,1,1/0)}function gr(t,e){H(t,l.map.majorEncoded,e.value)}gr.compareTokens=ce.compareTokens;gr.encodedSize=function(t){return H.encodedSize(t.value)};a();function ws(t,e,r,n){return new b(l.tag,r,1)}function gs(t,e,r,n){return new b(l.tag,ee(t,e+1,n),2)}function Ds(t,e,r,n){return new b(l.tag,te(t,e+1,n),3)}function bs(t,e,r,n){return new b(l.tag,re(t,e+1,n),5)}function Es(t,e,r,n){return new b(l.tag,ne(t,e+1,n),9)}function Dr(t,e){H(t,l.tag.majorEncoded,e.value)}Dr.compareTokens=ce.compareTokens;Dr.encodedSize=function(t){return H.encodedSize(t.value)};a();var Tl=20,Il=21,Sl=22,Ul=23;function xs(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${C} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new b(l.null,null,1):new b(l.undefined,void 0,1)}function Cs(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${C} indefinite length items not allowed`);return new b(l.break,void 0,1)}function In(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${C} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${C} Infinity values are not supported`)}return new b(l.float,t,e)}function Bs(t,e,r,n){return In(Sn(t,e+1),3,n)}function As(t,e,r,n){return In(Un(t,e+1),5,n)}function Ts(t,e,r,n){return In(Fs(t,e+1),9,n)}function br(t,e,r){let n=e.value;if(n===!1)t.push([l.float.majorEncoded|Tl]);else if(n===!0)t.push([l.float.majorEncoded|Il]);else if(n===null)t.push([l.float.majorEncoded|Sl]);else if(n===void 0)t.push([l.float.majorEncoded|Ul]);else{let o,s=!1;(!r||r.float64!==!0)&&(Ss(n),o=Sn(me,1),n===o||Number.isNaN(n)?(me[0]=249,t.push(me.slice(0,3)),s=!0):(Us(n),o=Un(me,1),n===o&&(me[0]=250,t.push(me.slice(0,5)),s=!0))),s||(Fl(n),o=Fs(me,1),me[0]=251,t.push(me.slice(0,9)))}}br.encodedSize=function(t,e){let r=t.value;if(r===!1||r===!0||r===null||r===void 0)return 1;if(!e||e.float64!==!0){Ss(r);let n=Sn(me,1);if(r===n||Number.isNaN(r))return 3;if(Us(r),n=Un(me,1),r===n)return 5}return 9};var Is=new ArrayBuffer(9),fe=new DataView(Is,1),me=new Uint8Array(Is,0);function Ss(t){if(t===1/0)fe.setUint16(0,31744,!1);else if(t===-1/0)fe.setUint16(0,64512,!1);else if(Number.isNaN(t))fe.setUint16(0,32256,!1);else{fe.setFloat32(0,t);let e=fe.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)fe.setUint16(0,31744,!1);else if(r===0)fe.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{let o=r-127;o<-24?fe.setUint16(0,0):o<-14?fe.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):fe.setUint16(0,(e&2147483648)>>16|o+15<<10|n>>13,!1)}}}function Sn(t,e){if(t.length-e<2)throw new Error(`${C} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,o=r&1023,s;return n===0?s=o*2**-24:n!==31?s=(o+1024)*2**(n-25):s=o===0?1/0:NaN,r&32768?-s:s}function Us(t){fe.setFloat32(0,t,!1)}function Un(t,e){if(t.length-e<4)throw new Error(`${C} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function Fl(t){fe.setFloat64(0,t,!1)}function Fs(t,e){if(t.length-e<8)throw new Error(`${C} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}br.compareTokens=ce.compareTokens;function U(t,e,r){throw new Error(`${C} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function Er(t){return()=>{throw new Error(`${C} ${t}`)}}var D=[];for(let t=0;t<=23;t++)D[t]=U;D[24]=Mi;D[25]=Oi;D[26]=zi;D[27]=qi;D[28]=U;D[29]=U;D[30]=U;D[31]=U;for(let t=32;t<=55;t++)D[t]=U;D[56]=Hi;D[57]=ji;D[58]=Vi;D[59]=Wi;D[60]=U;D[61]=U;D[62]=U;D[63]=U;for(let t=64;t<=87;t++)D[t]=Ji;D[88]=Xi;D[89]=Yi;D[90]=Qi;D[91]=Zi;D[92]=U;D[93]=U;D[94]=U;D[95]=Er("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)D[t]=Ki;D[120]=es;D[121]=ts;D[122]=rs;D[123]=ns;D[124]=U;D[125]=U;D[126]=U;D[127]=Er("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)D[t]=is;D[152]=ss;D[153]=as;D[154]=us;D[155]=cs;D[156]=U;D[157]=U;D[158]=U;D[159]=fs;for(let t=160;t<=183;t++)D[t]=ls;D[184]=ds;D[185]=hs;D[186]=ps;D[187]=ms;D[188]=U;D[189]=U;D[190]=U;D[191]=ys;for(let t=192;t<=215;t++)D[t]=ws;D[216]=gs;D[217]=Ds;D[218]=bs;D[219]=Es;D[220]=U;D[221]=U;D[222]=U;D[223]=U;for(let t=224;t<=243;t++)D[t]=Er("simple values are not supported");D[244]=U;D[245]=U;D[246]=U;D[247]=xs;D[248]=Er("simple values are not supported");D[249]=Bs;D[250]=As;D[251]=Ts;D[252]=U;D[253]=U;D[254]=U;D[255]=Cs;var ye=[];for(let t=0;t<24;t++)ye[t]=new b(l.uint,t,1);for(let t=-1;t>=-24;t--)ye[31-t]=new b(l.negint,t,1);ye[64]=new b(l.bytes,new Uint8Array(0),1);ye[96]=new b(l.string,"",1);ye[128]=new b(l.array,0,1);ye[160]=new b(l.map,0,1);ye[244]=new b(l.false,!1,1);ye[245]=new b(l.true,!0,1);ye[246]=new b(l.null,null,1);function vs(t){switch(t.type){case l.false:return Ce([244]);case l.true:return Ce([245]);case l.null:return Ce([246]);case l.bytes:return t.value.length?void 0:Ce([64]);case l.string:return t.value===""?Ce([96]):void 0;case l.array:return t.value===0?Ce([128]):void 0;case l.map:return t.value===0?Ce([160]):void 0;case l.uint:return t.value<24?Ce([Number(t.value)]):void 0;case l.negint:if(t.value>=-24)return Ce([31-Number(t.value)])}}var kl={float64:!1,mapSorter:$l,quickEncodeToken:vs};function _l(){let t=[];return t[l.uint.major]=ce,t[l.negint.major]=mr,t[l.bytes.major]=wt,t[l.string.major]=os,t[l.array.major]=wr,t[l.map.major]=gr,t[l.tag.major]=Dr,t[l.float.major]=br,t}var ks=_l(),Fn=new Ot,bt=class{constructor(t,e){this.obj=t,this.parent=e}includes(t){let e=this;do if(e.obj===t)return!0;while(e=e.parent);return!1}static createCheck(t,e){if(t&&t.includes(e))throw new Error(`${An} object contains circular references`);return new bt(e,t)}},Oe={null:new b(l.null,null),undefined:new b(l.undefined,void 0),true:new b(l.true,!0),false:new b(l.false,!1),emptyArray:new b(l.array,0),emptyMap:new b(l.map,0)},ze={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new b(l.float,t):t>=0?new b(l.uint,t):new b(l.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new b(l.uint,t):new b(l.negint,t)},Uint8Array(t,e,r,n){return new b(l.bytes,t)},string(t,e,r,n){return new b(l.string,t)},boolean(t,e,r,n){return t?Oe.true:Oe.false},null(t,e,r,n){return Oe.null},undefined(t,e,r,n){return Oe.undefined},ArrayBuffer(t,e,r,n){return new b(l.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new b(l.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[Oe.emptyArray,new b(l.break)]:Oe.emptyArray;n=bt.createCheck(n,t);let o=[],s=0;for(let u of t)o[s++]=xr(u,r,n);return r.addBreakTokens?[new b(l.array,t.length),o,new b(l.break)]:[new b(l.array,t.length),o]},Object(t,e,r,n){let o=e!=="Object",s=o?t.keys():Object.keys(t),u=o?t.size:s.length;if(!u)return r.addBreakTokens===!0?[Oe.emptyMap,new b(l.break)]:Oe.emptyMap;n=bt.createCheck(n,t);let c=[],h=0;for(let w of s)c[h++]=[xr(w,r,n),xr(o?t.get(w):t[w],r,n)];return Nl(c,r),r.addBreakTokens?[new b(l.map,u),c,new b(l.break)]:[new b(l.map,u),c]}};ze.Map=ze.Object;ze.Buffer=ze.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))ze[`${t}Array`]=ze.DataView;function xr(t,e={},r){let n=Fi(t),o=e&&e.typeEncoders&&e.typeEncoders[n]||ze[n];if(typeof o=="function"){let u=o(t,n,e,r);if(u!=null)return u}let s=ze[n];if(!s)throw new Error(`${An} unsupported type: ${n}`);return s(t,n,e,r)}function Nl(t,e){e.mapSorter&&t.sort(e.mapSorter)}function $l(t,e){let r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);let o=r.type.major,s=ks[o].compareTokens(r,n);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function _s(t,e,r,n){if(Array.isArray(e))for(let o of e)_s(t,o,r,n);else r[e.type.major](t,e,n)}function Ll(t,e,r){let n=xr(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){let o=r.quickEncodeToken(n);if(o)return o;let s=e[n.type.major];if(s.encodedSize){let u=s.encodedSize(n,r),c=new Ot(u);if(s(c,n,r),c.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return Bn(c.chunks[0])}}return Fn.reset(),_s(Fn,n,e,r),Fn.toBytes(!0)}function vn(t,e){return e=Object.assign({},kl,e),Ll(t,ks,e)}a();var Pl={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},kn=class{constructor(t,e={}){this.pos=0,this.data=t,this.options=e}done(){return this.pos>=this.data.length}next(){let t=this.data[this.pos],e=ye[t];if(e===void 0){let r=D[t];if(!r)throw new Error(`${C} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);let n=t&31;e=r(this.data,this.pos,n,this.options)}return this.pos+=e.encodedLength,e}},jt=Symbol.for("DONE"),Cr=Symbol.for("BREAK");function Rl(t,e,r){let n=[];for(let o=0;o<t.value;o++){let s=Vt(e,r);if(s===Cr){if(t.value===1/0)break;throw new Error(`${C} got unexpected break to lengthed array`)}if(s===jt)throw new Error(`${C} found array but not enough entries (got ${o}, expected ${t.value})`);n[o]=s}return n}function Ml(t,e,r){let n=r.useMaps===!0,o=n?void 0:{},s=n?new Map:void 0;for(let u=0;u<t.value;u++){let c=Vt(e,r);if(c===Cr){if(t.value===1/0)break;throw new Error(`${C} got unexpected break to lengthed map`)}if(c===jt)throw new Error(`${C} found map but not enough entries (got ${u} [no key], expected ${t.value})`);if(n!==!0&&typeof c!="string")throw new Error(`${C} non-string keys not supported (got ${typeof c})`);let h=Vt(e,r);if(h===jt)throw new Error(`${C} found map but not enough entries (got ${u} [no value], expected ${t.value})`);n?s.set(c,h):o[c]=h}return n?s:o}function Vt(t,e){if(t.done())return jt;let r=t.next();if(r.type===l.break)return Cr;if(r.type.terminal)return r.value;if(r.type===l.array)return Rl(r,t,e);if(r.type===l.map)return Ml(r,t,e);if(r.type===l.tag){if(e.tags&&typeof e.tags[r.value]=="function"){let n=Vt(t,e);return e.tags[r.value](n)}throw new Error(`${C} tag not supported (${r.value})`)}throw new Error("unsupported")}function _n(t,e){if(!(t instanceof Uint8Array))throw new Error(`${C} data to decode must be a Uint8Array`);e=Object.assign({},Pl,e);let r=e.tokenizer||new kn(t,e),n=Vt(r,e);if(n===jt)throw new Error(`${C} did not find any content to decode`);if(n===Cr)throw new Error(`${C} got unexpected break`);if(!r.done())throw new Error(`${C} too many terminals, data makes no sense`);return n}Q();var Ns=42;function zl(t){if(t.asCID!==t)return null;let e=x.asCID(t);if(!e)return null;let r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new b(l.tag,Ns),new b(l.bytes,r)]}function ql(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Hl(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var jl={float64:!0,typeEncoders:{Object:zl,undefined:ql,number:Hl}};function Vl(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return x.decode(t.subarray(1))}var $s={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};$s.tags[Ns]=Vl;var Ls=t=>vn(t,jl),Ps=t=>_n(t,$s);function $n(t){let e=Ls({version:1,roots:t}),r=Nn.default.encode(e.length),n=new Uint8Array(r.length+e.length);return n.set(r,0),n.set(e,r.length),n}function Rs(t){return{async setRoots(e){let r=$n(e);await t.write(r)},async writeBlock(e){let{cid:r,bytes:n}=e;await t.write(new Uint8Array(Nn.default.encode(r.bytes.length+n.length))),await t.write(r.bytes),n.length&&await t.write(n)},async close(){await t.end()}}}a();function Br(){}function Ms(){let t=[],e=null,r=Br,n=!1,o=null,s=Br,u=()=>(e||(e=new Promise(w=>{r=()=>{e=null,r=Br,w()}})),e),c={write(w){t.push(w);let m=u();return s(),m},async end(){n=!0;let w=u();s(),await w}},h={async next(){let w=t.shift();return w?(t.length===0&&r(),{done:!1,value:w}):n?(r(),{done:!0,value:void 0}):(o||(o=new Promise(m=>{s=()=>(o=null,s=Br,m(h.next()))})),o)}};return{writer:c,iterator:h}}a();var He=J(pt(),1);Q();Le();a();var qe={Null:t=>t===null,Int:t=>Number.isInteger(t),Float:t=>typeof t=="number"&&Number.isFinite(t),String:t=>typeof t=="string",Bool:t=>typeof t=="boolean",Bytes:t=>t instanceof Uint8Array,Link:t=>!qe.Null(t)&&typeof t=="object"&&t.asCID===t,List:t=>Array.isArray(t),Map:t=>!qe.Null(t)&&typeof t=="object"&&t.asCID!==t&&!qe.List(t)&&!qe.Bytes(t)},Et={Int:qe.Int,"CarHeader > version":t=>Et.Int(t),"CarHeader > roots (anon) > valueType (anon)":qe.Link,"CarHeader > roots (anon)":t=>qe.List(t)&&Array.prototype.every.call(t,Et["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":t=>Et["CarHeader > roots (anon)"](t),CarHeader:t=>{let e=t&&Object.keys(t);return qe.Map(t)&&["version"].every(r=>e.includes(r))&&Object.entries(t).every(([r,n])=>Et["CarHeader > "+r]&&Et["CarHeader > "+r](n))}},Os=Et.CarHeader,Ln={SHA2_256:18,LENGTH:32,DAG_PB:112},zs=16+8+8+8;async function Ar(t){let e=await t.upTo(8);if(!e.length)throw new Error("Unexpected end of data");let r=He.default.decode(e);return t.seek(He.default.decode.bytes),r}async function Gl(t){let e=await t.exactly(zs),r=new DataView(e.buffer,e.byteOffset,e.byteLength),n=0,o={version:2,characteristics:[r.getBigUint64(n,!0),r.getBigUint64(n+=8,!0)],dataOffset:Number(r.getBigUint64(n+=8,!0)),dataSize:Number(r.getBigUint64(n+=8,!0)),indexOffset:Number(r.getBigUint64(n+=8,!0))};return t.seek(zs),o}async function Tr(t,e){let r=await Ar(t);if(r===0)throw new Error("Invalid CAR header (zero length)");let n=await t.exactly(r);t.seek(r);let o=Ps(n);if(!Os(o))throw new Error("Invalid CAR header format");if(o.version!==1&&o.version!==2||e!==void 0&&o.version!==e)throw new Error(`Invalid CAR version: ${o.version}${e!==void 0?` (expected ${e})`:""}`);let s=Array.isArray(o.roots);if(o.version===1&&!s||o.version===2&&s)throw new Error("Invalid CAR header format");if(o.version===1)return o;let u=await Gl(t);t.seek(u.dataOffset-t.pos);let c=await Tr(t,1);return Object.assign(c,u)}async function Wl(t){let e=await t.upTo(8);He.default.decode(e);let r=He.default.decode.bytes,n=He.default.decode(e.subarray(He.default.decode.bytes)),o=He.default.decode.bytes,s=r+o+n,u=await t.exactly(s);return t.seek(s),u}async function Jl(t){let e=await t.exactly(2);if(e[0]===Ln.SHA2_256&&e[1]===Ln.LENGTH){let u=await t.exactly(34);t.seek(34);let c=ft(u);return x.create(0,Ln.DAG_PB,c)}let r=await Ar(t);if(r!==1)throw new Error(`Unexpected CID version (${r})`);let n=await Ar(t),o=await Wl(t),s=ft(o);return x.create(r,n,s)}async function qs(t){let e=t.pos,r=await Ar(t);if(r===0)throw new Error("Invalid CAR section (zero length)");r+=t.pos-e;let n=await Jl(t),o=r-Number(t.pos-e);return{cid:n,length:r,blockLength:o}}async function Xl(t){let{cid:e,blockLength:r}=await qs(t),n=await t.exactly(r);return t.seek(r),{bytes:n,cid:e}}async function Yl(t){let e=t.pos,{cid:r,length:n,blockLength:o}=await qs(t),s={cid:r,length:n,blockLength:o,offset:e,blockOffset:t.pos};return t.seek(s.blockLength),s}function Hs(t){let e=(async()=>{let r=await Tr(t);if(r.version===2){let n=t.pos-r.dataOffset;t=Zl(t,r.dataSize-n)}return r})();return{header:()=>e,async*blocks(){for(await e;(await t.upTo(8)).length>0;)yield await Xl(t)},async*blocksIndex(){for(await e;(await t.upTo(8)).length>0;)yield await Yl(t)}}}function Ir(t){let e=0;return{async upTo(r){return t.subarray(e,e+Math.min(r,t.length-e))},async exactly(r){if(r>t.length-e)throw new Error("Unexpected end of data");return t.subarray(e,e+r)},seek(r){e+=r},get pos(){return e}}}function Ql(t){let e=0,r=0,n=0,o=new Uint8Array(0),s=async u=>{r=o.length-n;let c=[o.subarray(n)];for(;r<u;){let w=await t();if(w==null)break;r<0?w.length>r&&c.push(w.subarray(-r)):c.push(w),r+=w.length}o=new Uint8Array(c.reduce((w,m)=>w+m.length,0));let h=0;for(let w of c)o.set(w,h),h+=w.length;n=0};return{async upTo(u){return o.length-n<u&&await s(u),o.subarray(n,n+Math.min(o.length-n,u))},async exactly(u){if(o.length-n<u&&await s(u),o.length-n<u)throw new Error("Unexpected end of data");return o.subarray(n,n+u)},seek(u){e+=u,n+=u},get pos(){return e}}}function js(t){let e=t[Symbol.asyncIterator]();async function r(){let n=await e.next();return n.done?null:n.value}return Ql(r)}function Zl(t,e){let r=0;return{async upTo(n){let o=await t.upTo(n);return o.length+r>e&&(o=o.subarray(0,e-r)),o},async exactly(n){let o=await t.exactly(n);if(o.length+r>e)throw new Error("Unexpected end of data");return o},seek(n){r+=n,t.seek(n)},get pos(){return t.pos}}}var Qe=class{constructor(t,e){this._encoder=e,this._mutex=e.setRoots(t),this._ended=!1}async put(t){if(!(t.bytes instanceof Uint8Array)||!t.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");let e=x.asCID(t.cid);if(!e)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:e,bytes:t.bytes})),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(t){t=Kl(t);let{encoder:e,iterator:r}=Vs(),n=new Qe(t,e),o=new Sr(r);return{writer:n,out:o}}static createAppender(){let{encoder:t,iterator:e}=Vs();t.setRoots=()=>Promise.resolve();let r=new Qe([],t),n=new Sr(e);return{writer:r,out:n}}static async updateRootsInBytes(t,e){let r=Ir(t);await Tr(r);let n=$n(e);if(Number(r.pos)!==n.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${r.pos} bytes, new header is ${n.length} bytes)`);return t.set(n,0),t}},Sr=class{constructor(t){this._iterator=t}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}};function Vs(){let t=Ms(),{writer:e,iterator:r}=t;return{encoder:Rs(e),iterator:r}}function Kl(t){if(t===void 0)return[];if(!Array.isArray(t)){let r=x.asCID(t);if(!r)throw new TypeError("roots must be a single CID or an array of CIDs");return[r]}let e=[];for(let r of t){let n=x.asCID(r);if(!n)throw new TypeError("roots must be a single CID or an array of CIDs");e.push(n)}return e}a();var na=J(Zs(),1),oa=J(ea(),1);a();var rd=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;T.nanosecond=T.ns=1/1e6;T.\u00B5s=T.\u03BCs=T.us=T.microsecond=1/1e3;T.millisecond=T.ms=T[""]=1;T.second=T.sec=T.s=T.ms*1e3;T.minute=T.min=T.m=T.s*60;T.hour=T.hr=T.h=T.m*60;T.day=T.d=T.h*24;T.week=T.wk=T.w=T.d*7;T.month=T.b=T.d*(365.25/12);T.year=T.yr=T.y=T.d*365.25;function T(t="",e="ms"){var r=null;return t=(t+"").replace(/(\d)[,_](\d)/g,"$1$2"),t.replace(rd,function(n,o,s){s=ta(s),s&&(r=(r||0)+parseFloat(o,10)*s)}),r&&r/(ta(e)||1)}function ta(t){return T[t]||T[t.toLowerCase().replace(/s$/,"")]}var ra=T;a();var ve=class extends Error{constructor(t="request timed out"){super(t),this.name="TimeoutError",this.code=ve.code}};ve.code="ERR_TIMEOUT";function le(t,e){return(...r)=>{let n=r[e!=null?e:r.length-1];if(!n||!n.timeout)return t(...r);let o=typeof n.timeout=="string"?ra(n.timeout):n.timeout,s=new na.TimeoutController(o);n.signal=(0,oa.anySignal)([n.signal,s.signal]);let u=t(...r),c=new Promise((m,v)=>{s.signal.addEventListener("abort",()=>{v(new ve)})}),h=Date.now(),w=()=>{if(s.signal.aborted)throw new ve;if(Date.now()-h>o)throw s.abort(),new ve};return u[Symbol.asyncIterator]?async function*(){let m=u[Symbol.asyncIterator]();try{for(;;){let{value:v,done:E}=await Promise.race([m.next(),c]);if(E)break;w(),yield v}}catch(v){throw w(),v}finally{s.clear(),m.return&&m.return()}}():(async()=>{try{let m=await Promise.race([u,c]);return w(),m}catch(m){throw w(),m}finally{s.clear()}})()}}a();var Be=J(ca(),1);Re();ht();zn();Be.default.formatters.b=t=>t==null?"undefined":Y.baseEncode(t);Be.default.formatters.t=t=>t==null?"undefined":Me.baseEncode(t);Be.default.formatters.m=t=>t==null?"undefined":Mn.baseEncode(t);Be.default.formatters.p=t=>t==null?"undefined":t.toString();Be.default.formatters.c=t=>t==null?"undefined":t.toString();Be.default.formatters.k=t=>t==null?"undefined":t.toString();function kr(t){return Object.assign((0,Be.default)(t),{error:(0,Be.default)(`${t}:error`),trace:(0,Be.default)(`${t}:trace`)})}qn();Hn();a();Re();var jn=async({cid:t,load:e,seen:r})=>{r=r||new Set;let n=t.toString(Y);if(r.has(n))return;let o=await e(t);if(r.add(n),o!==null)for(let[,s]of o.links())await jn({cid:s,load:e,seen:r})},pa=kr("ipfs:components:dag:import"),gd=[fa,da];function ma({repo:t,preload:e,codecs:r}){async function*n(o,s={}){s.preload!==!1&&e(o);let u=x.asCID(o);if(!u)throw new Error(`Unexpected error converting CID type: ${o}`);pa(`Exporting ${u} as car`);let{writer:c,out:h}=await Qe.create([u]),w=null;(async()=>{try{let m=Dd(t,c,{signal:s.signal,timeout:s.timeout},r);await jn({cid:u,load:m})}catch(m){w=m}finally{c.close()}})();for await(let m of h){if(w)break;yield m}if(w)throw w}return le(n)}function Dd(t,e,r,n){return async o=>{let s=await n.getCodec(o.code);if(!s)throw new Error(`Can't decode links in block with codec 0x${o.code.toString(16)} to form complete DAG`);let u=await t.blocks.get(o,r);return pa(`Adding block ${o} to car`),await e.put({cid:o,bytes:u}),gd.includes(o.code)?null:bi({bytes:u,cid:o,codec:s})}}a();var ic=J(wa(),1),sc=J(Da(),1);a();J(Ku(),1);Q();a();a();a();var ec=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");Ke();fo();var ke="/",tc=new TextEncoder().encode(ke),Vr=tc[0],G=class{constructor(t,e){if(typeof t=="string")this._buf=co(t);else if(t instanceof Uint8Array)this._buf=t;else throw new Error("Invalid key, should be String of Uint8Array");if(e==null&&(e=!0),e&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Vr)throw new Error("Invalid key")}toString(t="utf8"){return so(this._buf,t)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(t){return new G(t.join(ke))}static random(){return new G(ec().replace(/-/g,""))}static asKey(t){return t instanceof Uint8Array||typeof t=="string"?new G(t):t.uint8Array?new G(t.uint8Array()):null}clean(){if((!this._buf||this._buf.byteLength===0)&&(this._buf=tc),this._buf[0]!==Vr){let t=new Uint8Array(this._buf.byteLength+1);t.fill(Vr,0,1),t.set(this._buf,1),this._buf=t}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Vr;)this._buf=this._buf.subarray(0,-1)}less(t){let e=this.list(),r=t.list();for(let n=0;n<e.length;n++){if(r.length<n+1)return!1;let o=e[n],s=r[n];if(o<s)return!0;if(o>s)return!1}return e.length<r.length}reverse(){return G.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let t=this.namespaces();return t[t.length-1]}list(){return this.toString().split(ke).slice(1)}type(){return Lh(this.baseNamespace())}name(){return Ph(this.baseNamespace())}instance(t){return new G(this.toString()+":"+t)}path(){let t=this.parent().toString();return t.endsWith(ke)||(t+=ke),t+=this.type(),new G(t)}parent(){let t=this.list();return t.length===1?new G(ke):new G(t.slice(0,-1).join(ke))}child(t){return this.toString()===ke?t:t.toString()===ke?this:new G(this.toString()+t.toString(),!1)}isAncestorOf(t){return t.toString()===this.toString()?!1:t.toString().startsWith(this.toString())}isDecendantOf(t){return t.toString()===this.toString()?!1:this.toString().startsWith(t.toString())}isTopLevel(){return this.list().length===1}concat(...t){return G.withNamespaces([...this.namespaces(),...Rh(t.map(e=>e.namespaces()))])}};function Lh(t){let e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function Ph(t){let e=t.split(":");return e[e.length-1]}function Rh(t){return[].concat(...t)}var _o=J(Yt(),1);a();Q();var ko=J(Yt(),1),rc="/ipfs/";function Gr(t){if(t instanceof Uint8Array)try{t=x.decode(t)}catch(o){throw(0,ko.default)(o,"ERR_INVALID_CID")}let e=x.asCID(t);if(e)return{cid:e,path:void 0};t=t.toString(),t.startsWith(rc)&&(t=t.substring(rc.length));let r=t.split("/"),n;try{e=x.parse(r.shift()||"")}catch(o){throw(0,ko.default)(o,"ERR_INVALID_CID")}return r.length&&(n=`/${r.join("/")}`),{cid:e,path:n}}a();Q();a();new TextDecoder;a();new TextEncoder;a();Q();new TextEncoder;var nc=112;new G("/local/filesroot");var oc=async function(t,e,r,n={}){let{cid:o,path:s}=Gr(r);s&&(n.path=s);let u=o,c=n.path||"";if(c.startsWith("/")&&(c=c.substring(1)),n.path)try{for await(let{value:h,remainderPath:w}of Wr(o,n.path,e,t,{signal:n.signal})){if(!x.asCID(h))break;c=w,u=h}}catch(h){throw h.message.startsWith("Object has no property")&&(h.message=`no link named "${c.split("/")[0]}" under ${u}`,h.code="ERR_NO_LINK"),h}return{cid:u,remainderPath:c||""}},Wr=async function*(t,e,r,n,o){let s=async w=>{let m=await r.getCodec(w.code),v=await n.blocks.get(w,o);return m.decode(v)},u=e.split("/").filter(Boolean),c=await s(t),h=t;for(;u.length;){let w=u.shift();if(!w)throw(0,_o.default)(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(t.code===nc&&Array.isArray(c.Links)){let m=c.Links.find(v=>v.Name===w);if(m){yield{value:m.Hash,remainderPath:u.join("/")},c=await s(m.Hash),h=m.Hash;continue}}if(Object.prototype.hasOwnProperty.call(c,w))c=c[w],yield{value:c,remainderPath:u.join("/")};else throw(0,_o.default)(new Error(`no link named "${w}" under ${h}`),"ERR_NO_LINK");x.asCID(c)&&(h=c,c=await s(c))}yield{value:c,remainderPath:""}},ac=J(Yt(),1);function uc({codecs:t,repo:e,preload:r}){return le(async function(n,o={}){if(o.preload!==!1&&r(n),o.path){let c=o.localResolve?await(0,ic.default)(Wr(n,o.path,t,e,o)):await(0,sc.default)(Wr(n,o.path,t,e,o));if(!c)throw(0,ac.default)(new Error("Not found"),"ERR_NOT_FOUND");return c}let s=await t.getCodec(n.code),u=await e.blocks.get(n,o);return{value:s.decode(u),remainderPath:""}})}a();a();var Jr=class{constructor(t,e,r){this._version=t,this._roots=e,this._iterable=r,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}},tt=class extends Jr{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(t){let{version:e,roots:r,iterator:n}=await cc(t);return new tt(e,r,n)}static async fromIterable(t){let{version:e,roots:r,iterator:n}=await fc(t);return new tt(e,r,n)}};async function cc(t){if(!(t instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return lc(Ir(t))}async function fc(t){if(!t||typeof t[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return lc(js(t))}async function lc(t){let e=Hs(t),{version:r,roots:n}=await e.header();return{version:r,roots:n,iterator:e.blocks()}}var gc=J(hc(),1),Dc=J(mc(),1),bc=J(wc(),1),Ec=kr("ipfs:components:dag:import");function xc({repo:t}){async function*e(r,n={}){let o=await t.gcLock.readLock();try{let s={signal:n.signal,timeout:n.timeout},u=(0,gc.default)(r),{value:c,done:h}=await u.peek();if(h)return;c&&u.push(c);let w;c instanceof Uint8Array?w=[u]:w=u;for await(let m of w){let v=await jh(t,s,m);if(n.pinRoots!==!1)for(let E of v){let O="";try{await t.blocks.has(E)?(Ec(`Pinning root ${E}`),await t.pins.pinRecursively(E)):O="blockstore: block not found"}catch($){O=$.message}yield{root:{cid:E,pinErrorMsg:O}}}}}finally{o()}}return le(e)}async function jh(t,e,r){let n=await tt.fromIterable(r),o=await n.getRoots();return await(0,Dc.default)(t.blocks.putMany((0,bc.default)(n,({cid:s,bytes:u})=>(Ec(`Import block ${s}`),{key:s,value:u})),{signal:e.signal})),o}a();Q();function Cc({repo:t,codecs:e,hashers:r,preload:n}){async function o(s,u={}){let c=u.pin?await t.gcLock.readLock():null;try{let h=await e.getCodec(u.storeCodec||"dag-cbor");if(!h)throw new Error(`Unknown storeCodec ${u.storeCodec}, please configure additional BlockCodecs for this IPFS instance`);if(u.inputCodec){if(!(s instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");let $=await e.getCodec(u.inputCodec);if(!$)throw new Error(`Unknown inputCodec ${u.inputCodec}, please configure additional BlockCodecs for this IPFS instance`);s=$.decode(s)}let w=u.version!=null?u.version:1,m=await r.getHasher(u.hashAlg||"sha2-256");if(!m)throw new Error(`Unknown hash algorithm ${u.hashAlg}, please configure additional MultihashHashers for this IPFS instance`);let v=h.encode(s),E=await m.digest(v),O=x.create(w,h.code,E);return await t.blocks.put(O,v,{signal:u.signal}),u.pin&&await t.pins.pinRecursively(O),u.preload!==!1&&n(O),O}finally{c&&c()}}return le(o)}a();function Bc({repo:t,codecs:e,preload:r}){async function n(o,s={}){let{cid:u}=Gr(o);return s.preload!==!1&&r(u),oc(t,e,o,s)}return le(n)}var Ac=class{constructor({repo:t,codecs:e,hashers:r,preload:n}){this.export=ma({repo:t,preload:n,codecs:e}),this.get=uc({codecs:e,repo:t,preload:n}),this.import=xc({repo:t}),this.resolve=Bc({repo:t,codecs:e,preload:n}),this.put=Cc({repo:t,codecs:e,hashers:r,preload:n})}};/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */class JSONEncoder extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===Type.array&&(r.elements++,r.elements!==1&&e.push([44])),r.type===Type.map&&(r.elements++,r.elements!==1&&(r.elements%2===1?e.push([44]):e.push([58]))))}[Type.uint.major](e,r){this.prefix(e);const n=String(r.value),o=[];for(let s=0;s<n.length;s++)o[s]=n.charCodeAt(s);e.push(o)}[Type.negint.major](e,r){this[Type.uint.major](e,r)}[Type.bytes.major](e,r){throw new Error(`${encodeErrPrefix} unsupported type: Uint8Array`)}[Type.string.major](e,r){this.prefix(e);const n=fromString$7(JSON.stringify(r.value));e.push(n.length>32?asU8A(n):n)}[Type.array.major](e,r){this.prefix(e),this.inRecursive.push({type:Type.array,elements:0}),e.push([91])}[Type.map.major](e,r){this.prefix(e),this.inRecursive.push({type:Type.map,elements:0}),e.push([123])}[Type.tag.major](e,r){}[Type.float.major](e,r){if(r.type.name==="break"){const u=this.inRecursive.pop();if(u){if(u.type===Type.array)e.push([93]);else if(u.type===Type.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${encodeErrPrefix} unsupported type: undefined`);if(this.prefix(e),r.type.name==="true"){e.push([116,114,117,101]);return}else if(r.type.name==="false"){e.push([102,97,108,115,101]);return}else if(r.type.name==="null"){e.push([110,117,108,108]);return}const n=String(r.value),o=[];let s=!1;for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u),!s&&(o[u]===46||o[u]===101||o[u]===69)&&(s=!0);s||(o.push(46),o.push(48)),e.push(o)}}function mapSorter(t,e){if(Array.isArray(t[0])||Array.isArray(e[0]))throw new Error(`${encodeErrPrefix} complex map keys are not supported`);const r=t[0],n=e[0];if(r.type!==Type.string||n.type!==Type.string)throw new Error(`${encodeErrPrefix} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${encodeErrPrefix} unexpected duplicate map keys, this is not supported`)}const defaultEncodeOptions={addBreakTokens:!0,mapSorter};function encode$6(t,e){return e=Object.assign({},defaultEncodeOptions,e),encodeCustom(t,new JSONEncoder,e)}class Tokenizer{constructor(e,r={}){this.pos=0,this.data=e,this.options=r,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw new Error(`${decodeErrPrefix} unexpected end of input at position ${this.pos}`);for(let r=0;r<e.length;r++)if(this.data[this.pos++]!==e[r])throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this.pos;let r=!1,n=!1;const o=c=>{for(;!this.done();){const h=this.ch();if(c.includes(h))this.pos++;else break}};if(this.ch()===45&&(r=!0,this.pos++),this.ch()===48)if(this.pos++,this.ch()===46)this.pos++,n=!0;else return new Token(Type.uint,0,this.pos-e);if(o([48,49,50,51,52,53,54,55,56,57]),r&&this.pos===e+1)throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}`);n=!0,this.pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this.pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this.pos++,o([48,49,50,51,52,53,54,55,56,57]));const s=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),u=parseFloat(s);return n?new Token(Type.float,u,this.pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(u)?new Token(u>=0?Type.uint:Type.negint,u,this.pos-e):new Token(u>=0?Type.uint:Type.negint,BigInt(s),this.pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let s=this.pos,u=0;s<this.data.length&&u<65536;s++,u++){const c=this.data[s];if(c===92||c<32||c>=128)break;if(c===34){const h=String.fromCharCode.apply(null,this.data.subarray(this.pos,s));return this.pos=s+1,new Token(Type.string,h,u)}}const e=this.pos,r=[],n=()=>{if(this.pos+4>=this.data.length)throw new Error(`${decodeErrPrefix} unexpected end of unicode escape sequence at position ${this.pos}`);let s=0;for(let u=0;u<4;u++){let c=this.ch();if(c>=48&&c<=57)c-=48;else if(c>=97&&c<=102)c=c-97+10;else if(c>=65&&c<=70)c=c-65+10;else throw new Error(`${decodeErrPrefix} unexpected unicode escape character at position ${this.pos}`);s=s*16+c,this.pos++}return s},o=()=>{const s=this.ch();let u=null,c=s>239?4:s>223?3:s>191?2:1;if(this.pos+c>this.data.length)throw new Error(`${decodeErrPrefix} unexpected unicode sequence at position ${this.pos}`);let h,w,m,v;switch(c){case 1:s<128&&(u=s);break;case 2:h=this.data[this.pos+1],(h&192)===128&&(v=(s&31)<<6|h&63,v>127&&(u=v));break;case 3:h=this.data[this.pos+1],w=this.data[this.pos+2],(h&192)===128&&(w&192)===128&&(v=(s&15)<<12|(h&63)<<6|w&63,v>2047&&(v<55296||v>57343)&&(u=v));break;case 4:h=this.data[this.pos+1],w=this.data[this.pos+2],m=this.data[this.pos+3],(h&192)===128&&(w&192)===128&&(m&192)===128&&(v=(s&15)<<18|(h&63)<<12|(w&63)<<6|m&63,v>65535&&v<1114112&&(u=v))}u===null?(u=65533,c=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|u&1023),r.push(u),this.pos+=c};for(;!this.done();){const s=this.ch();let u;switch(s){case 92:if(this.pos++,this.done())throw new Error(`${decodeErrPrefix} unexpected string termination at position ${this.pos}`);switch(u=this.ch(),this.pos++,u){case 34:case 39:case 92:case 47:r.push(u);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(n());break;default:throw new Error(`${decodeErrPrefix} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new Token(Type.string,decodeCodePointsArray(r),this.pos-e);default:if(s<32)throw new Error(`${decodeErrPrefix} invalid control character at position ${this.pos}`);s<128?(r.push(s),this.pos++):o()}}throw new Error(`${decodeErrPrefix} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new Token(Type.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new Token(Type.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Token(Type.null,null,4);case 102:return this.expect([102,97,108,115,101]),new Token(Type.false,!1,5);case 116:return this.expect([116,114,117,101]),new Token(Type.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${decodeErrPrefix} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}}function decode$8(t,e){return e=Object.assign({tokenizer:new Tokenizer(t,e)},e),decode$s(t,e)}function cidEncoder(t){if(t.asCID!==t)return null;const e=CID$2.asCID(t);if(!e)return null;const r=e.toString();return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.string,r,r.length),new Token(Type.break,void 0,1)]}function bytesEncoder(t){const e=base64$3.encode(t).slice(1);return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.map,1/0,1),new Token(Type.string,"bytes",5),new Token(Type.string,e,e.length),new Token(Type.break,void 0,1),new Token(Type.break,void 0,1)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={typeEncoders:{Object:cidEncoder,Uint8Array:bytesEncoder,Buffer:bytesEncoder,undefined:undefinedEncoder,number:numberEncoder}};class DagJsonTokenizer extends Tokenizer{constructor(e,r){super(e,r),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===Type.map){const r=this._next();if(r.type===Type.string&&r.value==="/"){const n=this._next();if(n.type===Type.string){if(this._next().type!==Type.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new Token(Type.tag,42,0)}if(n.type===Type.map){const o=this._next();if(o.type===Type.string&&o.value==="bytes"){const s=this._next();if(s.type===Type.string){for(let c=0;c<2;c++)if(this._next().type!==Type.break)throw new Error("Invalid encoded Bytes form");const u=base64$3.decode(`m${s.value}`);return new Token(Type.bytes,u,s.value.length)}this.tokenBuffer.push(s)}this.tokenBuffer.push(o)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}return e}}const decodeOptions={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions.tags[42]=CID$2.parse;const name$1="dag-json",code$2=297,encode$5=t=>encode$6(t,encodeOptions),decode$7=t=>{const e=Object.assign(decodeOptions,{tokenizer:new DagJsonTokenizer(t,decodeOptions)});return decode$8(t,e)},dagJSON=Object.freeze(Object.defineProperty({__proto__:null,name:name$1,code:code$2,encode:encode$5,decode:decode$7},Symbol.toStringTag,{value:"Module"}));function toBase64url(t){return base64url$1.encode(t).slice(1)}function fromBase64url(t){return base64url$1.decode(`u${t}`)}function fromSplit$1(t){const[e,r,n]=t;return{payload:r,signatures:[{protected:e,signature:n}],link:CID$2.decode(fromBase64url(r))}}function encodeSignature(t){const e={signature:fromBase64url(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=fromBase64url(t.protected)),e}function encode$4(t){const e=fromBase64url(t.payload);try{CID$2.decode(e)}catch{throw new Error("Not a valid DagJWS")}return{payload:e,signatures:t.signatures.map(encodeSignature)}}function decodeSignature(t){const e={signature:toBase64url(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=toBase64url(t.protected)),e}function decode$6(t){const e={payload:toBase64url(t.payload),signatures:t.signatures.map(decodeSignature)};return e.link=CID$2.decode(new Uint8Array(t.payload)),e}function fromSplit(t){const[e,r,n,o,s]=t,u={ciphertext:o,iv:n,protected:e,tag:s};return r&&(u.recipients=[{encrypted_key:r}]),u}function encodeRecipient(t){const e={};return t.encrypted_key&&(e.encrypted_key=fromBase64url(t.encrypted_key)),t.header&&(e.header=t.header),e}function encode$3(t){const e={ciphertext:fromBase64url(t.ciphertext),protected:fromBase64url(t.protected),iv:fromBase64url(t.iv),tag:fromBase64url(t.tag)};return t.aad&&(e.aad=fromBase64url(t.aad)),t.recipients&&(e.recipients=t.recipients.map(encodeRecipient)),t.unprotected&&(e.unprotected=t.unprotected),e}function decodeRecipient(t){const e={};return t.encrypted_key&&(e.encrypted_key=toBase64url(t.encrypted_key)),t.header&&(e.header=t.header),e}function decode$5(t){const e={ciphertext:toBase64url(t.ciphertext),protected:toBase64url(t.protected),iv:toBase64url(t.iv),tag:toBase64url(t.tag)};return t.aad&&(e.aad=toBase64url(t.aad)),t.recipients&&(e.recipients=t.recipients.map(decodeRecipient)),t.unprotected&&(e.unprotected=t.unprotected),e}const name="dag-jose",code$1=133;function isDagJWS(t){return"payload"in t&&typeof t.payload=="string"&&"signatures"in t&&Array.isArray(t.signatures)}function isEncodedJWS(t){return"payload"in t&&t.payload instanceof Uint8Array&&"signatures"in t&&Array.isArray(t.signatures)}function isEncodedJWE(t){return"ciphertext"in t&&t.ciphertext instanceof Uint8Array&&"iv"in t&&t.iv instanceof Uint8Array&&"protected"in t&&t.protected instanceof Uint8Array&&"tag"in t&&t.tag instanceof Uint8Array}function isDagJWE(t){return"ciphertext"in t&&typeof t.ciphertext=="string"&&"iv"in t&&typeof t.iv=="string"&&"protected"in t&&typeof t.protected=="string"&&"tag"in t&&typeof t.tag=="string"}function toGeneral(t){if(typeof t=="string"){const e=t.split(".");if(e.length===3)return fromSplit$1(e);if(e.length===5)return fromSplit(e);throw new Error("Not a valid JOSE string")}if(isDagJWS(t)||isDagJWE(t))return t;throw new Error("Not a valid unencoded JOSE object")}function encode$2(t){typeof t=="string"&&(t=toGeneral(t));let e;if(isDagJWS(t))e=encode$4(t);else if(isDagJWE(t))e=encode$3(t);else throw new Error("Not a valid JOSE object");return new Uint8Array(encode$n(e))}function decode$4(t){let e;try{e=decode$n(t)}catch{throw new Error("Not a valid DAG-JOSE object")}if(isEncodedJWS(e))return decode$6(e);if(isEncodedJWE(e))return decode$5(e);throw new Error("Not a valid DAG-JOSE object")}const dagJOSE=Object.freeze(Object.defineProperty({__proto__:null,name,code:code$1,toGeneral,encode:encode$2,decode:decode$4},Symbol.toStringTag,{value:"Module"})),LOAD_CODEC=t=>Promise.reject(new Error(`No codec found for "${t}"`));class Multicodecs{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||LOAD_CODEC;for(const r of e.codecs)this.addCodec(r)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){const r=typeof e=="string"?this._codecsByName:this._codecsByCode;if(r[e])return r[e];const n=await this._loadCodec(e);return r[e]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const LOAD_HASHER=t=>Promise.reject(new Error(`No hasher found for "${t}"`));class Multihashes{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||LOAD_HASHER;for(const r of e.hashers)this.addHasher(r)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){const r=typeof e=="string"?this._hashersByName:this._hashersByCode;if(r[e])return r[e];const n=await this._loadHasher(e);return r[e]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}async function*makeIterable(t){let e=0;for(;e<t.length;)yield t[e++]}function base(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var s=t.charAt(o),u=s.charCodeAt(0);if(r[u]!==255)throw new TypeError(s+" is ambiguous");r[u]=o}var c=t.length,h=t.charAt(0),w=Math.log(c)/Math.log(256),m=Math.log(256)/Math.log(c);function v($){if($ instanceof Uint8Array||(ArrayBuffer.isView($)?$=new Uint8Array($.buffer,$.byteOffset,$.byteLength):Array.isArray($)&&($=Uint8Array.from($))),!($ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if($.length===0)return"";for(var k=0,B=0,j=0,ie=$.length;j!==ie&&$[j]===0;)j++,k++;for(var se=(ie-j)*m+1>>>0,N=new Uint8Array(se);j!==ie;){for(var L=$[j],oe=0,q=se-1;(L!==0||oe<B)&&q!==-1;q--,oe++)L+=256*N[q]>>>0,N[q]=L%c>>>0,L=L/c>>>0;if(L!==0)throw new Error("Non-zero carry");B=oe,j++}for(var X=se-B;X!==se&&N[X]===0;)X++;for(var de=h.repeat(k);X<se;++X)de+=t.charAt(N[X]);return de}function E($){if(typeof $!="string")throw new TypeError("Expected String");if($.length===0)return new Uint8Array;var k=0;if($[k]!==" "){for(var B=0,j=0;$[k]===h;)B++,k++;for(var ie=($.length-k)*w+1>>>0,se=new Uint8Array(ie);$[k];){var N=r[$.charCodeAt(k)];if(N===255)return;for(var L=0,oe=ie-1;(N!==0||L<j)&&oe!==-1;oe--,L++)N+=c*se[oe]>>>0,se[oe]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");j=L,k++}if($[k]!==" "){for(var q=ie-j;q!==ie&&se[q]===0;)q++;for(var X=new Uint8Array(B+(ie-q)),de=B;q!==ie;)X[de++]=se[q++];return X}}}function O($){var k=E($);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:v,decodeUnsafe:E,decode:O}}var src=base,_brrp__multiformats_scope_baseX=src;const equals$1=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},coerce=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};class Encoder{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or(this,e)}}class ComposedDecoder{constructor(e){this.decoders=e}or(e){return or(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or=(t,e)=>new ComposedDecoder({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Codec{constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder(e,r,n),this.decoder=new Decoder(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from=({name:t,prefix:e,encode:r,decode:n})=>new Codec(t,e,r,n),baseX=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX(r,e);return from({prefix:t,name:e,encode:n,decode:s=>coerce(o(s))})},decode$3=(t,e,r,n)=>{const o={};for(let m=0;m<e.length;++m)o[e[m]]=m;let s=t.length;for(;t[s-1]==="=";)--s;const u=new Uint8Array(s*r/8|0);let c=0,h=0,w=0;for(let m=0;m<s;++m){const v=o[t[m]];if(v===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<r|v,c+=r,c>=8&&(c-=8,u[w++]=255&h>>c)}if(c>=r||255&h<<8-c)throw new SyntaxError("Unexpected end of data");return u},encode$1=(t,e,r)=>{const n=e[e.length-1]==="=",o=(1<<r)-1;let s="",u=0,c=0;for(let h=0;h<t.length;++h)for(c=c<<8|t[h],u+=8;u>r;)u-=r,s+=e[o&c>>u];if(u&&(s+=e[o&c<<r-u]),n)for(;s.length*r&7;)s+="=";return s},rfc4648=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>from({prefix:e,name:t,encode(o){return encode$1(o,n,r)},decode(o){return decode$3(o,n,r,t)}}),base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const code=85;var encode_1=encode,MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31);function encode(t,e,r){e=e||[],r=r||0;for(var n=r;t>=INT;)e[r++]=t&255|MSB,t/=128;for(;t&MSBALL;)e[r++]=t&255|MSB,t>>>=7;return e[r]=t|0,encode.bytes=r-n+1,e}var decode$2=read,MSB$1=128,REST$1=127;function read(t,n){var r=0,n=n||0,o=0,s=n,u,c=t.length;do{if(s>=c)throw read.bytes=0,new RangeError("Could not decode varint");u=t[s++],r+=o<28?(u&REST$1)<<o:(u&REST$1)*Math.pow(2,o),o+=7}while(u>=MSB$1);return read.bytes=s-n,r}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(t){return t<N1?1:t<N2?2:t<N3?3:t<N4?4:t<N5?5:t<N6?6:t<N7?7:t<N8?8:t<N9?9:10},varint={encode:encode_1,decode:decode$2,encodingLength:length},_brrp_varint=varint;const decode$1=(t,e=0)=>[_brrp_varint.decode(t,e),_brrp_varint.decode.bytes],encodeTo=(t,e,r=0)=>(_brrp_varint.encode(t,e,r),e),encodingLength=t=>_brrp_varint.encodingLength(t),create=(t,e)=>{const r=e.byteLength,n=encodingLength(t),o=n+encodingLength(r),s=new Uint8Array(o+r);return encodeTo(t,s,0),encodeTo(r,s,n),s.set(e,o),new Digest(t,r,e,s)},decode=t=>{const e=coerce(t),[r,n]=decode$1(e),[o,s]=decode$1(e.subarray(n)),u=e.subarray(n+s);if(u.byteLength!==o)throw new Error("Incorrect length");return new Digest(r,o,u,e)},equals=(t,e)=>{if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&equals$1(t.bytes,r.bytes)}};class Digest{constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}}const base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const format=(t,e)=>{const{bytes:r,version:n}=t;switch(n){case 0:return toStringV0(r,baseCache(t),e||base58btc.encoder);default:return toStringV1(r,baseCache(t),e||base32.encoder)}},cache=new WeakMap,baseCache=t=>{const e=cache.get(t);if(e==null){const r=new Map;return cache.set(t,r),r}return e};class CID{constructor(e,r,n,o){this.code=r,this.version=e,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=create(e,r);return CID.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return CID.equals(this,e)}static equals(e,r){const n=r;return n&&e.code===n.code&&e.version===n.version&&equals(e.multihash,n.multihash)}toString(e){return format(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof CID)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:o,multihash:s,bytes:u}=r;return new CID(n,o,s,u||encodeCID(n,o,s.bytes))}else if(r[cidSymbol]===!0){const{version:n,multihash:o,code:s}=r,u=decode(o);return CID.create(n,s,u)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(e,r,n,n.bytes)}case 1:{const o=encodeCID(e,r,n.bytes);return new CID(e,r,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID.create(0,DAG_PB_CODE,e)}static createV1(e,r){return CID.create(1,e,r)}static decode(e){const[r,n]=CID.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=CID.inspectBytes(e),n=r.size-r.multihashSize,o=coerce(e.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");const s=o.subarray(r.multihashSize-r.digestSize),u=new Digest(r.multihashCode,r.digestSize,s,o);return[r.version===0?CID.createV0(u):CID.createV1(r.codec,u),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[v,E]=decode$1(e.subarray(r));return r+=E,v};let o=n(),s=DAG_PB_CODE;if(o===18?(o=0,r=0):s=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const u=r,c=n(),h=n(),w=r+h,m=w-u;return{version:o,codec:s,multihashCode:c,digestSize:h,multihashSize:m,size:w}}static parse(e,r){const[n,o]=parseCIDtoBytes(e,r),s=CID.decode(o);return baseCache(s).set(n,e),s}}const parseCIDtoBytes=(t,e)=>{switch(t[0]){case"Q":{const r=e||base58btc;return[base58btc.prefix,r.decode(`${base58btc.prefix}${t}`)]}case base58btc.prefix:{const r=e||base58btc;return[base58btc.prefix,r.decode(t)]}case base32.prefix:{const r=e||base32;return[base32.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},toStringV0=(t,e,r)=>{const{prefix:n}=r;if(n!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const o=e.get(n);if(o==null){const s=r.encode(t).slice(1);return e.set(n,s),s}else return o},toStringV1=(t,e,r)=>{const{prefix:n}=r,o=e.get(n);if(o==null){const s=r.encode(t);return e.set(n,s),s}else return o},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(t,e,r)=>{const n=encodingLength(t),o=n+encodingLength(e),s=new Uint8Array(o+r.byteLength);return encodeTo(t,s,0),encodeTo(e,s,n),s.set(r,o),s},cidSymbol=Symbol.for("@ipld/js-cid/CID");function notFoundError(t){return t=t||new Error("Not Found"),errCode(t,"ERR_NOT_FOUND")}class MemoryBlockstore extends BaseBlockstore{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,r){this.data[base32.encode(e.multihash.bytes)]=r}async get(e){if(!await this.has(e))throw notFoundError();return this.data[base32.encode(e.multihash.bytes)]}async has(e){return this.data[base32.encode(e.multihash.bytes)]!==void 0}async delete(e){delete this.data[base32.encode(e.multihash.bytes)]}async*_all(){yield*Object.entries(this.data).map(([e,r])=>({key:CID.createV1(code,decode(base32.decode(e))),value:r}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>CID.createV1(code,decode(base32.decode(e))))}}class DagRepo extends Ac{constructor({repo:e,codecs:r,options:n}){const o=Object.values(hashes);(n.ipld&&n.ipld.hashers?n.ipld.hashers:[]).forEach(u=>o.push(u));const s=new Multihashes({hashers:o,loadHasher:n.ipld&&n.ipld.loadHasher});super({repo:e,codecs:r,hashers:s,preload:u=>{}}),Object.assign(this,mitt()),this.repo=e,this.rootCID,this.tx={pending:Transaction.create(),checkSize:async u=>{const c=Transaction.create();return await c.add(u),c.size},getExistingTx:async()=>{let u={};try{let c=this.tx.pending.last;if(!c)return;u=(await this.tx.pending.get(c)).value}catch{return u}return u},addData:async u=>await this.tx.pending.add(u),addTag:async(u,c)=>await this.tx.add(u,c),add:async(u,c)=>{if(!c)return;c=Object.fromEntries(Object.entries(c).map(([$,k])=>k===void 0?[$,null]:[$,k]));let h=!1,w=await this.tx.getExistingTx()||null;if(w&&w[u])h=w[u]?w[u]:!1;else if(this.rootCID)try{let $=(await this.get(this.rootCID)).value;h=$[u]?$[u]:!1}catch{}let m=await this.tx.pending.add(c),v=w&&Object.keys(w).length!==0?Object.fromEntries(Object.entries(w).filter(([$,k])=>k.hasOwnProperty("obj")&&k.hasOwnProperty("prev"))):null,E=v&&Object.keys(v).length!==0?Object.assign({},v,{[u]:{obj:m,prev:h}}):{[u]:{obj:m,prev:h}},O=await this.tx.pending.add(E);return this.emit("added",O),O},commit:async()=>{let u=await this.tx.getExistingTx(),c={};try{this.rootCID&&(c=(await this.get(this.rootCID)).value);let w=Object.assign({},c,Object.fromEntries(Object.entries(u).filter(([m,v])=>v.hasOwnProperty("obj")&&v.hasOwnProperty("prev"))));this.rootCID=await this.tx.pending.add(w)}catch(w){this.rootCID&&console.log("thats odd",{error:w})}const h=await this.tx.pending.commit();return await this.importBuffer(h),this.tx.pending=Transaction.create(),h}}}async latest(e){return(await this.get(this.rootCID,{path:`/${e}/obj`})).value}async importBuffers(e){let r;for(const n of e)r=await this.importBuffer(n);return r}async importBuffer(e){return importBuffer(this,e)}}async function importBuffer(t,e){const r=await makeIterable([e]),[{root:n}]=await itAll(t.import(r));return n.cid}async function createDagRepo(t={}){const e={name:identity$4.name,code:identity$4.code,encode:h=>h,decode:h=>h},r=Object.values(codecs);[dagCBOR,dagJSON,dagJOSE,e].concat(t.ipld&&t.ipld.codecs||[]).forEach(h=>r.push(h));const n=new Multicodecs({codecs:r,loadCodec:t.ipld&&t.ipld.loadCodec}),o=t.path||"ipfs";let s;t!=null&&t.persist?s=createRepo(console.log,n,{path:o,autoMigrate:!0}):s=createRepo$1(o,h=>n.getCodec(h),{blocks:new MemoryBlockstore,datastore:new MemoryDatastore,root:new MemoryDatastore,keys:new MemoryDatastore,pins:new MemoryDatastore},t);const u={};try{await s.init(u),await s.open()}catch(h){throw h}const c=await s.config.getAll();return new DagRepo({repo:s,codecs:n,options:{...t,repoConfig:c}})}const backupEndpoint="https://arweave-search.goldsky.com/graphql";async function getOwnerArDag({arweave:t,searchTags:e,dagOwner:r}){const{host:n,port:o,protocol:s}=t.api.config,u=`${s}://${n}:${o}/graphql`;setEndpointUrl(u);const c=`query($cursor: String) {
    transactions(
    owners: ["${r}"]
    tags: [{ name: "App-Name", values: ["ArDag"] }]
    after: $cursor
    first: 100
  ) {
    pageInfo {
      hasNextPage
    }
    edges {
      cursor
      node {
        id
      }
    }
  }
}`;try{return(await all$2(c)).map(w=>w.node)}catch(h){console.log("ArGQL failed",h),setEndpointUrl(backupEndpoint)}try{return(await all$2(c)).map(w=>w.node)}catch(h){console.log("ArGQL failed, both gateways down",h)}}const AR_DAG="ArDag";async function persist({buffer:t=null,arweave:e=null,wallet:r=null,tags:n=[]}){if(!t)throw new Error("buffer is required");if(!e){if(!this.arweave)throw new Error("Arweave is required");e=this.arweave}r||this.wallet&&(r=this.wallet);const{root:o}=await Transaction.load(t),{cid:s}=await encode$k(t);let u=await e.createTransaction({data:t});if(n.push({name:"App-Name",value:[AR_DAG]}),n.push({name:"Root-CID",value:[o.toString()]}),n.push({name:"CAR-CID",value:[s.toString()]}),n&&n.length)for(const c of n)u.addTag(c.name.toString(),c.value.toString());return await e.transactions.sign(u,r),await this.post(u),o}async function load({dagOwner:t,dag:e,arweave:r=null}){if(!t)throw new Error("dagOwner is required");if(!e){if(!this.dag)throw new Error("DagRepo is required");e=this.dag}if(!r){if(!this.arweave)throw new Error("Arweave is required");r=this.arweave}const n=[{name:"App-Name",values:[AR_DAG]}];let o=null;try{o=await getOwnerArDag({arweave:r,searchTags:n,dagOwner:t})}catch(c){console.log("ArDag get failed",c)}let s;const u=async(c,h)=>{try{const w=await getData({arweave:r,txid:h.id}),m=await importBuffer(c,w);s||(s=m),c.hasOwnProperty("rootCID")&&!(c!=null&&c.rootCID)&&(c.rootCID=m)}catch(w){console.log("Import failed",w)}};for(const c of o)await u(e,c);return s}async function get({dagOwner:t,tag:e=null,arweave:r=null,cid:n=null}){if(!t)throw new Error("dagOwner is required");r||(this.arweave?r=this.arweave:r=require("arweave").default.init({host:"arweave.net",port:443,protocol:"https",timeout:2e4,logging:!1}));const o=[{name:"App-Name",values:[AR_DAG]}];let s=null;try{s=await getOwnerArDag({arweave:r,searchTags:o,dagOwner:t})}catch(h){console.log("ArDag get failed",h)}if(!s)return null;let u,c=n;for(;!u&&s.length;){let h,w=s.shift().id;try{h=await getData({arweave:r,txid:w})}catch(O){if(console.log("get Data txid failed",{txid:w},O),!h)continue}const{root:m,get:v}=await Transaction.load(h),E=await v(m);if(!e&&!n)return E;e&&E.hasOwnProperty(e)&&!c&&(c=E[e].obj);try{u=await v(c)}catch{}}return u}async function latest(t){return(await this.dag.get(this.rootCID,{path:`/${t}/obj`})).value}async function getInstance({dag:t,wallet:e=null,dagOwner:r=!1}){if(!t)throw new Error("Supply a DagRepo from https://github.com/DougAnderson444/ipld-car-txs");return r?this.rootCID=await this.load({dag:t,dagOwner:r}):r=await this.arweave.wallets.jwkToAddress(e),{arweave:this.arweave,post:this.post,dagOwner:r,wallet:e,dag:t,load,rootCID:this.rootCID||null,latest,persist,async save(n,o,{tags:s}={tags:[]}){const u=await this.dag.tx.add(n,o);this.rootCID=u;const c=await this.dag.tx.commit();return await this.persist({buffer:c,tags:s}),u}}}function initializeArDag({arweave:t,post:e=null}){if(!t)throw new Error("Arweave instance must be provided");const n=t.transactions.post.bind(t.transactions);return{arweave:t,post:e||n,getData,getInstance,persist,get,load}}async function getData({arweave:t=null,txid:e}){if(!e)throw new Error("txid is required");if(!t){if(!this.arweave)throw new Error("Arweave is required");t=this.arweave}try{let r=await t.api.get(`/${e}`,{responseType:"arraybuffer"});if(r.status>=200&&r.status<300)return new Uint8Array(r.data)}catch(r){console.log("get Data failed",{txid:e},r)}}var sha256={},binary={},int={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(c,h){var w=c>>>16&65535,m=c&65535,v=h>>>16&65535,E=h&65535;return m*E+(w*E+m*v<<16>>>0)|0}t.mul=Math.imul||e;function r(c,h){return c+h|0}t.add=r;function n(c,h){return c-h|0}t.sub=n;function o(c,h){return c<<h|c>>>32-h}t.rotl=o;function s(c,h){return c<<32-h|c>>>h}t.rotr=s;function u(c){return typeof c=="number"&&isFinite(c)&&Math.floor(c)===c}t.isInteger=Number.isInteger||u,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(c){return t.isInteger(c)&&c>=-t.MAX_SAFE_INTEGER&&c<=t.MAX_SAFE_INTEGER}})(int);Object.defineProperty(binary,"__esModule",{value:!0});var int_1=int;function readInt16BE(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}binary.readInt16BE=readInt16BE;function readUint16BE(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}binary.readUint16BE=readUint16BE;function readInt16LE(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}binary.readInt16LE=readInt16LE;function readUint16LE(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}binary.readUint16LE=readUint16LE;function writeUint16BE(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}binary.writeUint16BE=writeUint16BE;binary.writeInt16BE=writeUint16BE;function writeUint16LE(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}binary.writeUint16LE=writeUint16LE;binary.writeInt16LE=writeUint16LE;function readInt32BE(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}binary.readInt32BE=readInt32BE;function readUint32BE(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}binary.readUint32BE=readUint32BE;function readInt32LE(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}binary.readInt32LE=readInt32LE;function readUint32LE(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}binary.readUint32LE=readUint32LE;function writeUint32BE(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}binary.writeUint32BE=writeUint32BE;binary.writeInt32BE=writeUint32BE;function writeUint32LE(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}binary.writeUint32LE=writeUint32LE;binary.writeInt32LE=writeUint32LE;function readInt64BE(t,e){e===void 0&&(e=0);var r=readInt32BE(t,e),n=readInt32BE(t,e+4);return r*4294967296+n-(n>>31)*4294967296}binary.readInt64BE=readInt64BE;function readUint64BE(t,e){e===void 0&&(e=0);var r=readUint32BE(t,e),n=readUint32BE(t,e+4);return r*4294967296+n}binary.readUint64BE=readUint64BE;function readInt64LE(t,e){e===void 0&&(e=0);var r=readInt32LE(t,e),n=readInt32LE(t,e+4);return n*4294967296+r-(r>>31)*4294967296}binary.readInt64LE=readInt64LE;function readUint64LE(t,e){e===void 0&&(e=0);var r=readUint32LE(t,e),n=readUint32LE(t,e+4);return n*4294967296+r}binary.readUint64LE=readUint64LE;function writeUint64BE(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),writeUint32BE(t/4294967296>>>0,e,r),writeUint32BE(t>>>0,e,r+4),e}binary.writeUint64BE=writeUint64BE;binary.writeInt64BE=writeUint64BE;function writeUint64LE(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),writeUint32LE(t>>>0,e,r),writeUint32LE(t/4294967296>>>0,e,r+4),e}binary.writeUint64LE=writeUint64LE;binary.writeInt64LE=writeUint64LE;function readUintBE(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,o=1,s=t/8+r-1;s>=r;s--)n+=e[s]*o,o*=256;return n}binary.readUintBE=readUintBE;function readUintLE(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,o=1,s=r;s<r+t/8;s++)n+=e[s]*o,o*=256;return n}binary.readUintLE=readUintLE;function writeUintBE(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,s=t/8+n-1;s>=n;s--)r[s]=e/o&255,o*=256;return r}binary.writeUintBE=writeUintBE;function writeUintLE(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,s=n;s<n+t/8;s++)r[s]=e/o&255,o*=256;return r}binary.writeUintLE=writeUintLE;function readFloat32BE(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}binary.readFloat32BE=readFloat32BE;function readFloat32LE(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}binary.readFloat32LE=readFloat32LE;function readFloat64BE(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}binary.readFloat64BE=readFloat64BE;function readFloat64LE(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}binary.readFloat64LE=readFloat64LE;function writeFloat32BE(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}binary.writeFloat32BE=writeFloat32BE;function writeFloat32LE(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}binary.writeFloat32LE=writeFloat32LE;function writeFloat64BE(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}binary.writeFloat64BE=writeFloat64BE;function writeFloat64LE(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}binary.writeFloat64LE=writeFloat64LE;var wipe$1={};Object.defineProperty(wipe$1,"__esModule",{value:!0});function wipe(t){for(var e=0;e<t.length;e++)t[e]=0;return t}wipe$1.wipe=wipe;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=binary,r=wipe$1;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function c(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return c.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},c.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},c.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},c.prototype.update=function(h,w){if(w===void 0&&(w=h.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var m=0;if(this._bytesHashed+=w,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&w>0;)this._buffer[this._bufferLength++]=h[m++],w--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(w>=this.blockSize&&(m=s(this._temp,this._state,h,m,w),w%=this.blockSize);w>0;)this._buffer[this._bufferLength++]=h[m++],w--;return this},c.prototype.finish=function(h){if(!this._finished){var w=this._bytesHashed,m=this._bufferLength,v=w/536870912|0,E=w<<3,O=w%64<56?64:128;this._buffer[m]=128;for(var $=m+1;$<O-8;$++)this._buffer[$]=0;e.writeUint32BE(v,this._buffer,O-8),e.writeUint32BE(E,this._buffer,O-4),s(this._temp,this._state,this._buffer,0,O),this._finished=!0}for(var $=0;$<this.digestLength/4;$++)e.writeUint32BE(this._state[$],h,$*4);return this},c.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},c.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},c.prototype.restoreState=function(h){return this._state.set(h.state),this._bufferLength=h.bufferLength,h.buffer&&this._buffer.set(h.buffer),this._bytesHashed=h.bytesHashed,this._finished=!1,this},c.prototype.cleanSavedState=function(h){r.wipe(h.state),h.buffer&&r.wipe(h.buffer),h.bufferLength=0,h.bytesHashed=0},c}();t.SHA256=n;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(c,h,w,m,v){for(;v>=64;){for(var E=h[0],O=h[1],$=h[2],k=h[3],B=h[4],j=h[5],ie=h[6],se=h[7],N=0;N<16;N++){var L=m+N*4;c[N]=e.readUint32BE(w,L)}for(var N=16;N<64;N++){var oe=c[N-2],q=(oe>>>17|oe<<32-17)^(oe>>>19|oe<<32-19)^oe>>>10;oe=c[N-15];var X=(oe>>>7|oe<<32-7)^(oe>>>18|oe<<32-18)^oe>>>3;c[N]=(q+c[N-7]|0)+(X+c[N-16]|0)}for(var N=0;N<64;N++){var q=(((B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7))+(B&j^~B&ie)|0)+(se+(o[N]+c[N]|0)|0)|0,X=((E>>>2|E<<32-2)^(E>>>13|E<<32-13)^(E>>>22|E<<32-22))+(E&O^E&$^O&$)|0;se=ie,ie=j,j=B,B=k+q|0,k=$,$=O,O=E,E=q+X|0}h[0]+=E,h[1]+=O,h[2]+=$,h[3]+=k,h[4]+=B,h[5]+=j,h[6]+=ie,h[7]+=se,m+=64,v-=64}return m}function u(c){var h=new n;h.update(c);var w=h.digest();return h.clean(),w}t.hash=u})(sha256);function getArweaveAddress(t){const e=decodeURLSafe_1(t.n),r=sha256.hash(e);return encodeURLSafe_1(new Uint8Array(r)).replace("=","")}function isDID(t){const e=typeof t=="string"&&t.startsWith("did:ar");return console.log("isDID",e),e}function isAddress(t){return typeof t=="string"&&t.length===43}async function fromDid(t){const e=await init({inMemory:!0});return console.log("arnsInstance",e),await e.resolveDID(t)}const arweaveConfig={host:"arweave.net",port:443,protocol:"https",timeout:2e4,logging:!1};function create_if_block(t){let e,r,n,o;const s=[create_if_block_1,create_else_block],u=[];function c(h,w){var m,v;return(v=(m=h[1])==null?void 0:m.meta)!=null&&v.networkRequired?0:1}return e=c(t),r=u[e]=s[e](t),{c(){r.c(),n=empty$1()},l(h){r.l(h),n=empty$1()},m(h,w){u[e].m(h,w),insert_hydration(h,n,w),o=!0},p(h,w){let m=e;e=c(h),e===m?u[e].p(h,w):(group_outros(),transition_out(u[m],1,1,()=>{u[m]=null}),check_outros(),r=u[e],r?r.p(h,w):(r=u[e]=s[e](h),r.c()),transition_in(r,1),r.m(n.parentNode,n))},i(h){o||(transition_in(r),o=!0)},o(h){transition_out(r),o=!1},d(h){u[e].d(h),h&&detach(n)}}}function create_else_block(t){let e,r,n;var o=t[0];function s(u){return{props:{esModule:u[2],props:u[3]}}}return o&&(e=construct_svelte_component(o,s(t)),e.$on("change",t[12])),{c(){e&&create_component(e.$$.fragment),r=empty$1()},l(u){e&&claim_component(e.$$.fragment,u),r=empty$1()},m(u,c){e&&mount_component(e,u,c),insert_hydration(u,r,c),n=!0},p(u,c){const h={};if(c&4&&(h.esModule=u[2]),c&8&&(h.props=u[3]),o!==(o=u[0])){if(e){group_outros();const w=e;transition_out(w.$$.fragment,1,0,()=>{destroy_component(w,1)}),check_outros()}o?(e=construct_svelte_component(o,s(u)),e.$on("change",u[12]),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,r.parentNode,r)):e=null}else o&&e.$set(h)},i(u){n||(e&&transition_in(e.$$.fragment,u),n=!0)},o(u){e&&transition_out(e.$$.fragment,u),n=!1},d(u){u&&detach(r),e&&destroy_component(e,u)}}}function create_if_block_1(t){let e,r;return e=new Mount({props:{src:t[2],props:t[3]}}),e.$on("target",t[8]),e.$on("ready",t[9]),e.$on("mounted",t[10]),e.$on("change",t[11]),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,o){mount_component(e,n,o),r=!0},p(n,o){const s={};o&4&&(s.src=n[2]),o&8&&(s.props=n[3]),e.$set(s)},i(n){r||(transition_in(e.$$.fragment,n),r=!0)},o(n){transition_out(e.$$.fragment,n),r=!1},d(n){destroy_component(e,n)}}}function create_fragment$1(t){let e,r,n=t[0]&&(t[2]||t[3]&&t[2])&&create_if_block(t);return{c(){n&&n.c(),e=empty$1()},l(o){n&&n.l(o),e=empty$1()},m(o,s){n&&n.m(o,s),insert_hydration(o,e,s),r=!0},p(o,[s]){o[0]&&(o[2]||o[3]&&o[2])?n?(n.p(o,s),s&13&&transition_in(n,1)):(n=create_if_block(o),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(o){r||(transition_in(n),r=!0)},o(o){transition_out(n),r=!1},d(o){n&&n.d(o),o&&detach(e)}}}function instance$1(t,e,r){let{namespace:n}=e,{tag:o}=e,{arweave:s=null}=e,{arweaveConfig:u=arweaveConfig}=e,c,h,w,m,v,E;onMount(async()=>{const ie=new RegExp("^[a-zA-Z0-9_-]+$");if(!new RegExp("^.*(^[^/]+.ar|^[^/]+.arweave.dev|^[a-zA-Z0-9_-]{43}|^did:ar.*:[a-zA-Z0-9_-]{43})$").test(n)&&!ie.test(n))throw new Error(`Invalid namespace: ${n}. Must be a valid arweave address, name.ar, name.arweave.dev address, or did:ar address.`);if(r(0,{Gateway:w}=await __vitePreload(()=>import("./index-66b38260.js"),["./index-66b38260.js","./index-a6d898a6.js","./preload-helper-b21cceae.js","..\\assets\\index-e1bedd54.css"],import.meta.url),w),!c&&!globalThis.dag){const{createDagRepo:L}=await __vitePreload(()=>import("./index-160e96f3.js"),[],import.meta.url);c=await L({persist:!1}),globalThis.dag=c}else c=globalThis.dag;let N;if(isAddress(n))N=[n];else{let L;try{L=isDID(n)?await fromDid(n):await arnsResolver(n.replace(/\.ar$|\.arweave\.dev$/,""))}catch(q){console.log("Failed to resolve",n,q)}const oe=L.verificationMethod.filter(q=>q.publicKeyJwk.kty==="RSA");if(!oe.length)throw new Error("No RSA keys found in DID document");N=oe.map(q=>getArweaveAddress(q.publicKeyJwk))}r(4,s=s||Arweave.init(u)),h=initializeArDag({arweave:s});for(const L of N)try{const oe=await h.getInstance({dag:c,dagOwner:L});r(1,m=await oe.latest(o)),(m==null?void 0:m.dappowner)&&m.dappowner!==L&&await h.load({dagOwner:m.dappowner,dag:c}),r(2,v=await q("compiled")),r(3,E=await q("data"));async function q(X){var _e,xe;if(!m[X])return null;let de;try{de=(xe=(_e=await c.get(m[X]))==null?void 0:_e.value)==null?void 0:xe.value}catch{console.log("No props given. Set as null."),de=null}return de}break}catch(oe){console.log(`No ArDag on address ${L}`,oe)}});function O(ie){bubble.call(this,t,ie)}function $(ie){bubble.call(this,t,ie)}function k(ie){bubble.call(this,t,ie)}function B(ie){bubble.call(this,t,ie)}function j(ie){bubble.call(this,t,ie)}return t.$$set=ie=>{"namespace"in ie&&r(5,n=ie.namespace),"tag"in ie&&r(6,o=ie.tag),"arweave"in ie&&r(4,s=ie.arweave),"arweaveConfig"in ie&&r(7,u=ie.arweaveConfig)},[w,m,v,E,s,n,o,u,O,$,k,B,j]}class NameTag extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$1,create_fragment$1,safe_not_equal,{namespace:5,tag:6,arweave:4,arweaveConfig:7})}}function create_default_slot(t){let e,r;return e=new NameTag({props:{namespace:t[0],tag:t[1]}}),e.$on("target",t[2]),e.$on("change",t[3]),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,o){mount_component(e,n,o),r=!0},p(n,o){const s={};o&1&&(s.namespace=n[0]),o&2&&(s.tag=n[1]),e.$set(s)},i(n){r||(transition_in(e.$$.fragment,n),r=!0)},o(n){transition_out(e.$$.fragment,n),r=!1},d(n){destroy_component(e,n)}}}function create_fragment(t){let e,r;return e=new MenuWrapper({props:{namespace:t[0],tag:t[1],$$slots:{default:[create_default_slot,({handleTarget:n})=>({4:n}),({handleTarget:n})=>n?16:0]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,o){mount_component(e,n,o),r=!0},p(n,[o]){const s={};o&1&&(s.namespace=n[0]),o&2&&(s.tag=n[1]),o&35&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){r||(transition_in(e.$$.fragment,n),r=!0)},o(n){transition_out(e.$$.fragment,n),r=!1},d(n){destroy_component(e,n)}}}function instance(t,e,r){let{namespace:n="douganderson444"}=e,{tag:o="PeerPiper-Web3-Wallet-Connector"}=e;function s(c){bubble.call(this,t,c)}function u(c){bubble.call(this,t,c)}return t.$$set=c=>{"namespace"in c&&r(0,n=c.namespace),"tag"in c&&r(1,o=c.tag)},[n,o,s,u]}class Page extends SvelteComponent{constructor(e){super(),init$1(this,e,instance,create_fragment,safe_not_equal,{namespace:0,tag:1})}}export{DagRepo as D,Page as P,Transaction as T,commonjsGlobal as a,base64Js as b,createDagRepo as c,bignumber as d,encode$k as e,axios$3 as f,getAugmentedNamespace as g,buffer as h,importBuffer as i,requireInherits_browser as j,abstractLevel$1 as k,browser as l,moduleError as m,getDefaultExportFromCjs as n,requireUtil as r,web as w};
//# sourceMappingURL=_page-fa90ff05.js.map
